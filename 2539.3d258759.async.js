!(function(){var DS=Object.defineProperty,LS=Object.defineProperties;var PS=Object.getOwnPropertyDescriptors;var Ch=Object.getOwnPropertySymbols;var B0=Object.prototype.hasOwnProperty,F0=Object.prototype.propertyIsEnumerable;var Ov=Math.pow,k0=(Ve,z,C)=>z in Ve?DS(Ve,z,{enumerable:!0,configurable:!0,writable:!0,value:C}):Ve[z]=C,Da=(Ve,z)=>{for(var C in z||(z={}))B0.call(z,C)&&k0(Ve,C,z[C]);if(Ch)for(var C of Ch(z))F0.call(z,C)&&k0(Ve,C,z[C]);return Ve},mo=(Ve,z)=>LS(Ve,PS(z));var Th=(Ve,z)=>{var C={};for(var x in Ve)B0.call(Ve,x)&&z.indexOf(x)<0&&(C[x]=Ve[x]);if(Ve!=null&&Ch)for(var x of Ch(Ve))z.indexOf(x)<0&&F0.call(Ve,x)&&(C[x]=Ve[x]);return C};var z0=(Ve,z,C)=>new Promise((x,k)=>{var w=P=>{try{L(C.next(P))}catch(p){k(p)}},T=P=>{try{L(C.throw(P))}catch(p){k(p)}},L=P=>P.done?x(P.value):Promise.resolve(P.value).then(w,T);L((C=C.apply(Ve,z)).next())});(self.webpackChunkantd=self.webpackChunkantd||[]).push([[2539],{62238:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(w,T){var L=w.nodes,P=w.edges,p=[],m={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(S,y){m[S.id]=y;var g=[];p.push(g)}),P&&P.forEach(function(S){var y=S.source,g=S.target,A=m[y],E=m[g];!A&&A!==0||!E&&E!==0||(p[A][E]=1,T||(p[E][A]=1))}),p},x=C;z.default=x},810369:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDIAsync",{enumerable:!0,get:function(){return x.GADDIAsync}}),Object.defineProperty(z,"connectedComponentAsync",{enumerable:!0,get:function(){return x.connectedComponentAsync}}),z.default=void 0,Object.defineProperty(z,"detectAllCyclesAsync",{enumerable:!0,get:function(){return x.detectAllCyclesAsync}}),Object.defineProperty(z,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllDirectedCycleAsync}}),Object.defineProperty(z,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllUndirectedCycleAsync}}),Object.defineProperty(z,"detectCycleAsync",{enumerable:!0,get:function(){return x.detectCycleAsync}}),z.detectDirectedCycleAsync=void 0,Object.defineProperty(z,"dijkstraAsync",{enumerable:!0,get:function(){return x.dijkstraAsync}}),Object.defineProperty(z,"findAllPathAsync",{enumerable:!0,get:function(){return x.findAllPathAsync}}),Object.defineProperty(z,"findShortestPathAsync",{enumerable:!0,get:function(){return x.findShortestPathAsync}}),Object.defineProperty(z,"floydWarshallAsync",{enumerable:!0,get:function(){return x.floydWarshallAsync}}),Object.defineProperty(z,"getAdjMatrixAsync",{enumerable:!0,get:function(){return x.getAdjMatrixAsync}}),Object.defineProperty(z,"getDegreeAsync",{enumerable:!0,get:function(){return x.getDegreeAsync}}),Object.defineProperty(z,"getInDegreeAsync",{enumerable:!0,get:function(){return x.getInDegreeAsync}}),Object.defineProperty(z,"getNeighborsAsync",{enumerable:!0,get:function(){return x.getNeighborsAsync}}),Object.defineProperty(z,"getOutDegreeAsync",{enumerable:!0,get:function(){return x.getOutDegreeAsync}}),Object.defineProperty(z,"labelPropagationAsync",{enumerable:!0,get:function(){return x.labelPropagationAsync}}),Object.defineProperty(z,"louvainAsync",{enumerable:!0,get:function(){return x.louvainAsync}}),Object.defineProperty(z,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return x.minimumSpanningTreeAsync}}),Object.defineProperty(z,"pageRankAsync",{enumerable:!0,get:function(){return x.pageRankAsync}});var x=C(430485),k=x.detectCycleAsync;z.detectDirectedCycleAsync=k;var w={getAdjMatrixAsync:x.getAdjMatrixAsync,connectedComponentAsync:x.connectedComponentAsync,getDegreeAsync:x.getDegreeAsync,getInDegreeAsync:x.getInDegreeAsync,getOutDegreeAsync:x.getOutDegreeAsync,detectCycleAsync:x.detectCycleAsync,detectDirectedCycleAsync:k,detectAllCyclesAsync:x.detectAllCyclesAsync,detectAllDirectedCycleAsync:x.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:x.detectAllUndirectedCycleAsync,dijkstraAsync:x.dijkstraAsync,findAllPathAsync:x.findAllPathAsync,findShortestPathAsync:x.findShortestPathAsync,floydWarshallAsync:x.floydWarshallAsync,labelPropagationAsync:x.labelPropagationAsync,louvainAsync:x.louvainAsync,minimumSpanningTreeAsync:x.minimumSpanningTreeAsync,pageRankAsync:x.pageRankAsync,getNeighborsAsync:x.getNeighborsAsync,GADDIAsync:x.GADDIAsync};z.default=w},683764:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(893026)),k=C(770643);function w(p){return p&&p.__esModule?p:{default:p}}function T(p){p===void 0&&(p={});var m=p,S=function(){},y=function(){var g={};return function(A){var E=A.next,D=E;return g[D]?!1:(g[D]=!0,!0)}}();return m.allowTraversal=p.allowTraversal||y,m.enter=p.enter||S,m.leave=p.leave||S,m}var L=function(m,S,y,g){g===void 0&&(g=!0);var A=T(y),E=new x.default,D=m.edges,F=D===void 0?[]:D;E.enqueue(S);for(var Y="",b=function(){var $=E.dequeue();A.enter({current:$,previous:Y}),(0,k.getNeighbors)($,F,g?"target":void 0).forEach(function(U){A.allowTraversal({previous:Y,current:$,next:U})&&E.enqueue(U)}),A.leave({current:$,previous:Y}),Y=$};!E.isEmpty();)b()},P=L;z.default=P},759527:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T,z.detectStrongConnectComponents=z.detectConnectedComponents=void 0;var x=C(770643),k=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,y=S===void 0?[]:S,g=[],A={},E=[],D=function h($){E.push($),A[$.id]=!0;for(var U=(0,x.getNeighbors)($.id,y),W=function(q){var tt=U[q];if(!A[tt]){var rt=m.filter(function(ft){return ft.id===tt});rt.length>0&&h(rt[0])}},V=0;V<U.length;++V)W(V)},F=0;F<m.length;F++){var Y=m[F];if(!A[Y.id]){D(Y);for(var b=[];E.length>0;)b.push(E.pop());g.push(b)}}return g};z.detectConnectedComponents=k;var w=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,y=S===void 0?[]:S,g=[],A={},E={},D={},F=[],Y=0,b=function W(V){E[V.id]=Y,D[V.id]=Y,Y+=1,g.push(V),A[V.id]=!0;for(var H=(0,x.getNeighbors)(V.id,y,"target").filter(function(it){return m.map(function(bt){return bt.id}).indexOf(it)>-1}),q=function(bt){var gt=H[bt];if(!E[gt]&&E[gt]!==0){var Xt=m.filter(function(Ct){return Ct.id===gt});Xt.length>0&&W(Xt[0]),D[V.id]=Math.min(D[V.id],D[gt])}else A[gt]&&(D[V.id]=Math.min(D[V.id],E[gt]))},tt=0;tt<H.length;tt++)q(tt);if(D[V.id]===E[V.id]){for(var rt=[];g.length>0;){var ft=g.pop();if(A[ft.id]=!1,rt.push(ft),ft===V)break}rt.length>0&&F.push(rt)}},h=0,$=m;h<$.length;h++){var U=$[h];!E[U.id]&&E[U.id]!==0&&b(U)}return F};z.detectStrongConnectComponents=w;function T(L,P){return P?w(L):k(L)}},592935:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.secondReg=z.dateReg=void 0;var C=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;z.secondReg=C;var x=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;z.dateReg=x},182556:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getOutDegree=z.getInDegree=z.default=void 0;var C=function(L){var P={},p=L.nodes,m=p===void 0?[]:p,S=L.edges,y=S===void 0?[]:S;return m.forEach(function(g){P[g.id]={degree:0,inDegree:0,outDegree:0}}),y.forEach(function(g){P[g.source].degree++,P[g.source].outDegree++,P[g.target].degree++,P[g.target].inDegree++}),P},x=C;z.default=x;var k=function(L,P){var p=C(L);return p[P]?C(L)[P].inDegree:0};z.getInDegree=k;var w=function(L,P){var p=C(L);return p[P]?C(L)[P].outDegree:0};z.getOutDegree=w},994282:function(Ve,z,C){"use strict";function x(E){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},x(E)}Object.defineProperty(z,"__esModule",{value:!0}),z.detectAllUndirectedCycle=z.detectAllDirectedCycle=z.detectAllCycles=z.default=void 0;var k=p(C(45891)),w=P(C(759527)),T=C(770643);function L(E){if(typeof WeakMap!="function")return null;var D=new WeakMap,F=new WeakMap;return(L=function(b){return b?F:D})(E)}function P(E,D){if(!D&&E&&E.__esModule)return E;if(E===null||x(E)!=="object"&&typeof E!="function")return{default:E};var F=L(D);if(F&&F.has(E))return F.get(E);var Y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in E)if(h!=="default"&&Object.prototype.hasOwnProperty.call(E,h)){var $=b?Object.getOwnPropertyDescriptor(E,h):null;$&&($.get||$.set)?Object.defineProperty(Y,h,$):Y[h]=E[h]}return Y.default=E,F&&F.set(E,Y),Y}function p(E){return E&&E.__esModule?E:{default:E}}var m=function(D){var F=null,Y=D.nodes,b=Y===void 0?[]:Y,h={},$={},U={},W={};b.forEach(function(q){$[q.id]=q});for(var V={enter:function(tt){var rt=tt.current,ft=tt.previous;if(U[rt]){F={};for(var it=rt,bt=ft;bt!==rt;)F[it]=bt,it=bt,bt=h[bt];F[it]=bt}else U[rt]=rt,delete $[rt],h[rt]=ft},leave:function(tt){var rt=tt.current;W[rt]=rt,delete U[rt]},allowTraversal:function(tt){var rt=tt.next;return F?!1:!W[rt]}};Object.keys($).length;){var H=Object.keys($)[0];(0,k.default)(D,H,V)}return F},S=function(D,F,Y){var b,h;Y===void 0&&(Y=!0);for(var $=[],U=(0,w.default)(D,!1),W=0,V=U;W<V.length;W++){var H=V[W];if(H.length)for(var q=H[0],tt=q.id,rt=[q],ft=(b={},b[tt]=q,b),it=(h={},h[tt]=new Set,h);rt.length>0;)for(var bt=rt.pop(),gt=bt.id,Xt=(0,T.getNeighbors)(gt,D.edges),Ct=function(J){var yt,_t=Xt[J],nt=D.nodes.find(function(Qt){return Qt.id===_t});if(_t===gt)$.push((yt={},yt[_t]=bt,yt));else if(!(_t in it))ft[_t]=bt,rt.push(nt),it[_t]=new Set([bt]);else if(!it[gt].has(nt)){for(var vt=!0,It=[nt,bt],Pt=ft[gt];it[_t].size&&!it[_t].has(Pt)&&(It.push(Pt),Pt!==ft[Pt.id]);)Pt=ft[Pt.id];if(It.push(Pt),F&&Y?(vt=!1,It.findIndex(function(Qt){return F.indexOf(Qt.id)>-1})>-1&&(vt=!0)):F&&!Y&&It.findIndex(function(Qt){return F.indexOf(Qt.id)>-1})>-1&&(vt=!1),vt){for(var St={},Dt=1;Dt<It.length;Dt+=1)St[It[Dt-1].id]=It[Dt];It.length&&(St[It[It.length-1].id]=It[0]),$.push(St)}it[_t].add(bt)}},At=0;At<Xt.length;At+=1)Ct(At)}return $};z.detectAllUndirectedCycle=S;var y=function(D,F,Y){Y===void 0&&(Y=!0);for(var b=[],h=new Set,$=[],U=[],W={},V={},H=function(Pt){for(var St=[Pt];St.length>0;){var Dt=St.pop();h.has(Dt)&&(h.delete(Dt),$[Dt.id].forEach(function(Qt){St.push(Qt)}),$[Dt.id].clear())}},q=function It(Pt,St,Dt){var Qt=!1;if(F&&Y===!1&&F.indexOf(Pt.id)>-1)return Qt;b.push(Pt),h.add(Pt);for(var ue=Dt[Pt.id],ie=0;ie<ue.length;ie+=1){var Lt=W[ue[ie]];if(Lt===St){for(var ne={},ve=1;ve<b.length;ve+=1)ne[b[ve-1].id]=b[ve];b.length&&(ne[b[b.length-1].id]=b[0]),U.push(ne),Qt=!0}else h.has(Lt)||It(Lt,St,Dt)&&(Qt=!0)}if(Qt)H(Pt);else for(var ie=0;ie<ue.length;ie+=1){var Lt=W[ue[ie]];$[Lt.id].has(Pt)||$[Lt.id].add(Pt)}return b.pop(),Qt},tt=D.nodes,rt=tt===void 0?[]:tt,ft=0;ft<rt.length;ft+=1){var it=rt[ft],bt=it.id;V[bt]=ft,W[ft]=it}if(F&&Y)for(var gt=function(Pt){var St=F[Pt];V[rt[Pt].id]=V[St],V[St]=0,W[0]=rt.find(function(Dt){return Dt.id===St}),W[V[rt[Pt].id]]=rt[Pt]},ft=0;ft<F.length;ft++)gt(ft);for(var Xt=function(Pt){for(var St,Dt,Qt=1/0,ue=0;ue<Pt.length;ue+=1)for(var ie=Pt[ue],Lt=0;Lt<ie.length;Lt++){var ne=V[ie[Lt].id];ne<Qt&&(Qt=ne,Dt=ue)}for(var ve=Pt[Dt],Wt=[],ue=0;ue<ve.length;ue+=1){var ae=ve[ue];Wt[ae.id]=[];for(var Ce=0,xe=(0,T.getNeighbors)(ae.id,D.edges,"target").filter(function(Tt){return ve.map(function(Pe){return Pe.id}).indexOf(Tt)>-1});Ce<xe.length;Ce++){var Jt=xe[Ce];Jt===ae.id&&!(Y===!1&&F.indexOf(ae.id)>-1)?U.push((St={},St[ae.id]=ae,St)):Wt[ae.id].push(V[Jt])}}return{component:ve,adjList:Wt,minIdx:Qt}},Ct=0;Ct<rt.length;){var At=rt.filter(function(It){return V[It.id]>=Ct}),Z=(0,w.detectStrongConnectComponents)({nodes:At,edges:D.edges}).filter(function(It){return It.length>1});if(Z.length===0)break;var J=Xt(Z),yt=J.minIdx,_t=J.adjList,nt=J.component;if(nt.length>1){nt.forEach(function(It){$[It.id]=new Set});var vt=W[yt];if(F&&Y&&F.indexOf(vt.id)===-1)return U;q(vt,vt,_t),Ct=yt+1}else break}return U};z.detectAllDirectedCycle=y;var g=function(D,F,Y,b){return b===void 0&&(b=!0),F?y(D,Y,b):S(D,Y,b)};z.detectAllCycles=g;var A=m;z.default=A},45891:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T;var x=C(770643);function k(L){L===void 0&&(L={});var P=L,p=function(){},m=function(){var S={};return function(y){var g=y.next;return S[g]?!1:(S[g]=!0,!0)}}();return P.allowTraversal=L.allowTraversal||m,P.enter=L.enter||p,P.leave=L.leave||p,P}function w(L,P,p,m){m.enter({current:P,previous:p});var S=L.edges,y=S===void 0?[]:S;(0,x.getNeighbors)(P,y,"target").forEach(function(g){m.allowTraversal({previous:p,current:P,next:g})&&w(L,g,P,m)}),m.leave({current:P,previous:p})}function T(L,P,p){w(L,P,"",k(p))}},878089:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(197582),k=C(413810),w=C(770643),T=function(S,y,g){for(var A=1/0,E,D=0;D<y.length;D++){var F=y[D].id;!g[F]&&S[F]<=A&&(A=S[F],E=y[D])}return E},L=function(S,y,g,A){var E=S.nodes,D=E===void 0?[]:E,F=S.edges,Y=F===void 0?[]:F,b=[],h={},$={},U={};D.forEach(function(ft,it){var bt=ft.id;b.push(bt),$[bt]=1/0,bt===y&&($[bt]=0)});for(var W=D.length,V=function(it){var bt=T($,D,h),gt=bt.id;if(h[gt]=!0,$[gt]===1/0)return"continue";var Xt=[];g?Xt=(0,w.getOutEdgesNodeId)(gt,Y):Xt=(0,w.getEdgesByNodeId)(gt,Y),Xt.forEach(function(Ct){var At=Ct.target,Z=Ct.source,J=At===gt?Z:At,yt=A&&Ct[A]?Ct[A]:1;$[J]>$[bt.id]+yt?($[J]=$[bt.id]+yt,U[J]=[bt.id]):$[J]===$[bt.id]+yt&&U[J].push(bt.id)})},H=0;H<W;H++)V(H);U[y]=[y];var q={};for(var tt in $)$[tt]!==1/0&&p(y,tt,U,q);var rt={};for(var tt in q)rt[tt]=q[tt][0];return{length:$,path:rt,allPath:q}},P=L;z.default=P;function p(m,S,y,g){if(m===S)return[m];if(g[S])return g[S];for(var A=[],E=0,D=y[S];E<D.length;E++){var F=D[E],Y=p(m,F,y,g);if(!Y)return;for(var b=0,h=Y;b<h.length;b++){var $=h[b];(0,k.isArray)($)?A.push((0,x.__spreadArray)((0,x.__spreadArray)([],$,!0),[S],!1)):A.push([$,S])}}return g[S]=A,g[S]}},241727:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.findShortestPath=z.findAllPath=void 0;var x=w(C(878089)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,y,g){var A=(0,x.default)(p,m,y,g),E=A.length,D=A.path,F=A.allPath;return{length:E[S],path:D[S],allPath:F[S]}};z.findShortestPath=T;var L=function(p,m,S,y){var g;if(m===S)return[[m]];var A=p.edges,E=A===void 0?[]:A,D=[m],F=(g={},g[m]=!0,g),Y=[],b=[],h=y?(0,k.getNeighbors)(m,E,"target"):(0,k.getNeighbors)(m,E);for(Y.push(h);D.length>0&&Y.length>0;){var $=Y[Y.length-1];if($.length){var U=$.shift();U&&(D.push(U),F[U]=!0,h=y?(0,k.getNeighbors)(U,E,"target"):(0,k.getNeighbors)(U,E),Y.push(h.filter(function(H){return!F[H]})))}else{var W=D.pop();F[W]=!1,Y.pop();continue}if(D[D.length-1]===S){var V=D.map(function(q){return q});b.push(V);var W=D.pop();F[W]=!1,Y.pop()}}return b};z.findAllPath=L},975033:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=k(C(62238));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(P,p){for(var m=(0,x.default)(P,p),S=[],y=m.length,g=0;g<y;g+=1){S[g]=[];for(var A=0;A<y;A+=1)g===A?S[g][A]=0:m[g][A]===0||!m[g][A]?S[g][A]=1/0:S[g][A]=m[g][A]}for(var E=0;E<y;E+=1)for(var g=0;g<y;g+=1)for(var A=0;A<y;A+=1)S[g][A]>S[g][E]+S[E][A]&&(S[g][A]=S[g][E]+S[E][A]);return S},T=w;z.default=T},821146:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=C(368575),w=function(){function A(E,D,F,Y,b){this.fromNode=E,this.toNode=D,this.nodeEdgeNodeLabel={nodeLabel1:F||k.VACANT_NODE_LABEL,edgeLabel:Y||k.VACANT_EDGE_LABEL,nodeLabel2:b||k.VACANT_NODE_LABEL}}return A.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A}(),T=function(){function A(){this.rmpath=[],this.dfsEdgeList=[]}return A.prototype.equalTo=function(E){var D=this.dfsEdgeList.length,F=E.length;if(D!==F)return!1;for(var Y=0;Y<D;Y++)if(this.dfsEdgeList[Y]!==E[Y])return!1;return!0},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A.prototype.pushBack=function(E,D,F,Y,b){return this.dfsEdgeList.push(new w(E,D,F,Y,b)),this.dfsEdgeList},A.prototype.toGraph=function(E,D){E===void 0&&(E=k.VACANT_GRAPH_ID),D===void 0&&(D=!1);var F=new k.Graph(E,!0,D);return this.dfsEdgeList.forEach(function(Y){var b=Y.fromNode,h=Y.toNode,$=Y.nodeEdgeNodeLabel,U=$.nodeLabel1,W=$.edgeLabel,V=$.nodeLabel2;U!==k.VACANT_NODE_LABEL&&F.addNode(b,U),V!==k.VACANT_NODE_LABEL&&F.addNode(h,V),U!==k.VACANT_NODE_LABEL&&V!==U&&F.addEdge(void 0,b,h,W)}),F},A.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,D=this.dfsEdgeList.length,F=D-1;F>=0;F--){var Y=this.dfsEdgeList[F],b=Y.fromNode,h=Y.toNode;b<h&&(E===void 0||h===E)&&(this.rmpath.push(F),E=b)}return this.rmpath},A.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(D){E[D.fromNode]||(E[D.fromNode]=!0),E[D.toNode]||(E[D.toNode]=!0)}),Object.keys(E).length},A}(),L=function(){function A(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var D=E.edge;this.edges.push(D),this.nodesUsed[D.from]=1,this.nodesUsed[D.to]=1,this.edgesUsed[D.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return A.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},A.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},A}(),P=function(){function A(E){var D=E.graphs,F=E.minSupport,Y=F===void 0?2:F,b=E.minNodeNum,h=b===void 0?1:b,$=E.maxNodeNum,U=$===void 0?4:$,W=E.top,V=W===void 0?10:W,H=E.directed,q=H===void 0?!1:H,tt=E.verbose,rt=tt===void 0?!1:tt;this.graphs=D,this.dfsCode=new T,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=Y,this.top=V,this.directed=q,this.counter=0,this.maxNodeNum=U,this.minNodeNum=h,this.verbose=rt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return A.prototype.findForwardRootEdges=function(E,D){var F=this,Y=[],b=E.nodeMap;return D.edges.forEach(function(h){(F.directed||D.label<=b[h.to].label)&&Y.push(h)}),Y},A.prototype.findBackwardEdge=function(E,D,F,Y){if(!this.directed&&D===F)return null;for(var b=E.nodeMap,h=b[F.to],$=h.edges,U=$.length,W=0;W<U;W++){var V=$[W];if(!(Y.hasEdge(V)||V.to!==D.from)){if(this.directed){if(b[D.from].label<b[F.to].label||b[D.from].label===b[F.to].label&&D.label<=V.label)return V}else if(D.label<V.label||D.label===V.label&&b[D.to].label<=b[F.to].label)return V}}return null},A.prototype.findForwardPureEdges=function(E,D,F,Y){for(var b=[],h=D.to,$=E.nodeMap[h].edges,U=$.length,W=0;W<U;W++){var V=$[W],H=E.nodeMap[V.to];F<=H.label&&!Y.hasNode(H)&&b.push(V)}return b},A.prototype.findForwardRmpathEdges=function(E,D,F,Y){for(var b=[],h=E.nodeMap,$=h[D.to].label,U=h[D.from],W=U.edges,V=W.length,H=0;H<V;H++){var q=W[H],tt=h[q.to].label;D.to===q.to||F>tt||Y.hasNode(h[q.to])||(D.label<q.label||D.label===q.label&&$<=tt)&&b.push(q)}return b},A.prototype.getSupport=function(E){var D={};return E.forEach(function(F){D[F.graphId]||(D[F.graphId]=!0)}),Object.keys(D).length},A.prototype.findMinLabel=function(E){var D=void 0;return Object.keys(E).forEach(function(F){var Y=E[F],b=Y.nodeLabel1,h=Y.edgeLabel,$=Y.nodeLabel2;if(!D){D={nodeLabel1:b,edgeLabel:h,nodeLabel2:$};return}(b<D.nodeLabel1||b===D.nodeLabel1&&h<D.edgeLabel||b===D.nodeLabel1&&h===D.edgeLabel&&$<D.nodeLabel2)&&(D={nodeLabel1:b,edgeLabel:h,nodeLabel2:$})}),D},A.prototype.isMin=function(){var E=this,D=this.dfsCode;if(this.verbose&&console.log("isMin checking",D),D.dfsEdgeList.length===1)return!0;var F=this.directed,Y=D.toGraph(k.VACANT_GRAPH_ID,F),b=Y.nodeMap,h=new T,$={};Y.nodes.forEach(function(H){var q=E.findForwardRootEdges(Y,H);q.forEach(function(tt){var rt=b[tt.to],ft="".concat(H.label,"-").concat(tt.label,"-").concat(rt.label);$[ft]||($[ft]={projected:[],nodeLabel1:H.label,edgeLabel:tt.label,nodeLabel2:rt.label});var it={graphId:Y.id,edge:tt,preNode:null};$[ft].projected.push(it)})});var U=this.findMinLabel($);if(U){h.dfsEdgeList.push(new w(0,1,U.nodeLabel1,U.edgeLabel,U.nodeLabel2));var W=function H(q){for(var tt=h.buildRmpath(),rt=h.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ft=h.dfsEdgeList[tt[0]].toNode,it={},bt=!1,gt=0,Xt=F?-1:0,Ct=function(ue){if(bt)return"break";q.forEach(function(ie){var Lt=new L(ie),ne=E.findBackwardEdge(Y,Lt.edges[tt[ue]],Lt.edges[tt[0]],Lt);ne&&(it[ne.label]||(it[ne.label]={projected:[],edgeLabel:ne.label}),it[ne.label].projected.push({graphId:Y.id,edge:it,preNode:ie}),gt=h.dfsEdgeList[tt[ue]].fromNode,bt=!0)})},At=tt.length-1;At>Xt;At--){var Z=Ct(At);if(Z==="break")break}if(bt){var J=E.findMinLabel(it);h.dfsEdgeList.push(new w(ft,gt,k.VACANT_NODE_LABEL,J.edgeLabel,k.VACANT_NODE_LABEL));var yt=h.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[yt]!==h.dfsEdgeList[yt]?!1:H(it[J.edgeLabel].projected)}var _t={};bt=!1;var nt=0;q.forEach(function(Qt){var ue=new L(Qt),ie=E.findForwardPureEdges(Y,ue.edges[tt[0]],rt,ue);ie.length>0&&(bt=!0,nt=ft,ie.forEach(function(Lt){var ne="".concat(Lt.label,"-").concat(b[Lt.to].label);_t[ne]||(_t[ne]={projected:[],edgeLabel:Lt.label,nodeLabel2:b[Lt.to].label}),_t[ne].projected.push({graphId:Y.id,edge:Lt,preNode:Qt})}))});for(var vt=tt.length,It=function(ue){if(bt)return"break";var ie=tt[ue];q.forEach(function(Lt){var ne=new L(Lt),ve=E.findForwardRmpathEdges(Y,ne.edges[ie],rt,ne);ve.length>0&&(bt=!0,nt=h.dfsEdgeList[ie].fromNode,ve.forEach(function(Wt){var ae="".concat(Wt.label,"-").concat(b[Wt.to].label);_t[ae]||(_t[ae]={projected:[],edgeLabel:Wt.label,nodeLabel2:b[Wt.to].label}),_t[ae].projected.push({graphId:Y.id,edge:Wt,preNode:Lt})}))})},At=0;At<vt;At++){var Pt=It(At);if(Pt==="break")break}if(!bt)return!0;var St=E.findMinLabel(_t);h.dfsEdgeList.push(new w(nt,ft+1,k.VACANT_NODE_LABEL,St.edgeLabel,St.nodeLabel2));var Dt=h.dfsEdgeList.length-1;return D.dfsEdgeList[Dt]!==h.dfsEdgeList[Dt]?!1:H(_t["".concat(St.edgeLabel,"-").concat(St.nodeLabel2)].projected)},V="".concat(U.nodeLabel1,"-").concat(U.edgeLabel,"-").concat(U.nodeLabel2);return W($[V].projected)}},A.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,x.clone)(E))}},A.prototype.subGraphMining=function(E){var D=this,F=this.getSupport(E);if(!(F<this.minSupport)&&this.isMin()){this.report();var Y=this.dfsCode.getNodeNum(),b=this.dfsCode.buildRmpath(),h=this.dfsCode.dfsEdgeList[b[0]].toNode,$=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,U={},W={};E.forEach(function(V){for(var H=D.graphs[V.graphId],q=H.nodeMap,tt=new L(V),rt=b.length-1;rt>=0;rt--){var ft=D.findBackwardEdge(H,tt.edges[b[rt]],tt.edges[b[0]],tt);if(ft){var it="".concat(D.dfsCode.dfsEdgeList[b[rt]].fromNode,"-").concat(ft.label);W[it]||(W[it]={projected:[],toNodeId:D.dfsCode.dfsEdgeList[b[rt]].fromNode,edgeLabel:ft.label}),W[it].projected.push({graphId:V.graphId,edge:ft,preNode:V})}}if(!(Y>=D.maxNodeNum)){var bt=D.findForwardPureEdges(H,tt.edges[b[0]],$,tt);bt.forEach(function(Xt){var Ct="".concat(h,"-").concat(Xt.label,"-").concat(q[Xt.to].label);U[Ct]||(U[Ct]={projected:[],fromNodeId:h,edgeLabel:Xt.label,nodeLabel2:q[Xt.to].label}),U[Ct].projected.push({graphId:V.graphId,edge:Xt,preNode:V})});for(var gt=function(Ct){var At=D.findForwardRmpathEdges(H,tt.edges[b[Ct]],$,tt);At.forEach(function(Z){var J="".concat(D.dfsCode.dfsEdgeList[b[Ct]].fromNode,"-").concat(Z.label,"-").concat(q[Z.to].label);U[J]||(U[J]={projected:[],fromNodeId:D.dfsCode.dfsEdgeList[b[Ct]].fromNode,edgeLabel:Z.label,nodeLabel2:q[Z.to].label}),U[J].projected.push({graphId:V.graphId,edge:Z,preNode:V})})},rt=0;rt<b.length;rt++)gt(rt)}}),Object.keys(W).forEach(function(V){var H=W[V],q=H.toNodeId,tt=H.edgeLabel;D.dfsCode.dfsEdgeList.push(new w(h,q,"-1",tt,"-1")),D.subGraphMining(W[V].projected),D.dfsCode.dfsEdgeList.pop()}),Object.keys(U).forEach(function(V){var H=U[V],q=H.fromNodeId,tt=H.edgeLabel,rt=H.nodeLabel2;D.dfsCode.dfsEdgeList.push(new w(q,h+1,k.VACANT_NODE_LABEL,tt,rt)),D.subGraphMining(U[V].projected),D.dfsCode.dfsEdgeList.pop()})}},A.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,D=this.directed,F=this.minSupport,Y=this.frequentSize1Subgraphs,b={},h={},$={},U={};return Object.keys(E).forEach(function(W){var V=E[W],H=V.nodeMap;V.nodes.forEach(function(q,tt){var rt=q.label,ft="".concat(W,"-").concat(rt);if(!$[ft]){var it=b[rt]||0;it++,b[rt]=it}$[ft]={graphKey:W,label:rt},q.edges.forEach(function(bt){var gt=rt,Xt=H[bt.to].label;if(!D&&gt>Xt){var Ct=Xt;Xt=gt,gt=Ct}var At=bt.label,Z="".concat(W,"-").concat(gt,"-").concat(At,"-").concat(Xt),J="".concat(gt,"-").concat(At,"-").concat(Xt);if(!h[J]){var yt=h[J]||0;yt++,h[J]=yt}U[Z]={graphId:W,nodeLabel1:gt,edgeLabel:At,nodeLabel2:Xt}})})}),Object.keys(b).forEach(function(W){var V=b[W];if(!(V<F)){var H={nodes:[],edges:[]};H.nodes.push({id:"0",label:W}),Y.push(H)}}),Y},A.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var D=this.graphs,F=this.directed,Y={};Object.keys(D).forEach(function(b){var h=D[b],$=h.nodeMap;h.nodes.forEach(function(U){var W=E.findForwardRootEdges(h,U);W.forEach(function(V){var H=$[V.to],q="".concat(U.label,"-").concat(V.label,"-").concat(H.label);Y[q]||(Y[q]={projected:[],nodeLabel1:U.label,edgeLabel:V.label,nodeLabel2:H.label});var tt={graphId:b,edge:V,preNode:null};Y[q].projected.push(tt)})})}),Object.keys(Y).forEach(function(b){var h=Y[b],$=h.projected,U=h.nodeLabel1,W=h.edgeLabel,V=h.nodeLabel2;E.dfsCode.dfsEdgeList.push(new w(0,1,U,W,V)),E.subGraphMining($),E.dfsCode.dfsEdgeList.pop()})}},A}(),p=function(E,D,F,Y){var b={};return Object.keys(E).forEach(function(h,$){var U=E[h],W=new k.Graph($,!0,D),V={};U.nodes.forEach(function(H,q){W.addNode(q,H[F]),V[H.id]=q}),U.edges.forEach(function(H,q){var tt=V[H.source],rt=V[H.target];W.addEdge(-1,tt,rt,H[Y])}),W&&W.getNodeNum()&&(b[W.id]=W)}),b},m=function(E,D,F){var Y=[];return E.forEach(function(b){var h={nodes:[],edges:[]};b.nodes.forEach(function($){var U;h.nodes.push((U={id:"".concat($.id)},U[D]=$.label,U))}),b.edges.forEach(function($){var U;h.edges.push((U={source:"".concat($.from),target:"".concat($.to)},U[F]=$.label,U))}),Y.push(h)}),Y},S="cluster",y=function(E){var D=E.graphs,F=E.directed,Y=F===void 0?!1:F,b=E.nodeLabelProp,h=b===void 0?S:b,$=E.edgeLabelProp,U=$===void 0?S:$,W=p(D,Y,h,U),V=E.minSupport,H=E.maxNodeNum,q=E.minNodeNum,tt=E.verbose,rt=E.top,ft={graphs:W,minSupport:V,maxNodeNum:H,minNodeNum:q,top:rt,verbose:tt,directed:Y},it=new P(ft);it.run();var bt=m(it.frequentSubgraphs,h,U);return bt},g=y;z.default=g},368575:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.VACANT_NODE_LABEL=z.VACANT_NODE_ID=z.VACANT_GRAPH_ID=z.VACANT_EDGE_LABEL=z.VACANT_EDGE_ID=z.Node=z.Graph=z.Edge=z.AUTO_EDGE_ID=void 0;var C=-1;z.VACANT_EDGE_ID=C;var x=-1;z.VACANT_NODE_ID=x;var k="-1";z.VACANT_EDGE_LABEL=k;var w="-1";z.VACANT_NODE_LABEL=w;var T=-1;z.VACANT_GRAPH_ID=T;var L="-1";z.AUTO_EDGE_ID=L;var P=function(){function S(y,g,A,E){y===void 0&&(y=C),g===void 0&&(g=x),A===void 0&&(A=x),E===void 0&&(E=k),this.id=y,this.from=g,this.to=A,this.label=E}return S}();z.Edge=P;var p=function(){function S(y,g){y===void 0&&(y=x),g===void 0&&(g=w),this.id=y,this.label=g,this.edges=[],this.edgeMap={}}return S.prototype.addEdge=function(y){this.edges.push(y),this.edgeMap[y.id]=y},S}();z.Node=p;var m=function(){function S(y,g,A){y===void 0&&(y=x),g===void 0&&(g=!0),A===void 0&&(A=!1),this.id=y,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=A}return S.prototype.getNodeNum=function(){return this.nodes.length},S.prototype.addNode=function(y,g){if(!this.nodeMap[y]){var A=new p(y,g);this.nodes.push(A),this.nodeMap[y]=A,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(y)}},S.prototype.addEdge=function(y,g,A,E){if((this.edgeIdAutoIncrease||y===void 0)&&(y=this.counter++),!(this.nodeMap[g]&&this.nodeMap[A]&&this.nodeMap[A].edgeMap[y])){var D=new P(y,g,A,E);if(this.edges.push(D),this.edgeMap[y]=D,this.nodeMap[g].addEdge(D),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(D),!this.directed){var F=new P(y,A,g,E);this.nodeMap[A].addEdge(F),this.edgeLabelMap[E].push(F)}}},S}();z.Graph=m},882812:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(197582),k=P(C(975033)),w=P(C(821146)),T=P(C(878089)),L=C(770643);function P(U){return U&&U.__esModule?U:{default:U}}var p=function(W,V,H,q){H===void 0&&(H="cluster"),q===void 0&&(q=2);var tt=[],rt=W.nodes;return V.forEach(function(ft,it){tt.push(m(rt,ft,it,H,q))}),tt},m=function(W,V,H,q,tt){var rt=[H],ft=[],it={};return V.forEach(function(bt,gt){if(bt<=tt&&H!==gt){rt.push(gt),ft.push(W[gt]);var Xt=W[gt][q];it[Xt]?(it[Xt].count++,it[Xt].dists.push(bt)):it[Xt]={count:1,dists:[bt]}}}),Object.keys(it).forEach(function(bt){it[bt].dists=it[bt].dists.sort(function(gt,Xt){return gt-Xt})}),{nodeIdx:H,nodeId:W[H].id,nodeIdxs:rt,neighbors:ft,neighborNum:rt.length-1,nodeLabelCountMap:it}},S=function(W,V,H,q,tt){var rt=Math.ceil(H/V),ft={},it=0;return q.forEach(function(bt,gt){for(var Xt=0,Ct=0,At=bt.nodeIdxs,Z=bt.neighborNum-1;Xt<rt;){for(var J=At[1+Math.floor(Math.random()*Z)],yt=0;(ft["".concat(gt,"-").concat(J)]||ft["".concat(J,"-").concat(gt)])&&(J=Math.floor(Math.random()*V),yt++,!(yt>2*V)););if(yt<2*V&&(ft["".concat(gt,"-").concat(J)]={start:gt,end:J,distance:tt[gt][J]},Xt++,it++,it>=H))return ft;if(Ct++,Ct>2*V)break}if(Xt<rt){var _t=rt-Xt;rt=(rt+_t)/(V-gt-1)}}),ft},y=function(W,V,H,q){var tt=H.nodes;return q||(q={}),Object.keys(W).forEach(function(rt){var ft,it;if(!(q&&q[rt])){q[rt]={nodes:[],edges:[]};var bt=W[rt],gt=(ft=V[bt.start])===null||ft===void 0?void 0:ft.nodeIdxs,Xt=(it=V[bt.end])===null||it===void 0?void 0:it.nodeIdxs;if(!(!gt||!Xt)){var Ct=new Set(Xt),At=gt.filter(function(nt){return Ct.has(nt)});if(!(!At||!At.length)){for(var Z={},J=At.length,yt=0;yt<J;yt++){var _t=tt[At[yt]];q[rt].nodes.push(_t),Z[_t.id]=!0}H.edges.forEach(function(nt){Z[nt.source]&&Z[nt.target]&&q[rt].edges.push(nt)})}}}}),q},g=function(W,V,H,q){var tt,rt,ft={};W.nodes.forEach(function(bt){ft[bt.id]=bt});var it=0;return!(!((tt=V==null?void 0:V.edges)===null||tt===void 0)&&tt.length)||((rt=V==null?void 0:V.nodes)===null||rt===void 0?void 0:rt.length)<2?0:(W.edges.forEach(function(bt){var gt=ft[bt.source][H],Xt=ft[bt.target][H],Ct=V==null?void 0:V.nodes[0][H],At=V==null?void 0:V.nodes[1][H],Z=V==null?void 0:V.edges[0][q];bt[q]===Z&&(gt===Ct&&Xt===At||gt===At&&Xt===Ct)&&it++}),it)},A=function(W,V,H){for(var q=1/0,tt=0,rt=function(bt){var gt=W[bt],Xt=Object.keys(gt).sort(function(nt,vt){return gt[nt]-gt[vt]}),Ct=10,At=[];Xt.forEach(function(nt,vt){At[vt%Ct]||(At[vt%Ct]={graphs:[],totalCount:0,aveCount:0}),At[vt%Ct].graphs.push(nt),At[vt%Ct].totalCount+=gt[nt]});var Z=0,J=[];At.forEach(function(nt){var vt=nt.totalCount/nt.graphs.length;nt.aveCount=vt,J.push(vt);var It=0,Pt=nt.length;nt.graphs.forEach(function(St,Dt){var Qt=gt[St];nt.graphs.forEach(function(ue,ie){Dt!==ie&&(It+=Math.abs(Qt-gt[ue]))})}),It/=Pt*(Pt-1)/2,Z+=It}),Z/=At.length;var yt=0;J.forEach(function(nt,vt){J.forEach(function(It,Pt){vt!==Pt&&(yt+=Math.abs(nt-It))}),yt/=J.length*(J.length-1)/2});var _t=yt-Z;q<_t&&(q=_t,tt=bt)},ft=0;ft<V;ft++)rt(ft);return{structure:H[tt],structureCountMap:W[tt]}},E=function(W,V){var H={},q={};return W.forEach(function(tt,rt){H[tt.id]={idx:rt,node:tt,degree:0,inDegree:0,outDegree:0};var ft=tt[V];q[ft]||(q[ft]=[]),q[ft].push(tt)}),{nodeMap:H,nodeLabelMap:q}},D=function(W,V,H){var q={},tt={};return W.forEach(function(rt,ft){q["".concat(L.uniqueId)]={idx:ft,edge:rt};var it=rt[V];tt[it]||(tt[it]=[]),tt[it].push(rt);var bt=H[rt.source];bt&&(bt.degree++,bt.outDegree++);var gt=H[rt.target];gt&&(gt.degree++,gt.inDegree++)}),{edgeMap:q,edgeLabelMap:tt}},F=function(W,V,H){var q=V.length,tt={};return V.forEach(function(rt,ft){for(var it=H?0:ft+1,bt=W[ft].id,gt=it;gt<q;gt++)if(ft!==gt){var Xt=W[gt].id,Ct=rt[gt];tt["".concat(bt,"-").concat(Xt)]=Ct,H||(tt["".concat(Xt,"-").concat(bt)]=Ct)}}),tt},Y=function(W,V,H,q,tt,rt,ft,it,bt,gt,Xt){var Ct,At="".concat(V.id,"-").concat(H.id);if(gt&&gt[At])return gt[At];var Z=Xt?Xt[At]:void 0;if(!Z){var J=(Ct={},Ct[At]={start:q[V.id].idx,end:q[H.id].idx,distance:tt},Ct);Xt=y(J,rt,W,Xt),Z=Xt[At]}return g(Z,ft,it,bt)},b=function(W,V,H,q){var tt,rt,ft,it=(tt=W[V])===null||tt===void 0?void 0:tt.degree,bt=(rt=W[V])===null||rt===void 0?void 0:rt.inDegree,gt=(ft=W[V])===null||ft===void 0?void 0:ft.outDegree;return W[V]===void 0&&(it=1/0,bt=1/0,gt=1/0,q[V].forEach(function(Xt){var Ct=H[Xt.id].degree;it>Ct&&(it=Ct);var At=H[Xt.id].inDegree;bt>At&&(bt=At);var Z=H[Xt.id].outDegree;gt>Z&&(gt=Z)}),W[V]={degree:it,inDegree:bt,outDegree:gt}),{minPatternNodeLabelDegree:it,minPatternNodeLabelInDegree:bt,minPatternNodeLabelOutDegree:gt}},h=function(W,V,H,q,tt,rt,ft){var it;if(H===void 0&&(H=!1),rt===void 0&&(rt="cluster"),ft===void 0&&(ft="cluster"),!(!W||!W.nodes)){var bt=W.nodes.length;if(bt){var gt=(0,k.default)(W,H),Xt=(0,k.default)(V,H),Ct=F(W.nodes,gt,H),At=F(V.nodes,Xt,H),Z=E(W.nodes,rt),J=Z.nodeMap,yt=Z.nodeLabelMap,_t=E(V.nodes,rt),nt=_t.nodeMap,vt=_t.nodeLabelMap;D(W.edges,ft,J);var It=D(V.edges,ft,nt).edgeLabelMap,Pt=[];Xt==null||Xt.forEach(function(sn){Pt=Pt.concat(sn)}),tt||(tt=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],Pt,!1),[2],!1))),q||(q=tt);var St=p(W,gt,rt,q),Dt=p(V,Xt,rt,q),Qt=Math.min(100,bt*(bt-1)/2),ue=S(q,bt,Qt,St,gt),ie=y(ue,St,W),Lt=10,ne=1,ve=1,Wt=4,ae={graphs:ie,nodeLabelProp:rt,edgeLabelProp:ft,minSupport:ne,minNodeNum:ve,maxNodeNum:Wt,directed:H},Ce=(0,w.default)(ae).slice(0,Lt),xe=Ce.length,Jt=[];Ce.forEach(function(sn,Wn){Jt[Wn]={},Object.keys(ie).forEach(function(Mn){var In=ie[Mn],jn=g(In,sn,rt,ft);Jt[Wn][Mn]=jn})});var we=A(Jt,xe,Ce),Tt=we.structure,Pe=we.structureCountMap,_r=V.nodes[0],Ar=[],Or=(it=V.nodes[0])===null||it===void 0?void 0:it[rt],Br=-1/0;V.nodes.forEach(function(sn){var Wn=sn[rt],Mn=yt[Wn];(Mn==null?void 0:Mn.length)>Br&&(Br=Mn.length,Ar=Mn,Or=Wn,_r=sn)});var cn={},an={},Dn={},Un={},Xn={},xr={};Object.keys(vt).forEach(function(sn,Wn){Xn[sn]=[],H&&(xr[sn]=[]);var Mn=-1/0,In=vt[sn],jn={};In.forEach(function(wt){var Me=At["".concat(_r.id,"-").concat(wt.id)];if(Me&&Xn[sn].push(Me),Mn<Me&&(Mn=Me),jn["".concat(_r.id,"-").concat(wt.id)]={start:0,end:nt[wt.id].idx,distance:Me},H){var kt=At["".concat(wt.id,"-").concat(_r.id)];kt&&xr[sn].push(kt)}}),Xn[sn]=Xn[sn].sort(function(wt,Me){return wt-Me}),H&&(xr[sn]=xr[sn].sort(function(wt,Me){return wt-Me})),an=y(jn,Dt,V,an);var at=[];if(Object.keys(jn).forEach(function(wt){if(Dn[wt]){at.push(Dn[wt]);return}var Me=an[wt];Dn[wt]=g(Me,Tt,rt,ft),at.push(Dn[wt])}),at=at.sort(function(wt,Me){return Me-wt}),Un["".concat(_r.id,"-").concat(sn)]=at,sn!==Or)for(var Je=(Ar==null?void 0:Ar.length)||0,Ht=function(Me){var kt=Ar[Me],qt=St[J[kt.id].idx],dt=qt.nodeLabelCountMap[sn],Ut=vt[sn].length;if(!dt||dt.count<Ut)return Ar.splice(Me,1),"continue";for(var Q=!1,ot=0;ot<Ut;ot++)if(dt.dists[ot]>Xn[sn][ot]){Q=!0;break}if(Q)return Ar.splice(Me,1),"continue";var R={};qt.neighbors.forEach(function(X){var mt=Ct["".concat(kt.id,"-").concat(X.id)];R["".concat(kt.id,"-").concat(X.id)]={start:J[kt.id].idx,end:J[X.id].idx,distance:mt}}),ie=y(R,St,W,ie);var M=[];Object.keys(R).forEach(function(X){if(Pe[X]){M.push(Pe[X]);return}var mt=ie[X];Pe[X]=g(mt,Tt,rt,ft),M.push(Pe[X])}),M=M.sort(function(X,mt){return mt-X});for(var O=!1,ot=0;ot<Ut;ot++)if(M[ot]<at[ot]){O=!0;break}if(O)return Ar.splice(Me,1),"continue"},te=Je-1;te>=0;te--)Ht(te)});var $e=[];Ar==null||Ar.forEach(function(sn){for(var Wn=J[sn.id].idx,Mn=m(W.nodes,gt[Wn],Wn,rt,tt),In=Mn.neighbors,jn=In.length,at=!1,Je=jn-1;Je>=0;Je--){if(In.length+1<V.nodes.length){at=!0;return}var Ht=In[Je],te=Ht[rt];if(!vt[te]||!vt[te].length){In.splice(Je,1);continue}if(!Xn[te]||!Xn[te].length){In.splice(Je,1);continue}var wt="".concat(sn.id,"-").concat(Ht.id),Me=Ct[wt],kt=Xn[te].length-1,qt=Xn[te][kt];if(Me>qt){In.splice(Je,1);continue}if(H){var dt="".concat(Ht.id,"-").concat(sn.id),Ut=Ct[dt];kt=xr[te].length-1;var Q=xr[te][kt];if(Ut>Q){In.splice(Je,1);continue}}var ot=Pe[wt]?Pe[wt]:Y(W,sn,Ht,J,Me,St,Tt,rt,ft,Pe,ie),R="".concat(_r.id,"-").concat(te),M=Un[R][Un[R].length-1];if(ot<M){In.splice(Je,1);continue}var O=b(cn,te,nt,vt),X=O.minPatternNodeLabelDegree,mt=O.minPatternNodeLabelInDegree,Ft=O.minPatternNodeLabelOutDegree;if(J[Ht.id].degree<X){In.splice(Je,1);continue}}at||$e.push({nodes:[sn].concat(In)})});var Tr=(0,T.default)(V,_r.id,!1).length,qr={};H?(Object.keys(Tr).forEach(function(sn){var Wn=nt[sn].node[rt];qr[Wn]?qr[Wn].push(Tr[sn]):qr[Wn]=[Tr[sn]]}),Object.keys(qr).forEach(function(sn){qr[sn].sort(function(Wn,Mn){return Wn-Mn})})):qr=Xn;for(var gn=$e.length,xn=function(Wn){var Mn=$e[Wn],In=Mn.nodes[0],jn={},at={};Mn.nodes.forEach(function(Dr,ce){at[Dr.id]={idx:ce,node:Dr,degree:0,inDegree:0,outDegree:0};var jt=Dr[rt];jn[jt]?jn[jt]++:jn[jt]=1});var Je=[],Ht={};W.edges.forEach(function(Dr){at[Dr.source]&&at[Dr.target]&&(Je.push(Dr),Ht[Dr[ft]]?Ht[Dr[ft]]++:Ht[Dr[ft]]=1,at[Dr.source].degree++,at[Dr.target].degree++,at[Dr.source].outDegree++,at[Dr.target].inDegree++)});for(var te=Object.keys(It).length,wt=!1,Me=0;Me<te;Me++){var kt=Object.keys(It)[Me];if(!Ht[kt]||Ht[kt]<It[kt].length){wt=!0;break}}if(wt)return $e.splice(Wn,1),"continue";var qt=Je.length;if(qt<V.edges.length)return $e.splice(Wn,1),"break";for(var dt=!1,Ut=function(ce){var jt=Je[ce],pe=jt[ft],Oe=It[pe];if(!Oe||!Oe.length)return Ht[pe]--,Oe&&Ht[pe]<Oe.length?(dt=!0,"break"):(Je.splice(ce,1),at[jt.source].degree--,at[jt.target].degree--,at[jt.source].outDegree--,at[jt.target].inDegree--,"continue");var Se=at[jt.source].node[rt],Fe=at[jt.target].node[rt],or=!1;if(Oe.forEach(function(gr){var Jr=nt[gr.source].node,Gn=nt[gr.target].node;Jr[rt]===Se&&Gn[rt]===Fe&&(or=!0),!H&&Jr[rt]===Fe&&Gn[rt]===Se&&(or=!0)}),!or)return Ht[pe]--,Oe&&Ht[pe]<Oe.length?(dt=!0,"break"):(Je.splice(ce,1),at[jt.source].degree--,at[jt.target].degree--,at[jt.source].outDegree--,at[jt.target].inDegree--,"continue")},Me=qt-1;Me>=0;Me--){var Q=Ut(Me);if(Q==="break")break}if(dt)return $e.splice(Wn,1),"continue";Mn.edges=Je;var ot=(0,T.default)(Mn,Mn.nodes[0].id,!1).length;if(Object.keys(ot).reverse().forEach(function(Dr){if(!(Dr===Mn.nodes[0].id||dt)){if(ot[Dr]===1/0){var ce=at[Dr].node[rt];if(jn[ce]--,jn[ce]<vt[ce].length){dt=!0;return}var jt=Mn.nodes.indexOf(at[Dr].node);Mn.nodes.splice(jt,1),at[Dr]=void 0;return}var pe=J[Dr].node[rt];if(!qr[pe]||!qr[pe].length||ot[Dr]>qr[pe][qr[pe].length-1]){var ce=at[Dr].node[rt];if(jn[ce]--,jn[ce]<vt[ce].length){dt=!0;return}var jt=Mn.nodes.indexOf(at[Dr].node);Mn.nodes.splice(jt,1),at[Dr]=void 0}}}),dt)return $e.splice(Wn,1),"continue";for(var R=!0,M=0;R&&!dt;){R=!1;var O=H?at[In.id].degree<nt[_r.id].degree||at[In.id].inDegree<nt[_r.id].inDegree||at[In.id].outDegree<nt[_r.id].outDegree:at[In.id].degree<nt[_r.id].degree;if(O){dt=!0;break}if(jn[In[rt]]<vt[In[rt]].length){dt=!0;break}for(var X=Mn.nodes.length,mt=X-1;mt>=0;mt--){var Ft=Mn.nodes[mt],Bt=at[Ft.id].degree,ee=at[Ft.id].inDegree,Le=at[Ft.id].outDegree,me=Ft[rt],Xe=b(cn,me,nt,vt),pr=Xe.minPatternNodeLabelDegree,Ze=Xe.minPatternNodeLabelInDegree,Pr=Xe.minPatternNodeLabelOutDegree,un=H?Bt<pr||ee<Ze||Le<Pr:Bt<pr;if(un){if(jn[Ft[rt]]--,jn[Ft[rt]]<vt[Ft[rt]].length){dt=!0;break}Mn.nodes.splice(mt,1),at[Ft.id]=void 0,R=!0}}if(dt||!R&&M!==0)break;qt=Je.length;for(var Ke=qt-1;Ke>=0;Ke--){var lr=Je[Ke];if(!at[lr.source]||!at[lr.target]){Je.splice(Ke,1);var Rr=lr[ft];if(Ht[Rr]--,at[lr.source]&&(at[lr.source].degree--,at[lr.source].outDegree--),at[lr.target]&&(at[lr.target].degree--,at[lr.target].inDegree--),It[Rr]&&Ht[Rr]<It[Rr].length){dt=!0;break}R=!0}}M++}if(dt||dt||Mn.nodes.length<V.nodes.length||Je.length<V.edges.length)return $e.splice(Wn,1),"continue"},Rn=gn-1;Rn>=0;Rn--){var Mr=xn(Rn);if(Mr==="break")break}for(var dn=$e.length,hn=function(Wn){var Mn=$e[Wn],In={};Mn.edges.forEach(function(Je){var Ht="".concat(Je.source,"-").concat(Je.target,"-").concat(Je.label);In[Ht]?In[Ht]++:In[Ht]=1});for(var jn=function(Ht){var te=$e[Ht],wt={};te.edges.forEach(function(kt){var qt="".concat(kt.source,"-").concat(kt.target,"-").concat(kt.label);wt[qt]?wt[qt]++:wt[qt]=1});var Me=!0;Object.keys(wt).length!==Object.keys(In).length?Me=!1:Object.keys(In).forEach(function(kt){wt[kt]!==In[kt]&&(Me=!1)}),Me&&$e.splice(Ht,1)},at=dn-1;at>Wn;at--)jn(at);dn=$e.length},Rn=0;Rn<=dn-1;Rn++)hn(Rn);return $e}}},$=h;z.default=$},505170:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(62238)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,y){m===void 0&&(m=!1),S===void 0&&(S="weight"),y===void 0&&(y=1e3);var g=p.nodes,A=g===void 0?[]:g,E=p.edges,D=E===void 0?[]:E,F={},Y={};A.forEach(function(rt,ft){var it=(0,k.uniqueId)();rt.clusterId=it,F[it]={id:it,nodes:[rt]},Y[rt.id]={node:rt,idx:ft}});var b=(0,x.default)(p,m),h=[],$={};b.forEach(function(rt,ft){var it=0,bt=A[ft].id;$[bt]={},rt.forEach(function(gt,Xt){if(gt){it+=gt;var Ct=A[Xt].id;$[bt][Ct]=gt}}),h.push(it)});for(var U=0,W=function(){var ft=!1;if(A.forEach(function(it){var bt={};Object.keys($[it.id]).forEach(function(_t){var nt=$[it.id][_t],vt=Y[_t].node,It=vt.clusterId;bt[It]||(bt[It]=0),bt[It]+=nt});var gt=-1/0,Xt=[];if(Object.keys(bt).forEach(function(_t){gt<bt[_t]?(gt=bt[_t],Xt=[_t]):gt===bt[_t]&&Xt.push(_t)}),!(Xt.length===1&&Xt[0]===it.clusterId)){var Ct=Xt.indexOf(it.clusterId);if(Ct>=0&&Xt.splice(Ct,1),Xt&&Xt.length){ft=!0;var At=F[it.clusterId],Z=At.nodes.indexOf(it);At.nodes.splice(Z,1);var J=Math.floor(Math.random()*Xt.length),yt=F[Xt[J]];yt.nodes.push(it),it.clusterId=yt.id}}}),!ft)return"break";U++};U<y;){var V=W();if(V==="break")break}Object.keys(F).forEach(function(rt){var ft=F[rt];(!ft.nodes||!ft.nodes.length)&&delete F[rt]});var H=[],q={};D.forEach(function(rt){var ft=rt.source,it=rt.target,bt=rt[S]||1,gt=Y[ft].node.clusterId,Xt=Y[it].node.clusterId,Ct="".concat(gt,"---").concat(Xt);if(q[Ct])q[Ct].weight+=bt,q[Ct].count++;else{var At={source:gt,target:Xt,weight:bt,count:1};q[Ct]=At,H.push(At)}});var tt=[];return Object.keys(F).forEach(function(rt){tt.push(F[rt])}),{clusters:tt,clusterEdges:H}},L=T;z.default=L},135179:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=P(C(62238)),w=P(C(29741)),T=C(103665),L=C(526838);function P(g){return g&&g.__esModule?g:{default:g}}var p=function(A,E,D,F){for(var Y=E.length,b=2*F,h=0,$=0;$<Y;$++)for(var U=A[$].clusterId,W=0;W<Y;W++){var V=A[W].clusterId;if(U===V){var H=E[$][W]||0,q=D[$]||0,tt=D[W]||0;h+=H-q*tt/b}}return h*=1/b,h},m=function(A,E){A===void 0&&(A=[]);for(var D=A.length,F=new w.default([]),Y=0;Y<D;Y++)F=F.add(new w.default(E[Y]));var b=F.avg(D);b.normalize();for(var h=0,Y=0;Y<D;Y++){var $=new w.default(E[Y]),U=$.squareEuclideanDistance(b);h+=U}var W=[];A.forEach(function(){W.push([])});for(var Y=0;Y<D;Y++){var $=new w.default(E[Y]);A[Y].clusterInertial=0;for(var V=0;V<D;V++){if(Y===V){W[Y][V]=0;continue}var H=new w.default(E[V]);W[Y][V]=$.squareEuclideanDistance(H),A[Y].clusterInertial+=W[Y][V]}}for(var q=0,tt=2*D*h,Y=0;Y<D;Y++)for(var rt=A[Y].clusterId,V=0;V<D;V++){var ft=A[V].clusterId;if(!(Y===V||rt!==ft)){var it=A[Y].clusterInertial*A[V].clusterInertial/Math.pow(tt,2)-W[Y][V]/tt;q+=it}}return Number(q.toFixed(4))},S=function(A,E,D,F,Y,b,h,$,U){E===void 0&&(E=!1),D===void 0&&(D="weight"),F===void 0&&(F=1e-4),Y===void 0&&(Y=!1),b===void 0&&(b=void 0),h===void 0&&(h=[]),$===void 0&&($=["id"]),U===void 0&&(U=1);var W=A.nodes,V=W===void 0?[]:W,H=A.edges,q=H===void 0?[]:H,tt=[];if(Y){V.forEach(function(ie,Lt){ie.properties=ie.properties||{},ie.originIndex=Lt});var rt=[];V.every(function(ie){return ie.hasOwnProperty("nodeType")})&&(rt=Array.from(new Set(V.map(function(ie){return ie.nodeType}))),V.forEach(function(ie){ie.properties.nodeType=rt.findIndex(function(Lt){return Lt===ie.nodeType})}));var ft=(0,T.getAllProperties)(V,b);tt=(0,L.oneHot)(ft,h,$)}var it=1,bt={},gt={};V.forEach(function(ie,Lt){var ne=String(it++);ie.clusterId=ne,bt[ne]={id:ne,nodes:[ie]},gt[ie.id]={node:ie,idx:Lt}});var Xt=(0,k.default)(A,E),Ct=[],At={},Z=0;Xt.forEach(function(ie,Lt){var ne=0,ve=V[Lt].id;At[ve]={},ie.forEach(function(Wt,ae){if(Wt){ne+=Wt;var Ce=V[ae].id;At[ve][Ce]=Wt,Z+=Wt}}),Ct.push(ne)}),Z/=2;for(var J=1/0,yt=1/0,_t=0,nt=[],vt={};;){Y&&V.every(function(ie){return ie.hasOwnProperty("properties")})?J=p(V,Xt,Ct,Z)+m(V,tt)*U:J=p(V,Xt,Ct,Z),_t===0&&(yt=J,nt=V,vt=bt);var It=J>0&&J>yt&&J-yt<F;if(J>yt&&(nt=V.map(function(ie){return{node:ie,clusterId:ie.clusterId}}),vt=(0,x.clone)(bt),yt=J),It||_t>100)break;_t++,Object.keys(bt).forEach(function(ie){var Lt=0;q.forEach(function(ne){var ve=ne.source,Wt=ne.target,ae=gt[ve].node.clusterId,Ce=gt[Wt].node.clusterId;(ae===ie&&Ce!==ie||Ce===ie&&ae!==ie)&&(Lt=Lt+(ne[D]||1))}),bt[ie].sumTot=Lt}),V.forEach(function(ie,Lt){var ne=bt[ie.clusterId],ve=0,Wt,ae=Ct[Lt]/(2*Z),Ce=0,xe=ne.nodes;xe.forEach(function(an){var Dn=gt[an.id].idx;Ce+=Xt[Lt][Dn]||0});var Jt=Ce-ne.sumTot*ae,we=xe.filter(function(an){return an.id!==ie.id}),Tt=[];we.forEach(function(an,Dn){Tt[Dn]=tt[an.originIndex]});var Pe=m(we,tt)*U,_r=At[ie.id];if(Object.keys(_r).forEach(function(an){var Dn=gt[an].node,Un=Dn.clusterId;if(Un!==ie.clusterId){var Xn=bt[Un],xr=Xn.nodes;if(!(!xr||!xr.length)){var $e=0;xr.forEach(function(Mr){var dn=gt[Mr.id].idx;$e+=Xt[Lt][dn]||0});var Tr=$e-Xn.sumTot*ae,qr=xr.concat([ie]),gn=[];qr.forEach(function(Mr,dn){gn[dn]=tt[Mr.originIndex]});var xn=m(qr,tt)*U,Rn=Tr-Jt;Y&&(Rn=Tr+xn-(Jt+Pe)),Rn>ve&&(ve=Rn,Wt=Xn)}}}),ve>0){Wt.nodes.push(ie);var Ar=ie.clusterId;ie.clusterId=Wt.id;var Or=ne.nodes.indexOf(ie);ne.nodes.splice(Or,1);var Br=0,cn=0;q.forEach(function(an){var Dn=an.source,Un=an.target,Xn=gt[Dn].node.clusterId,xr=gt[Un].node.clusterId;(Xn===Wt.id&&xr!==Wt.id||xr===Wt.id&&Xn!==Wt.id)&&(Br=Br+(an[D]||1)),(Xn===Ar&&xr!==Ar||xr===Ar&&Xn!==Ar)&&(cn=cn+(an[D]||1))}),Wt.sumTot=Br,ne.sumTot=cn}})}var Pt={},St=0;Object.keys(vt).forEach(function(ie){var Lt=vt[ie];if(!Lt.nodes||!Lt.nodes.length){delete vt[ie];return}var ne=String(St+1);ne!==ie&&(Lt.id=ne,Lt.nodes=Lt.nodes.map(function(ve){return{id:ve.id,clusterId:ne}}),vt[ne]=Lt,Pt[ie]=ne,delete vt[ie],St++)}),nt.forEach(function(ie){var Lt=ie.node,ne=ie.clusterId;Lt&&(Lt.clusterId=ne,Lt.clusterId&&Pt[Lt.clusterId]&&(Lt.clusterId=Pt[Lt.clusterId]))});var Dt=[],Qt={};q.forEach(function(ie){var Lt=ie.source,ne=ie.target,ve=ie[D]||1,Wt=gt[Lt].node.clusterId,ae=gt[ne].node.clusterId;if(!(!Wt||!ae)){var Ce="".concat(Wt,"---").concat(ae);if(Qt[Ce])Qt[Ce].weight+=ve,Qt[Ce].count++;else{var xe={source:Wt,target:ae,weight:ve,count:1};Qt[Ce]=xe,Dt.push(xe)}}});var ue=[];return Object.keys(vt).forEach(function(ie){ue.push(vt[ie])}),{clusters:ue,clusterEdges:Dt}},y=S;z.default=y},689454:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=T(C(838823)),k=T(C(257085)),w=C(770643);function T(S){return S&&S.__esModule?S:{default:S}}var L=function(y,g){var A=[],E=y.nodes,D=E===void 0?[]:E,F=y.edges,Y=F===void 0?[]:F;if(D.length===0)return A;var b=D[0],h=new Set;h.add(b);var $=function(tt,rt){return g?tt.weight-rt.weight:0},U=new k.default($);for((0,w.getEdgesByNodeId)(b.id,Y).forEach(function(q){U.insert(q)});!U.isEmpty();){var W=U.delMin(),V=W.source,H=W.target;h.has(V)&&h.has(H)||(A.push(W),h.has(V)||(h.add(V),(0,w.getEdgesByNodeId)(V,Y).forEach(function(q){U.insert(q)})),h.has(H)||(h.add(H),(0,w.getEdgesByNodeId)(H,Y).forEach(function(q){U.insert(q)})))}return A},P=function(y,g){var A=[],E=y.nodes,D=E===void 0?[]:E,F=y.edges,Y=F===void 0?[]:F;if(D.length===0)return A;var b=Y.map(function(V){return V});g&&b.sort(function(V,H){return V.weight-H.weight});for(var h=new x.default(D.map(function(V){return V.id}));b.length>0;){var $=b.shift(),U=$.source,W=$.target;h.connected(U,W)||(A.push($),h.union(U,W))}return A},p=function(y,g,A){var E={prim:L,kruskal:P};return A?E[A](y,g):P(y,g)},m=p;z.default=m},274926:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(182556)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S){typeof m!="number"&&(m=1e-6),typeof S!="number"&&(S=.85);for(var y=1,g=0,A=1e3,E=p.nodes,D=E===void 0?[]:E,F=p.edges,Y=F===void 0?[]:F,b=D.length,h,$={},U={},W=0;W<b;++W){var V=D[W],H=V.id;$[H]=1/b,U[H]=1/b}for(var q=(0,x.default)(p);A>0&&y>m;){g=0;for(var W=0;W<b;++W){var V=D[W],H=V.id;if(h=0,q[V.id].inDegree===0)$[H]=0;else{for(var tt=(0,k.getNeighbors)(H,Y,"source"),rt=0;rt<tt.length;++rt){var ft=tt[rt],it=q[ft].outDegree;it>0&&(h+=U[ft]/it)}$[H]=S*h,g+=$[H]}}g=(1-g)/b,y=0;for(var W=0;W<b;++W){var V=D[W],H=V.id;h=$[H]+g,y+=Math.abs(h-U[H]),U[H]=h}A-=1}return U},L=T;z.default=L},257085:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(T,L){return T-L},x=function(){function w(T){T===void 0&&(T=C),this.compareFn=T,this.list=[]}return w.prototype.getLeft=function(T){return 2*T+1},w.prototype.getRight=function(T){return 2*T+2},w.prototype.getParent=function(T){return T===0?null:Math.floor((T-1)/2)},w.prototype.isEmpty=function(){return this.list.length<=0},w.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},w.prototype.delMin=function(){var T=this.top(),L=this.list.pop();return this.list.length>0&&(this.list[0]=L,this.moveDown(0)),T},w.prototype.insert=function(T){if(T!==null){this.list.push(T);var L=this.list.length-1;return this.moveUp(L),!0}return!1},w.prototype.moveUp=function(T){for(var L=this.getParent(T);T&&T>0&&this.compareFn(this.list[L],this.list[T])>0;){var P=this.list[L];this.list[L]=this.list[T],this.list[T]=P,T=L,L=this.getParent(T)}},w.prototype.moveDown=function(T){var L,P=T,p=this.getLeft(T),m=this.getRight(T),S=this.list.length;p!==null&&p<S&&this.compareFn(this.list[P],this.list[p])>0?P=p:m!==null&&m<S&&this.compareFn(this.list[P],this.list[m])>0&&(P=m),T!==P&&(L=[this.list[P],this.list[T]],this.list[T]=L[0],this.list[P]=L[1],this.moveDown(P))},w}(),k=x;z.default=k},488481:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=z.LinkedListNode=void 0;var C=function(L,P){return L===P},x=function(){function T(L,P){P===void 0&&(P=null),this.value=L,this.next=P}return T.prototype.toString=function(L){return L?L(this.value):"".concat(this.value)},T}();z.LinkedListNode=x;var k=function(){function T(L){L===void 0&&(L=C),this.head=null,this.tail=null,this.compare=L}return T.prototype.prepend=function(L){var P=new x(L,this.head);return this.head=P,this.tail||(this.tail=P),this},T.prototype.append=function(L){var P=new x(L);return this.head?(this.tail.next=P,this.tail=P,this):(this.head=P,this.tail=P,this)},T.prototype.delete=function(L){if(!this.head)return null;for(var P=null;this.head&&this.compare(this.head.value,L);)P=this.head,this.head=this.head.next;var p=this.head;if(p!==null)for(;p.next;)this.compare(p.next.value,L)?(P=p.next,p.next=p.next.next):p=p.next;return this.compare(this.tail.value,L)&&(this.tail=p),P},T.prototype.find=function(L){var P=L.value,p=P===void 0?void 0:P,m=L.callback,S=m===void 0?void 0:m;if(!this.head)return null;for(var y=this.head;y;){if(S&&S(y.value)||p!==void 0&&this.compare(y.value,p))return y;y=y.next}return null},T.prototype.deleteTail=function(){var L=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,L;for(var P=this.head;P.next;)P.next.next?P=P.next:P.next=null;return this.tail=P,L},T.prototype.deleteHead=function(){if(!this.head)return null;var L=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),L},T.prototype.fromArray=function(L){var P=this;return L.forEach(function(p){return P.append(p)}),this},T.prototype.toArray=function(){for(var L=[],P=this.head;P;)L.push(P),P=P.next;return L},T.prototype.reverse=function(){for(var L=this.head,P=null,p=null;L;)p=L.next,L.next=P,P=L,L=p;this.tail=this.head,this.head=P},T.prototype.toString=function(L){return L===void 0&&(L=void 0),this.toArray().map(function(P){return P.toString(L)}).toString()},T}(),w=k;z.default=w},893026:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=k(C(488481));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(){function L(){this.linkedList=new x.default}return L.prototype.isEmpty=function(){return!this.linkedList.head},L.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},L.prototype.enqueue=function(P){this.linkedList.append(P)},L.prototype.dequeue=function(){var P=this.linkedList.deleteHead();return P?P.value:null},L.prototype.toString=function(P){return this.linkedList.toString(P)},L}(),T=w;z.default=T},838823:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(){function k(w){this.count=w.length,this.parent={};for(var T=0,L=w;T<L.length;T++){var P=L[T];this.parent[P]=P}}return k.prototype.find=function(w){for(;this.parent[w]!==w;)w=this.parent[w];return w},k.prototype.union=function(w,T){var L=this.find(w),P=this.find(T);L!==P&&(L<P?(this.parent[T]!==T&&this.union(this.parent[T],w),this.parent[T]=this.parent[w]):(this.parent[w]!==w&&this.union(this.parent[w],T),this.parent[w]=this.parent[T]))},k.prototype.connected=function(w,T){return this.find(w)===this.find(T)},k}(),x=C;z.default=x},317892:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.DistanceType=void 0;var C;z.DistanceType=C,function(x){x.EuclideanDistance="euclideanDistance"}(C||(z.DistanceType=C={}))},770643:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.uniqueId=z.getOutEdgesNodeId=z.getNeighbors=z.getEdgesByNodeId=void 0;var C=function(L,P,p){P===void 0&&(P=[]);var m=P.filter(function(A){return A.source===L||A.target===L});if(p==="target"){var S=function(E){return E.source===L};return m.filter(S).map(function(A){return A.target})}if(p==="source"){var y=function(E){return E.target===L};return m.filter(y).map(function(A){return A.source})}var g=function(E){return E.source===L?E.target:E.source};return m.map(g)};z.getNeighbors=C;var x=function(L,P){return P.filter(function(p){return p.source===L})};z.getOutEdgesNodeId=x;var k=function(L,P){return P.filter(function(p){return p.source===L||p.target===L})};z.getEdgesByNodeId=k;var w=function(L){L===void 0&&(L=0);var P="".concat(Math.random()).split(".")[1].substr(0,5),p="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(L,"-").concat(P).concat(p)};z.uniqueId=w},526838:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.oneHot=z.getDistance=z.getAllKeyValueMap=z.default=void 0;var x=C(413810),k=C(317892),w=T(C(29741));function T(S){return S&&S.__esModule?S:{default:S}}var L=function(y,g,A){var E=[];g!=null&&g.length?E=g:(y.forEach(function(F){E=E.concat(Object.keys(F))}),E=(0,x.uniq)(E));var D={};return E.forEach(function(F){var Y=[];y.forEach(function(b){b[F]!==void 0&&b[F]!==""&&Y.push(b[F])}),Y.length&&!(A!=null&&A.includes(F))&&(D[F]=(0,x.uniq)(Y))}),D};z.getAllKeyValueMap=L;var P=function(y,g,A){var E=L(y,g,A),D=[];if(!Object.keys(E).length)return D;var F=Object.values(E),Y=F.every(function(b){return b.every(function(h){return typeof h=="number"})});return y.forEach(function(b,h){var $=[];Object.keys(E).forEach(function(U){var W=b[U],V=E[U],H=V.findIndex(function(rt){return W===rt}),q=[];if(Y)q.push(W);else for(var tt=0;tt<V.length;tt++)tt===H?q.push(1):q.push(0);$=$.concat(q)}),D[h]=$}),D};z.oneHot=P;var p=function(y,g,A,E){A===void 0&&(A=k.DistanceType.EuclideanDistance);var D=0;switch(A){case k.DistanceType.EuclideanDistance:D=new w.default(y).euclideanDistance(new w.default(g));break;default:break}return D};z.getDistance=p;var m={getAllKeyValueMap:L,oneHot:P,getDistance:p};z.default=m},103665:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getPropertyWeight=z.getAllSortProperties=z.getAllProperties=z.default=void 0;var x=C(592935),k=function(m,S){m===void 0&&(m=[]),S===void 0&&(S=100);var y={};m.forEach(function(A){A.properties&&Object.keys(A.properties).forEach(function(E){if(E==="id"||!"".concat(A.properties[E]).match(x.secondReg)&&!"".concat(A.properties[E]).match(x.dateReg)&&isNaN(Number(A.properties[E]))){y.hasOwnProperty(E)&&delete y[E];return}y.hasOwnProperty(E)?y[E]+=1:y[E]=1})});var g=Object.keys(y).sort(function(A,E){return y[E]-y[A]});return g.length<S?g:g.slice(0,S)};z.getAllSortProperties=k;var w=function(m,S){return S.map(function(y){return m.hasOwnProperty(y)?m[y]:0})},T=function(m){for(var S=k(m),y=[],g=0;g<m.length;g++)y[g]=w(m[g].properties,S);return y};z.getPropertyWeight=T;var L=function(m,S){S===void 0&&(S=void 0);var y=[];return m.forEach(function(g){S===void 0&&y.push(g),g[S]!==void 0&&y.push(g[S])}),y};z.getAllProperties=L;var P={getAllSortProperties:k,getPropertyWeight:T,getAllProperties:L};z.default=P},29741:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=function(){function T(L){this.arr=L}return T.prototype.getArr=function(){return this.arr||[]},T.prototype.add=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]+p[S];return new T(m)}},T.prototype.subtract=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]-p[S];return new T(m)}},T.prototype.avg=function(L){var P=[];if(L!==0)for(var p in this.arr)P[p]=this.arr[p]/L;return new T(P)},T.prototype.negate=function(){var L=[];for(var P in this.arr)L[P]=-this.arr[P];return new T(L)},T.prototype.squareEuclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return m}},T.prototype.euclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return Math.sqrt(m)}else console.error("The two vectors are unequal in length.")},T.prototype.normalize=function(){var L=[],P=(0,x.clone)(this.arr);P.sort(function(y,g){return y-g});var p=P[P.length-1],m=P[0];for(var S in this.arr)L[S]=(this.arr[S]-m)/(p-m);return new T(L)},T.prototype.norm2=function(){var L;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return 0;var P=0;for(var p in this.arr)P+=Math.pow(this.arr[p],2);return Math.sqrt(P)},T.prototype.dot=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=this.arr[S]*L.arr[S];return m}else console.error("The two vectors are unequal in length.")},T.prototype.equal=function(L){var P,p=L.arr;if(((P=this.arr)===null||P===void 0?void 0:P.length)!==(p==null?void 0:p.length))return!1;for(var m in this.arr)if(this.arr[m]!==p[m])return!1;return!0},T}(),w=k;z.default=w},831656:function(Ve,z,C){"use strict";function x(U){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},x(U)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDI",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(z,"breadthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(z,"connectedComponent",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(z,"depthFirstSearch",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(z,"detectCycle",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(z,"dijkstra",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(z,"findAllPath",{enumerable:!0,get:function(){return S.findAllPath}}),Object.defineProperty(z,"findShortestPath",{enumerable:!0,get:function(){return S.findShortestPath}}),Object.defineProperty(z,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(z,"getAdjMatrix",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(z,"getDegree",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(z,"getInDegree",{enumerable:!0,get:function(){return L.getInDegree}}),Object.defineProperty(z,"getNeighbors",{enumerable:!0,get:function(){return Y.getNeighbors}}),Object.defineProperty(z,"getOutDegree",{enumerable:!0,get:function(){return L.getOutDegree}}),Object.defineProperty(z,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(z,"louvain",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(z,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(z,"pageRank",{enumerable:!0,get:function(){return D.default}});var k=$(C(62238)),w=$(C(683764)),T=$(C(759527)),L=h(C(182556)),P=$(C(994282)),p=$(C(45891)),m=$(C(878089)),S=C(241727),y=$(C(975033)),g=$(C(505170)),A=$(C(135179)),E=$(C(689454)),D=$(C(274926)),F=$(C(882812)),Y=C(770643);function b(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(b=function(q){return q?V:W})(U)}function h(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||x(U)!=="object"&&typeof U!="function")return{default:U};var V=b(W);if(V&&V.has(U))return V.get(U);var H={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in U)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(U,tt)){var rt=q?Object.getOwnPropertyDescriptor(U,tt):null;rt&&(rt.get||rt.set)?Object.defineProperty(H,tt,rt):H[tt]=U[tt]}return H.default=U,V&&V.set(U,H),H}function $(U){return U&&U.__esModule?U:{default:U}}},66044:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.MESSAGE=z.ALGORITHM=void 0;var C={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.ALGORITHM=C;var x={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.MESSAGE=x},70585:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(66044),k=w(C(612067));function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p){return function(){for(var m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];return new Promise(function(y,g){var A=new k.default;A.postMessage({_algorithmType:p,data:m}),A.onmessage=function(E){var D=E.data,F=D.data,Y=D._algorithmType;x.MESSAGE.SUCCESS===Y?y(F):g(),A.terminate()}})}},L=T;z.default=L},430485:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.pageRankAsync=z.minimumSpanningTreeAsync=z.louvainAsync=z.labelPropagationAsync=z.getOutDegreeAsync=z.getNeighborsAsync=z.getInDegreeAsync=z.getDegreeAsync=z.getAdjMatrixAsync=z.floydWarshallAsync=z.findShortestPathAsync=z.findAllPathAsync=z.dijkstraAsync=z.detectCycleAsync=z.detectAllUndirectedCycleAsync=z.detectAllDirectedCycleAsync=z.detectAllCyclesAsync=z.connectedComponentAsync=z.GADDIAsync=void 0;var x=w(C(70585)),k=C(66044);function w(H){return H&&H.__esModule?H:{default:H}}var T=function(q,tt){return(0,x.default)(k.ALGORITHM.getAdjMatrix).apply(void 0,[q,tt])};z.getAdjMatrixAsync=T;var L=function(q,tt){return(0,x.default)(k.ALGORITHM.connectedComponent).apply(void 0,[q,tt])};z.connectedComponentAsync=L;var P=function(q){return(0,x.default)(k.ALGORITHM.getDegree)(q)};z.getDegreeAsync=P;var p=function(q,tt){return(0,x.default)(k.ALGORITHM.getInDegree)(q,tt)};z.getInDegreeAsync=p;var m=function(q,tt){return(0,x.default)(k.ALGORITHM.getOutDegree)(q,tt)};z.getOutDegreeAsync=m;var S=function(q){return(0,x.default)(k.ALGORITHM.detectCycle)(q)};z.detectCycleAsync=S;var y=function(q){return(0,x.default)(k.ALGORITHM.detectAllCycles)(q)};z.detectAllCyclesAsync=y;var g=function(q){return(0,x.default)(k.ALGORITHM.detectAllDirectedCycle)(q)};z.detectAllDirectedCycleAsync=g;var A=function(q){return(0,x.default)(k.ALGORITHM.detectAllUndirectedCycle)(q)};z.detectAllUndirectedCycleAsync=A;var E=function(q,tt,rt,ft){return(0,x.default)(k.ALGORITHM.dijkstra).apply(void 0,[q,tt,rt,ft])};z.dijkstraAsync=E;var D=function(q,tt,rt,ft){return(0,x.default)(k.ALGORITHM.findAllPath).apply(void 0,[q,tt,rt,ft])};z.findAllPathAsync=D;var F=function(q,tt,rt,ft,it){return(0,x.default)(k.ALGORITHM.findShortestPath).apply(void 0,[q,tt,rt,ft,it])};z.findShortestPathAsync=F;var Y=function(q,tt){return(0,x.default)(k.ALGORITHM.floydWarshall).apply(void 0,[q,tt])};z.floydWarshallAsync=Y;var b=function(q,tt,rt,ft){return ft===void 0&&(ft=1e3),(0,x.default)(k.ALGORITHM.labelPropagation)(q,tt,rt,ft)};z.labelPropagationAsync=b;var h=function(q,tt,rt,ft){return(0,x.default)(k.ALGORITHM.louvain)(q,tt,rt,ft)};z.louvainAsync=h;var $=function(q,tt,rt){return(0,x.default)(k.ALGORITHM.minimumSpanningTree).apply(void 0,[q,tt,rt])};z.minimumSpanningTreeAsync=$;var U=function(q,tt,rt){return(0,x.default)(k.ALGORITHM.pageRank).apply(void 0,[q,tt,rt])};z.pageRankAsync=U;var W=function(q,tt,rt){return(0,x.default)(k.ALGORITHM.getNeighbors).apply(void 0,[q,tt,rt])};z.getNeighborsAsync=W;var V=function(q,tt,rt,ft,it,bt,gt){return rt===void 0&&(rt=!1),bt===void 0&&(bt="cluster"),gt===void 0&&(gt="cluster"),(0,x.default)(k.ALGORITHM.GADDI).apply(void 0,[q,tt,rt,ft,it,bt,gt])};z.GADDIAsync=V},612067:function(Ve,z,C){"use strict";function x(m){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},x(m)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=L(C(831656)),w=C(66044);function T(m){if(typeof WeakMap!="function")return null;var S=new WeakMap,y=new WeakMap;return(T=function(A){return A?y:S})(m)}function L(m,S){if(!S&&m&&m.__esModule)return m;if(m===null||x(m)!=="object"&&typeof m!="function")return{default:m};var y=T(S);if(y&&y.has(m))return y.get(m);var g={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var D=A?Object.getOwnPropertyDescriptor(m,E):null;D&&(D.get||D.set)?Object.defineProperty(g,E,D):g[E]=m[E]}return g.default=m,y&&y.set(m,g),g}var P=typeof self!="undefined"?self:{};P.onmessage=function(m){var S=m.data,y=S._algorithmType,g=S.data;if(y){if(typeof k[y]=="function"){var A=k[y].apply(k,g);P.postMessage({_algorithmType:w.MESSAGE.SUCCESS,data:A});return}P.postMessage({_algorithmType:w.MESSAGE.FAILURE})}};var p=null;z.default=p},901029:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Kernel:function(){return bt},World:function(){return jn}});var x=C(115861),k=C(204942),w=C(215671),T=C(143144),L=C(936719),P=C.n(L),p=C(281763),m=C.n(p),S=C(701469),y=C.n(S),g=C(364687),A=C.n(g),E=null,D=1;function F(){return D++}var Y=null,b=null,h;(function(at){at[at.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",at[at.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",at[at.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",at[at.POINTS=0]="POINTS",at[at.LINES=1]="LINES",at[at.LINE_LOOP=2]="LINE_LOOP",at[at.LINE_STRIP=3]="LINE_STRIP",at[at.TRIANGLES=4]="TRIANGLES",at[at.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",at[at.TRIANGLE_FAN=6]="TRIANGLE_FAN",at[at.ZERO=0]="ZERO",at[at.ONE=1]="ONE",at[at.SRC_COLOR=768]="SRC_COLOR",at[at.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",at[at.SRC_ALPHA=770]="SRC_ALPHA",at[at.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",at[at.DST_ALPHA=772]="DST_ALPHA",at[at.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",at[at.DST_COLOR=774]="DST_COLOR",at[at.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",at[at.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",at[at.FUNC_ADD=32774]="FUNC_ADD",at[at.BLEND_EQUATION=32777]="BLEND_EQUATION",at[at.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",at[at.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",at[at.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",at[at.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",at[at.MAX_EXT=32776]="MAX_EXT",at[at.MIN_EXT=32775]="MIN_EXT",at[at.BLEND_DST_RGB=32968]="BLEND_DST_RGB",at[at.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",at[at.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",at[at.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",at[at.CONSTANT_COLOR=32769]="CONSTANT_COLOR",at[at.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",at[at.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",at[at.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",at[at.BLEND_COLOR=32773]="BLEND_COLOR",at[at.ARRAY_BUFFER=34962]="ARRAY_BUFFER",at[at.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",at[at.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",at[at.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",at[at.STREAM_DRAW=35040]="STREAM_DRAW",at[at.STATIC_DRAW=35044]="STATIC_DRAW",at[at.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",at[at.BUFFER_SIZE=34660]="BUFFER_SIZE",at[at.BUFFER_USAGE=34661]="BUFFER_USAGE",at[at.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",at[at.FRONT=1028]="FRONT",at[at.BACK=1029]="BACK",at[at.FRONT_AND_BACK=1032]="FRONT_AND_BACK",at[at.CULL_FACE=2884]="CULL_FACE",at[at.BLEND=3042]="BLEND",at[at.DITHER=3024]="DITHER",at[at.STENCIL_TEST=2960]="STENCIL_TEST",at[at.DEPTH_TEST=2929]="DEPTH_TEST",at[at.SCISSOR_TEST=3089]="SCISSOR_TEST",at[at.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",at[at.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",at[at.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",at[at.NO_ERROR=0]="NO_ERROR",at[at.INVALID_ENUM=1280]="INVALID_ENUM",at[at.INVALID_VALUE=1281]="INVALID_VALUE",at[at.INVALID_OPERATION=1282]="INVALID_OPERATION",at[at.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",at[at.CW=2304]="CW",at[at.CCW=2305]="CCW",at[at.LINE_WIDTH=2849]="LINE_WIDTH",at[at.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",at[at.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",at[at.CULL_FACE_MODE=2885]="CULL_FACE_MODE",at[at.FRONT_FACE=2886]="FRONT_FACE",at[at.DEPTH_RANGE=2928]="DEPTH_RANGE",at[at.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",at[at.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",at[at.DEPTH_FUNC=2932]="DEPTH_FUNC",at[at.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",at[at.STENCIL_FUNC=2962]="STENCIL_FUNC",at[at.STENCIL_FAIL=2964]="STENCIL_FAIL",at[at.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",at[at.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",at[at.STENCIL_REF=2967]="STENCIL_REF",at[at.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",at[at.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",at[at.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",at[at.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",at[at.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",at[at.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",at[at.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",at[at.VIEWPORT=2978]="VIEWPORT",at[at.SCISSOR_BOX=3088]="SCISSOR_BOX",at[at.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",at[at.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",at[at.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",at[at.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",at[at.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",at[at.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",at[at.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",at[at.RED_BITS=3410]="RED_BITS",at[at.GREEN_BITS=3411]="GREEN_BITS",at[at.BLUE_BITS=3412]="BLUE_BITS",at[at.ALPHA_BITS=3413]="ALPHA_BITS",at[at.DEPTH_BITS=3414]="DEPTH_BITS",at[at.STENCIL_BITS=3415]="STENCIL_BITS",at[at.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",at[at.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",at[at.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",at[at.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",at[at.SAMPLES=32937]="SAMPLES",at[at.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",at[at.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",at[at.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",at[at.DONT_CARE=4352]="DONT_CARE",at[at.FASTEST=4353]="FASTEST",at[at.NICEST=4354]="NICEST",at[at.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",at[at.BYTE=5120]="BYTE",at[at.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",at[at.SHORT=5122]="SHORT",at[at.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",at[at.INT=5124]="INT",at[at.UNSIGNED_INT=5125]="UNSIGNED_INT",at[at.FLOAT=5126]="FLOAT",at[at.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",at[at.ALPHA=6406]="ALPHA",at[at.RGB=6407]="RGB",at[at.RGBA=6408]="RGBA",at[at.LUMINANCE=6409]="LUMINANCE",at[at.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",at[at.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",at[at.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",at[at.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",at[at.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",at[at.VERTEX_SHADER=35633]="VERTEX_SHADER",at[at.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",at[at.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",at[at.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",at[at.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",at[at.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",at[at.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",at[at.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",at[at.SHADER_TYPE=35663]="SHADER_TYPE",at[at.DELETE_STATUS=35712]="DELETE_STATUS",at[at.LINK_STATUS=35714]="LINK_STATUS",at[at.VALIDATE_STATUS=35715]="VALIDATE_STATUS",at[at.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",at[at.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",at[at.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",at[at.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",at[at.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",at[at.NEVER=512]="NEVER",at[at.LESS=513]="LESS",at[at.EQUAL=514]="EQUAL",at[at.LEQUAL=515]="LEQUAL",at[at.GREATER=516]="GREATER",at[at.NOTEQUAL=517]="NOTEQUAL",at[at.GEQUAL=518]="GEQUAL",at[at.ALWAYS=519]="ALWAYS",at[at.KEEP=7680]="KEEP",at[at.REPLACE=7681]="REPLACE",at[at.INCR=7682]="INCR",at[at.DECR=7683]="DECR",at[at.INVERT=5386]="INVERT",at[at.INCR_WRAP=34055]="INCR_WRAP",at[at.DECR_WRAP=34056]="DECR_WRAP",at[at.VENDOR=7936]="VENDOR",at[at.RENDERER=7937]="RENDERER",at[at.VERSION=7938]="VERSION",at[at.NEAREST=9728]="NEAREST",at[at.LINEAR=9729]="LINEAR",at[at.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",at[at.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",at[at.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",at[at.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",at[at.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",at[at.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",at[at.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",at[at.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",at[at.TEXTURE_2D=3553]="TEXTURE_2D",at[at.TEXTURE=5890]="TEXTURE",at[at.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",at[at.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",at[at.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",at[at.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",at[at.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",at[at.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",at[at.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",at[at.TEXTURE0=33984]="TEXTURE0",at[at.TEXTURE1=33985]="TEXTURE1",at[at.TEXTURE2=33986]="TEXTURE2",at[at.TEXTURE3=33987]="TEXTURE3",at[at.TEXTURE4=33988]="TEXTURE4",at[at.TEXTURE5=33989]="TEXTURE5",at[at.TEXTURE6=33990]="TEXTURE6",at[at.TEXTURE7=33991]="TEXTURE7",at[at.TEXTURE8=33992]="TEXTURE8",at[at.TEXTURE9=33993]="TEXTURE9",at[at.TEXTURE10=33994]="TEXTURE10",at[at.TEXTURE11=33995]="TEXTURE11",at[at.TEXTURE12=33996]="TEXTURE12",at[at.TEXTURE13=33997]="TEXTURE13",at[at.TEXTURE14=33998]="TEXTURE14",at[at.TEXTURE15=33999]="TEXTURE15",at[at.TEXTURE16=34e3]="TEXTURE16",at[at.TEXTURE17=34001]="TEXTURE17",at[at.TEXTURE18=34002]="TEXTURE18",at[at.TEXTURE19=34003]="TEXTURE19",at[at.TEXTURE20=34004]="TEXTURE20",at[at.TEXTURE21=34005]="TEXTURE21",at[at.TEXTURE22=34006]="TEXTURE22",at[at.TEXTURE23=34007]="TEXTURE23",at[at.TEXTURE24=34008]="TEXTURE24",at[at.TEXTURE25=34009]="TEXTURE25",at[at.TEXTURE26=34010]="TEXTURE26",at[at.TEXTURE27=34011]="TEXTURE27",at[at.TEXTURE28=34012]="TEXTURE28",at[at.TEXTURE29=34013]="TEXTURE29",at[at.TEXTURE30=34014]="TEXTURE30",at[at.TEXTURE31=34015]="TEXTURE31",at[at.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",at[at.REPEAT=10497]="REPEAT",at[at.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",at[at.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",at[at.FLOAT_VEC2=35664]="FLOAT_VEC2",at[at.FLOAT_VEC3=35665]="FLOAT_VEC3",at[at.FLOAT_VEC4=35666]="FLOAT_VEC4",at[at.INT_VEC2=35667]="INT_VEC2",at[at.INT_VEC3=35668]="INT_VEC3",at[at.INT_VEC4=35669]="INT_VEC4",at[at.BOOL=35670]="BOOL",at[at.BOOL_VEC2=35671]="BOOL_VEC2",at[at.BOOL_VEC3=35672]="BOOL_VEC3",at[at.BOOL_VEC4=35673]="BOOL_VEC4",at[at.FLOAT_MAT2=35674]="FLOAT_MAT2",at[at.FLOAT_MAT3=35675]="FLOAT_MAT3",at[at.FLOAT_MAT4=35676]="FLOAT_MAT4",at[at.SAMPLER_2D=35678]="SAMPLER_2D",at[at.SAMPLER_CUBE=35680]="SAMPLER_CUBE",at[at.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",at[at.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",at[at.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",at[at.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",at[at.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",at[at.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",at[at.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",at[at.COMPILE_STATUS=35713]="COMPILE_STATUS",at[at.LOW_FLOAT=36336]="LOW_FLOAT",at[at.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",at[at.HIGH_FLOAT=36338]="HIGH_FLOAT",at[at.LOW_INT=36339]="LOW_INT",at[at.MEDIUM_INT=36340]="MEDIUM_INT",at[at.HIGH_INT=36341]="HIGH_INT",at[at.FRAMEBUFFER=36160]="FRAMEBUFFER",at[at.RENDERBUFFER=36161]="RENDERBUFFER",at[at.RGBA4=32854]="RGBA4",at[at.RGB5_A1=32855]="RGB5_A1",at[at.RGB565=36194]="RGB565",at[at.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",at[at.STENCIL_INDEX=6401]="STENCIL_INDEX",at[at.STENCIL_INDEX8=36168]="STENCIL_INDEX8",at[at.DEPTH_STENCIL=34041]="DEPTH_STENCIL",at[at.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",at[at.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",at[at.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",at[at.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",at[at.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",at[at.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",at[at.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",at[at.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",at[at.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",at[at.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",at[at.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",at[at.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",at[at.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",at[at.NONE=0]="NONE",at[at.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",at[at.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",at[at.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",at[at.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",at[at.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",at[at.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",at[at.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",at[at.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",at[at.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",at[at.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",at[at.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",at[at.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",at[at.COPY_SRC=1]="COPY_SRC",at[at.COPY_DST=2]="COPY_DST",at[at.SAMPLED=4]="SAMPLED",at[at.STORAGE=8]="STORAGE",at[at.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(h||(h={}));var $=function(){function at(){(0,w.Z)(this,at),this.config=void 0}return(0,T.Z)(at,[{key:"get",value:function(){return this.config}},{key:"set",value:function(Ht){this.config=Ht}}]),at}(),U=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),W;(function(at){at.Void="Void",at.Boolean="Boolean",at.Float="Float",at.Uint32="Uint32",at.Int32="Int32",at.Vector="Vector",at.Vector2Float="vec2<f32>",at.Vector3Float="vec3<f32>",at.Vector4Float="vec4<f32>",at.Vector2Boolean="vec2<bool>",at.Vector3Boolean="vec3<bool>",at.Vector4Boolean="vec4<bool>",at.Vector2Uint="vec2<u32>",at.Vector3Uint="vec3<u32>",at.Vector4Uint="vec4<u32>",at.Vector2Int="vec2<i32>",at.Vector3Int="vec3<i32>",at.Vector4Int="vec4<i32>",at.Matrix="Matrix",at.Matrix3x3Float="mat3x3<f32>",at.Matrix4x4Float="mat4x4<i32>",at.Struct="Struct",at.FloatArray="Float[]",at.Vector4FloatArray="vec4<f32>[]"})(W||(W={}));var V;(function(at){at.Program="Program",at.Identifier="Identifier",at.VariableDeclaration="VariableDeclaration",at.BlockStatement="BlockStatement",at.ReturnStatement="ReturnStatement",at.FunctionDeclaration="FunctionDeclaration",at.VariableDeclarator="VariableDeclarator",at.AssignmentExpression="AssignmentExpression",at.LogicalExpression="LogicalExpression",at.BinaryExpression="BinaryExpression",at.ArrayExpression="ArrayExpression",at.UnaryExpression="UnaryExpression",at.UpdateExpression="UpdateExpression",at.FunctionExpression="FunctionExpression",at.MemberExpression="MemberExpression",at.ConditionalExpression="ConditionalExpression",at.ExpressionStatement="ExpressionStatement",at.CallExpression="CallExpression",at.NumThreadStatement="NumThreadStatement",at.StorageStatement="StorageStatement",at.DoWhileStatement="DoWhileStatement",at.WhileStatement="WhileStatement",at.ForStatement="ForStatement",at.BreakStatement="BreakStatement",at.ContinueStatement="ContinueStatement",at.IfStatement="IfStatement",at.ImportedFunctionStatement="ImportedFunctionStatement"})(V||(V={}));var H;(function(at){at.Input="Input",at.Output="Output",at.Uniform="Uniform",at.Workgroup="Workgroup",at.UniformConstant="UniformConstant",at.Image="Image",at.StorageBuffer="StorageBuffer",at.Private="Private",at.Function="Function"})(H||(H={}));var q;(function(at){at.GLSL100="GLSL100",at.GLSL450="GLSL450",at.WGSL="WGSL"})(q||(q={}));var tt="__DefineValuePlaceholder__";function rt(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ft(at,Je){var Ht=Object.keys(at);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(at);Je&&(te=te.filter(function(wt){return Object.getOwnPropertyDescriptor(at,wt).enumerable})),Ht.push.apply(Ht,te)}return Ht}function it(at){for(var Je=1;Je<arguments.length;Je++){var Ht=arguments[Je]!=null?arguments[Je]:{};Je%2?ft(Object(Ht),!0).forEach(function(te){(0,k.Z)(at,te,Ht[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Ht)):ft(Object(Ht)).forEach(function(te){Object.defineProperty(at,te,Object.getOwnPropertyDescriptor(Ht,te))})}return at}var bt=function(){function at(Je,Ht){(0,w.Z)(this,at),this.engine=Je,this.configService=Ht,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,T.Z)(at,[{key:"init",value:function(){var Ht=this.configService.get(),te=Ht.canvas,wt=Ht.engineOptions;this.initPromise=this.engine.init(it({canvas:te||rt(),antialiasing:!1},wt))}},{key:"setBundle",value:function(Ht){this.compiledBundle=JSON.parse(JSON.stringify(Ht))}},{key:"setDispatch",value:function(Ht){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=Ht),this}},{key:"setMaxIteration",value:function(Ht){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=Ht),this}},{key:"setBinding",value:function(Ht,te){var wt=this;if(typeof Ht=="string"){var Me=m()(te)||P()(te)||y()(te);if(this.compiledBundle&&this.compiledBundle.context){var kt=this.compiledBundle.context.defines.find(function(dt){return dt.name===Ht});if(kt)return kt.value=te,this;var qt=this.compiledBundle.context.uniforms.find(function(dt){return dt.name===Ht});qt&&(Me?(qt.data=te,qt.isReferer=!1,qt.storageClass===H.Uniform?this.model&&this.model.updateUniform(Ht,te):this.model&&this.model.updateBuffer(Ht,te)):(qt.isReferer=!0,qt.data=te))}}else Object.keys(Ht).forEach(function(dt){wt.setBinding(dt,Ht[dt])});return this}},{key:"execute",value:function(){var Je=(0,x.Z)(A().mark(function te(){var wt=this,Me,kt,qt=arguments;return A().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(Me=qt.length>0&&qt[0]!==void 0?qt[0]:1,!this.dirty){Ut.next=6;break}return this.compiledBundle.context&&(Me>1?this.compiledBundle.context.maxIteration=Me:this.compiledBundle.context.maxIteration++),Ut.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Q){var ot=Q.isReferer;return ot}).forEach(function(Q){var ot=Q.data,R=Q.name;wt.model.confirmInput(ot.model,R)}),kt=0;kt<Me;kt++)this.model.run();return this.engine.endFrame(),Ut.abrupt("return",this);case 12:case"end":return Ut.stop()}},te,this)}));function Ht(){return Je.apply(this,arguments)}return Ht}()},{key:"getOutput",value:function(){var Je=(0,x.Z)(A().mark(function te(){return A().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.abrupt("return",this.model.readData());case 1:case"end":return Me.stop()}},te,this)}));function Ht(){return Je.apply(this,arguments)}return Ht}()},{key:"compile",value:function(){var Je=(0,x.Z)(A().mark(function te(){var wt,Me,kt;return A().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,this.initPromise;case 2:return wt=it({},this.compiledBundle.context),Me=this.engine.supportWebGPU?this.engine.useWGSL?q.WGSL:q.GLSL450:q.GLSL100,kt=this.compiledBundle.shaders[Me],wt.defines.filter(function(Ut){return Ut.runtime}).forEach(function(Ut){var Q="".concat(tt).concat(Ut.name);kt=kt.replace(Q,"".concat(Ut.value))}),wt.shader=kt,wt.uniforms.forEach(function(Ut){if(!Ut.data&&Ut.storageClass===H.StorageBuffer){var Q=1;Ut.type===W.FloatArray?Q=1:Ut.type===W.Vector4FloatArray&&(Q=4),Ut.data=new Float32Array(wt.output.length*Q).fill(0)}}),this.compiledBundle.context=wt,dt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=dt.sent;case 12:case"end":return dt.stop()}},te,this)}));function Ht(){return Je.apply(this,arguments)}return Ht}()}]),at}(),gt=C(481550),Xt=C.n(gt),Ct=function(){function at(Je,Ht){(0,w.Z)(this,at),this.attribute=void 0,this.buffer=void 0;var te=Ht.buffer,wt=Ht.offset,Me=Ht.stride,kt=Ht.normalized,qt=Ht.size,dt=Ht.divisor;this.buffer=te,this.attribute={buffer:te.get(),offset:wt||0,stride:Me||0,normalized:kt||!1,divisor:dt||0},qt&&(this.attribute.size=qt)}return(0,T.Z)(at,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(Ht){this.buffer.subData(Ht)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),at}(),At,Z,J,yt,_t,nt,vt,It,Pt,St,Dt,Qt,ue,ie,Lt=(At={},(0,k.Z)(At,h.POINTS,"points"),(0,k.Z)(At,h.LINES,"lines"),(0,k.Z)(At,h.LINE_LOOP,"line loop"),(0,k.Z)(At,h.LINE_STRIP,"line strip"),(0,k.Z)(At,h.TRIANGLES,"triangles"),(0,k.Z)(At,h.TRIANGLE_FAN,"triangle fan"),(0,k.Z)(At,h.TRIANGLE_STRIP,"triangle strip"),At),ne=(Z={},(0,k.Z)(Z,h.STATIC_DRAW,"static"),(0,k.Z)(Z,h.DYNAMIC_DRAW,"dynamic"),(0,k.Z)(Z,h.STREAM_DRAW,"stream"),Z),ve=(J={},(0,k.Z)(J,h.BYTE,"int8"),(0,k.Z)(J,h.UNSIGNED_INT,"int16"),(0,k.Z)(J,h.INT,"int32"),(0,k.Z)(J,h.UNSIGNED_BYTE,"uint8"),(0,k.Z)(J,h.UNSIGNED_SHORT,"uint16"),(0,k.Z)(J,h.UNSIGNED_INT,"uint32"),(0,k.Z)(J,h.FLOAT,"float"),J),Wt=(yt={},(0,k.Z)(yt,h.ALPHA,"alpha"),(0,k.Z)(yt,h.LUMINANCE,"luminance"),(0,k.Z)(yt,h.LUMINANCE_ALPHA,"luminance alpha"),(0,k.Z)(yt,h.RGB,"rgb"),(0,k.Z)(yt,h.RGBA,"rgba"),(0,k.Z)(yt,h.RGBA4,"rgba4"),(0,k.Z)(yt,h.RGB5_A1,"rgb5 a1"),(0,k.Z)(yt,h.RGB565,"rgb565"),(0,k.Z)(yt,h.DEPTH_COMPONENT,"depth"),(0,k.Z)(yt,h.DEPTH_STENCIL,"depth stencil"),yt),ae=(_t={},(0,k.Z)(_t,h.DONT_CARE,"dont care"),(0,k.Z)(_t,h.NICEST,"nice"),(0,k.Z)(_t,h.FASTEST,"fast"),_t),Ce=(nt={},(0,k.Z)(nt,h.NEAREST,"nearest"),(0,k.Z)(nt,h.LINEAR,"linear"),(0,k.Z)(nt,h.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,k.Z)(nt,h.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,k.Z)(nt,h.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,k.Z)(nt,h.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),nt),xe=(vt={},(0,k.Z)(vt,h.REPEAT,"repeat"),(0,k.Z)(vt,h.CLAMP_TO_EDGE,"clamp"),(0,k.Z)(vt,h.MIRRORED_REPEAT,"mirror"),vt),Jt=(It={},(0,k.Z)(It,h.NONE,"none"),(0,k.Z)(It,h.BROWSER_DEFAULT_WEBGL,"browser"),It),we=(Pt={},(0,k.Z)(Pt,h.NEVER,"never"),(0,k.Z)(Pt,h.ALWAYS,"always"),(0,k.Z)(Pt,h.LESS,"less"),(0,k.Z)(Pt,h.LEQUAL,"lequal"),(0,k.Z)(Pt,h.GREATER,"greater"),(0,k.Z)(Pt,h.GEQUAL,"gequal"),(0,k.Z)(Pt,h.EQUAL,"equal"),(0,k.Z)(Pt,h.NOTEQUAL,"notequal"),Pt),Tt=(St={},(0,k.Z)(St,h.FUNC_ADD,"add"),(0,k.Z)(St,h.MIN_EXT,"min"),(0,k.Z)(St,h.MAX_EXT,"max"),(0,k.Z)(St,h.FUNC_SUBTRACT,"subtract"),(0,k.Z)(St,h.FUNC_REVERSE_SUBTRACT,"reverse subtract"),St),Pe=(Dt={},(0,k.Z)(Dt,h.ZERO,"zero"),(0,k.Z)(Dt,h.ONE,"one"),(0,k.Z)(Dt,h.SRC_COLOR,"src color"),(0,k.Z)(Dt,h.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,k.Z)(Dt,h.SRC_ALPHA,"src alpha"),(0,k.Z)(Dt,h.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,k.Z)(Dt,h.DST_COLOR,"dst color"),(0,k.Z)(Dt,h.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,k.Z)(Dt,h.DST_ALPHA,"dst alpha"),(0,k.Z)(Dt,h.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,k.Z)(Dt,h.CONSTANT_COLOR,"constant color"),(0,k.Z)(Dt,h.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,k.Z)(Dt,h.CONSTANT_ALPHA,"constant alpha"),(0,k.Z)(Dt,h.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,k.Z)(Dt,h.SRC_ALPHA_SATURATE,"src alpha saturate"),Dt),_r=(Qt={},(0,k.Z)(Qt,h.NEVER,"never"),(0,k.Z)(Qt,h.ALWAYS,"always"),(0,k.Z)(Qt,h.LESS,"less"),(0,k.Z)(Qt,h.LEQUAL,"lequal"),(0,k.Z)(Qt,h.GREATER,"greater"),(0,k.Z)(Qt,h.GEQUAL,"gequal"),(0,k.Z)(Qt,h.EQUAL,"equal"),(0,k.Z)(Qt,h.NOTEQUAL,"notequal"),Qt),Ar=(ue={},(0,k.Z)(ue,h.ZERO,"zero"),(0,k.Z)(ue,h.KEEP,"keep"),(0,k.Z)(ue,h.REPLACE,"replace"),(0,k.Z)(ue,h.INVERT,"invert"),(0,k.Z)(ue,h.INCR,"increment"),(0,k.Z)(ue,h.DECR,"decrement"),(0,k.Z)(ue,h.INCR_WRAP,"increment wrap"),(0,k.Z)(ue,h.DECR_WRAP,"decrement wrap"),ue),Or=(ie={},(0,k.Z)(ie,h.FRONT,"front"),(0,k.Z)(ie,h.BACK,"back"),ie),Br=function(){function at(Je,Ht){(0,w.Z)(this,at),this.buffer=void 0;var te=Ht.data,wt=Ht.usage,Me=Ht.type;this.buffer=Je.buffer({data:te,usage:ne[wt||h.STATIC_DRAW],type:ve[Me||h.UNSIGNED_BYTE]})}return(0,T.Z)(at,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(Ht){var te=Ht.data,wt=Ht.offset;this.buffer.subdata(te,wt)}}]),at}(),cn=C(974902);function an(at,Je){var Ht=Object.keys(at);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(at);Je&&(te=te.filter(function(wt){return Object.getOwnPropertyDescriptor(at,wt).enumerable})),Ht.push.apply(Ht,te)}return Ht}function Dn(at){for(var Je=1;Je<arguments.length;Je++){var Ht=arguments[Je]!=null?arguments[Je]:{};Je%2?an(Object(Ht),!0).forEach(function(te){(0,k.Z)(at,te,Ht[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Ht)):an(Object(Ht)).forEach(function(te){Object.defineProperty(at,te,Object.getOwnPropertyDescriptor(Ht,te))})}return at}var Un=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Xn=0,xr=!1,$e=function(){function at(Je,Ht){var te=this;(0,w.Z)(this,at),this.reGl=Je,this.context=Ht,this.entity=F(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var wt={};this.context.uniforms.forEach(function(Ut){var Q=Ut.name,ot=Ut.type,R=Ut.data,M=Ut.isReferer,O=Ut.storageClass;if(O===H.StorageBuffer){if(M)te.textureCache[Q]={data:void 0},wt["".concat(Q,"Size")]=function(){return R.compiledBundle.context.output.textureSize};else{te.textureCache[Q]=te.calcDataTexture(Q,ot,R);var X=te.textureCache[Q],mt=X.textureWidth,Ft=X.isOutput;wt["".concat(Q,"Size")]=[mt,mt],Ft&&(te.outputTextureName=Q,te.context.needPingpong&&(te.outputTextureName="".concat(Q,"Output"),te.textureCache[te.outputTextureName]=te.calcDataTexture(Q,ot,R)))}wt[Q]=function(){return xr&&console.log("[".concat(te.entity,"]: ").concat(Q," ").concat(te.textureCache[Q].id)),te.textureCache[Q].texture}}else if(O===H.Uniform){if(R&&(Array.isArray(R)||P()(R))&&R.length>16)throw new Error("invalid data type ".concat(ot));wt[Q]=function(){return Ut.data}}});var Me=this.getOuputDataTexture(),kt=Me.textureWidth,qt=Me.texelCount;wt.u_OutputTextureSize=[kt,kt],wt.u_OutputTexelCount=qt,this.context.output.textureSize=[kt,kt];var dt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:wt,vert:Un,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(dt)}return(0,T.Z)(at,[{key:"run",value:function(){var Ht=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){Ht.computeCommand()}),xr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Je=(0,x.Z)(A().mark(function te(){var wt=this,Me,kt,qt,dt,Ut,Q,ot,R;return A().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Me=wt.reGl.read()}),!Me){O.next=6;break}if(kt=this.getOuputDataTexture(),qt=kt.originalDataLength,dt=kt.elementsPerTexel,Ut=kt.typedArrayConstructor,Q=Ut===void 0?Float32Array:Ut,ot=[],dt!==4)for(R=0;R<Me.length;R+=4)dt===1?ot.push(Me[R]):dt===2?ot.push(Me[R],Me[R+1]):ot.push(Me[R],Me[R+1],Me[R+2]);else ot=Me;return O.abrupt("return",new Q(ot.slice(0,qt)));case 6:return O.abrupt("return",new Float32Array);case 7:case"end":return O.stop()}},te,this)}));function Ht(){return Je.apply(this,arguments)}return Ht}()},{key:"confirmInput",value:function(Ht,te){var wt;this.entity===Ht.entity?(this.dynamicPingpong=!0,wt=this):wt=Ht,this.textureCache[te].id=wt.getOuputDataTexture().id,this.textureCache[te].texture=wt.getOuputDataTexture().texture,xr&&console.log("[".concat(this.entity,"]: confirm input ").concat(te," from model ").concat(wt.entity,", ").concat(wt.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(Ht,te){var wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Me=this.context.uniforms.find(function(Ut){var Q=Ut.name;return Q===Ht});if(Me){var kt=this.calcDataTexture(Ht,Me.type,te),qt=kt.texture,dt=kt.data;this.textureCache[Ht].data=dt,this.textureCache[Ht].texture=qt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var Ht=this.context.output.name;this.textureCache[Ht].id=this.getOuputDataTexture().id,this.textureCache[Ht].texture=this.getOuputDataTexture().texture}var te=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=te,xr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var Ht=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=Ht}},{key:"cloneDataTexture",value:function(Ht){var te=Ht.data,wt=Ht.textureWidth;return Dn(Dn({},Ht),{},{id:Xn++,texture:this.reGl.texture({width:wt,height:wt,data:te,type:"float"})})}},{key:"calcDataTexture",value:function(Ht,te,wt){var Me=1;te===W.Vector4FloatArray&&(Me=4);for(var kt=[],qt=0;qt<wt.length;qt+=Me)Me===1?kt.push(wt[qt],0,0,0):Me===2?kt.push(wt[qt],wt[qt+1],0,0):Me===3?kt.push(wt[qt],wt[qt+1],wt[qt+2],0):Me===4&&kt.push(wt[qt],wt[qt+1],wt[qt+2],wt[qt+3]);var dt=wt.length,Ut=Math.ceil(dt/Me),Q=Math.ceil(Math.sqrt(Ut)),ot=Q*Q;Ut<ot&&kt.push.apply(kt,(0,cn.Z)(new Array((ot-Ut)*4).fill(0)));var R=this.reGl.texture({width:Q,height:Q,data:kt,type:"float"});return{id:Xn++,data:kt,originalDataLength:dt,typedArrayConstructor:P()(wt)?wt.constructor:void 0,textureWidth:Q,texture:R,texelCount:Ut,elementsPerTexel:Me,isOutput:Ht===this.context.output.name}}}]),at}(),Tr=function(){function at(Je,Ht){(0,w.Z)(this,at),this.elements=void 0;var te=Ht.data,wt=Ht.usage,Me=Ht.type,kt=Ht.count;this.elements=Je.elements({data:te,usage:ne[wt||h.STATIC_DRAW],type:ve[Me||h.UNSIGNED_BYTE],count:kt})}return(0,T.Z)(at,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(Ht){var te=Ht.data;this.elements.subdata(te)}},{key:"destroy",value:function(){this.elements.destroy()}}]),at}(),qr=function(){function at(Je,Ht){(0,w.Z)(this,at),this.framebuffer=void 0;var te=Ht.width,wt=Ht.height,Me=Ht.color,kt=Ht.colors,qt=Ht.depth,dt=Ht.stencil,Ut={width:te,height:wt};Array.isArray(kt)&&(Ut.colors=kt.map(function(Q){return Q.get()})),Me&&typeof Me!="boolean"&&(Ut.color=Me.get()),this.framebuffer=Je.framebuffer(Ut)}return(0,T.Z)(at,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(Ht){var te=Ht.width,wt=Ht.height;this.framebuffer.resize(te,wt)}}]),at}(),gn=C(671002),xn=C(968630),Rn=C.n(xn);function Mr(at){var Je={};return Object.keys(at).forEach(function(Ht){dn(Ht,at[Ht],Je,"")}),Je}function dn(at,Je,Ht,te){if(Je===null||typeof Je=="number"||typeof Je=="boolean"||Array.isArray(Je)&&typeof Je[0]=="number"||P()(Je)||Je===""||Je.resize!==void 0){Ht["".concat(te&&te+".").concat(at)]=Je;return}Rn()(Je)&&Object.keys(Je).forEach(function(wt){dn(wt,Je[wt],Ht,"".concat(te&&te+".").concat(at))}),Array.isArray(Je)&&Je.forEach(function(wt,Me){Object.keys(wt).forEach(function(kt){dn(kt,wt[kt],Ht,"".concat(te&&te+".").concat(at,"[").concat(Me,"]"))})})}function hn(at,Je){var Ht=Object.keys(at);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(at);Je&&(te=te.filter(function(wt){return Object.getOwnPropertyDescriptor(at,wt).enumerable})),Ht.push.apply(Ht,te)}return Ht}function sn(at){for(var Je=1;Je<arguments.length;Je++){var Ht=arguments[Je]!=null?arguments[Je]:{};Je%2?hn(Object(Ht),!0).forEach(function(te){(0,k.Z)(at,te,Ht[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(Ht)):hn(Object(Ht)).forEach(function(te){Object.defineProperty(at,te,Object.getOwnPropertyDescriptor(Ht,te))})}return at}var Wn=function(){function at(Je,Ht){(0,w.Z)(this,at),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Je;var te=Ht.vs,wt=Ht.fs,Me=Ht.defines,kt=Ht.attributes,qt=Ht.uniforms,dt=Ht.primitive,Ut=Ht.count,Q=Ht.elements,ot=Ht.depth,R=Ht.blend,M=Ht.stencil,O=Ht.cull,X=Ht.instances,mt=Ht.scissor,Ft=Ht.viewport,Bt={};qt&&(this.uniforms=Mr(qt),Object.keys(qt).forEach(function(Xe){Bt[Xe]=Je.prop(Xe)}));var ee={};Object.keys(kt).forEach(function(Xe){ee[Xe]=kt[Xe].get()});var Le=Me&&this.generateDefines(Me)||"",me={attributes:ee,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Le,`
`).concat(wt),uniforms:Bt,vert:`
`.concat(Le,`
`).concat(te),primitive:Lt[dt===void 0?h.TRIANGLES:dt]};X&&(me.instances=X),Ut&&(me.count=Ut),Q&&(me.elements=Q.get()),mt&&(me.scissor=mt),Ft&&(me.viewport=Ft),this.initDepthDrawParams({depth:ot},me),this.initBlendDrawParams({blend:R},me),this.initStencilDrawParams({stencil:M},me),this.initCullDrawParams({cull:O},me),this.drawCommand=Je(me)}return(0,T.Z)(at,[{key:"addUniforms",value:function(Ht){this.uniforms=sn(sn({},this.uniforms),Mr(Ht))}},{key:"draw",value:function(Ht){var te=sn(sn({},this.uniforms),Mr(Ht.uniforms||{})),wt={};Object.keys(te).forEach(function(Me){var kt=(0,gn.Z)(te[Me]);kt==="boolean"||kt==="number"||Array.isArray(te[Me])||te[Me].BYTES_PER_ELEMENT?wt[Me]=te[Me]:kt==="string"||(wt[Me]=te[Me].get())}),this.drawCommand(wt)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(Ht,te){var wt=Ht.depth;wt&&(te.depth={enable:wt.enable===void 0?!0:!!wt.enable,mask:wt.mask===void 0?!0:!!wt.mask,func:we[wt.func||h.LESS],range:wt.range||[0,1]})}},{key:"initBlendDrawParams",value:function(Ht,te){var wt=Ht.blend;if(wt){var Me=wt.enable,kt=wt.func,qt=wt.equation,dt=wt.color,Ut=dt===void 0?[0,0,0,0]:dt;te.blend={enable:!!Me,func:{srcRGB:Pe[kt&&kt.srcRGB||h.SRC_ALPHA],srcAlpha:Pe[kt&&kt.srcAlpha||h.SRC_ALPHA],dstRGB:Pe[kt&&kt.dstRGB||h.ONE_MINUS_SRC_ALPHA],dstAlpha:Pe[kt&&kt.dstAlpha||h.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Tt[qt&&qt.rgb||h.FUNC_ADD],alpha:Tt[qt&&qt.alpha||h.FUNC_ADD]},color:Ut}}}},{key:"initStencilDrawParams",value:function(Ht,te){var wt=Ht.stencil;if(wt){var Me=wt.enable,kt=wt.mask,qt=kt===void 0?-1:kt,dt=wt.func,Ut=dt===void 0?{cmp:h.ALWAYS,ref:0,mask:-1}:dt,Q=wt.opFront,ot=Q===void 0?{fail:h.KEEP,zfail:h.KEEP,zpass:h.KEEP}:Q,R=wt.opBack,M=R===void 0?{fail:h.KEEP,zfail:h.KEEP,zpass:h.KEEP}:R;te.stencil={enable:!!Me,mask:qt,func:sn(sn({},Ut),{},{cmp:_r[Ut.cmp]}),opFront:{fail:Ar[ot.fail],zfail:Ar[ot.zfail],zpass:Ar[ot.zpass]},opBack:{fail:Ar[M.fail],zfail:Ar[M.zfail],zpass:Ar[M.zpass]}}}}},{key:"initCullDrawParams",value:function(Ht,te){var wt=Ht.cull;if(wt){var Me=wt.enable,kt=wt.face,qt=kt===void 0?h.BACK:kt;te.cull={enable:!!Me,face:Or[qt]}}}},{key:"generateDefines",value:function(Ht){return Object.keys(Ht).map(function(te){return"#define ".concat(te," ").concat(Number(Ht[te]))}).join(`
`)}}]),at}(),Mn=function(){function at(Je,Ht){(0,w.Z)(this,at),this.texture=void 0,this.width=void 0,this.height=void 0;var te=Ht.data,wt=Ht.type,Me=wt===void 0?h.UNSIGNED_BYTE:wt,kt=Ht.width,qt=Ht.height,dt=Ht.flipY,Ut=dt===void 0?!1:dt,Q=Ht.format,ot=Q===void 0?h.RGBA:Q,R=Ht.mipmap,M=R===void 0?!1:R,O=Ht.wrapS,X=O===void 0?h.CLAMP_TO_EDGE:O,mt=Ht.wrapT,Ft=mt===void 0?h.CLAMP_TO_EDGE:mt,Bt=Ht.aniso,ee=Bt===void 0?0:Bt,Le=Ht.alignment,me=Le===void 0?1:Le,Xe=Ht.premultiplyAlpha,pr=Xe===void 0?!1:Xe,Ze=Ht.mag,Pr=Ze===void 0?h.NEAREST:Ze,un=Ht.min,Ke=un===void 0?h.NEAREST:un,lr=Ht.colorSpace,Rr=lr===void 0?h.BROWSER_DEFAULT_WEBGL:lr;this.width=kt,this.height=qt;var Dr={width:kt,height:qt,type:ve[Me],format:Wt[ot],wrapS:xe[X],wrapT:xe[Ft],mag:Ce[Pr],min:Ce[Ke],alignment:me,flipY:Ut,colorSpace:Jt[Rr],premultiplyAlpha:pr,aniso:ee};te&&(Dr.data=te),typeof M=="number"?Dr.mipmap=ae[M]:typeof M=="boolean"&&(Dr.mipmap=M),this.texture=Je.texture(Dr)}return(0,T.Z)(at,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(Ht){var te=Ht.width,wt=Ht.height;this.texture.resize(te,wt),this.width=te,this.height=wt}},{key:"destroy",value:function(){this.texture.destroy()}}]),at}(),In=function(){function at(){var Je=this;(0,w.Z)(this,at),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var Ht=(0,x.Z)(A().mark(function te(wt){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!wt.uniforms){kt.next=3;break}return kt.next=3,Promise.all(Object.keys(wt.uniforms).map(function(){var qt=(0,x.Z)(A().mark(function dt(Ut){var Q;return A().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(wt.uniforms[Ut]&&wt.uniforms[Ut].load!==void 0)){R.next=5;break}return R.next=3,wt.uniforms[Ut].load();case 3:Q=R.sent,wt.uniforms[Ut]=Q;case 5:case"end":return R.stop()}},dt)}));return function(dt){return qt.apply(this,arguments)}}()));case 3:return kt.abrupt("return",new Wn(Je.gl,wt));case 4:case"end":return kt.stop()}},te)}));return function(te){return Ht.apply(this,arguments)}}(),this.createAttribute=function(Ht){return new Ct(Je.gl,Ht)},this.createBuffer=function(Ht){return new Br(Je.gl,Ht)},this.createElements=function(Ht){return new Tr(Je.gl,Ht)},this.createTexture2D=function(Ht){return new Mn(Je.gl,Ht)},this.createFramebuffer=function(Ht){return new qr(Je.gl,Ht)},this.useFramebuffer=function(Ht,te){Je.gl({framebuffer:Ht?Ht.get():null})(te)},this.createComputeModel=function(){var Ht=(0,x.Z)(A().mark(function te(wt){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.abrupt("return",new $e(Je.gl,wt));case 1:case"end":return kt.stop()}},te)}));return function(te){return Ht.apply(this,arguments)}}(),this.clear=function(Ht){var te=Ht.color,wt=Ht.depth,Me=Ht.stencil,kt=Ht.framebuffer,qt=kt===void 0?null:kt,dt={color:te,depth:wt,stencil:Me};dt.framebuffer=qt===null?qt:qt.get(),Je.gl.clear(dt)},this.setScissor=function(Ht){Je.gl&&Je.gl._gl&&(Ht.enable&&Ht.box?(Je.gl._gl.enable(h.SCISSOR_TEST),Je.gl._gl.scissor(Ht.box.x,Ht.box.y,Ht.box.width,Ht.box.height)):Je.gl._gl.disable(h.SCISSOR_TEST),Je.gl._refresh())},this.viewport=function(Ht){var te=Ht.x,wt=Ht.y,Me=Ht.width,kt=Ht.height;Je.gl&&Je.gl._gl&&(Je.gl._gl.viewport(te,wt,Me,kt),Je.gl._refresh())},this.readPixels=function(Ht){var te=Ht.framebuffer,wt=Ht.x,Me=Ht.y,kt=Ht.width,qt=Ht.height,dt={x:wt,y:Me,width:kt,height:qt};return te&&(dt.framebuffer=te.get()),Je.gl.read(dt)},this.getCanvas=function(){return Je.$canvas},this.getGLContext=function(){return Je.gl._gl},this.destroy=function(){Je.gl&&(Je.gl.destroy(),Je.inited=!1)}}return(0,T.Z)(at,[{key:"init",value:function(){var Je=(0,x.Z)(A().mark(function te(wt){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!this.inited){kt.next=2;break}return kt.abrupt("return");case 2:return this.$canvas=wt.canvas,kt.next=5,new Promise(function(qt,dt){Xt()({canvas:wt.canvas,attributes:{alpha:!0,antialias:wt.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Q,ot){(Q||!ot)&&dt(Q),qt(ot)}})});case 5:this.gl=kt.sent,this.inited=!0;case 7:case"end":return kt.stop()}},te,this)}));function Ht(te){return Je.apply(this,arguments)}return Ht}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),at}(),jn=function(){function at(){(0,w.Z)(this,at),this.engine=void 0,this.configService=new $}return(0,T.Z)(at,[{key:"setConfig",value:function(Ht){this.configService.set(Ht)}},{key:"setEngine",value:function(Ht){this.engine=Ht}},{key:"createEntity",value:function(){return F()}},{key:"createKernel",value:function(Ht){var te=new bt(this.engine,this.configService);return typeof Ht=="string"?te.setBundle(JSON.parse(Ht)):te.setBundle(Ht),te.init(),te}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=new at;return te.setConfig(Ht),te.setEngine(new In),te}}]),at}()},904097:function(Ve,z,C){"use strict";C.d(z,{ZP:function(){return MS}});var x={};C.r(x),C.d(x,{GADDI:function(){return no},Stack:function(){return vo},breadthFirstSearch:function(){return ve},connectedComponent:function(){return Ce},cosineSimilarity:function(){return ee},default:function(){return ao},depthFirstSearch:function(){return Ar},detectAllCycles:function(){return an},detectAllDirectedCycle:function(){return cn},detectAllUndirectedCycle:function(){return Br},detectCycle:function(){return Dn},detectDirectedCycle:function(){return Si},dijkstra:function(){return xr},findAllPath:function(){return qr},findShortestPath:function(){return Tr},floydWarshall:function(){return xn},getAdjMatrix:function(){return yt},getDegree:function(){return Jt},getInDegree:function(){return we},getNeighbors:function(){return Dt},getOutDegree:function(){return Tt},iLouvain:function(){return R},kCore:function(){return O},kMeans:function(){return Ft},labelPropagation:function(){return Mr},louvain:function(){return Q},minimumSpanningTree:function(){return Dr},nodesCosineSimilarity:function(){return me},pageRank:function(){return jt}});var k={};C.r(k),C.d(k,{Line:function(){return yi},applyMatrix:function(){return fn},compare:function(){return Ge},distance:function(){return Zn},floydWarshall:function(){return ya},fractionToLine:function(){return Wi},getAdjMatrix:function(){return di},getBBoxBoundLine:function(){return mi},getCircleCenterByPoints:function(){return sa},getCircleIntersectByPoint:function(){return Sr},getDegree:function(){return Fa},getEllipseIntersectByPoint:function(){return en},getLineIntersect:function(){return Lr},getPointsCenter:function(){return Ao},getRectIntersectByPoint:function(){return Nr},intersectBBox:function(){return La},invertMatrix:function(){return Pn},isPointInPolygon:function(){return fi},isPointsOverlap:function(){return $i},isPolygonsIntersect:function(){return za},itemIntersectByLine:function(){return po},lerp:function(){return io},lerpArray:function(){return Qa},move:function(){return oa},pointLineDistance:function(){return Yi},pointLineSquareDist:function(){return os},pointRectSquareDist:function(){return qa},rotate:function(){return $a},scale:function(){return si},scaleMatrix:function(){return pa},squareDist:function(){return Vo},translate:function(){return Ma}});var w={};C.r(w),C.d(w,{cloneBesidesImg:function(){return Us},getAnimateCfgWithCallback:function(){return ws},getBBox:function(){return Ci},getComboBBox:function(){return Vs},getLabelPosition:function(){return Go},getLetterWidth:function(){return Gs},getLoopCfgs:function(){return Io},getTextSize:function(){return vs},plainCombosToTrees:function(){return Qs},reconstructTree:function(){return Js},shouldRefreshEdge:function(){return Rs},traverseTree:function(){return ji},traverseTreeUp:function(){return xo},truncateLabelByLength:function(){return qs}});var T={};C.r(T),C.d(T,{catmullRomToBezier:function(){return Et},fillPath:function(){return So},fillPathByDiff:function(){return Bi},formatPath:function(){return ps},intersection:function(){return Oo},parsePathArray:function(){return ur},parsePathString:function(){return G},pathToAbsolute:function(){return re},pathToCurve:function(){return ze},rectPath:function(){return Qr}});var L={};C.r(L),C.d(L,{easeBack:function(){return Nc},easeBackIn:function(){return Lc},easeBackInOut:function(){return Nc},easeBackOut:function(){return Pc},easeBounce:function(){return tf},easeBounceIn:function(){return Hl},easeBounceInOut:function(){return Kf},easeBounceOut:function(){return tf},easeCircle:function(){return ml},easeCircleIn:function(){return Ju},easeCircleInOut:function(){return ml},easeCircleOut:function(){return Gl},easeCubic:function(){return Lu},easeCubicIn:function(){return $u},easeCubicInOut:function(){return Lu},easeCubicOut:function(){return qu},easeElastic:function(){return $f},easeElasticIn:function(){return xl},easeElasticInOut:function(){return Rc},easeElasticOut:function(){return $f},easeExp:function(){return gl},easeExpIn:function(){return vl},easeExpInOut:function(){return gl},easeExpOut:function(){return pl},easeLinear:function(){return xf},easePoly:function(){return Oc},easePolyIn:function(){return Ic},easePolyInOut:function(){return Oc},easePolyOut:function(){return Hf},easeQuad:function(){return Ku},easeQuadIn:function(){return Zu},easeQuadInOut:function(){return Ku},easeQuadOut:function(){return Du},easeSin:function(){return hl},easeSinIn:function(){return Ks},easeSinInOut:function(){return hl},easeSinOut:function(){return dl}});var P={};C.r(P),C.d(P,{calculationItemsBBox:function(){return Dv},cloneEvent:function(){return G0},formatPadding:function(){return Ih},isNaN:function(){return _f},isViewportChanged:function(){return U0},processParallelEdges:function(){return W0},uniqueId:function(){return Ah}});var p={};C.r(p),C.d(p,{getClosedSpline:function(){return Fh},getControlPoint:function(){return Hd},getSpline:function(){return Zv},getStarPath:function(){return um},paddedHull:function(){return Qv},pathToPoints:function(){return Bh},pointsToPolygon:function(){return sm},roundedHull:function(){return zh}});var m={};C.r(m),C.d(m,{defaultSubjectColors:function(){return Im}});var S={};C.r(S),C.d(S,{isForce:function(){return fp}});var y={};C.r(y),C.d(y,{Base:function(){return uf},Circle:function(){return ty},Ellipse:function(){return ry},Image:function(){return ay},Line:function(){return oy},Marker:function(){return fy},Path:function(){return Qh},Polygon:function(){return yy},Polyline:function(){return by},Rect:function(){return My},Text:function(){return Cy}});var g={};C.r(g),C.d(g,{Base:function(){return Fu},Circle:function(){return Ny},Dom:function(){return ky},Ellipse:function(){return Fy},Image:function(){return Gy},Line:function(){return Wy},Marker:function(){return Xy},Path:function(){return Vy},Polygon:function(){return Zy},Polyline:function(){return $y},Rect:function(){return e1},Text:function(){return o1}});var A={};C.r(A),C.d(A,{getColorSetsBySubjectColors:function(){return N1},getColorsWithSubjectColor:function(){return rv},mixColor:function(){return Ps}});var E={};C.r(E),C.d(E,{arrayToTextureData:function(){return H1},attributesToTextureData:function(){return V1},buildTextureData:function(){return Y1},buildTextureDataWithOneEdgeAttr:function(){return X1},buildTextureDataWithTwoEdgeAttr:function(){return j1},proccessToFunc:function(){return W1},radialLayout:function(){return Z1}});var D={};C.r(D),C.d(D,{gpuDetector:function(){return Qp}});var F={};C.r(F),C.d(F,{getBrowserName:function(){return Jp}});var Y={};C.r(Y),C.d(Y,{assign:function(){return Zc},default:function(){return Rg},defaultI18n:function(){return hv},format:function(){return Pg},parse:function(){return Ng},setGlobalDateI18n:function(){return _g},setGlobalDateMasks:function(){return Lg}});var b=C(197582),h=C(413810),$={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,h.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,h.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},U=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,h.clone)($);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,h.each)(u,function(c,l){f[l]=(0,h.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),W=U,V=W,H="*",q=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[H]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],_=l.callback,I=l.once;I&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),_.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),tt=q,rt=C(935600);function ft(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromTranslation(r,t),rt.multiply(i,r,e)}function it(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromRotation(r,t),rt.multiply(i,r,e)}function bt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromScaling(r,t),rt.multiply(i,r,e)}function gt(i,e,t){return rt.multiply(i,t,e)}function Xt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ft(t,t,[a[1],a[2]]);break;case"s":bt(t,t,[a[1],a[2]]);break;case"r":it(t,t,a[1]);break;case"m":gt(t,t,a[1]);break;default:break}}return t}function Ct(i,e){return i[0]*e[1]-e[0]*i[1]}function At(i,e,t){var r=vec2.angle(i,e),n=Ct(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function Z(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var J=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},yt=J,_t=function(e,t){return e===t},nt=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),vt=function(){function i(e){e===void 0&&(e=_t),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new nt(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new nt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),It=vt,Pt=function(){function i(){this.linkedList=new It}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),St=Pt,Dt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Qt=function(e,t){return t.filter(function(r){return r.source===e})},ue=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ie=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Lt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var ne=function(e,t,r,n){n===void 0&&(n=!0);var a=Lt(r),o=new St,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var _=o.dequeue();a.enter({current:_,previous:f}),Dt(_,u,n?"target":void 0).forEach(function(I){a.allowTraversal({previous:f,current:_,next:I})&&o.enqueue(I)}),a.leave({current:_,previous:f}),f=_};!o.isEmpty();)c()},ve=ne,Wt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function I(B){u.push(B),s[B.id]=!0;for(var j=Dt(B.id,a),et=function(pt){var Mt=j[pt];if(!s[Mt]){var Zt=r.filter(function(se){return se.id===Mt});Zt.length>0&&I(Zt[0])}},ut=0;ut<j.length;++ut)et(ut)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var _=[];u.length>0;)_.push(u.pop());o.push(_)}}return o},ae=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,_=function et(ut){u[ut.id]=l,f[ut.id]=l,l+=1,o.push(ut),s[ut.id]=!0;for(var ct=Dt(ut.id,a,"target").filter(function(oe){return r.map(function(_e){return _e.id}).indexOf(oe)>-1}),pt=function(_e){var Ue=ct[_e];if(!u[Ue]&&u[Ue]!==0){var Re=r.filter(function(qe){return qe.id===Ue});Re.length>0&&et(Re[0]),f[ut.id]=Math.min(f[ut.id],f[Ue])}else s[Ue]&&(f[ut.id]=Math.min(f[ut.id],u[Ue]))},Mt=0;Mt<ct.length;Mt++)pt(Mt);if(f[ut.id]===u[ut.id]){for(var Zt=[];o.length>0;){var se=o.pop();if(s[se.id]=!1,Zt.push(se),se===ut)break}Zt.length>0&&c.push(Zt)}},I=0,B=r;I<B.length;I++){var j=B[I];!u[j.id]&&u[j.id]!==0&&_(j)}return c};function Ce(i,e){return e?ae(i):Wt(i)}var xe=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},Jt=xe,we=function(e,t){var r=xe(e);return r[t]?xe(e)[t].inDegree:0},Tt=function(e,t){var r=xe(e);return r[t]?xe(e)[t].outDegree:0};function Pe(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function _r(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;Dt(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&_r(i,o,e,r)}),r.leave({current:e,previous:t})}function Ar(i,e,t){_r(i,e,"",Pe(t))}var Or=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(_){var I=_.current,B=_.previous;if(s[I]){t={};for(var j=I,et=B;et!==I;)t[j]=et,j=et,et=a[et];t[j]=et}else s[I]=I,delete o[I],a[I]=B},leave:function(_){var I=_.current;u[I]=I,delete s[I]},allowTraversal:function(_){var I=_.next;return t?!1:!u[I]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ar(e,c,f)}return t},Br=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Ce(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],_=l.id,I=[l],B=(n={},n[_]=l,n),j=(a={},a[_]=new Set,a);I.length>0;)for(var et=I.pop(),ut=et.id,ct=Dt(ut,e.edges),pt=function(se){var oe,_e=ct[se],Ue=e.nodes.find(function(En){return En.id===_e});if(_e===ut)o.push((oe={},oe[_e]=et,oe));else if(!(_e in j))B[_e]=et,I.push(Ue),j[_e]=new Set([et]);else if(!j[ut].has(Ue)){for(var Re=!0,qe=[Ue,et],hr=B[ut];j[_e].size&&!j[_e].has(hr)&&(qe.push(hr),hr!==B[hr.id]);)hr=B[hr.id];if(qe.push(hr),t&&r?(Re=!1,qe.findIndex(function(En){return t.indexOf(En.id)>-1})>-1&&(Re=!0)):t&&!r&&qe.findIndex(function(En){return t.indexOf(En.id)>-1})>-1&&(Re=!1),Re){for(var nn={},kn=1;kn<qe.length;kn+=1)nn[qe[kn-1].id]=qe[kn];qe.length&&(nn[qe[qe.length-1].id]=qe[0]),o.push(nn)}j[_e].add(et)}},Mt=0;Mt<ct.length;Mt+=1)pt(Mt)}return o},cn=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(hr){for(var nn=[hr];nn.length>0;){var kn=nn.pop();a.has(kn)&&(a.delete(kn),o[kn.id].forEach(function(En){nn.push(En)}),o[kn.id].clear())}},l=function qe(hr,nn,kn){var En=!1;if(t&&r===!1&&t.indexOf(hr.id)>-1)return En;n.push(hr),a.add(hr);for(var Kr=kn[hr.id],ta=0;ta<Kr.length;ta+=1){var $n=u[Kr[ta]];if($n===nn){for(var $r={},yn=1;yn<n.length;yn+=1)$r[n[yn-1].id]=n[yn];n.length&&($r[n[n.length-1].id]=n[0]),s.push($r),En=!0}else a.has($n)||qe($n,nn,kn)&&(En=!0)}if(En)c(hr);else for(var ta=0;ta<Kr.length;ta+=1){var $n=u[Kr[ta]];o[$n.id].has(hr)||o[$n.id].add(hr)}return n.pop(),En},_=e.nodes,I=_===void 0?[]:_,B=0;B<I.length;B+=1){var j=I[B],et=j.id;f[et]=B,u[B]=j}if(t&&r)for(var ut=function(hr){var nn=t[hr];f[I[hr].id]=f[nn],f[nn]=0,u[0]=I.find(function(kn){return kn.id===nn}),u[f[I[hr].id]]=I[hr]},B=0;B<t.length;B++)ut(B);for(var ct=function(hr){for(var nn,kn,En=1/0,Kr=0;Kr<hr.length;Kr+=1)for(var ta=hr[Kr],$n=0;$n<ta.length;$n++){var $r=f[ta[$n].id];$r<En&&(En=$r,kn=Kr)}for(var yn=hr[kn],Fn=[],Kr=0;Kr<yn.length;Kr+=1){var zn=yn[Kr];Fn[zn.id]=[];for(var ia=0,da=Dt(zn.id,e.edges,"target").filter(function(Qi){return yn.map(function(Li){return Li.id}).indexOf(Qi)>-1});ia<da.length;ia++){var Wa=da[ia];Wa===zn.id&&!(r===!1&&t.indexOf(zn.id)>-1)?s.push((nn={},nn[zn.id]=zn,nn)):Fn[zn.id].push(f[Wa])}}return{component:yn,adjList:Fn,minIdx:En}},pt=0;pt<I.length;){var Mt=I.filter(function(qe){return f[qe.id]>=pt}),Zt=ae({nodes:Mt,edges:e.edges}).filter(function(qe){return qe.length>1});if(Zt.length===0)break;var se=ct(Zt),oe=se.minIdx,_e=se.adjList,Ue=se.component;if(Ue.length>1){Ue.forEach(function(qe){o[qe.id]=new Set});var Re=u[oe];if(t&&r&&t.indexOf(Re.id)===-1)return s;l(Re,Re,_e),pt=oe+1}else break}return s},an=function(e,t,r,n){return n===void 0&&(n=!0),t?cn(e,r,n):Br(e,r,n)},Dn=Or,Un=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Xn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},_={};o.forEach(function(pt,Mt){var Zt=pt.id;f.push(Zt),l[Zt]=1/0,Zt===t&&(l[Zt]=0)});for(var I=o.length,B=function(Mt){var Zt=Un(l,o,c),se=Zt.id;if(c[se]=!0,l[se]===1/0)return"continue";var oe=[];r?oe=Qt(se,u):oe=ue(se,u),oe.forEach(function(_e){var Ue=_e.target,Re=_e.source,qe=Ue===se?Re:Ue,hr=n&&_e[n]?_e[n]:1;l[qe]>l[Zt.id]+hr?(l[qe]=l[Zt.id]+hr,_[qe]=[Zt.id]):l[qe]===l[Zt.id]+hr&&_[qe].push(Zt.id)})},j=0;j<I;j++)B(j);_[t]=[t];var et={};for(var ut in l)l[ut]!==1/0&&$e(t,ut,_,et);var ct={};for(var ut in et)ct[ut]=et[ut][0];return{length:l,path:ct,allPath:et}},xr=Xn;function $e(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=$e(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,h.isArray)(l)?n.push((0,b.__spreadArray)((0,b.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var Tr=function(e,t,r,n,a){var o=xr(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},qr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],_=n?Dt(t,s,"target"):Dt(t,s);for(c.push(_);u.length>0&&c.length>0;){var I=c[c.length-1];if(I.length){var B=I.shift();B&&(u.push(B),f[B]=!0,_=n?Dt(B,s,"target"):Dt(B,s),c.push(_.filter(function(ut){return!f[ut]})))}else{var j=u.pop();f[j]=!1,c.pop();continue}if(u[u.length-1]===r){var et=u.map(function(ct){return ct});l.push(et);var j=u.pop();f[j]=!1,c.pop()}}return l},gn=function(e,t){for(var r=yt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},xn=gn,Rn=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(Mt,Zt){var se=ie();Mt.clusterId=se,f[se]={id:se,nodes:[Mt]},c[Mt.id]={node:Mt,idx:Zt}});var l=yt(e,t),_=[],I={};l.forEach(function(Mt,Zt){var se=0,oe=o[Zt].id;I[oe]={},Mt.forEach(function(_e,Ue){if(_e){se+=_e;var Re=o[Ue].id;I[oe][Re]=_e}}),_.push(se)});for(var B=0,j=function(){var Zt=!1;if(o.forEach(function(se){var oe={};Object.keys(I[se.id]).forEach(function(En){var Kr=I[se.id][En],ta=c[En].node,$n=ta.clusterId;oe[$n]||(oe[$n]=0),oe[$n]+=Kr});var _e=-1/0,Ue=[];if(Object.keys(oe).forEach(function(En){_e<oe[En]?(_e=oe[En],Ue=[En]):_e===oe[En]&&Ue.push(En)}),!(Ue.length===1&&Ue[0]===se.clusterId)){var Re=Ue.indexOf(se.clusterId);if(Re>=0&&Ue.splice(Re,1),Ue&&Ue.length){Zt=!0;var qe=f[se.clusterId],hr=qe.nodes.indexOf(se);qe.nodes.splice(hr,1);var nn=Math.floor(Math.random()*Ue.length),kn=f[Ue[nn]];kn.nodes.push(se),se.clusterId=kn.id}}}),!Zt)return"break";B++};B<n;){var et=j();if(et==="break")break}Object.keys(f).forEach(function(Mt){var Zt=f[Mt];(!Zt.nodes||!Zt.nodes.length)&&delete f[Mt]});var ut=[],ct={};u.forEach(function(Mt){var Zt=Mt.source,se=Mt.target,oe=Mt[r]||1,_e=c[Zt].node.clusterId,Ue=c[se].node.clusterId,Re="".concat(_e,"---").concat(Ue);if(ct[Re])ct[Re].weight+=oe,ct[Re].count++;else{var qe={source:_e,target:Ue,weight:oe,count:1};ct[Re]=qe,ut.push(qe)}});var pt=[];return Object.keys(f).forEach(function(Mt){pt.push(f[Mt])}),{clusters:pt,clusterEdges:ut}},Mr=Rn,dn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,h.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),hn=dn,sn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,Wn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Mn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(sn)&&!"".concat(a.properties[o]).match(Wn)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},In=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},jn=function(e){for(var t=Mn(e),r=[],n=0;n<e.length;n++)r[n]=In(e[n].properties,t);return r},at=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Je={getAllSortProperties:Mn,getPropertyWeight:jn,getAllProperties:at},Ht;(function(i){i.EuclideanDistance="euclideanDistance"})(Ht||(Ht={}));var te=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,h.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,h.uniq)(s))}),a},wt=function(e,t,r){var n=te(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var _=u[l],I=n[l],B=I.findIndex(function(ut){return _===ut}),j=[];if(s)j.push(_);else for(var et=0;et<I.length;et++)et===B?j.push(1):j.push(0);c=c.concat(j)}),a[f]=c}),a},Me=function(e,t,r,n){r===void 0&&(r=Ht.EuclideanDistance);var a=0;switch(r){case Ht.EuclideanDistance:a=new hn(e).euclideanDistance(new hn(t));break;default:break}return a},kt={getAllKeyValueMap:te,oneHot:wt,getDistance:Me},qt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var _=t[u][c]||0,I=r[u]||0,B=r[c]||0;s+=_-I*B/o}}return s*=1/o,s},dt=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new hn([]),a=0;a<r;a++)n=n.add(new hn(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new hn(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new hn(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var _=new hn(t[l]);c[a][l]=u.squareEuclideanDistance(_),e[a].clusterInertial+=c[a][l]}}for(var I=0,B=2*r*s,a=0;a<r;a++)for(var j=e[a].clusterId,l=0;l<r;l++){var et=e[l].clusterId;if(!(a===l||j!==et)){var ut=e[a].clusterInertial*e[l].clusterInertial/Math.pow(B,2)-c[a][l]/B;I+=ut}}return Number(I.toFixed(4))},Ut=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,_=e.edges,I=_===void 0?[]:_,B=[];if(a){l.forEach(function($r,yn){$r.properties=$r.properties||{},$r.originIndex=yn});var j=[];l.every(function($r){return $r.hasOwnProperty("nodeType")})&&(j=Array.from(new Set(l.map(function($r){return $r.nodeType}))),l.forEach(function($r){$r.properties.nodeType=j.findIndex(function(yn){return yn===$r.nodeType})}));var et=at(l,o);B=wt(et,s,u)}var ut=1,ct={},pt={};l.forEach(function($r,yn){var Fn=String(ut++);$r.clusterId=Fn,ct[Fn]={id:Fn,nodes:[$r]},pt[$r.id]={node:$r,idx:yn}});var Mt=yt(e,t),Zt=[],se={},oe=0;Mt.forEach(function($r,yn){var Fn=0,zn=l[yn].id;se[zn]={},$r.forEach(function(ia,da){if(ia){Fn+=ia;var Wa=l[da].id;se[zn][Wa]=ia,oe+=ia}}),Zt.push(Fn)}),oe/=2;for(var _e=1/0,Ue=1/0,Re=0,qe=[],hr={};;){a&&l.every(function($r){return $r.hasOwnProperty("properties")})?_e=qt(l,Mt,Zt,oe)+dt(l,B)*f:_e=qt(l,Mt,Zt,oe),Re===0&&(Ue=_e,qe=l,hr=ct);var nn=_e>0&&_e>Ue&&_e-Ue<n;if(_e>Ue&&(qe=l.map(function($r){return{node:$r,clusterId:$r.clusterId}}),hr=(0,h.clone)(ct),Ue=_e),nn||Re>100)break;Re++,Object.keys(ct).forEach(function($r){var yn=0;I.forEach(function(Fn){var zn=Fn.source,ia=Fn.target,da=pt[zn].node.clusterId,Wa=pt[ia].node.clusterId;(da===$r&&Wa!==$r||Wa===$r&&da!==$r)&&(yn=yn+(Fn[r]||1))}),ct[$r].sumTot=yn}),l.forEach(function($r,yn){var Fn=ct[$r.clusterId],zn=0,ia,da=Zt[yn]/(2*oe),Wa=0,oi=Fn.nodes;oi.forEach(function(As){var Is=pt[As.id].idx;Wa+=Mt[yn][Is]||0});var Qi=Wa-Fn.sumTot*da,Li=oi.filter(function(As){return As.id!==$r.id}),Ji=[];Li.forEach(function(As,Is){Ji[Is]=B[As.originIndex]});var co=dt(Li,B)*f,jo=se[$r.id];if(Object.keys(jo).forEach(function(As){var Is=pt[As].node,wu=Is.clusterId;if(wu!==$r.clusterId){var js=ct[wu],au=js.nodes;if(!(!au||!au.length)){var gi=0;au.forEach(function(Ei){var _i=pt[Ei.id].idx;gi+=Mt[yn][_i]||0});var Zi=gi-js.sumTot*da,vi=au.concat([$r]),Ki=[];vi.forEach(function(Ei,_i){Ki[_i]=B[Ei.originIndex]});var Mo=dt(vi,B)*f,Aa=Zi-Qi;a&&(Aa=Zi+Mo-(Qi+co)),Aa>zn&&(zn=Aa,ia=js)}}}),zn>0){ia.nodes.push($r);var Lo=$r.clusterId;$r.clusterId=ia.id;var Uu=Fn.nodes.indexOf($r);Fn.nodes.splice(Uu,1);var Ts=0,Wu=0;I.forEach(function(As){var Is=As.source,wu=As.target,js=pt[Is].node.clusterId,au=pt[wu].node.clusterId;(js===ia.id&&au!==ia.id||au===ia.id&&js!==ia.id)&&(Ts=Ts+(As[r]||1)),(js===Lo&&au!==Lo||au===Lo&&js!==Lo)&&(Wu=Wu+(As[r]||1))}),ia.sumTot=Ts,Fn.sumTot=Wu}})}var kn={},En=0;Object.keys(hr).forEach(function($r){var yn=hr[$r];if(!yn.nodes||!yn.nodes.length){delete hr[$r];return}var Fn=String(En+1);Fn!==$r&&(yn.id=Fn,yn.nodes=yn.nodes.map(function(zn){return{id:zn.id,clusterId:Fn}}),hr[Fn]=yn,kn[$r]=Fn,delete hr[$r],En++)}),qe.forEach(function($r){var yn=$r.node,Fn=$r.clusterId;yn&&(yn.clusterId=Fn,yn.clusterId&&kn[yn.clusterId]&&(yn.clusterId=kn[yn.clusterId]))});var Kr=[],ta={};I.forEach(function($r){var yn=$r.source,Fn=$r.target,zn=$r[r]||1,ia=pt[yn].node.clusterId,da=pt[Fn].node.clusterId;if(!(!ia||!da)){var Wa="".concat(ia,"---").concat(da);if(ta[Wa])ta[Wa].weight+=zn,ta[Wa].count++;else{var oi={source:ia,target:da,weight:zn,count:1};ta[Wa]=oi,Kr.push(oi)}}});var $n=[];return Object.keys(hr).forEach(function($r){$n.push(hr[$r])}),{clusters:$n,clusterEdges:Kr}},Q=Ut,ot=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Q(e,t,r,n,!0,a,o,s,u)},R=ot,M=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,h.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var _=Jt({nodes:o,edges:u}),I=Object.keys(_);I.sort(function(et,ut){var ct,pt;return((ct=_[et])===null||ct===void 0?void 0:ct.degree)-((pt=_[ut])===null||pt===void 0?void 0:pt.degree)});var B=I[0];if(!o.length||((r=_[B])===null||r===void 0?void 0:r.degree)>=t)return"break";var j=o.findIndex(function(et){return et.id===B});o.splice(j,1),u=u.filter(function(et){return!(et.source===B||et.target===B)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},O=M,X=function(e,t,r){var n=[];switch(e){case Ht.EuclideanDistance:n=t[r];break;default:n=[];break}return n},mt=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Ht.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Ht.EuclideanDistance&&!u.every(function(Fn){return Fn.hasOwnProperty(r)}))return l;var _=[],I=[];if(o===Ht.EuclideanDistance&&(_=at(u,r),I=wt(_,n,a)),!I.length)return l;for(var B=(0,h.uniq)(I.map(function(Fn){return Fn.join("")})),j=Math.min(t,u.length,B.length),et=0;et<u.length;et++)u[et].originIndex=et;for(var ut=[],ct=[],pt=[],et=0;et<j;et++)if(et===0){var Mt=Math.floor(Math.random()*u.length);switch(o){case Ht.EuclideanDistance:ut[et]=I[Mt];break;default:ut[et]=[];break}ct.push(Mt),pt[et]=[u[Mt]],u[Mt].clusterId=String(et)}else{for(var Zt=-1/0,se=0,oe=function(ia){if(!ct.includes(ia)){for(var da=0,Wa=0;Wa<ut.length;Wa++){var oi=0;switch(o){case Ht.EuclideanDistance:oi=Me(I[u[ia].originIndex],ut[Wa],o);break;default:break}da+=oi}var Qi=da/ut.length;Qi>Zt&&!ut.find(function(Li){return(0,h.isEqual)(Li,X(o,I,u[ia].originIndex))})&&(Zt=Qi,se=ia)}},_e=0;_e<u.length;_e++)oe(_e);ut[et]=X(o,I,se),ct.push(se),pt[et]=[u[se]],u[se].clusterId=String(et)}for(var Ue=0;;){for(var et=0;et<u.length;et++){var Re=0,qe=1/0;if(!(Ue===0&&ct.includes(et))){for(var hr=0;hr<ut.length;hr++){var nn=0;switch(o){case Ht.EuclideanDistance:nn=Me(I[et],ut[hr],o);break;default:break}nn<qe&&(qe=nn,Re=hr)}if(u[et].clusterId!==void 0)for(var kn=pt[Number(u[et].clusterId)].length-1;kn>=0;kn--)pt[Number(u[et].clusterId)][kn].id===u[et].id&&pt[Number(u[et].clusterId)].splice(kn,1);u[et].clusterId=String(Re),pt[Re].push(u[et])}}for(var En=!1,et=0;et<pt.length;et++){for(var Kr=pt[et],ta=new hn([]),hr=0;hr<Kr.length;hr++)ta=ta.add(new hn(I[Kr[hr].originIndex]));var $n=ta.avg(Kr.length);$n.equal(new hn(ut[et]))||(En=!0,ut[et]=$n.getArr())}if(Ue++,u.every(function(Fn){return Fn.clusterId!==void 0})&&En||Ue>=1e3)break}var $r=[],yn={};return c.forEach(function(Fn){var zn,ia,da=Fn.source,Wa=Fn.target,oi=(zn=u.find(function(co){return co.id===da}))===null||zn===void 0?void 0:zn.clusterId,Qi=(ia=u.find(function(co){return co.id===Wa}))===null||ia===void 0?void 0:ia.clusterId,Li="".concat(oi,"---").concat(Qi);if(yn[Li])yn[Li].count++;else{var Ji={source:oi,target:Qi,count:1};yn[Li]=Ji,$r.push(Ji)}}),{clusters:pt,clusterEdges:$r}},Ft=mt,Bt=function(e,t){var r=new hn(t),n=r.norm2(),a=new hn(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},ee=Bt,Le=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,h.clone)(e.filter(function(_){return _.id!==t.id})),s=e.findIndex(function(_){return _.id===t.id}),u=at(e,r),f=wt(u,n,a),c=f[s],l=[];return o.forEach(function(_,I){if(_.id!==t.id){var B=f[I],j=ee(B,c);l.push(j),_.cosineSimilarity=j}}),o.sort(function(_,I){return I.cosineSimilarity-_.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},me=Le,Xe=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),pr=Xe,Ze=function(e,t){return e-t},Pr=function(){function i(e){e===void 0&&(e=Ze),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),un=Pr,Ke=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(et,ut){return t?et.weight-ut.weight:0},l=new un(c);for(ue(u.id,s).forEach(function(j){l.insert(j)});!l.isEmpty();){var _=l.delMin(),I=_.source,B=_.target;f.has(I)&&f.has(B)||(r.push(_),f.has(I)||(f.add(I),ue(I,s).forEach(function(j){l.insert(j)})),f.has(B)||(f.add(B),ue(B,s).forEach(function(j){l.insert(j)})))}return r},lr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(I){return I});t&&u.sort(function(I,B){return I.weight-B.weight});for(var f=new pr(a.map(function(I){return I.id}));u.length>0;){var c=u.shift(),l=c.source,_=c.target;f.connected(l,_)||(r.push(c),f.union(l,_))}return r},Rr=function(e,t,r){var n={prim:Ke,kruskal:lr};return r?n[r](e,t):lr(e,t)},Dr=Rr,ce=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,_,I={},B={},j=0;j<l;++j){var et=u[j],ut=et.id;I[ut]=1/l,B[ut]=1/l}for(var ct=Jt(e);o>0&&n>t;){a=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;if(_=0,ct[et.id].inDegree===0)I[ut]=0;else{for(var pt=Dt(ut,c,"source"),Mt=0;Mt<pt.length;++Mt){var Zt=pt[Mt],se=ct[Zt].outDegree;se>0&&(_+=B[Zt]/se)}I[ut]=r*_,a+=I[ut]}}a=(1-a)/l,n=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;_=I[ut]+a,n+=Math.abs(_-B[ut]),B[ut]=_}o-=1}return B},jt=ce,pe=-1,Oe=-1,Se="-1",Fe="-1",or=-1,gr="-1",Jr=function(){function i(e,t,r,n){e===void 0&&(e=pe),t===void 0&&(t=Oe),r===void 0&&(r=Oe),n===void 0&&(n=Se),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Gn=function(){function i(e,t){e===void 0&&(e=Oe),t===void 0&&(t=Fe),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),pn=function(){function i(e,t,r){e===void 0&&(e=Oe),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Gn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Jr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Jr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),qn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Fe,edgeLabel:n||Se,nodeLabel2:a||Fe}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),ln=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new qn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=or),t===void 0&&(t=!1);var r=new pn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Fe&&r.addNode(a,u),c!==Fe&&r.addNode(o,c),u!==Fe&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Vn=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),ca=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,_=l===void 0?!1:l,I=e.verbose,B=I===void 0?!1:I;this.graphs=t,this.dfsCode=new ln,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=_,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=B,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var _=f[l],I=o[_.to].label;t.to===_.to||r>I||n.hasNode(o[_.to])||(t.label<_.label||t.label===_.label&&s<=I)&&a.push(_)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(or,r),a=n.nodeMap,o=new ln,s={};n.nodes.forEach(function(l){var _=e.findForwardRootEdges(n,l);_.forEach(function(I){var B=a[I.to],j="".concat(l.label,"-").concat(I.label,"-").concat(B.label);s[j]||(s[j]={projected:[],nodeLabel1:l.label,edgeLabel:I.label,nodeLabel2:B.label});var et={graphId:n.id,edge:I,preNode:null};s[j].projected.push(et)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new qn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(_){for(var I=o.buildRmpath(),B=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j=o.dfsEdgeList[I[0]].toNode,et={},ut=!1,ct=0,pt=r?-1:0,Mt=function(ta){if(ut)return"break";_.forEach(function($n){var $r=new Vn($n),yn=e.findBackwardEdge(n,$r.edges[I[ta]],$r.edges[I[0]],$r);yn&&(et[yn.label]||(et[yn.label]={projected:[],edgeLabel:yn.label}),et[yn.label].projected.push({graphId:n.id,edge:et,preNode:$n}),ct=o.dfsEdgeList[I[ta]].fromNode,ut=!0)})},Zt=I.length-1;Zt>pt;Zt--){var se=Mt(Zt);if(se==="break")break}if(ut){var oe=e.findMinLabel(et);o.dfsEdgeList.push(new qn(j,ct,Fe,oe.edgeLabel,Fe));var _e=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_e]!==o.dfsEdgeList[_e]?!1:l(et[oe.edgeLabel].projected)}var Ue={};ut=!1;var Re=0;_.forEach(function(Kr){var ta=new Vn(Kr),$n=e.findForwardPureEdges(n,ta.edges[I[0]],B,ta);$n.length>0&&(ut=!0,Re=j,$n.forEach(function($r){var yn="".concat($r.label,"-").concat(a[$r.to].label);Ue[yn]||(Ue[yn]={projected:[],edgeLabel:$r.label,nodeLabel2:a[$r.to].label}),Ue[yn].projected.push({graphId:n.id,edge:$r,preNode:Kr})}))});for(var qe=I.length,hr=function(ta){if(ut)return"break";var $n=I[ta];_.forEach(function($r){var yn=new Vn($r),Fn=e.findForwardRmpathEdges(n,yn.edges[$n],B,yn);Fn.length>0&&(ut=!0,Re=o.dfsEdgeList[$n].fromNode,Fn.forEach(function(zn){var ia="".concat(zn.label,"-").concat(a[zn.to].label);Ue[ia]||(Ue[ia]={projected:[],edgeLabel:zn.label,nodeLabel2:a[zn.to].label}),Ue[ia].projected.push({graphId:n.id,edge:zn,preNode:$r})}))})},Zt=0;Zt<qe;Zt++){var nn=hr(Zt);if(nn==="break")break}if(!ut)return!0;var kn=e.findMinLabel(Ue);o.dfsEdgeList.push(new qn(Re,j+1,Fe,kn.edgeLabel,kn.nodeLabel2));var En=o.dfsEdgeList.length-1;return t.dfsEdgeList[En]!==o.dfsEdgeList[En]?!1:l(Ue["".concat(kn.edgeLabel,"-").concat(kn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,h.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],_=l.nodeMap,I=new Vn(c),B=a.length-1;B>=0;B--){var j=t.findBackwardEdge(l,I.edges[a[B]],I.edges[a[0]],I);if(j){var et="".concat(t.dfsCode.dfsEdgeList[a[B]].fromNode,"-").concat(j.label);f[et]||(f[et]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[B]].fromNode,edgeLabel:j.label}),f[et].projected.push({graphId:c.graphId,edge:j,preNode:c})}}if(!(n>=t.maxNodeNum)){var ut=t.findForwardPureEdges(l,I.edges[a[0]],s,I);ut.forEach(function(pt){var Mt="".concat(o,"-").concat(pt.label,"-").concat(_[pt.to].label);u[Mt]||(u[Mt]={projected:[],fromNodeId:o,edgeLabel:pt.label,nodeLabel2:_[pt.to].label}),u[Mt].projected.push({graphId:c.graphId,edge:pt,preNode:c})});for(var ct=function(Mt){var Zt=t.findForwardRmpathEdges(l,I.edges[a[Mt]],s,I);Zt.forEach(function(se){var oe="".concat(t.dfsCode.dfsEdgeList[a[Mt]].fromNode,"-").concat(se.label,"-").concat(_[se.to].label);u[oe]||(u[oe]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[Mt]].fromNode,edgeLabel:se.label,nodeLabel2:_[se.to].label}),u[oe].projected.push({graphId:c.graphId,edge:se,preNode:c})})},B=0;B<a.length;B++)ct(B)}}),Object.keys(f).forEach(function(c){var l=f[c],_=l.toNodeId,I=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new qn(o,_,"-1",I,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],_=l.fromNodeId,I=l.edgeLabel,B=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new qn(_,o+1,Fe,I,B)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(_,I){var B=_.label,j="".concat(f,"-").concat(B);if(!s[j]){var et=a[B]||0;et++,a[B]=et}s[j]={graphKey:f,label:B},_.edges.forEach(function(ut){var ct=B,pt=l[ut.to].label;if(!t&&ct>pt){var Mt=pt;pt=ct,ct=Mt}var Zt=ut.label,se="".concat(f,"-").concat(ct,"-").concat(Zt,"-").concat(pt),oe="".concat(ct,"-").concat(Zt,"-").concat(pt);if(!o[oe]){var _e=o[oe]||0;_e++,o[oe]=_e}u[se]={graphId:f,nodeLabel1:ct,edgeLabel:Zt,nodeLabel2:pt}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],_="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[_]||(n[_]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var I={graphId:a,edge:c,preNode:null};n[_].projected.push(I)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new qn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),ba=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new pn(s,!0,t),c={};u.nodes.forEach(function(l,_){f.addNode(_,l[r]),c[l.id]=_}),u.edges.forEach(function(l,_){var I=c[l.source],B=c[l.target];f.addEdge(-1,I,B,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Ea=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Ni="cluster",ti=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Ni:a,s=e.edgeLabelProp,u=s===void 0?Ni:s,f=ba(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,_=e.minNodeNum,I=e.verbose,B=e.top,j={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:_,top:B,verbose:I,directed:n},et=new ca(j);et.run();var ut=Ea(et.frequentSubgraphs,o,u);return ut},ei=ti,wi=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Gi(o,s,u,r,n))}),a},Gi=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Co=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,_=0,I=f.nodeIdxs,B=f.neighborNum-1;l<o;){for(var j=I[1+Math.floor(Math.random()*B)],et=0;(s["".concat(c,"-").concat(j)]||s["".concat(j,"-").concat(c)])&&(j=Math.floor(Math.random()*t),et++,!(et>2*t)););if(et<2*t&&(s["".concat(c,"-").concat(j)]={start:c,end:j,distance:a[c][j]},l++,u++,u>=r))return s;if(_++,_>2*t)break}if(l<o){var ut=o-l;o=(o+ut)/(t-c-1)}}),s},eo=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var _=new Set(l),I=c.filter(function(ct){return _.has(ct)});if(!(!I||!I.length)){for(var B={},j=I.length,et=0;et<j;et++){var ut=a[I[et]];n[o].nodes.push(ut),B[ut.id]=!0}r.edges.forEach(function(ct){B[ct.source]&&B[ct.target]&&n[o].edges.push(ct)})}}}}),n},ga=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],_=t==null?void 0:t.nodes[0][r],I=t==null?void 0:t.nodes[1][r],B=t==null?void 0:t.edges[0][n];f[n]===B&&(c===_&&l===I||c===I&&l===_)&&u++}),u)},lo=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(ct,pt){return c[ct]-c[pt]}),_=10,I=[];l.forEach(function(ct,pt){I[pt%_]||(I[pt%_]={graphs:[],totalCount:0,aveCount:0}),I[pt%_].graphs.push(ct),I[pt%_].totalCount+=c[ct]});var B=0,j=[];I.forEach(function(ct){var pt=ct.totalCount/ct.graphs.length;ct.aveCount=pt,j.push(pt);var Mt=0,Zt=ct.length;ct.graphs.forEach(function(se,oe){var _e=c[se];ct.graphs.forEach(function(Ue,Re){oe!==Re&&(Mt+=Math.abs(_e-c[Ue]))})}),Mt/=Zt*(Zt-1)/2,B+=Mt}),B/=I.length;var et=0;j.forEach(function(ct,pt){j.forEach(function(Mt,Zt){pt!==Zt&&(et+=Math.abs(ct-Mt))}),et/=j.length*(j.length-1)/2});var ut=et-B;n<ut&&(n=ut,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},To=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},ni=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ie)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Ri=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,_=o[c];a["".concat(f,"-").concat(l)]=_,r||(a["".concat(l,"-").concat(f)]=_)}}),a},ho=function(e,t,r,n,a,o,s,u,f,c,l){var _,I="".concat(t.id,"-").concat(r.id);if(c&&c[I])return c[I];var B=l?l[I]:void 0;if(!B){var j=(_={},_[I]={start:n[t.id].idx,end:n[r.id].idx,distance:a},_);l=eo(j,o,e,l),B=l[I]}return ga(B,s,u,f)},Po=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var _=r[l.id].degree;u>_&&(u=_);var I=r[l.id].inDegree;f>I&&(f=I);var B=r[l.id].outDegree;c>B&&(c=B)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},ro=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=xn(e,r),l=xn(t,r),_=Ri(e.nodes,c,r),I=Ri(t.nodes,l,r),B=To(e.nodes,o),j=B.nodeMap,et=B.nodeLabelMap,ut=To(t.nodes,o),ct=ut.nodeMap,pt=ut.nodeLabelMap;ni(e.edges,s,j);var Mt=ni(t.edges,s,ct).edgeLabelMap,Zt=[];l==null||l.forEach(function(gi){Zt=Zt.concat(gi)}),a||(a=Math.max.apply(Math,(0,b.__spreadArray)((0,b.__spreadArray)([],Zt,!1),[2],!1))),n||(n=a);var se=wi(e,c,o,n),oe=wi(t,l,o,n),_e=Math.min(100,f*(f-1)/2),Ue=Co(n,f,_e,se,c),Re=eo(Ue,se,e),qe=10,hr=1,nn=1,kn=4,En={graphs:Re,nodeLabelProp:o,edgeLabelProp:s,minSupport:hr,minNodeNum:nn,maxNodeNum:kn,directed:r},Kr=ei(En).slice(0,qe),ta=Kr.length,$n=[];Kr.forEach(function(gi,Zi){$n[Zi]={},Object.keys(Re).forEach(function(vi){var Ki=Re[vi],Mo=ga(Ki,gi,o,s);$n[Zi][vi]=Mo})});var $r=lo($n,ta,Kr),yn=$r.structure,Fn=$r.structureCountMap,zn=t.nodes[0],ia=[],da=(u=t.nodes[0])===null||u===void 0?void 0:u[o],Wa=-1/0;t.nodes.forEach(function(gi){var Zi=gi[o],vi=et[Zi];(vi==null?void 0:vi.length)>Wa&&(Wa=vi.length,ia=vi,da=Zi,zn=gi)});var oi={},Qi={},Li={},Ji={},co={},jo={};Object.keys(pt).forEach(function(gi,Zi){co[gi]=[],r&&(jo[gi]=[]);var vi=-1/0,Ki=pt[gi],Mo={};Ki.forEach(function(Ti){var zi=I["".concat(zn.id,"-").concat(Ti.id)];if(zi&&co[gi].push(zi),vi<zi&&(vi=zi),Mo["".concat(zn.id,"-").concat(Ti.id)]={start:0,end:ct[Ti.id].idx,distance:zi},r){var ts=I["".concat(Ti.id,"-").concat(zn.id)];ts&&jo[gi].push(ts)}}),co[gi]=co[gi].sort(function(Ti,zi){return Ti-zi}),r&&(jo[gi]=jo[gi].sort(function(Ti,zi){return Ti-zi})),Qi=eo(Mo,oe,t,Qi);var Aa=[];if(Object.keys(Mo).forEach(function(Ti){if(Li[Ti]){Aa.push(Li[Ti]);return}var zi=Qi[Ti];Li[Ti]=ga(zi,yn,o,s),Aa.push(Li[Ti])}),Aa=Aa.sort(function(Ti,zi){return zi-Ti}),Ji["".concat(zn.id,"-").concat(gi)]=Aa,gi!==da)for(var Ei=(ia==null?void 0:ia.length)||0,_i=function(zi){var ts=ia[zi],Su=se[j[ts.id].idx],bs=Su.nodeLabelCountMap[gi],Rl=pt[gi].length;if(!bs||bs.count<Rl)return ia.splice(zi,1),"continue";for(var fd=!1,iu=0;iu<Rl;iu++)if(bs.dists[iu]>co[gi][iu]){fd=!0;break}if(fd)return ia.splice(zi,1),"continue";var Yu={};Su.neighbors.forEach(function(ou){var cf=_["".concat(ts.id,"-").concat(ou.id)];Yu["".concat(ts.id,"-").concat(ou.id)]={start:j[ts.id].idx,end:j[ou.id].idx,distance:cf}}),Re=eo(Yu,se,e,Re);var Lf=[];Object.keys(Yu).forEach(function(ou){if(Fn[ou]){Lf.push(Fn[ou]);return}var cf=Re[ou];Fn[ou]=ga(cf,yn,o,s),Lf.push(Fn[ou])}),Lf=Lf.sort(function(ou,cf){return cf-ou});for(var $c=!1,iu=0;iu<Rl;iu++)if(Lf[iu]<Aa[iu]){$c=!0;break}if($c)return ia.splice(zi,1),"continue"},_o=Ei-1;_o>=0;_o--)_i(_o)});var Lo=[];ia==null||ia.forEach(function(gi){for(var Zi=j[gi.id].idx,vi=Gi(e.nodes,c[Zi],Zi,o,a),Ki=vi.neighbors,Mo=Ki.length,Aa=!1,Ei=Mo-1;Ei>=0;Ei--){if(Ki.length+1<t.nodes.length){Aa=!0;return}var _i=Ki[Ei],_o=_i[o];if(!pt[_o]||!pt[_o].length){Ki.splice(Ei,1);continue}if(!co[_o]||!co[_o].length){Ki.splice(Ei,1);continue}var Ti="".concat(gi.id,"-").concat(_i.id),zi=_[Ti],ts=co[_o].length-1,Su=co[_o][ts];if(zi>Su){Ki.splice(Ei,1);continue}if(r){var bs="".concat(_i.id,"-").concat(gi.id),Rl=_[bs];ts=jo[_o].length-1;var fd=jo[_o][ts];if(Rl>fd){Ki.splice(Ei,1);continue}}var iu=Fn[Ti]?Fn[Ti]:ho(e,gi,_i,j,zi,se,yn,o,s,Fn,Re),Yu="".concat(zn.id,"-").concat(_o),Lf=Ji[Yu][Ji[Yu].length-1];if(iu<Lf){Ki.splice(Ei,1);continue}var $c=Po(oi,_o,ct,pt),ou=$c.minPatternNodeLabelDegree,cf=$c.minPatternNodeLabelInDegree,lc=$c.minPatternNodeLabelOutDegree;if(j[_i.id].degree<ou){Ki.splice(Ei,1);continue}}Aa||Lo.push({nodes:[gi].concat(Ki)})});var Uu=xr(t,zn.id,!1).length,Ts={};r?(Object.keys(Uu).forEach(function(gi){var Zi=ct[gi].node[o];Ts[Zi]?Ts[Zi].push(Uu[gi]):Ts[Zi]=[Uu[gi]]}),Object.keys(Ts).forEach(function(gi){Ts[gi].sort(function(Zi,vi){return Zi-vi})})):Ts=co;for(var Wu=Lo.length,As=function(Zi){var vi=Lo[Zi],Ki=vi.nodes[0],Mo={},Aa={};vi.nodes.forEach(function(Qo,Mu){Aa[Qo.id]={idx:Mu,node:Qo,degree:0,inDegree:0,outDegree:0};var Ns=Qo[o];Mo[Ns]?Mo[Ns]++:Mo[Ns]=1});var Ei=[],_i={};e.edges.forEach(function(Qo){Aa[Qo.source]&&Aa[Qo.target]&&(Ei.push(Qo),_i[Qo[s]]?_i[Qo[s]]++:_i[Qo[s]]=1,Aa[Qo.source].degree++,Aa[Qo.target].degree++,Aa[Qo.source].outDegree++,Aa[Qo.target].inDegree++)});for(var _o=Object.keys(Mt).length,Ti=!1,zi=0;zi<_o;zi++){var ts=Object.keys(Mt)[zi];if(!_i[ts]||_i[ts]<Mt[ts].length){Ti=!0;break}}if(Ti)return Lo.splice(Zi,1),"continue";var Su=Ei.length;if(Su<t.edges.length)return Lo.splice(Zi,1),"break";for(var bs=!1,Rl=function(Mu){var Ns=Ei[Mu],Pf=Ns[s],kl=Mt[Pf];if(!kl||!kl.length)return _i[Pf]--,kl&&_i[Pf]<kl.length?(bs=!0,"break"):(Ei.splice(Mu,1),Aa[Ns.source].degree--,Aa[Ns.target].degree--,Aa[Ns.source].outDegree--,Aa[Ns.target].inDegree--,"continue");var D0=Aa[Ns.source].node[o],L0=Aa[Ns.target].node[o],Iv=!1;if(kl.forEach(function(P0){var N0=ct[P0.source].node,R0=ct[P0.target].node;N0[o]===D0&&R0[o]===L0&&(Iv=!0),!r&&N0[o]===L0&&R0[o]===D0&&(Iv=!0)}),!Iv)return _i[Pf]--,kl&&_i[Pf]<kl.length?(bs=!0,"break"):(Ei.splice(Mu,1),Aa[Ns.source].degree--,Aa[Ns.target].degree--,Aa[Ns.source].outDegree--,Aa[Ns.target].inDegree--,"continue")},zi=Su-1;zi>=0;zi--){var fd=Rl(zi);if(fd==="break")break}if(bs)return Lo.splice(Zi,1),"continue";vi.edges=Ei;var iu=xr(vi,vi.nodes[0].id,!1).length;if(Object.keys(iu).reverse().forEach(function(Qo){if(!(Qo===vi.nodes[0].id||bs)){if(iu[Qo]===1/0){var Mu=Aa[Qo].node[o];if(Mo[Mu]--,Mo[Mu]<pt[Mu].length){bs=!0;return}var Ns=vi.nodes.indexOf(Aa[Qo].node);vi.nodes.splice(Ns,1),Aa[Qo]=void 0;return}var Pf=j[Qo].node[o];if(!Ts[Pf]||!Ts[Pf].length||iu[Qo]>Ts[Pf][Ts[Pf].length-1]){var Mu=Aa[Qo].node[o];if(Mo[Mu]--,Mo[Mu]<pt[Mu].length){bs=!0;return}var Ns=vi.nodes.indexOf(Aa[Qo].node);vi.nodes.splice(Ns,1),Aa[Qo]=void 0}}}),bs)return Lo.splice(Zi,1),"continue";for(var Yu=!0,Lf=0;Yu&&!bs;){Yu=!1;var $c=r?Aa[Ki.id].degree<ct[zn.id].degree||Aa[Ki.id].inDegree<ct[zn.id].inDegree||Aa[Ki.id].outDegree<ct[zn.id].outDegree:Aa[Ki.id].degree<ct[zn.id].degree;if($c){bs=!0;break}if(Mo[Ki[o]]<pt[Ki[o]].length){bs=!0;break}for(var ou=vi.nodes.length,cf=ou-1;cf>=0;cf--){var lc=vi.nodes[cf],I0=Aa[lc.id].degree,_S=Aa[lc.id].inDegree,CS=Aa[lc.id].outDegree,TS=lc[o],Av=Po(oi,TS,ct,pt),O0=Av.minPatternNodeLabelDegree,AS=Av.minPatternNodeLabelInDegree,IS=Av.minPatternNodeLabelOutDegree,OS=r?I0<O0||_S<AS||CS<IS:I0<O0;if(OS){if(Mo[lc[o]]--,Mo[lc[o]]<pt[lc[o]].length){bs=!0;break}vi.nodes.splice(cf,1),Aa[lc.id]=void 0,Yu=!0}}if(bs||!Yu&&Lf!==0)break;Su=Ei.length;for(var Mh=Su-1;Mh>=0;Mh--){var dc=Ei[Mh];if(!Aa[dc.source]||!Aa[dc.target]){Ei.splice(Mh,1);var _h=dc[s];if(_i[_h]--,Aa[dc.source]&&(Aa[dc.source].degree--,Aa[dc.source].outDegree--),Aa[dc.target]&&(Aa[dc.target].degree--,Aa[dc.target].inDegree--),Mt[_h]&&_i[_h]<Mt[_h].length){bs=!0;break}Yu=!0}}Lf++}if(bs||bs||vi.nodes.length<t.nodes.length||Ei.length<t.edges.length)return Lo.splice(Zi,1),"continue"},Is=Wu-1;Is>=0;Is--){var wu=As(Is);if(wu==="break")break}for(var js=Lo.length,au=function(Zi){var vi=Lo[Zi],Ki={};vi.edges.forEach(function(Ei){var _i="".concat(Ei.source,"-").concat(Ei.target,"-").concat(Ei.label);Ki[_i]?Ki[_i]++:Ki[_i]=1});for(var Mo=function(_i){var _o=Lo[_i],Ti={};_o.edges.forEach(function(ts){var Su="".concat(ts.source,"-").concat(ts.target,"-").concat(ts.label);Ti[Su]?Ti[Su]++:Ti[Su]=1});var zi=!0;Object.keys(Ti).length!==Object.keys(Ki).length?zi=!1:Object.keys(Ki).forEach(function(ts){Ti[ts]!==Ki[ts]&&(zi=!1)}),zi&&Lo.splice(_i,1)},Aa=js-1;Aa>Zi;Aa--)Mo(Aa);js=Lo.length},Is=0;Is<=js-1;Is++)au(Is);return Lo}}},no=ro,es=function(){function i(e){e===void 0&&(e=10),this.linkedList=new It,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),vo=es,Si=Dn,ao={getAdjMatrix:yt,breadthFirstSearch:ve,connectedComponent:Ce,getDegree:Jt,getInDegree:we,getOutDegree:Tt,detectCycle:Dn,detectDirectedCycle:Si,detectAllCycles:an,detectAllDirectedCycle:cn,detectAllUndirectedCycle:Br,depthFirstSearch:Ar,dijkstra:xr,findAllPath:qr,findShortestPath:Tr,floydWarshall:xn,labelPropagation:Mr,louvain:Q,iLouvain:R,kCore:O,kMeans:Ft,cosineSimilarity:ee,nodesCosineSimilarity:me,minimumSpanningTree:Dr,pageRank:jt,getNeighbors:Dt,Stack:vo,GADDI:no},Jo=C(277160),Yt=C(631437),de=Xt,Ge=function(e){return function(t,r){return t[e]-r[e]}},sr=function(e,t,r){return e>=t&&e<=r},Lr=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,_=s.x*s.x+s.y*s.y,I=u.x*u.x+u.y*u.y;if(c>a*_*I){var B=(o.x*u.y-o.y*u.x)*l,j=(o.x*s.y-o.y*s.x)*l;return!sr(B,0,1)||!sr(j,0,1)?null:{x:e.x+B*s.x,y:e.y+B*s.y}}return null},Nr=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,_=1;_<f.length&&(l=Lr(f[_-1],f[_],c,t),!l);_++);return l},Sr=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},en=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},fn=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Jo.transformMat3(n,n,t),{x:n[0],y:n[1]}},Pn=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=rt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Jo.transformMat3(a,a,n),{x:a[0],y:a[1]}},sa=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Zn=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},pa=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ya=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},di=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Ma=function(e,t){e.translate(t.x,t.y)},oa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,_=0,I=0,B=0;e.animate(function(et){return I=f*et,B=c*et,a=de(a,[["t",I-l,B-_]]),l=I,_=B,{matrix:a}},n)}else{var j=de(a,[["t",s,u]]);e.setMatrix(j)}},si=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,h.isArray)(t)||(n=[t,t]),(0,h.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=de(r,[["s",n[0],n[1]]]),e.setMatrix(r)},$a=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=de(r,[["r",t]]),e.setMatrix(r)},Fa=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ui(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var fi=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(Ui(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},La=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},ja=function(e,t){var r=!1;return(0,h.each)(e,function(n){if(Lr(n.from,n.to,t.from,t.to))return r=!0,!1}),r},za=function(e,t){var r=function(_){var I=_.map(function(j){return j[0]}),B=_.map(function(j){return j[1]});return{minX:Math.min.apply(null,I),maxX:Math.max.apply(null,I),minY:Math.min.apply(null,B),maxY:Math.max.apply(null,B)}},n=function(_){for(var I=[],B=_.length,j=0;j<B-1;j++){var et=_[j],ut=_[j+1];I.push({from:{x:et[0],y:et[1]},to:{x:ut[0],y:ut[1]}})}if(I.length>1){var ct=_[0],pt=_[B-1];I.push({from:{x:pt[0],y:pt[1]},to:{x:ct[0],y:ct[1]}})}return I};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!La(a,o))return!1;var s=!1;if((0,h.each)(t,function(l){if(fi(e,l[0],l[1]))return s=!0,!1}),s||((0,h.each)(e,function(l){if(fi(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,h.each)(f,function(l){if(ja(u,l))return c=!0,!1}),c},yi=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),mi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},ki=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},po=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=mi(n,r[s]),f=u[0],c=u[1],l=u[2],_=u[3];o[s]=Lr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:_}),o[s]&&(a+=1)}return[o,a]},Wi=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=mi(n,r[s]),f=u[0],c=u[1],l=u[2],_=u[3],I=ki(t,new yi(f,c,l,_));I=Math.abs(I-.5),I>=0&&I<=1&&(o+=1,a=I<a?I:a)}return o===0?-1:a},Ao=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},Vo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},os=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},$i=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},qa=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},Yi=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(Yt.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];Yt.normalize(c,c);var l=[s-r,u-n];return Math.abs(Yt.dot(l,c))},io=function(e,t,r){return e+(t-e)*r},Qa=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=io(e[o],t[o],r);return a},Pi="rgb(95, 149, 255)",zo="rgb(255, 255, 255)",qi="rgb(0, 0, 0)",rs="rgb(247, 250, 255)",Xi="rgb(239, 244, 255)",yo="rgb(253, 253, 253)",Es="rgb(250, 250, 250)",ds="rgb(224, 224, 224)",oo="rgb(234, 234, 234)",ls="rgb(245, 245, 245)",hs="rgb(191, 213, 255)",Os="#4572d9",Ho="rgb(223, 234, 255)",$t={mainStroke:Pi,mainFill:Xi,activeStroke:Pi,activeFill:rs,inactiveStroke:hs,inactiveFill:rs,selectedStroke:Pi,selectedFill:zo,highlightStroke:Os,highlightFill:Ho,disableStroke:ds,disableFill:Es,edgeMainStroke:ds,edgeActiveStroke:Pi,edgeInactiveStroke:oo,edgeSelectedStroke:Pi,edgeHighlightStroke:Pi,edgeDisableStroke:ls,comboMainStroke:ds,comboMainFill:yo,comboActiveStroke:Pi,comboActiveFill:rs,comboInactiveStroke:ds,comboInactiveFill:yo,comboSelectedStroke:Pi,comboSelectedFill:yo,comboHighlightStroke:Os,comboHighlightFill:yo,comboDisableStroke:oo,comboDisableFill:Es},ye={version:"0.8.17",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:$t.mainStroke,fill:Xi},size:20,color:$t.mainStroke,linkPoints:{size:8,lineWidth:1,fill:$t.activeFill,stroke:$t.activeStroke}},nodeStateStyles:{active:{fill:$t.activeFill,stroke:$t.activeStroke,lineWidth:2,shadowColor:$t.mainStroke,shadowBlur:10},selected:{fill:$t.selectedFill,stroke:$t.selectedStroke,lineWidth:4,shadowColor:$t.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:$t.highlightFill,stroke:$t.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:$t.inactiveFill,stroke:$t.inactiveStroke,lineWidth:1},disable:{fill:$t.disableFill,stroke:$t.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:qi,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:$t.edgeMainStroke,lineAppendWidth:2},color:$t.edgeMainStroke},edgeStateStyles:{active:{stroke:$t.edgeActiveStroke,lineWidth:1},selected:{stroke:$t.edgeSelectedStroke,lineWidth:2,shadowColor:$t.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$t.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:$t.edgeInactiveStroke,lineWidth:1},disable:{stroke:$t.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:qi,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:$t.comboMainFill,lineWidth:1,stroke:$t.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:$t.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:$t.comboActiveStroke,lineWidth:1,fill:$t.comboActiveFill},selected:{stroke:$t.comboSelectedStroke,lineWidth:2,fill:$t.comboSelectedFill,shadowColor:$t.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$t.comboHighlightStroke,lineWidth:2,fill:$t.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:$t.comboInactiveStroke,fill:$t.comboInactiveFill,lineWidth:1},disable:{stroke:$t.comboDisableStroke,fill:$t.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ir={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},dr=Math.PI,Zr=Math.sin,Ln=Math.cos,Qn=Zr(dr/8),Sa=Ln(dr/8),Ci=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=fn(n,o),a=fn(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Io=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||ye.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],_=[e.endPoint.x,e.endPoint.y],I=o.height/2,B=o.width/2,j=I,et=I,ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,Zt=a.get("type"),se=Math.min(I/2,B/2),oe=Math.min(I,B),_e=s!=null&&s.pointPadding?Math.min(oe,s==null?void 0:s.pointPadding):se;if(l[0]===_[0]&&l[1]===_[1]){switch(f){case"top":Zt==="circle"?(l=[c[0]-ut,c[1]-ct],_=[c[0]+pt,c[1]-Mt]):(l=[c[0]-_e,c[1]-I],_=[c[0]+_e,c[1]-I]);break;case"top-right":j=I,et=B,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]+ut,c[1]-ct],_=[c[0]+Mt,c[1]-pt]):(l=[c[0]+B-_e,c[1]-I],_=[c[0]+B,c[1]-I+_e]);break;case"right":j=B,et=B,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]+ct,c[1]-ut],_=[c[0]+Mt,c[1]+pt]):(l=[c[0]+B,c[1]-_e],_=[c[0]+B,c[1]+_e]);break;case"bottom-right":j=B,et=I,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]+ct,c[1]+ut],_=[c[0]+pt,c[1]+Mt]):(l=[c[0]+B,c[1]+I-_e],_=[c[0]+B-_e,c[1]+I]);break;case"bottom":j=I,et=I,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]+ut,c[1]+ct],_=[c[0]-pt,c[1]+Mt]):(l=[c[0]-_e,c[1]+I],_=[c[0]+_e,c[1]+I]);break;case"bottom-left":j=I,et=B,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]-ut,c[1]+ct],_=[c[0]-Mt,c[1]+pt]):(l=[c[0]-B,c[1]+I-_e],_=[c[0]-B+_e,c[1]+I]);break;case"left":j=B,et=B,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]-ct,c[1]+ut],_=[c[0]-Mt,c[1]-pt]):(l=[c[0]-B,c[1]-_e],_=[c[0]-B,c[1]+_e]);break;case"top-left":j=B,et=I,Zt==="circle"?(ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]-ct,c[1]-ut],_=[c[0]-pt,c[1]-Mt]):(l=[c[0]-B+_e,c[1]-I],_=[c[0]-B,c[1]-I+_e]);break;default:j=B,et=B,ut=j*Qn,ct=j*Sa,pt=et*Qn,Mt=et*Sa,l=[c[0]-ut,c[1]-ct],_=[c[0]+pt,c[1]-Mt]}if(s.clockwise===!1){var Ue=[l[0],l[1]];l=[_[0],_[1]],_=[Ue[0],Ue[1]]}}var Re=[l[0]-c[0],l[1]-c[1]],qe=(j+u)/j,hr=(et+u)/et;s.clockwise===!1&&(qe=(et+u)/et,hr=(j+u)/j);var nn=Yt.scale([0,0],Re,qe),kn=[c[0]+nn[0],c[1]+nn[1]],En=[_[0]-c[0],_[1]-c[1]],Kr=Yt.scale([0,0],En,hr),ta=[c[0]+Kr[0],c[1]+Kr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:_[0],y:_[1]},e.controlPoints=[{x:kn[0],y:kn[1]},{x:ta[0],y:ta[1]}],e},Go=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=dr*2),r&&(u.x+=Ln(c)*r,u.y+=Zr(c)*r),n){var l=c-dr/2;c>1/2*dr&&c<3*1/2*dr&&(l-=dr),u.x+=Ln(l)*n,u.y+=Zr(l)*n}var _={x:u.x,y:u.y,angle:c};return a?(c>.5*dr&&c<1.5*dr&&(c-=dr),(0,b.__assign)({rotate:c},_)):_},zs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Ds=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},ji=function(e,t){typeof t=="function"&&zs(e,null,-1,t)},xo=function(e,t){typeof t=="function"&&Ds(e,null,-1,t)},Gs=function(e,t){return t*(ir[e]||1)},vs=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=Gs(a,t)}),[r,t]},qs=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Qs=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,h.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var _=n[l.parentId];if(_)_.children?_.children.push(c):_.children=[c];else{var I={id:l.parentId,children:[l]};n[l.parentId]=I,n[c.id]=c}return}if((0,h.isString)(u.parentId)){var B=n[u.parentId];if(B)B.children?B.children.push(c):B.children=[c],n[c.id]=c;else{var j={id:u.parentId,children:[c]};n[j.id]=j,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,ji(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var _=o[f.id];return _&&(_.depth=f.depth),!0})}),r},Js=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(B){if(!u){if(B.id===t){o=B,B.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}ji(B,function(j){var et;return s[j.id]={children:(j==null?void 0:j.children)||[]},a=(et=s[j.parentId||j.comboId||"root"])===null||et===void 0?void 0:et.children,j&&(j.removed||t===j.id)&&a?(f=j.parentId||j.comboId||"root",o=j,j.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var _=0;(e||[]).forEach(function(B){l||ji(B,function(j){return r===j.id?(l=!0,j.children?j.children.push(o):j.children=[o],_=j.depth,o.itemType==="node"?o.depth=_+2:o.depth=_+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var I=o.depth;ji(o,function(B){return B.itemType==="node"?I+=2:I+=1,B.depth=I,!0})}return e},Vs=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,_=c?l:f,I=(0,h.isArray)(_)?_:[_,_],B=I[0],j=I[1],et=[B/2,j/2];return{minX:s-et[0],minY:u-et[1],maxX:s+et[0],maxY:u+et[1],x:s,y:u,width:B,height:j}}return e.forEach(function(ut){var ct=t.findById(ut.id);if(!(!ct||!ct.isVisible())){ct.set("bboxCanvasCache",void 0);var pt=ct.getCanvasBBox();pt.x&&n.minX>pt.minX&&(n.minX=pt.minX),pt.y&&n.minY>pt.minY&&(n.minY=pt.minY),pt.x&&n.maxX<pt.maxX&&(n.maxX=pt.maxX),pt.y&&n.maxY<pt.maxY&&(n.maxY=pt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ut){(n[ut]===1/0||n[ut]===-1/0)&&(n[ut]=void 0)}),n},Rs=function(e){var t=(0,h.isNumber)(e.x)||(0,h.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,h.isNumber)(e.style.r)||(0,h.isNumber)(e.style.width)||(0,h.isNumber)(e.style.height)||(0,h.isNumber)(e.style.rx)||(0,h.isNumber)(e.style.ry)),t},Us=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,h.isObject)(n)&&!(0,h.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,h.isString)(s)||(a[o]=(0,h.clone)(s))}),t[r]=a}else t[r]=(0,h.clone)(n)}),t},ws=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,h.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},ns=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return ji(e,function(_){return(0,h.isString)(_.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(_){return!(0,h.isString)(_.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(_){return _.id}),f=a==null?void 0:a.map(function(_){return _.id}),c=(0,b.__spreadArray)((0,b.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(_){return!c.includes(_.source)||!c.includes(_.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},_u=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,h.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Cu=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,h.each)(e,function(t){(0,h.each)(t,function(r,n){(0,h.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,h.each)(r||[],function(o){var s=W.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,h.each)(t,function(r){e.indexOf(r)<0&&((0,h.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,h.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,h.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,h.isArray)(e)?a=e:a=[e],(0,h.isArray)(t))return(0,h.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,h.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Uo=Cu,bo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,ss=new RegExp("([a-z])["+bo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+bo+"]*,?["+bo+"]*)+)","ig"),d=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+bo+"]*,?["+bo+"]*","ig"),G=function(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(ss,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(d,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},Et=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},Gt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},re=function(i){if(i=G(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,_=o,I=i.length;_<I;_++){if(e.push(c=[]),l=i[_],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var B=2,j=u.length;B<j;B++)u[B]=+u[B]+t,u[++B]=+u[B]+r;e.pop(),e=e.concat(Et(u,f));break;case"O":e.pop(),u=Gt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Gt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var B=1,j=l.length;B<j;B++)c[B]=+l[B]+(B%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(Et(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=Gt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Gt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var et=0,ut=l.length;et<ut;et++)c[et]=l[et];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},he=function(i,e,t,r){return[i,e,t,r,t,r]},ge=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},De=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),_=[],I,B,j,et,ut,ct=function(Qi,Li,Ji){var co=Qi*Math.cos(Ji)-Li*Math.sin(Ji),jo=Qi*Math.sin(Ji)+Li*Math.cos(Ji);return{x:co,y:jo}};if(f)B=f[0],j=f[1],et=f[2],ut=f[3];else{I=ct(i,e,-l),i=I.x,e=I.y,I=ct(s,u,-l),s=I.x,u=I.y,i===s&&e===u&&(s+=1,u+=1);var pt=(i-s)/2,Mt=(e-u)/2,Zt=pt*pt/(t*t)+Mt*Mt/(r*r);Zt>1&&(Zt=Math.sqrt(Zt),t=Zt*t,r=Zt*r);var se=t*t,oe=r*r,_e=(a===o?-1:1)*Math.sqrt(Math.abs((se*oe-se*Mt*Mt-oe*pt*pt)/(se*Mt*Mt+oe*pt*pt)));et=_e*t*Mt/r+(i+s)/2,ut=_e*-r*pt/t+(e+u)/2,B=Math.asin(((e-ut)/r).toFixed(9)),j=Math.asin(((u-ut)/r).toFixed(9)),B=i<et?Math.PI-B:B,j=s<et?Math.PI-j:j,B<0&&(B=Math.PI*2+B),j<0&&(j=Math.PI*2+j),o&&B>j&&(B=B-Math.PI*2),!o&&j>B&&(j=j-Math.PI*2)}var Ue=j-B;if(Math.abs(Ue)>c){var Re=j,qe=s,hr=u;j=B+c*(o&&j>B?1:-1),s=et+t*Math.cos(j),u=ut+r*Math.sin(j),_=De(s,u,t,r,n,0,o,qe,hr,[j,Re,et,ut])}Ue=j-B;var nn=Math.cos(B),kn=Math.sin(B),En=Math.cos(j),Kr=Math.sin(j),ta=Math.tan(Ue/4),$n=4/3*t*ta,$r=4/3*r*ta,yn=[i,e],Fn=[i+$n*kn,e-$r*nn],zn=[s+$n*Kr,u-$r*En],ia=[s,u];if(Fn[0]=2*yn[0]-Fn[0],Fn[1]=2*yn[1]-Fn[1],f)return[Fn,zn,ia].concat(_);_=[Fn,zn,ia].concat(_).join().split(",");for(var da=[],Wa=0,oi=_.length;Wa<oi;Wa++)da[Wa]=Wa%2?ct(_[Wa-1],_[Wa],l).y:ct(_[Wa],_[Wa+1],l).x;return da},ze=function(i,e){var t=re(i),r=e&&re(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(pt,Mt,Zt){var se,oe;if(!pt)return["C",Mt.x,Mt.y,Mt.x,Mt.y,Mt.x,Mt.y];switch(!(pt[0]in{T:1,Q:1})&&(Mt.qx=Mt.qy=null),pt[0]){case"M":Mt.X=pt[1],Mt.Y=pt[2];break;case"A":pt=["C"].concat(De.apply(0,[Mt.x,Mt.y].concat(pt.slice(1))));break;case"S":Zt==="C"||Zt==="S"?(se=Mt.x*2-Mt.bx,oe=Mt.y*2-Mt.by):(se=Mt.x,oe=Mt.y),pt=["C",se,oe].concat(pt.slice(1));break;case"T":Zt==="Q"||Zt==="T"?(Mt.qx=Mt.x*2-Mt.qx,Mt.qy=Mt.y*2-Mt.qy):(Mt.qx=Mt.x,Mt.qy=Mt.y),pt=["C"].concat(ge(Mt.x,Mt.y,Mt.qx,Mt.qy,pt[1],pt[2]));break;case"Q":Mt.qx=pt[1],Mt.qy=pt[2],pt=["C"].concat(ge(Mt.x,Mt.y,pt[1],pt[2],pt[3],pt[4]));break;case"L":pt=["C"].concat(he(Mt.x,Mt.y,pt[1],pt[2]));break;case"H":pt=["C"].concat(he(Mt.x,Mt.y,pt[1],Mt.y));break;case"V":pt=["C"].concat(he(Mt.x,Mt.y,Mt.x,pt[1]));break;case"Z":pt=["C"].concat(he(Mt.x,Mt.y,Mt.X,Mt.Y));break;default:break}return pt},_=function(pt,Mt){if(pt[Mt].length>7){pt[Mt].shift();for(var Zt=pt[Mt];Zt.length;)o[Mt]="A",r&&(s[Mt]="A"),pt.splice(Mt++,0,["C"].concat(Zt.splice(0,6)));pt.splice(Mt,1),c=Math.max(t.length,r&&r.length||0)}},I=function(pt,Mt,Zt,se,oe){pt&&Mt&&pt[oe][0]==="M"&&Mt[oe][0]!=="M"&&(Mt.splice(oe,0,["M",se.x,se.y]),Zt.bx=0,Zt.by=0,Zt.x=pt[oe][1],Zt.y=pt[oe][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var B=0;B<c;B++){t[B]&&(u=t[B][0]),u!=="C"&&(o[B]=u,B&&(f=o[B-1])),t[B]=l(t[B],n,f),o[B]!=="A"&&u==="C"&&(o[B]="C"),_(t,B),r&&(r[B]&&(u=r[B][0]),u!=="C"&&(s[B]=u,B&&(f=s[B-1])),r[B]=l(r[B],a,f),s[B]!=="A"&&u==="C"&&(s[B]="C"),_(r,B)),I(t,r,n,a,B),I(r,t,a,n,B);var j=t[B],et=r&&r[B],ut=j.length,ct=r&&et.length;n.x=j[ut-2],n.y=j[ut-1],n.bx=parseFloat(j[ut-4])||n.x,n.by=parseFloat(j[ut-3])||n.y,a.bx=r&&(parseFloat(et[ct-4])||a.x),a.by=r&&(parseFloat(et[ct-3])||a.y),a.x=r&&et[ct-2],a.y=r&&et[ct-1]}return r?[t,r]:t},He=/,?([a-z]),?/gi,ur=function(i){return i.join(",").replace(He,"$1")},Ur=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Xr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<c;B++){var j=f*l[B]+f,et=Ur(j,i,t,n,o),ut=Ur(j,e,r,a,s),ct=et*et+ut*ut;I+=_[B]*Math.sqrt(ct)}return f*I},Wr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*c,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-l-et)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,Mt=pt,Zt;pt--;)I=u[pt],Zt=1-I,f[0][pt]=Zt*Zt*Zt*i+3*Zt*Zt*I*t+3*Zt*I*I*n+I*I*I*o,f[1][pt]=Zt*Zt*Zt*e+3*Zt*Zt*I*r+3*Zt*I*I*a+I*I*I*s;return f[0][Mt]=i,f[1][Mt]=e,f[0][Mt+1]=o,f[1][Mt+1]=s,f[0].length=f[1].length=Mt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Tn=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,_=f/c,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},On=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Qr=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=ur,a},ra=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Qr(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ha=function(i,e){return i=ra(i),e=ra(e),On(e,i.x,i.y)||On(e,i.x2,i.y)||On(e,i.x,i.y2)||On(e,i.x2,i.y2)||On(i,e.x,e.y)||On(i,e.x2,e.y)||On(i,e.x,e.y2)||On(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Va=function(i,e,t,r,n,a,o,s){(0,h.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=Wr.apply(null,i);return ra(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Ra=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),_=u*u,I=_*u,B=c*i+l*3*u*t+f*3*u*u*n+I*o,j=c*e+l*3*u*r+f*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ct=t+2*u*(n-t)+_*(o-2*n+t),pt=r+2*u*(a-r)+_*(s-2*a+r),Mt=f*i+u*t,Zt=f*e+u*r,se=f*n+u*o,oe=f*a+u*s,_e=90-Math.atan2(et-ct,ut-pt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ct,y:pt},start:{x:Mt,y:Zt},end:{x:se,y:oe},alpha:_e}},_a=function(i,e,t){var r=Va(i),n=Va(e);if(!Ha(r,n))return t?0:[];for(var a=Xr.apply(0,i),o=Xr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=Ra.apply(0,i.concat(I/s));f.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=Ra.apply(0,e.concat(I/u));c.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=f[I],ut=f[I+1],ct=c[j],pt=c[j+1],Mt=Math.abs(ut.x-et.x)<.001?"y":"x",Zt=Math.abs(pt.x-ct.x)<.001?"y":"x",se=Tn(et.x,et.y,ut.x,ut.y,ct.x,ct.y,pt.x,pt.y);if(se){if(l[se.x.toFixed(4)]===se.y.toFixed(4))continue;l[se.x.toFixed(4)]=se.y.toFixed(4);var oe=et.t+Math.abs((se[Mt]-et[Mt])/(ut[Mt]-et[Mt]))*(ut.t-et.t),_e=ct.t+Math.abs((se[Zt]-ct[Zt])/(pt[Zt]-ct[Zt]))*(pt.t-ct.t);oe>=0&&oe<=1&&_e>=0&&_e<=1&&(t?_+=1:_.push({x:se.x,y:se.y,t1:oe,t2:_e}))}}return _},Pa=function(i,e,t){i=ze(i),e=ze(e);for(var r,n,a,o,s,u,f,c,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var pt=e[ut];if(pt[0]==="M")a=f=pt[1],o=c=pt[2];else{pt[0]==="C"?(_=[a,o].concat(pt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,f,c,f,c],a=f,o=c);var Mt=_a(l,_,t);if(t)I+=Mt;else{for(var Zt=0,se=Mt.length;Zt<se;Zt++)Mt[Zt].segment1=B,Mt[Zt].segment2=ut,Mt[Zt].bez1=l,Mt[Zt].bez2=_;I=I.concat(Mt)}}}}}return I},Oo=function(i,e){return Pa(i,e)};function Eo(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function go(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Eo(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var _=[];return l.length===4&&(_.push("C"),_=_.concat(l[2])),l.length>=3&&(l.length===3&&_.push("Q"),_=_.concat(l[1])),l.length===2&&_.push("L"),_=_.concat(l[l.length-1]),_});return c}var wo=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(go(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},So=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(wo(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},No=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,h.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function Ro(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var ci=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],No(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,_=s[u-1][f-1].min+o;s[u][f]=Ro(c,l,_)}}return s},Bi=function(i,e){var t=ci(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Hs(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Zs(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Zs(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ps=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Zs(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Hs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Hs(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Hs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Tu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),Nf=Tu;function hc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var vc=typeof window!="undefined"&&typeof window.document!="undefined";function pc(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Rf(i){return i.cfg.visible&&i.cfg.capture}var kf=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,h.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(tt),gc=kf,du=C(734155),lf=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},mc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),qc=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=du.platform}return i}(),hu=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),yc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),ea=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Au=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ui=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,df=3,Xu=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Au]],su=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bf(i){return i?hf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ea:typeof navigator!="undefined"?hf(navigator.userAgent):Ws()}function Iu(i){return i!==""&&Xu.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function xc(i){var e=Iu(i);return e?e[0]:null}function hf(i){var e=Iu(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new yc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<df&&(n=lf(lf([],n,!0),lt(df-n.length),!0)):n=[];var a=n.join("."),o=bc(i),s=ui.exec(i);return s&&s[1]?new hu(t,a,o,s[1]):new mc(t,a,o)}function bc(i){for(var e=0,t=su.length;e<t;e++){var r=su[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function Ws(){var i=typeof du!="undefined"&&du.version;return i?new qc(du.version.slice(1)):null}function lt(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Nt(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],_=e[0],I=e[1],B=e[2],j=e[3],et=e[4],ut=e[5],ct=e[6],pt=e[7],Mt=e[8];return t[0]=_*r+I*o+B*f,t[1]=_*n+I*s+B*c,t[2]=_*a+I*u+B*l,t[3]=j*r+et*o+ut*f,t[4]=j*n+et*s+ut*c,t[5]=j*a+et*u+ut*l,t[6]=ct*r+pt*o+Mt*f,t[7]=ct*n+pt*s+Mt*c,t[8]=ct*a+pt*u+Mt*l,t}function Vt(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function le(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,_=-c*a+s*u,I=f*a-o*u,B=t*l+r*_+n*I;return B?(B=1/B,e[0]=l*B,e[1]=(-c*r+n*f)*B,e[2]=(s*r-n*o)*B,e[3]=_*B,e[4]=(c*t-n*u)*B,e[5]=(-s*t+n*a)*B,e[6]=I*B,e[7]=(-f*t+r*u)*B,e[8]=(o*t-r*a)*B,e):null}var Ie=Xt,nr="matrix",fr=["zIndex","capture","visible","type"],Gr=["repeat"],vn=":",mn="*";function Hn(i){for(var e=[],t=0;t<i.length;t++)(0,h.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function aa(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function Kn(i,e){var t={},r=e.attr();return(0,h.each)(i,function(n,a){Gr.indexOf(a)===-1&&!(0,h.isEqual)(r[a],n)&&(t[a]=n)}),t}function Oa(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,h.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,h.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Ja=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,h.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,h.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(hc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(nr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(nr)},e.prototype.setMatrix=function(t){this.attr(nr,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Nt(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Nt(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Vt(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=le(r);if(n)return Vt(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,h.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,h.each)(r,function(s,u){(0,h.isArray)(r[u])?n[u]=Hn(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,h.each)(fr,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?h.noop:c,_=t[4],I=_===void 0?0:_,B,j,et,ut,ct;(0,h.isFunction)(o)?(B=o,o={}):(0,h.isObject)(o)&&o.onFrame&&(B=o.onFrame,j=o.repeat),(0,h.isObject)(s)?(ct=s,s=ct.duration,f=ct.easing||"easeLinear",I=ct.delay||0,j=ct.repeat||j||!1,l=ct.callback||h.noop,et=ct.pauseCallback||h.noop,ut=ct.resumeCallback||h.noop):((0,h.isNumber)(l)&&(I=l,l=null),(0,h.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var pt=Kn(o,this),Mt={fromAttrs:aa(pt,this),toAttrs:pt,duration:s,easing:f,repeat:j,callback:l,pauseCallback:et,resumeCallback:ut,delay:I,startTime:n.getTime(),id:(0,h.uniqueId)(),onFrame:B,pathFormatted:!1};a.length>0?a=Oa(a,Mt):n.addAnimator(this),a.push(Mt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,h.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,h.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,h.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(_){var I=a[_],B=I.get("name");if(B){if((I.isGroup()||I.isCanvas&&I.isCanvas())&&s&&pc(I,s))return"break";(0,h.isArray)(B)?(0,h.each)(B,function(j){n.emitDelegateEvent(I,j,r)}):f.emitDelegateEvent(I,B,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+vn+n.type;(a[o]||a[mn])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Ie(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Ie(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Ie(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Ie(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Ie(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(gc),Na=Ja,Ta={},ka="_INDEX";function ha(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){ha(r,e)})}}function Ya(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Ya(r,e)})}}function Ga(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function ma(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),hc(i.getChildren(),e)}function ri(i){return function(e,t){var r=i(e,t);return r===0?e[ka]-t[ka]:r}}var xi=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY;c<t&&(t=c),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY;c<t&&(t=c),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,h.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,h.isObject)(n)?a=n:a.type=n;var o=Ta[a.type];o||(o=(0,h.upperFirst)(a.type),Ta[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,h.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Rf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Rf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&ma(o,t,!1),t.set("parent",this),r&&ha(t,r),a&&Ya(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,h.each)(t,function(r,n){return r[ka]=n,r}),t.sort(ri(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,h.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,h.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Na),Vi=xi,Ai=C(235374),hi=C(952677);function to(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function ko(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function so(){}var ks=.7,Ou=1/ks,Ls="\\s*([+-]?\\d+)\\s*",uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tu=/^#([0-9a-f]{3,8})$/,Ff=new RegExp("^rgb\\(".concat(Ls,",").concat(Ls,",").concat(Ls,"\\)$")),Qc=new RegExp("^rgb\\(".concat(Ss,",").concat(Ss,",").concat(Ss,"\\)$")),ju=new RegExp("^rgba\\(".concat(Ls,",").concat(Ls,",").concat(Ls,",").concat(uu,"\\)$")),vf=new RegExp("^rgba\\(".concat(Ss,",").concat(Ss,",").concat(Ss,",").concat(uu,"\\)$")),Ec=new RegExp("^hsl\\(".concat(uu,",").concat(Ss,",").concat(Ss,"\\)$")),Vu=new RegExp("^hsla\\(".concat(uu,",").concat(Ss,",").concat(Ss,",").concat(uu,"\\)$")),vu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};to(so,ru,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:zf,formatHex:zf,formatHex8:Gf,formatHsl:wc,formatRgb:eu,toString:eu});function zf(){return this.rgb().formatHex()}function Gf(){return this.rgb().formatHex8()}function wc(){return _c(this).formatHsl()}function eu(){return this.rgb().formatRgb()}function ru(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=tu.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Sc(e):t===3?new us(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Hu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Hu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ff.exec(i))?new us(e[1],e[2],e[3],1):(e=Qc.exec(i))?new us(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ju.exec(i))?Hu(e[1],e[2],e[3],e[4]):(e=vf.exec(i))?Hu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ec.exec(i))?Mc(e[1],e[2]/100,e[3]/100,1):(e=Vu.exec(i))?Mc(e[1],e[2]/100,e[3]/100,e[4]):vu.hasOwnProperty(i)?Sc(vu[i]):i==="transparent"?new us(NaN,NaN,NaN,0):null}function Sc(i){return new us(i>>16&255,i>>8&255,i&255,1)}function Hu(i,e,t,r){return r<=0&&(i=e=t=NaN),new us(i,e,t,r)}function cd(i){return i instanceof so||(i=ru(i)),i?(i=i.rgb(),new us(i.r,i.g,i.b,i.opacity)):new us}function pu(i,e,t,r){return arguments.length===1?cd(i):new us(i,e,t,r==null?1:r)}function us(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}to(us,pu,ko(so,{brighter:function(e){return e=e==null?Ou:Math.pow(Ou,e),new us(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ks:Math.pow(ks,e),new us(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new us(mu(this.r),mu(this.g),mu(this.b),gu(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jc,formatHex:Jc,formatHex8:pf,formatRgb:tl,toString:tl}));function Jc(){return"#".concat(yu(this.r)).concat(yu(this.g)).concat(yu(this.b))}function pf(){return"#".concat(yu(this.r)).concat(yu(this.g)).concat(yu(this.b)).concat(yu((isNaN(this.opacity)?1:this.opacity)*255))}function tl(){var i=gu(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(mu(this.r),", ").concat(mu(this.g),", ").concat(mu(this.b)).concat(i===1?")":", ".concat(i,")"))}function gu(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function mu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function yu(i){return i=mu(i),(i<16?"0":"")+i.toString(16)}function Mc(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Bs(i,e,t,r)}function _c(i){if(i instanceof Bs)return new Bs(i.h,i.s,i.l,i.opacity);if(i instanceof so||(i=ru(i)),!i)return new Bs;if(i instanceof Bs)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Bs(o,s,u,i.opacity)}function el(i,e,t,r){return arguments.length===1?_c(i):new Bs(i,e,t,r==null?1:r)}function Bs(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}to(Bs,el,ko(so,{brighter:function(e){return e=e==null?Ou:Math.pow(Ou,e),new Bs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ks:Math.pow(ks,e),new Bs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new us(Cc(e>=240?e-240:e+120,a,n),Cc(e,a,n),Cc(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Bs(rl(this.h),Uf(this.s),Uf(this.l),gu(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=gu(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(rl(this.h),", ").concat(Uf(this.s)*100,"%, ").concat(Uf(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function rl(i){return i=(i||0)%360,i<0?i+360:i}function Uf(i){return Math.max(0,Math.min(1,i||0))}function Cc(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function nl(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Bl(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return nl((t-r/e)*e,o,n,a,s)}}function al(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return nl((t-r/e)*e,n,a,o,s)}}var Wf=function(i){return function(){return i}};function il(i,e){return function(t){return i+t*e}}function Fl(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function ld(i,e){var t=e-i;return t?il(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function Yf(i){return(i=+i)==1?Tc:function(e,t){return t-e?Fl(e,t,i):Wf(isNaN(e)?t:e)}}function Tc(i,e){var t=e-i;return t?il(i,t):Wf(isNaN(i)?e:i)}var tr=function i(e){var t=Yf(e);function r(n,a){var o=t((n=pu(n)).r,(a=pu(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Tc(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function ol(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=pu(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var Xf=ol(Bl),sl=ol(al);function ul(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Ac(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function zl(i,e){return(Ac(e)?ul:fl)(i,e)}function fl(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Ys(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function jf(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function gf(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function cl(i,e){var t={},r={},n;(i===null||hi(i)!=="object")&&(i={}),(e===null||hi(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Ys(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var mf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zo=new RegExp(mf.source,"g");function yf(i){return function(){return i}}function ll(i){return function(e){return i(e)+""}}function Vf(i,e){var t=mf.lastIndex=Zo.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=mf.exec(i))&&(n=Zo.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:gf(r,n)})),t=Zo.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?ll(u[0].x):yf(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function Ys(i,e){var t=hi(e),r;return e==null||t==="boolean"?Wf(e):(t==="number"?gf:t==="string"?(r=ru(e))?(e=r,tr):Vf:e instanceof ru?tr:e instanceof Date?jf:Ac(e)?ul:Array.isArray(e)?fl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?cl:gf)(i,e)}function xf(i){return+i}function Zu(i){return i*i}function Du(i){return i*(2-i)}function Ku(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function $u(i){return i*i*i}function qu(i){return--i*i*i+1}function Lu(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var bf=3,Ic=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(bf),Hf=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(bf),Oc=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(bf),Dc=Math.PI,Qu=Dc/2;function Ks(i){return+i==1?1:1-Math.cos(i*Qu)}function dl(i){return Math.sin(i*Qu)}function hl(i){return(1-Math.cos(Dc*i))/2}function nu(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function vl(i){return nu(1-+i)}function pl(i){return 1-nu(i)}function gl(i){return((i*=2)<=1?nu(1-i):2-nu(i-1))/2}function Ju(i){return 1-Math.sqrt(1-i*i)}function Gl(i){return Math.sqrt(1- --i*i)}function ml(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var yl=4/11,Ul=6/11,Wl=8/11,dd=3/4,Yl=9/11,Xl=10/11,hd=15/16,jl=21/22,Vl=63/64,Zf=1/yl/yl;function Hl(i){return 1-tf(1-i)}function tf(i){return(i=+i)<yl?Zf*i*i:i<Wl?Zf*(i-=Ul)*i+dd:i<Xl?Zf*(i-=Yl)*i+hd:Zf*(i-=jl)*i+Vl}function Kf(i){return((i*=2)<=1?1-tf(1-i):tf(i-1)+1)/2}var Ef=1.70158,Lc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(Ef),Pc=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(Ef),Nc=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(Ef),xu=2*Math.PI,wf=1,ef=.3,xl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=xu);function n(a){return e*nu(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*xu)},n.period=function(a){return i(e,a)},n}(wf,ef),$f=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=xu);function n(a){return 1-e*nu(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*xu)},n.period=function(a){return i(e,a)},n}(wf,ef),Rc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=xu);function n(a){return((a=a*2-1)<0?e*nu(-a)*Math.sin((r-a)/t):2-e*nu(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*xu)},n.period=function(a){return i(e,a)},n}(wf,ef),qf={};function Qf(i){return qf[i.toLowerCase()]||L[i]}function kc(i,e){qf[i.toLowerCase()]=e}var Sf=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Jf=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},rf=[1,0,0,0,1,0,0,0,1];function Zl(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,h.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=G(a[s]),f=G(n[s]),f=Bi(f,u),f=ps(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=G(a[s]),f=G(n[s]),f=ps(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],_=f[c],I=[],B=0;B<l.length;B++)(0,h.isNumber)(l[B])&&_&&(0,h.isNumber)(_[B])?(o=Ys(_[B],l[B]),I.push(o(t))):I.push(l[B]);r[s].push(I)}}else if(s==="matrix"){var j=zl(n[s]||rf,a[s]||rf),et=j(t);r[s]=et}else Sf(s)&&Jf(a[s])?r[s]=a[s]:(0,h.isFunction)(a[s])||(o=Ys(n[s],a[s]),r[s]=o(t));i.attr(r)}}function tc(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=Qf(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Zl(i,e,a);return!1}var nf=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=Ai.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=tc(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),Kl=nf,Bc=40,$l=0,vd=":",ql=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function af(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(vd+e)>=0)return!0;return!1}function bl(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function Ql(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&pc(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var Jl=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(ql,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(ql,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new Nf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===$l&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===$l){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,_=s.clientY-e.clientY,I=l*l+_*_;c>120||I>Bc?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,bl(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||Ql(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;bl(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),pd=Jl,El="px",td=Bf(),gs=td&&td.name==="firefox",ed=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,h.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new pd({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Kl(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");vc&&(n.style.width=t+El,n.style.height=r+El)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");vc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(gs&&!(0,h.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,h.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Vi),of=ed,Pu=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Vi),wl=Pu,Sl=function(i){(0,b.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=Vt(r,[t.minX,t.minY]),f=Vt(r,[t.maxX,t.minY]),c=Vt(r,[t.minX,t.maxY]),l=Vt(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var _=this.attrs;if(_.shadowColor){var I=_.shadowBlur,B=I===void 0?0:I,j=_.shadowOffsetX,et=j===void 0?0:j,ut=_.shadowOffsetY,ct=ut===void 0?0:ut,pt=n-B+et,Mt=o+B+et,Zt=a-B+ct,se=s+B+ct;n=Math.min(n,pt),o=Math.max(o,Mt),a=Math.min(a,Zt),s=Math.max(s,se)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Na),ec=Sl,Ml=new Map;function Bo(i,e){Ml.set(i,e)}function bu(i){return Ml.get(i)}function Wo(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function ms(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function fs(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Fc(i,e){return Math.abs(i-e)<.001}function sf(i,e){var t=(0,h.min)(i),r=(0,h.min)(e),n=(0,h.max)(i),a=(0,h.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Gd(i,e,t,r){return{minX:(0,h.min)([i,t]),maxX:(0,h.max)([i,t]),minY:(0,h.min)([e,r]),maxY:(0,h.max)([e,r])}}function zc(i){return(i+Math.PI*2)%(Math.PI*2)}var cs={box:function(i,e,t,r){return sf([i,t],[e,r])},length:function(i,e,t,r){return fs(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return fs(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?fs(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(Yt.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];Yt.normalize(s,s);var u=[n-i,a-e];return Math.abs(Yt.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},gd=1e-4;function rd(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,_=0;_<=f;_++){var I=_*c,B=[n.apply(null,i.concat([I])),n.apply(null,e.concat([I]))],j=fs(u[0],u[1],B[0],B[1]);j<s&&(o=I,s=j)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var et=i.length;return{x:i[et-1],y:e[et-1]}}s=1/0;for(var _=0;_<32&&!(l<gd);_++){var ut=o-l,ct=o+l,B=[n.apply(null,i.concat([ut])),n.apply(null,e.concat([ut]))],j=fs(u[0],u[1],B[0],B[1]);if(ut>=0&&j<s)o=ut,s=j;else{var pt=[n.apply(null,i.concat([ct])),n.apply(null,e.concat([ct]))],Mt=fs(u[0],u[1],pt[0],pt[1]);ct<=1&&Mt<s?(o=ct,s=Mt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function md(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=fs(a,o,s,u)}return t/2}function Nu(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function _l(i,e,t){var r=i+t-2*e;if(Fc(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function Gc(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function rc(i,e,t,r,n,a,o){var s=Nu(i,t,n,o),u=Nu(e,r,a,o),f=cs.pointAt(i,e,t,r,o),c=cs.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function Uc(i,e,t,r,n,a,o){if(o===0)return(fs(i,e,t,r)+fs(t,r,n,a)+fs(i,e,n,a))/2;var s=rc(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),Uc.apply(null,u)+Uc.apply(null,f)}var nd={box:function(i,e,t,r,n,a){var o=_l(i,t,n)[0],s=_l(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Nu(i,t,n,o)),s!==void 0&&f.push(Nu(e,r,a,s)),sf(u,f)},length:function(i,e,t,r,n,a){return Uc(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return rd([i,t,n],[e,r,a],o,s,Nu)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return fs(u.x,u.y,o,s)},interpolationAt:Nu,pointAt:function(i,e,t,r,n,a,o){return{x:Nu(i,t,n,o),y:Nu(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return rc(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=Gc(i,t,n,o),u=Gc(e,r,a,o),f=Math.atan2(u,s);return zc(f)}};function Eu(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function Cl(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function Mf(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Fc(n,0))Fc(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Fc(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function Rt(i,e,t,r,n,a,o,s,u){var f=Eu(i,t,n,o,u),c=Eu(e,r,a,s,u),l=cs.pointAt(i,e,t,r,u),_=cs.pointAt(t,r,n,a,u),I=cs.pointAt(n,a,o,s,u),B=cs.pointAt(l.x,l.y,_.x,_.y,u),j=cs.pointAt(_.x,_.y,I.x,I.y,u);return[[i,e,l.x,l.y,B.x,B.y,f,c],[f,c,j.x,j.y,I.x,I.y,o,s]]}function Ae(i,e,t,r,n,a,o,s,u){if(u===0)return md([i,t,n,o],[e,r,a,s]);var f=Rt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Ae.apply(null,c)+Ae.apply(null,l)}var je={extrema:Mf,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=Mf(i,t,n,o),l=Mf(e,r,a,s),_=0;_<c.length;_++)u.push(Eu(i,t,n,o,c[_]));for(var _=0;_<l.length;_++)f.push(Eu(e,r,a,s,l[_]));return sf(u,f)},length:function(i,e,t,r,n,a,o,s){return Ae(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return rd([i,t,n,o],[e,r,a,s],u,f,Eu,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return fs(l.x,l.y,u,f)},interpolationAt:Eu,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:Eu(i,t,n,o,u),y:Eu(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return Rt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=Cl(i,t,n,o,u),c=Cl(e,r,a,s,u);return zc(Math.atan2(c,f))}};function zr(i,e){var t=Math.abs(i);return e>0?t:t*-1}var rn={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),_=o*o,I=s*s,B=Math.PI/4,j,et,ut=0;ut<4;ut++){j=o*Math.cos(B),et=s*Math.sin(B);var ct=(_-I)*Math.pow(Math.cos(B),3)/o,pt=(I-_)*Math.pow(Math.sin(B),3)/s,Mt=j-ct,Zt=et-pt,se=c-ct,oe=l-pt,_e=Math.hypot(Zt,Mt),Ue=Math.hypot(oe,se),Re=_e*Math.asin((Mt*oe-Zt*se)/(_e*Ue)),qe=Re/Math.sqrt(_+I-j*j-et*et);B+=qe,B=Math.min(Math.PI/2,Math.max(0,B))}return{x:i+zr(j,u),y:e+zr(et,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return fs(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return zc(o)}};function Fr(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function jr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function bn(i,e,t){return Math.atan(-e/i*Math.tan(t))}function _n(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Cn(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function wn(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Bn(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function v(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function N(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var K={box:function(i,e,t,r,n,a,o){for(var s=bn(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var _=s+l;a<o?a<_&&_<o&&c.push(_):o<_&&_<a&&c.push(_)}for(var l=0;l<c.length;l++){var I=Cn(i,e,t,r,n,c[l]);I<u&&(u=I),I>f&&(f=I)}for(var B=_n(t,r,n),j=1/0,et=-1/0,ut=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var ct=B+l;a<o?a<ct&&ct<o&&ut.push(ct):o<ct&&ct<a&&ut.push(ct)}for(var l=0;l<ut.length;l++){var pt=wn(i,e,t,r,n,ut[l]);pt<j&&(j=pt),pt>et&&(et=pt)}return{x:u,y:j,width:f-u,height:et-j}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=N(s-i,u-e,-n),c=f[0],l=f[1],_=rn.nearestPoint(0,0,t,r,c,l),I=Bn(t,r,_.x,_.y);I<a?_=v(t,r,a):I>o&&(_=v(t,r,o));var B=N(_.x,_.y,n);return{x:B[0]+i,y:B[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return fs(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Cn(i,e,t,r,n,u),y:wn(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=Fr(i,e,t,r,n,a,o,u),c=jr(i,e,t,r,n,a,o,u);return zc(Math.atan2(c,f))}};function st(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=fs(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function ht(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=fs(r[0],r[1],n[0],n[1])}return e}function xt(i,e){if(e>1||e<0||i.length<2)return null;var t=st(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var _=(e-a)/l;o=cs.pointAt(f[0],f[1],c[0],c[1],_);break}a+=l}return o}function Ot(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=st(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function zt(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=cs.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var Kt={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return sf(e,t)},length:function(i){return ht(i)},pointAt:function(i,e){return xt(i,e)},pointDistance:function(i,e,t){return zt(i,e,t)},tangentAngle:function(i,e){return Ot(i,e)}};function fe(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var Te={box:function(i){return Kt.box(i)},length:function(i){return ht(fe(i))},pointAt:function(i,e){return xt(fe(i),e)},pointDistance:function(i,e,t){return zt(fe(i),e,t)},tangentAngle:function(i,e){return Ot(fe(i),e)}};function be(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function We(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=be(e,n)),r&&(a=r.getCanvasBBox(),e=be(e,a)),e}function cr(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=sf(r,n),u=s.x,f=s.y,c=s.width,l=s.height,_={minX:u,minY:f,maxX:u+c,maxY:f+l};return _=We(i,_),{x:_.minX,y:_.minY,width:_.maxX-_.minX,height:_.maxY-_.minY}}function Vr(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return sf(r,n)}var mr=null;function wr(){if(!mr){var i=document.createElement("canvas");i.width=1,i.height=1,mr=i.getContext("2d")}return mr}function Er(i,e,t){var r=1;if((0,h.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Sn(e,t);return e*r+n*(r-1)}return e}function Sn(i,e){return e?e-i:i*.14}function Yn(i,e){var t=wr(),r=0;if((0,h.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,h.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,h.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Nn(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function la(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Nn(e));var u=Yn(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,_=Er(n,a,o),I={x:t,y:r-_};c&&(c==="end"||c==="right"?I.x-=u:c==="center"&&(I.x-=u/2)),l&&(l==="top"?I.y+=_:l==="middle"&&(I.y+=_/2)),f={x:I.x,y:I.y,width:u,height:_}}return f}var ua=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,wa=/[^\s\,]+/ig;function Ba(i){var e=i||[];if((0,h.isArray)(e))return e;if((0,h.isString)(e))return e=e.match(ua),(0,h.each)(e,function(t,r){if(t=t.match(wa),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,h.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Ia=Ba;function uo(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,_;if(a){u=r[0],f=r[1];for(var I=0,B=i.length;I<B;I+=1){var j=i[I];u=Yt.min([0,0],u,j),f=Yt.max([0,0],f,j)}}for(var I=0,et=i.length;I<et;I+=1){var j=i[I];if(I===0&&!t)_=j;else if(I===et-1&&!t)l=j,n.push(_),n.push(l);else{var ut=[I?I-1:et-1,I-1][t?0:1];o=i[ut],s=i[t?(I+1)%et:I+1];var ct=[0,0];ct=Yt.sub(ct,s,o),ct=Yt.scale(ct,ct,e);var pt=Yt.distance(j,o),Mt=Yt.distance(j,s),Zt=pt+Mt;Zt!==0&&(pt/=Zt,Mt/=Zt);var se=Yt.scale([0,0],ct,-pt),oe=Yt.scale([0,0],ct,Mt);l=Yt.add([0,0],j,se),c=Yt.add([0,0],j,oe),c=Yt.min([0,0],c,Yt.max([0,0],s,j)),c=Yt.max([0,0],c,Yt.min([0,0],s,j)),se=Yt.sub([0,0],c,j),se=Yt.scale([0,0],se,-pt/Mt),l=Yt.add([0,0],j,se),l=Yt.min([0,0],l,Yt.max([0,0],o,j)),l=Yt.max([0,0],l,Yt.min([0,0],o,j)),oe=Yt.sub([0,0],j,l),oe=Yt.scale([0,0],oe,Mt/pt),c=Yt.add([0,0],j,oe),a&&(l=Yt.max([0,0],l,u),l=Yt.min([0,0],l,f),c=Yt.max([0,0],c,u),c=Yt.min([0,0],c,f)),n.push(_),n.push(l),_=c}}return t&&n.push(n.shift()),n}function Ua(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=uo(n,.4,r,t),u=n.length,f=[],c,l,_,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],_=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],_[0],_[1]]);return r&&(c=s[u],l=s[u+1],_=n[0],f.push(["C",c[0],c[1],l[0],l[1],_[0],_[1]])),f}var Do=Ua;function Hi(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var li=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,_=s[u-1][f-1].min+o;s[u][f]=Hi(c,l,_)}}return s};function Fo(i,e){var t=li(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var fo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,as=new RegExp("([a-z])["+fo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+fo+"]*,?["+fo+"]*)+)","ig"),Ms=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+fo+"]*,?["+fo+"]*","ig");function Yo(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(as,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Ms,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Ka=/[a-z]/;function ys(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ii(i){var e=Yo(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Ka.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,_,I=e[0];(I[0]==="M"||I[0]==="m")&&(o=+I[1],s=+I[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,B=e.length;r<B;r++){var j=e[r],et=a[r-1],ut=[],n=j[0],ct=n.toUpperCase();if(n!==ct)switch(ut[0]=ct,ct){case"A":ut[1]=j[1],ut[2]=j[2],ut[3]=j[3],ut[4]=j[4],ut[5]=j[5],ut[6]=+j[6]+o,ut[7]=+j[7]+s;break;case"V":ut[1]=+j[1]+s;break;case"H":ut[1]=+j[1]+o;break;case"M":u=+j[1]+o,f=+j[2]+s,ut[1]=u,ut[2]=f;break;default:for(var pt=1,Mt=j.length;pt<Mt;pt++)ut[pt]=+j[pt]+(pt%2?o:s)}else ut=e[r];switch(ct){case"Z":o=+u,s=+f;break;case"H":o=ut[1],ut=["L",o,s];break;case"V":s=ut[1],ut=["L",o,s];break;case"T":o=ut[1],s=ut[2];var Zt=ys([et[1],et[2]],[et[3],et[4]]);ut=["Q",Zt[0],Zt[1],o,s];break;case"S":o=ut[ut.length-2],s=ut[ut.length-1];var se=et.length,oe=ys([et[se-4],et[se-3]],[et[se-2],et[se-1]]);ut=["C",oe[0],oe[1],ut[1],ut[2],o,s];break;case"M":u=ut[ut.length-2],f=ut[ut.length-1];break;default:o=ut[ut.length-2],s=ut[ut.length-1]}a.push(ut)}return a}var xa=Math.PI*2,ai=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},bi=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Ko=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Ru=function(i,e,t,r,n,a,o,s,u,f,c,l){var _=Math.pow(n,2),I=Math.pow(a,2),B=Math.pow(c,2),j=Math.pow(l,2),et=_*I-_*j-I*B;et<0&&(et=0),et/=_*j+I*B,et=Math.sqrt(et)*(o===s?-1:1);var ut=et*n/a*l,ct=et*-a/n*c,pt=f*ut-u*ct+(i+t)/2,Mt=u*ut+f*ct+(e+r)/2,Zt=(c-ut)/n,se=(l-ct)/a,oe=(-c-ut)/n,_e=(-l-ct)/a,Ue=Ko(1,0,Zt,se),Re=Ko(Zt,se,oe,_e);return s===0&&Re>0&&(Re-=xa),s===1&&Re<0&&(Re+=xa),[pt,Mt,Ue,Re]},nc=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,_=l===void 0?0:l,I=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var B=Math.sin(u*xa/360),j=Math.cos(u*xa/360),et=j*(e-r)/2+B*(t-n)/2,ut=-B*(e-r)/2+j*(t-n)/2;if(et===0&&ut===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var ct=Math.pow(et,2)/Math.pow(a,2)+Math.pow(ut,2)/Math.pow(o,2);ct>1&&(a*=Math.sqrt(ct),o*=Math.sqrt(ct));var pt=Ru(e,t,r,n,a,o,c,_,B,j,et,ut),Mt=pt[0],Zt=pt[1],se=pt[2],oe=pt[3],_e=Math.abs(oe)/(xa/4);Math.abs(1-_e)<1e-7&&(_e=1);var Ue=Math.max(Math.ceil(_e),1);oe/=Ue;for(var Re=0;Re<Ue;Re++)I.push(bi(se,oe)),se+=oe;return I.map(function(qe){var hr=ai(qe[0],a,o,j,B,Mt,Zt),nn=hr.x,kn=hr.y,En=ai(qe[1],a,o,j,B,Mt,Zt),Kr=En.x,ta=En.y,$n=ai(qe[2],a,o,j,B,Mt,Zt),$r=$n.x,yn=$n.y;return{x1:nn,y1:kn,x2:Kr,y2:ta,x:$r,y:yn}})};function Ye(i,e,t,r,n,a,o,s,u){var f=nc({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var _=l.x1,I=l.y1,B=l.x2,j=l.y2,et=l.x,ut=l.y;return c.push(_,I,B,j,et,ut),c},[])}function Yr(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function kr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),na(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function na(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var ii=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},ke=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<c;B++){var j=f*l[B]+f,et=ii(j,i,t,n,o),ut=ii(j,e,r,a,s),ct=et*et+ut*ut;I+=_[B]*Math.sqrt(ct)}return f*I},Ee=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*c,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-l-et)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,Mt=pt,Zt;pt--;)I=u[pt],Zt=1-I,f[0][pt]=Zt*Zt*Zt*i+3*Zt*Zt*I*t+3*Zt*I*I*n+I*I*I*o,f[1][pt]=Zt*Zt*Zt*e+3*Zt*Zt*I*r+3*Zt*I*I*a+I*I*I*s;return f[0][Mt]=i,f[1][Mt]=e,f[0][Mt+1]=o,f[1][Mt+1]=s,f[0].length=f[1].length=Mt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},er=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,_=f/c,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},br=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Cr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},ar=function(i,e){return i=Cr(i),e=Cr(e),br(e,i.x,i.y)||br(e,i.x2,i.y)||br(e,i.x,i.y2)||br(e,i.x2,i.y2)||br(i,e.x,e.y)||br(i,e.x2,e.y)||br(i,e.x,e.y2)||br(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},rr=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Ee.apply(null,i);return Cr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},vr=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),_=u*u,I=_*u,B=c*i+l*3*u*t+f*3*u*u*n+I*o,j=c*e+l*3*u*r+f*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ct=t+2*u*(n-t)+_*(o-2*n+t),pt=r+2*u*(a-r)+_*(s-2*a+r),Mt=f*i+u*t,Zt=f*e+u*r,se=f*n+u*o,oe=f*a+u*s,_e=90-Math.atan2(et-ct,ut-pt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ct,y:pt},start:{x:Mt,y:Zt},end:{x:se,y:oe},alpha:_e}},Be=function(i,e,t){var r=rr(i),n=rr(e);if(!ar(r,n))return t?0:[];for(var a=ke.apply(0,i),o=ke.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=vr.apply(0,i.concat(I/s));f.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=vr.apply(0,e.concat(I/u));c.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=f[I],ut=f[I+1],ct=c[j],pt=c[j+1],Mt=Math.abs(ut.x-et.x)<.001?"y":"x",Zt=Math.abs(pt.x-ct.x)<.001?"y":"x",se=er(et.x,et.y,ut.x,ut.y,ct.x,ct.y,pt.x,pt.y);if(se){if(l[se.x.toFixed(4)]===se.y.toFixed(4))continue;l[se.x.toFixed(4)]=se.y.toFixed(4);var oe=et.t+Math.abs((se[Mt]-et[Mt])/(ut[Mt]-et[Mt]))*(ut.t-et.t),_e=ct.t+Math.abs((se[Zt]-ct[Zt])/(pt[Zt]-ct[Zt]))*(pt.t-ct.t);oe>=0&&oe<=1&&_e>=0&&_e<=1&&(t?_++:_.push({x:se.x,y:se.y,t1:oe,t2:_e}))}}return _},Qe=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var pt=e[ut];if(pt[0]==="M")a=f=pt[1],o=c=pt[2];else{pt[0]==="C"?(_=[a,o].concat(pt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,f,c,f,c],a=f,o=c);var Mt=Be(l,_,t);if(t)I+=Mt;else{for(var Zt=0,se=Mt.length;Zt<se;Zt++)Mt[Zt].segment1=B,Mt[Zt].segment2=ut,Mt[Zt].bez1=l,Mt[Zt].bez2=_;I=I.concat(Mt)}}}}}return I};function Ne(i,e){return Qe(i,e)}function yr(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ir(i,e){return yr(i)*yr(e)?(i[0]*e[0]+i[1]*e[1])/(yr(i)*yr(e)):1}function tn(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Ir(i,e))}function on(i,e){return i[0]===e[0]&&i[1]===e[1]}function Hr(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,_=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ct=(s+f)/2+Math.cos(n)*et-Math.sin(n)*ut,pt=(u+c)/2+Math.sin(n)*et+Math.cos(n)*ut,Mt=[(l-et)/t,(_-ut)/r],Zt=[(-1*l-et)/t,(-1*_-ut)/r],se=tn([1,0],Mt),oe=tn(Mt,Zt);return Ir(Mt,Zt)<=-1&&(oe=Math.PI),Ir(Mt,Zt)>=1&&(oe=0),o===0&&oe>0&&(oe=oe-2*Math.PI),o===1&&oe<0&&(oe=oe+2*Math.PI),{cx:ct,cy:pt,rx:on(i,[f,c])?0:t,ry:on(i,[f,c])?0:r,startAngle:se,endAngle:se+oe,xRotation:n,arcFlag:a,sweepFlag:o}}function An(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function va(i){i=Ia(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=Hr(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var _=u.length;t=[u[_-2],u[_-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&on(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var I=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=I;var B=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]];else if(f==="Q"){var j=[u[1],u[2]];c.startTangent=[B[0]-j[0],B[1]-j[1]],c.endTangent=[t[0]-j[0],t[1]-j[1]]}else if(f==="T"){var et=e[s-1],j=An(et.currentPoint,B);et.command==="Q"?(c.command="Q",c.startTangent=[B[0]-j[0],B[1]-j[1]],c.endTangent=[t[0]-j[0],t[1]-j[1]]):(c.command="TL",c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]])}else if(f==="C"){var ut=[u[1],u[2]],ct=[u[3],u[4]];c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[ut[0]-ct[0],ut[1]-ct[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[ct[0]-ut[0],ct[1]-ut[1]])}else if(f==="S"){var et=e[s-1],ut=An(et.currentPoint,B),ct=[u[1],u[2]];et.command==="C"?(c.command="C",c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]]):(c.command="SQ",c.startTangent=[B[0]-ct[0],B[1]-ct[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]])}else if(f==="A"){var pt=.001,Mt=c.arcParams||{},Zt=Mt.cx,se=Zt===void 0?0:Zt,oe=Mt.cy,_e=oe===void 0?0:oe,Ue=Mt.rx,Re=Ue===void 0?0:Ue,qe=Mt.ry,hr=qe===void 0?0:qe,nn=Mt.sweepFlag,kn=nn===void 0?0:nn,En=Mt.startAngle,Kr=En===void 0?0:En,ta=Mt.endAngle,$n=ta===void 0?0:ta;kn===0&&(pt*=-1);var $r=Re*Math.cos(Kr-pt)+se,yn=hr*Math.sin(Kr-pt)+_e;c.startTangent=[$r-n[0],yn-n[1]];var Fn=Re*Math.cos(Kr+$n+pt)+se,zn=hr*Math.sin(Kr+$n-pt)+_e;c.endTangent=[B[0]-Fn,B[1]-zn]}e.push(c)}return e}function Za(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function fa(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Ca(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Xa(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Oi(i,e){if(i.length<2||e.length<2)return!1;var t=Ca(i),r=Ca(e);if(!Xa(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Za(i),o=Za(e),s=!1;return each(o,function(u){if(fa(a,u))return s=!0,!1}),s}function $o(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=nd.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=je.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=K.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0}),r=r.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0});var _=(0,h.min)(t),I=(0,h.min)(r),B=(0,h.max)(t),j=(0,h.max)(r);if(n.length===0)return{x:_,y:I,width:B-_,height:j-I};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,et=void 0;s[0]===_?(et=_s(o,e),_=_-et.xExtra):s[0]===B&&(et=_s(o,e),B=B+et.xExtra),s[1]===I?(et=_s(o,e),I=I-et.yExtra):s[1]===j&&(et=_s(o,e),j=j+et.yExtra)}return{x:_,y:I,width:B-_,height:j-I}}function _s(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,h.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function yd(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||va(t),o=$o(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=We(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function fu(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=We(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Ud(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}Bo("rect",Wo),Bo("image",Wo),Bo("circle",ms),Bo("marker",ms),Bo("polyline",cr),Bo("polygon",Vr),Bo("text",la),Bo("path",yd),Bo("line",fu),Bo("ellipse",Ud);var ku="0.5.11",Wd=function(i){(0,b.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(Nf),Ah=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Ih=function(e){if((0,h.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,h.isNumber)(e))return[e,e,e,e];if((0,h.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},G0=function(e){var t=new Wd(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},U0=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},_f=function(e){return Number.isNaN(Number(e))},Dv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,_=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),_>a&&(a=_)}var I=Math.floor(t),B=Math.floor(n),j=Math.ceil(r)-Math.floor(t),et=Math.ceil(a)-Math.floor(n);return{x:I,y:B,width:j,height:et,minX:t,minY:n,maxX:r,maxY:a}},W0=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},_=0;_<o;_++){var I=e[_],B=I.source,j=I.target,et="".concat(B,"-").concat(j);if(!c[_]){f[et]||(f[et]=[]),c[_]=!0,f[et].push(I);for(var ut=0;ut<o;ut++)if(_!==ut){var ct=e[ut],pt=ct.source,Mt=ct.target;c[ut]||(B===Mt&&j===pt?(f[et].push(ct),c[ut]=!0,l["".concat(pt,"|").concat(Mt,"|").concat(f[et].length-1)]=!0):B===pt&&j===Mt&&(f[et].push(ct),c[ut]=!0))}}}for(var Zt in f)for(var se=f[Zt],oe=se.length,_e=0;_e<oe;_e++){var Ue=se[_e];if(Ue.source===Ue.target){a&&(Ue.type=a),Ue.loopCfg={position:u[_e%8],dist:Math.floor(_e/8)*20+50};continue}if(oe===1&&n&&Ue.source!==Ue.target){Ue.type=n;continue}Ue.type=r;var Re=(_e%2===0?1:-1)*(l["".concat(Ue.source,"|").concat(Ue.target,"|").concat(_e)]?-1:1);oe%2===1?Ue.curveOffset=Re*Math.ceil(_e/2)*s:Ue.curveOffset=Re*(Math.floor(_e/2)*s+t)}return e},Lv=C(731278),Y0=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(Mt){var Zt=Mt.getModel(),se=Zt.x,oe=Zt.y;s>se&&(s=se),u>oe&&(u=oe),f<se&&(f=se),c<oe&&(c=oe)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],_=fn({x:s,y:u},l),I=_.x,B=_.y,j=fn({x:f,y:c},l),et=j.x,ut=j.y;a={minX:I,maxX:et,minY:B,maxY:ut,width:et-I,height:ut-B,x:I,y:B}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ct=this.getViewCenter(),pt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ct.x-pt.x,ct.y-pt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,_=n.y+a.y-o.y-n.minY;if(!(_f(l)||_f(_))){var I=(0,Lv.vs)(c,[["t",l,_]]);if(!u){var B=ws({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:I})}});e.animate(function(Mt){return{matrix:Qa(t,I,Mt)}},B);return}var j=f.get("minZoom"),et=f.get("maxZoom"),ut=s;j&&s<j?(ut=j,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):et&&s>et&&(ut=et,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ct=(0,Lv.vs)(I,[["t",-a.x,-a.y],["s",ut,ut],["t",a.x,a.y]]),pt=ws({animateCfg:r,callback:function(){e.setMatrix(ct),f.emit("viewportchange",{action:"translate",matrix:I}),f.emit("viewportchange",{action:"zoom",matrix:ct})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(Mt){return{matrix:Qa(t,ct,Mt)}},pt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,_=1/0,I=-1/0,B=-1/0;c.forEach(function(se){var oe=se.getModel(),_e=oe.x,Ue=oe.y;l>_e&&(l=_e),_>Ue&&(_=Ue),I<_e&&(I=_e),B<Ue&&(B=Ue)}),f={minX:l,maxX:I,minY:_,maxY:B,width:I-l,height:B-_,x:l,y:_}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var j=this.getViewCenter(),et={x:f.x+f.width/2,y:f.y+f.height/2},ut=(a-n[1]-n[3])/f.width,ct=(o-n[0]-n[2])/f.height,pt=ut;if(ut>ct&&(pt=ct),e)this.animatedFitView(s,u,t,f,j,et,pt,!0);else{var Mt=j.x-et.x,Zt=j.y-et.y;if(_f(Mt)||_f(Zt))return;r.translate(Mt,Zt),r.zoom(pt,j)||console.warn("zoom failed, ratio out of range, ratio: %f",pt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),_=c.get("width"),I=c.get("height"),B=c.get("group"),j=B.getMatrix()||[1,0,0,0,1,0,0,0,1];B.resetMatrix();var et,ut=c.getNodes();if(ut.length>c.get("optimizeThreshold")){var ct=1/0,pt=1/0,Mt=-1/0,Zt=-1/0;ut.forEach(function(kn){var En=kn.getModel(),Kr=En.x,ta=En.y;ct>Kr&&(ct=Kr),pt>ta&&(pt=ta),Mt<Kr&&(Mt=Kr),Zt<ta&&(Zt=ta)}),et={minX:ct,maxX:Mt,minY:pt,maxY:Zt,width:Mt-ct,height:Zt-pt,x:ct,y:pt}}else et=B.getCanvasBBox();if(!(et.width===0||et.height===0)){var se=this.getViewCenter(),oe={x:et.x+et.width/2,y:et.y+et.height/2},_e=(_-l[1]-l[3])/et.width,Ue=(I-l[0]-l[2])/et.height,Re;if(s==="x"?Re=_e:s==="y"?Re=Ue:Re=f==="max"?Math.max(_e,Ue):Math.min(_e,Ue),a&&(Re=Re<1?Re:1),t)this.animatedFitView(B,j,r,et,se,oe,Re,!0);else{var qe=c.getZoom(),hr=qe*Re,nn=c.get("minZoom");hr<nn&&(hr=nn,console.warn("fitview failed, ratio out of range, ratio: %f",Re,"graph minzoom has been used instead")),c.translate(se.x-oe.x,se.y-oe.y),c.zoomTo(hr,se)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Ih(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,_=0,I=0;this.graph.get("canvas").animate(function(B){_=u*B,I=f*B,n.graph.translate(_-c,I-l),c=_,l=I},(0,b.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=Pn({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),fn({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,h.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},_=0,I=e;_<I.length;_++){var B=I[_],j=B.getBBox();j.minX<l.minX&&(l.minX=j.minX),j.minY<l.minY&&(l.minY=j.minY),j.maxX>l.maxX&&(l.maxX=j.maxX),j.maxY>l.maxY&&(l.maxY=j.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var et=this.getViewCenter(),ut={x:l.x+l.width/2,y:l.y+l.height/2},ct=(s-o[1]-o[3])/l.width,pt=(u-o[0]-o[2])/l.height,Mt=ct;ct>pt&&(Mt=pt),r?this.animatedFitView(f,c,n,l,et,ut,Mt,t):(a.translate(et.x-ut.x,et.y-ut.y),t&&!a.zoom(Mt,et)&&console.warn("zoom failed, ratio out of range, ratio: %f",Mt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,h.isNumber)(e)||!(0,h.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),X0=Y0;function Oh(i){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(i)}function Pv(i){if(typeof i!="string")return i;var e=function(oe){if(typeof oe!="string")return oe;try{return JSON.parse(oe.trim())}catch(_e){return oe.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(oe){return oe[oe.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var oe=[],_e=0;_e<arguments.length;_e++)oe[_e]=arguments[_e];return oe.some(function(Ue){return r(o)===Ue})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var _=n[c],I=s('"',"'");if(!I&&!_.trim()){c+=1;continue}var B=n[c-1]==="\\",j=s("}"),et=s("]"),ut=s(","),ct=u();if(I)if(r(o)===_&&!B){o.pop();var pt=e(l);ct.push(pt),f=pt,l=""}else l+=_;else if(et&&_===",")l&&(ct.push(e(l)),l="");else if(j&&_===":")o.push(","),l&&(ct.push(l),l="");else if(ut&&_===",")l&&(ct.push(e(l)),l=""),o.pop();else if(_==="}"&&(j||ut)){l&&(ct.push(e(l)),l=""),ut&&o.pop();for(var Mt={},Zt=1;Zt<ct.length;Zt+=2)Mt[ct[Zt-1]]=ct[Zt];a.pop(),a.length&&r(a).push(Mt),o.pop(),f=Mt}else _==="]"&&et?(l&&(ct.push(e(l)),l=""),a.pop(),a.length&&r(a).push(ct),o.pop(),f=ct):_==="{"?(a.push([]),o.push("}")):_==="["?(a.push([]),o.push("]")):_==='"'?o.push('"'):_==="'"?o.push("'"):l+=_;c+=1}return f||l}var j0=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},V0=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,h.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Nv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Nv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=j0(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Pv(f);t=(0,b.__assign)((0,b.__assign)({},t),c)}else a[u]=Pv(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Oh(e.style[a.name])==="object"&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function H0(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=vs(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,b.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Rv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,b.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,b.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=Rv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=H0(i,e,r),i.attrs=(0,b.__assign)((0,b.__assign)({},i.attrs),i.bbox),i}function kv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],_=0;_<f;_+=1)u.push(kv(l[_],c[_]));var I=Object.keys(e.attrs),B=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:I.filter(function(j){return j!=="children"}).some(function(j){return i.attrs[j]!==e.attrs[j]||!B.includes(j)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Bv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=V0(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Rv(Nv(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,_=l===void 0?{}:l,I=c.bbox,B=c.type,j=c.children,et=(0,b.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var ut=a.addShape(c.type,(0,b.__assign)({attrs:_,origin:{bbox:I,type:B,children:j}},et));c.keyshape&&(s=ut)}c.children&&c.children.forEach(function(ct){return f(ct)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=kv(u,f),l=function B(j){var et;j.type!=="group"&&o.addShape(j.type,{attrs:j.attrs}),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ut){return B(ut)})},_=function B(j){var et,ut=s.find(function(ct){return ct.attrs.key===j.attrs.key});ut&&o.removeChild(ut),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ct){return B(ct)})},I=function B(j){var et=j.key;if(j.type!=="group"){var ut=s.find(function(pt){return pt.attrs.key===et});switch(j.action){case"change":if(ut){var ct=j.val.keyshape?a.getOriginStyle():{};ut.attr((0,b.__assign)((0,b.__assign)({},ct),j.val.attrs))}break;case"add":l(j.val);break;case"delete":_(j.val);break;case"restructure":_(j.formerTarget),l(j.nowTarget);break;default:break}}j.children&&j.children.forEach(function(pt){return B(pt)})};I(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Dh={};function Fv(i){return Dh[i]||(Dh[i]=(0,h.upperFirst)(i)),Dh[i]}var Z0={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Lh={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Yd=function(){function i(){}return i.registerFactory=function(e,t){var r=Fv(e),n=Z0,a=(0,b.__assign)((0,b.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Fv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Bv(t);a=(0,b.__assign)((0,b.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Bv(s);a=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Lh;a=(0,b.__assign)((0,b.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Lh,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Lh,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Fs=Yd;Yd.registerFactory("node",{defaultShapeType:"circle"}),Yd.registerFactory("edge",{defaultShapeType:"line"}),Yd.registerFactory("combo",{defaultShapeType:"circle"});var Ph="bboxCache",Nh="bboxCanvasCache",NS=null,K0=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Ah(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,h.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ci(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ci(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var I=this.get("originStyle");a&&!I[a]&&(I[a]={});for(var B=this.getCurrentStatesStyle(),j=function(ut){var ct=t[ut],pt=ct.get("name"),Mt=ct.attr();if(pt&&pt!==a){var Zt=B[pt];I[pt]||(I[pt]={}),Zt?Object.keys(Mt).forEach(function(_e){var Ue=Mt[_e];Ue!==Zt[_e]&&(I[pt][_e]=Ue)}):I[pt]=ct.get("type")!=="image"?(0,h.clone)(Mt):n.getShapeStyleByName(pt)}else{var se=ct.attr(),oe={};Object.keys(B).forEach(function(_e){var Ue=B[_e];(_e===a||!(0,h.isPlainObject)(Ue))&&(oe[_e]=Ue)}),Object.keys(se).forEach(function(_e){var Ue=se[_e];oe[_e]!==Ue&&(a?I[a][_e]=Ue:I[_e]=Ue)})}},s=0;s<t.length;s++)j(s);delete I.path,delete I.matrix,delete I.x,delete I.y,I[a]&&(delete I[a].x,delete I[a].y,delete I[a].matrix,delete I[a].path),n.set("originStyle",I)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var _=Ah("shape");u.set("name",_),e.shapeMap[_]=u,o[_]=f!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,h.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Fs.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,h.isPlainObject)(e)?this._cfg=(0,b.__assign)((0,b.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Ph,null),this.set(Nh,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,h.each)(r.attr(),function(a,o){(o!=="img"||(0,h.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,b.__assign)((0,b.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,h.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,h.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,h.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,h.isString)(t)){var f=r.filter(function(_){return _.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(_){return!_.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,h.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,h.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Ma(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Ph);return e||(e=this.calculateBBox(),this.set(Ph,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Nh);return e||(e=this.calculateCanvasBBox(),this.set(Nh,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),zv=K0,Xd={source:"start",target:"end"},Cf="Node",ad="Point",$0="Anchor",q0=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Xd[t]+ad,a=t+Cf,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,h.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Xd[t]+ad,o=t+Cf,s=this.get(a);if(!s){var u=this.get(o),f=t+$0,c=this.getPrePoint(t,n),l=r[f];(0,h.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,h.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Cf,n=Xd[t]+ad,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Cf,n=Xd[t]+ad,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Cf)),n=this.get("target".concat(Cf));return r?delete t["source".concat(Cf)]:t.source=this.get("start".concat(ad)),n?delete t["target".concat(Cf)]:t.target=this.get("end".concat(ad)),!(0,h.isString)(t.source)&&!(0,h.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,h.isString)(t.target)&&!(0,h.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,h.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Cf)),r=this.get("target".concat(Cf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(zv),Gv=q0,Rh="anchorPointsCache",Q0="bboxCache",J0=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Zn(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Zn(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Sr({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=en({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Nr(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Rh);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,h.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Rh,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(Q0,null),this.set(Rh,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,h.isNil)(t.x),f=!(0,h.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,h.isNumber)(t.x)||(0,h.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(zv),kh=J0,Uv="bboxCache",Wv="bboxCanvasCache",Yv="sizeCache",Xv="anchorPointsCache",tm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,h.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,h.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||ye.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},r),t.style),f);var c=t.padding||ye.defaultCombo.padding;return(0,h.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Yv,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=Ci(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(Uv)||{},o=a.x,s=a.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(Xv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Wv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Uv,null),this.set(Wv,null),this.set(Xv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Yv,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(kh),jv=tm,jd="node",Vd="edge",Vv="vedge",xd="combo",em="default",Hv="Mapper",ac="stateStyles",rm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,h.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Vv?Vd:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,h.upperFirst)(n),s=null,u=r.get(n+(0,h.upperFirst)(ac))||{},f=r.get(em+o);t[ac]&&(u=t[ac]),f&&(0,h.each)(f,function(se,oe){(0,h.isObject)(se)&&!(0,h.isArray)(se)?t[oe]=(0,h.deepMix)({},se,t[oe]):(0,h.isArray)(se)?t[oe]=t[oe]||(0,h.clone)(f[oe]):t[oe]=t[oe]||f[oe]});var c=r.get(n+Hv);if(c){var l=c(t);l[ac]&&(u=l[ac],delete l[ac]),(0,h.each)(l,function(se,oe){(0,h.isObject)(se)&&!(0,h.isArray)(se)?t[oe]=(0,h.deepMix)({},t[oe],se):t[oe]=l[oe]||t[oe]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Vd||e===Vv){var _=void 0,I=void 0;if(_=t.source,I=t.target,_&&(0,h.isString)(_)&&(_=r.findById(_)),I&&(0,h.isString)(I)&&(I=r.findById(I)),!_||!I){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}_.getType&&_.getType()==="combo"&&(t.isComboEdge=!0),I.getType&&I.getType()==="combo"&&(t.isComboEdge=!0),s=new Gv({model:t,source:_,target:I,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===jd)s=new kh({model:t,styles:u,group:a.addGroup()});else if(e===xd){var B=t.children,j=Vs(B,r),et=void 0,ut=void 0;if(isNaN(j.x)?isNaN(t.x)&&(et=Math.random()*100):et=j.x,isNaN(j.y)?isNaN(t.y)&&(ut=Math.random()*100):ut=j.y,isNaN(t.x)||isNaN(t.y))t.x=et,t.y=ut;else{var ct=t.x-et,pt=t.y-ut;this.updateComboSucceeds(t.id,ct,pt,B)}var Mt=a.addGroup();Mt.setZIndex(t.depth),s=new jv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Vs([],r):j,group:Mt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(j.width=Math.hypot(j.height,j.width),j.height=j.width,s.set("bbox",j),s.refresh());var Zt=s.getModel();(B||[]).forEach(function(se){var oe=r.findById(se.id);s.addChild(oe),se.depth=Zt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,h.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Hv),f=e.getModel(),c=f.x,l=f.y,_=e.getUpdateType(t);if(u){var I=(0,h.deepMix)({},f,t),B=u(I),j=(0,h.deepMix)({},f,B,t);B[ac]&&(e.set("styles",j[ac]),delete j[ac]),(0,h.each)(j,function(Re,qe){t[qe]=Re})}else(0,h.each)(t,function(Re,qe){f[qe]&&(0,h.isObject)(Re)&&!(0,h.isArray)(Re)&&(t[qe]=(0,b.__assign)((0,b.__assign)({},f[qe]),t[qe]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Vd){if(t.source){var et=t.source;(0,h.isString)(et)&&(et=o.findById(et)),e.setSource(et)}if(t.target){var ut=t.target;(0,h.isString)(ut)&&(ut=o.findById(ut)),e.setTarget(ut)}e.update(t)}else if(s===jd){e.update(t,_);var ct=e.getEdges();_==="move"?(0,h.each)(ct,function(Re){r.edgeToBeUpdateMap[Re.getID()]={edge:Re,updateType:_},r.throttleRefresh()}):_!=null&&_.includes("bbox")&&(0,h.each)(ct,function(Re){Re.refresh(_)})}else if(s===xd){if(e.update(t,_),!isNaN(t.x)||!isNaN(t.y)){var pt=t.x-c||0,Mt=t.y-l||0;this.updateComboSucceeds(f.id,pt,Mt)}var Zt=e.getEdges(),se=(_==null?void 0:_.includes("bbox"))||_==="move";if(se&&s===xd){var oe=e.get("shapeFactory"),_e=f.type||"circle",Ue=f.animate===void 0||t.animate===void 0?(a=(n=oe[_e])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;Ue?setTimeout(function(){if(!(!e||e.destroyed)){var Re=e.getKeyShape();!Re||Re.destroyed||(0,h.each)(Zt,function(qe){qe&&!qe.destroyed&&qe.refresh()})}},201):(0,h.each)(Zt,function(Re){Re.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,h.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Vs(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var _=c,I=l;r?(_=isNaN(u.x)?c:u.x,I=isNaN(u.y)?l:u.y):(_=isNaN(c)?u.x:c,I=isNaN(l)?u.y:l),e.update({x:_,y:I});var B=e.get("shapeFactory"),j=u.type||"circle",et=u.animate===void 0?(o=(a=B[j])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;et?setTimeout(function(){if(!(!e||e.destroyed)){var ut=e.getKeyShape();!ut||ut.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){ji(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,h.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,h.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Vd){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var _=r.get("comboTrees"),I=e.get("id");if(a===jd){var B=e.getModel().comboId;if(_&&B){var j=_,et=!1;_.forEach(function(se){et||ji(se,function(oe){if(oe.id===I&&j){var _e=j.indexOf(oe);return j.splice(_e,1),et=!0,!1}return j=oe.children,!0})})}for(var ut=e.getEdges(),ct=ut.length-1;ct>=0;ct--)r.removeItem(ut[ct],!1);B&&r.updateCombo(B)}else if(a===xd){var pt=e.getModel().parentId,Mt,Zt=!1;(_||[]).forEach(function(oe){Zt||ji(oe,function(_e){return _e.id===I?(Mt=_e,Zt=!0,!1):!0})}),Mt.removed=!0,Mt&&Mt.children&&Mt.children.forEach(function(oe){t.removeItem(oe.id)});for(var ut=e.getEdges(),ct=ut.length;ct>=0;ct--)r.removeItem(ut[ct],!1);pt&&r.updateCombo(pt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,h.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,h.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,h.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){xo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,h.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===jd){var a=e.getEdges();(0,h.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===xd){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||ji(l,function(_){return _.id===s?(u=_.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var _=n.findById(l.id);r.changeItemVisibility(_,t)});var a=e.getEdges();(0,h.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),nm=rm,am=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,h.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,h.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),im=am,om=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Zv=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Do(t);return u.unshift(["M",e[0].x,e[0].y]),u},Hd=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Yt.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},sm=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=om(a,s)}return t&&(n+="Z"),n},Bh=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Fh=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,_=e[s+1].x,I=e[s+1].y,B=s!==e.length-2?e[s+2].x:_,j=s!==e.length-2?e[s+2].y:I,et=c+(_-u)/6,ut=l+(I-f)/6,ct=_-(B-c)/6,pt=I-(j-l)/6;o.push(["C",et,ut,ct,pt,_,I])}return o.unshift(["M",n.x,n.y]),o},Kv=function(e,t){return Yt.scale([0,0],Yt.normalize([0,0],e),t)},$v=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},qv=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function zh(i,e){var t=function(l){var _=[l[0][0],l[0][1]-e],I=[l[0][0],l[0][1]+e];return"M ".concat(_," A ").concat(e,",").concat(e,",0,0,0,").concat(I," A ").concat(e,",").concat(e,",0,0,0,").concat(_)},r=function(l){var _=Yt.scale([0,0],$v(l[0],l[1]),e),I=Yt.scale([0,0],_,-1),B=Yt.add([0,0],l[0],_),j=Yt.add([0,0],l[1],_),et=Yt.add([0,0],l[1],I),ut=Yt.add([0,0],l[0],I);return"M ".concat(B," L ").concat(j," A ").concat([e,e,"0,0,0",et].join(",")," L ").concat(ut," A ").concat([e,e,"0,0,0",B].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=Yt.scale([0,0],$v(o,s),e);n[a]=[Yt.add([0,0],o,u),Yt.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var _="";return l===0&&(_="M ".concat(n[n.length-1][1]," ")),_+="".concat(f+c[0]," L ").concat(c[1]),_}),n.join(" ")}function Qv(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],_=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",_].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=qv(c[0],c[1]),_=Kv(l,e),I=Yt.add([0,0],c[0],Yt.scale([0,0],_,-1)),B=Yt.add([0,0],c[1],_),j=1.2*e,et=Kv(Yt.normalize([0,0],l),j),ut=Yt.scale([0,0],et,-1),ct=Yt.add([0,0],I,ut),pt=Yt.add([0,0],B,ut),Mt=Yt.add([0,0],I,et);return"M ".concat(I," C ").concat([ct,pt,B].join(",")," S ").concat([Mt,I].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:Yt.normalize([0,0],qv(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=Yt.normalize([0,0],Yt.add([0,0],a[s].v,Yt.scale([0,0],a[o].v,-1)));a[o].p=Yt.add([0,0],a[o].p,Yt.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var um=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Jv=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},tp=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,_){return l.x===_.x?l.y-_.y:l.x-_.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Jv(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&Jv(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},fm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function cm(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,_,I,B=0;B<e.width*e.height;B++){if(_=c,I=l,i.findIndex(function(et){return et.x===c&&et.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var j=a(c,l);switch(j){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:_===0&&(I===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:_===1&&(I===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(j)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var lm=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},dm=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=Vo(s,u),c=new yi(s.x,s.y,u.x,u.y),l=r.reduce(function(_,I){return Wi(I,c)>0?_+1:_},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},ep=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Wi(a,t);o>=0&&o<r&&(n=a,r=o)}),n},hm=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(I,B){var j=!1;return B.forEach(function(et){j||($i(I,{x:et.x1,y:et.y1})||$i(I,{x:et.x2,y:et.y2}))&&(j=!0)}),j},c=function(I,B){for(var j=0,et=B;j<et.length;j++){var ut=et[j],ct=ut.getBBox(),pt=[[ct.x,ct.y],[ct.x+ct.width,ct.y],[ct.x,ct.y+ct.height],[ct.x+ct.width,ct.y+ct.height]];if(fi(pt,I.x,I.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var I=o.pop(),B=ep(t,I);if(B){var j=po(B,I),et=j[0],ut=j[1];if(ut===2){var ct=function(Mt){for(var Zt=n,se=rp(B,Zt,et,Mt),oe=f(se,o)||f(se,a),_e=c(se,t);!oe&&_e&&Zt>=1;)Zt/=1.5,se=rp(B,Zt,et,Mt),oe=f(se,o)||f(se,a),_e=c(se,t);se&&!oe&&(!Mt||!_e)&&(o.push(new yi(I.x1,I.y1,se.x,se.y)),o.push(new yi(se.x,se.y,I.x2,I.y2)),s=!0)};ct(!0),s||ct(!1)}}s||a.push(I),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function vm(i,e,t,r,n){var a=dm(i,t,e);if(a===null)return[];var o=function(l){for(var _=[];l.length>0;){var I=l.pop();if(l.length===0){_.push(I);break}var B=l.pop(),j=new yi(I.x1,I.y1,B.x2,B.y2),et=ep(e,j);et?(_.push(I),l.push(B)):l.push(j)}return _},s=new yi(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=hm(s,e,r,n),f=o(u);return f}var pm=function(e,t,r){var n=Object.assign(fm,r),a=Ao(e.map(function(ct){return{x:ct.getModel().x,y:ct.getModel().y}}));e=e.sort(function(ct,pt){return Vo({x:ct.getModel().x,y:ct.getModel().y},a)-Vo({x:pt.getModel().x,y:pt.getModel().y},a)});var o=[],s=[];e.forEach(function(ct){var pt=vm(ct,t,o,n.maxRoutingIterations,n.morphBuffer);pt.forEach(function(Mt){s.push(Mt)}),o.push(ct)});for(var u=gm(e,s,n.nodeR0),f=lm(u.width,u.height,n.pixelGroupSize),c=[],l=[],_=0;_<n.maxMarchingIterations;_++)if(mm(e,t,s,u,f,n),c=[],l=[],!!new cm(c,f,n.threshold).march()){var I=c.map(function(ct){return{x:Math.round(ct.x*n.pixelGroupSize+u.minX),y:Math.round(ct.y*n.pixelGroupSize+u.minY)}});if(I){var B=I.length;if(n.skip>1)for(B=Math.floor(I.length/n.skip);B<3&&n.skip>1;)n.skip-=1,B=Math.floor(I.length/n.skip);for(var j=0,et=0;et<B;et+=1,j+=n.skip)l.push({x:I[j].x,y:I[j].y})}var ut=function(){for(var pt=0,Mt=e;pt<Mt.length;pt++){var Zt=Mt[pt],se=l.map(function(oe){return[oe.x,oe.y]});if(!fi(se,Zt.getBBox().centerX,Zt.getBBox().centerY))return!1}return!0};if(l&&ut())return l;if(n.threshold*=.9,_<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function gm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function mm(i,e,t,r,n,a){function o(I,B){var j=Math.floor((I-B)/a.pixelGroupSize);return j<0?0:j}function s(I,B){return I*a.pixelGroupSize+B}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(B,j){var et=Math.min(o(B.minX,j+r.minX),n.width),ut=Math.min(o(B.minY,j+r.minY),n.height),ct=Math.min(o(B.maxX,-j+r.minX),n.width),pt=Math.min(o(B.maxY,-j+r.minY),n.height);return[et,ut,ct,pt]},l=function(B,j){for(var et=B.getBBox(),ut=c(et,a.nodeR1),ct=ut[0],pt=ut[1],Mt=ut[2],Zt=ut[3],se=pt;se<Zt;se+=1)for(var oe=ct;oe<Mt;oe+=1)if(!(j<0&&n[oe+se*n.width]<=0)){var _e=s(oe,r.minX),Ue=s(se,r.minY),Re=qa({x:_e,y:Ue},{x:et.minX,y:et.minY,width:et.width,height:et.height});if(Re<Math.pow(a.nodeR1,2)){var qe=Math.sqrt(Re)-a.nodeR1;n.cells[oe+se*n.width]+=j*qe*qe}}},_=function(B,j){for(var et=B.getBBox(),ut=c(et,a.edgeR1),ct=ut[0],pt=ut[1],Mt=ut[2],Zt=ut[3],se=pt;se<Zt;se+=1)for(var oe=ct;oe<Mt;oe+=1)if(!(j<0&&n.cells[oe+se*n.width]<=0)){var _e=s(oe,r.minX),Ue=s(se,r.minY),Re=os({x:_e,y:Ue},B);if(Re<Math.pow(a.edgeR1,2)){var qe=Math.sqrt(Re)-a.edgeR1;n.cells[oe+se*n.width]+=j*qe*qe}}};a.nodeInfluenceFactor&&i.forEach(function(I){l(I,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(I){_(I,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(I){l(I,a.negativeNodeInfluenceFactor/u)})}function rp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(B,j){return n.width*((B.y-n.minY+(j.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var _=l(o,u);return _<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var I=l(a,s);return I<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var ym=function(){function i(e,t){this.cfg=(0,h.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=tp(e),a=zh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Yo(a);break;case"smooth-convex":r=tp(e),r.length===2?(a=zh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Yo(a)):r.length>2&&(a=Qv(r.map(function(o){return[o.x,o.y]}),this.padding),n=Fh(a));break;case"bubble":r=pm(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Fh(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,b.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,b.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,h.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,h.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Bh(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),za(n,Bh(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),np=ym,bd=Xt,xm="node",bm=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,h.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){ji(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,_=o[c.target]||0,I=Math.max(l,_);a[I]?a[I].push(c.id):a[I]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,h.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new vo(r.cfg.maxStep),r.redoStack=new vo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new X0(this),r=new Uo(this),n=new nm(this),a=new im(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:ye.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:ye.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:ye.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:ye.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:ye.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,h.isPlainObject)(t)?this.cfg=(0,b.__assign)((0,b.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new vo(this.cfg.maxStep),this.redoStack=new vo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,h.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,h.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,h.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=ws({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});oa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=bd(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");oa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,_=l*t,I=t,B=!1;if(f&&_<f?(I=f/l,B=!0):c&&_>c&&(I=c/l,B=!0),r?u=bd(u,[["t",-r.x,-r.y],["s",I,I],["t",r.x,r.y]]):u=bd(u,[["s",I,I]]),n){var j=(0,h.clone)(s.getMatrix());j||(j=[1,0,0,0,1,0,0,0,1]);var et=j[0],ut=et*I,ct=ws({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(pt){if(pt===1)j=u;else{var Mt=io(et,ut,pt)/j[0];r?j=bd(j,[["t",-r.x,-r.y],["s",Mt,Mt],["t",r.x,r.y]]):j=bd(j,[["s",Mt,Mt]])}return{matrix:j}},ct)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!B},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,h.isString)(t)&&(n=this.findById(t)),!n&&(0,h.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,b.__assign)((0,b.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,b.__assign)((0,b.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var _=Js(this.get("comboTrees"));this.set("comboTrees",_)}}},e.prototype.innerAddItem=function(t,r,n){if(!_u(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(B){u||xo(B,function(j){if(r.parentId===j.id){u=!0;var et=(0,b.__assign)({id:r.id,depth:j.depth+2},r);j.children?j.children.push(et):j.children=[et],r.depth=et.depth,a=n.addItem(t,r)}var ut=s[j.id];return u&&ut&&ut.getType&&ut.getType()==="combo"&&n.updateCombo(ut,j.children),!0})}),!u){var f=(0,b.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,h.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),_=!1,I=!1;o.forEach(function(B){I||_||xo(B,function(j){if(j.id===r.id)return I=!0,!1;if(r.comboId===j.id&&!I){_=!0;var et=(0,h.clone)(r);et.itemType="node",j.children?j.children.push(et):j.children=[et],et.depth=j.depth+1}return _&&l[j.id].getType&&l[j.id].getType()==="combo"&&n.updateCombo(l[j.id],j.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,b.__assign)((0,b.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var _=t[u].type,I=s[u];if(I&&I!==!0){var B=(0,b.__assign)((0,b.__assign)({},I.getModel()),{itemType:_});switch(_){case"node":l.nodes.push(B);break;case"edge":l.edges.push(B);break;case"combo":l.combos.push(B);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,h.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,h.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,b.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!1)}),o.updateItem(s,r),c==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!0)}),u){var _={nodes:[],edges:[],combos:[]},I={nodes:[],edges:[],combos:[]},B=(0,b.__assign)({id:f.id},r);switch(c){case"node":_.nodes.push(f),I.nodes.push(B);break;case"edge":_.edges.push(f),I.edges.push(B);break;case"combo":_.combos.push(f),I.combos.push(B);break;default:break}this.pushStack("update",{before:_,after:I})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,h.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){ns(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(et){return{type:"node",model:et}}),!1,!1),(f==null?void 0:f.length)!==0){var c=Qs(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(et){return{type:"edge",model:et}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var _=t.get("layoutController");if(_){if(_.layout(I),this.destroyed)return}else I();function I(){(t.get("comboTrees")||[]).forEach(function(et){xo(et,function(ut){var ct=t.findById(ut.id);return ct.getType()==="combo"&&ut.collapsed&&(t.collapseCombo(ut.id,!1),t.updateCombo(ct)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var et;(et=t.getCombos())===null||et===void 0||et.forEach(function(ut){ut.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var B=this.getNodes();B.forEach(function(et){et.toFront()})}else{var j=this.getEdges();j.forEach(function(et){et.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,h.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===xm){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!ns(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},_=s.combos;if(_){var I=Qs(_,s.nodes);this.set("comboTrees",I)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,h.each)(c,function(ct,pt){c[pt].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[pt],ct.destroy()):l.nodes.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1)))});for(var B=this.getCombos(),j=B.length,et=j-1;et>=0;et--)B[et].destroyed&&B.splice(et,1);_&&(o.addCombos(_),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,h.each)(c,function(ct,pt){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||l.edges.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){xo(ct,function(pt){var Mt=n.findById(pt.id);return Mt.getType()==="combo"&&pt.collapsed&&n.collapseCombo(pt.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var ut=this.get("layoutController");return ut&&(ut.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(pt){pt.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,h.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(ut){var ct=a.findById(ut),pt=ct.getType();if(!(pt!=="node"&&pt!=="combo")){var Mt=ct.getModel();c["".concat(pt,"s")].push({id:ut,parentId:pt==="node"?Mt.comboId:Mt.parentId})}});var l=this.get("comboTrees"),_=new Set(r),I=new Map;l&&(l.forEach(function(ut){xo(ut,function(ct,pt,Mt){if(_.has(ct.id)){if(pt){var Zt=a.findById(pt.id),se=a.findById(ct.id);pt.children.splice(Mt,1),Zt.removeChild(se),o.updateCombo(Zt,pt.children)}ct.itemType==="combo"&&I.set(ct.id,ct)}return!0})}),l=l.filter(function(ut){return!_.has(ut.id)}),this.set("comboTrees",l));var B={nodes:[],combos:[]},j=r.map(function(ut){var ct=a.findById(ut),pt=ct.getModel(),Mt="";ct.getType&&(Mt=ct.getType());var Zt=I.get(ut)||{id:ct.getID(),itemType:Mt};return Mt==="combo"?(Zt.parentId=s,pt.parentId=s):Mt==="node"&&(Zt.comboId=s,pt.comboId=s),f&&B["".concat(Mt,"s")].push({id:pt.id,parentId:s}),Zt});u.children=j,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(ut){ji(ut,function(ct){return ct.id===s?(ct.itemType="combo",ct.children=j,!1):!0})}),this.sortCombos()),f&&(B.combos.push(u),this.pushStack("createCombo",{before:c,after:B}));var et=this.findById(s);!et.getModel().parentId&&et.getChildren().combos.length&&this.updateComboTree(et,void 0,!1),setTimeout(function(){et.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,h.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var _=this.get("itemMap"),I=u.get("id"),B,j=[],et=this.get("combos"),ut=this.findById(c),ct=r&&this.get("enabledStack"),pt={};if(ct&&(pt=(0,h.clone)(f),pt.children=[]),l.forEach(function(oe){B||xo(oe,function(_e){var Ue;if(_e.id===I){B=_e;var Re=u.getEdges().map(function(nn){return nn.getID()});Re.forEach(function(nn){n.removeItem(nn,!1)});var qe=et.indexOf(u);et.splice(qe,1),delete _[I];var hr=(0,h.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:hr,type:"combo"})}if(c&&B&&_e.id===c){ut.removeCombo(u),j=_e.children;var qe=j.indexOf(B);return qe!==-1&&j.splice(qe,1),(Ue=B.children)===null||Ue===void 0||Ue.forEach(function(kn){var En=n.findById(kn.id),Kr=En.getModel();En.getType&&En.getType()==="combo"?(kn.parentId=c,delete kn.comboId,Kr.parentId=c,delete Kr.comboId):En.getType&&En.getType()==="node"&&(kn.comboId=c,Kr.comboId=c),ut.addChild(En),j.push(kn)}),n.updateCombo(ut),!1}return!0})}),!c&&B){var Mt=l.indexOf(B);l.splice(Mt,1),(a=B.children)===null||a===void 0||a.forEach(function(oe){oe.parentId=void 0;var _e=n.findById(oe.id).getModel();delete _e.parentId,delete _e.comboId,oe.itemType!=="node"&&l.push(oe)})}if(ct){var Zt={nodes:[],combos:[]},se={nodes:[],combos:[]};(o=B.children)===null||o===void 0||o.forEach(function(oe){var _e=n.findById(oe.id),Ue=_e.getType();Ue!=="node"&&Ue!=="combo"||(Zt["".concat(Ue,"s")].push({id:oe.id,parentId:I}),se["".concat(Ue,"s")].push({id:oe.id,parentId:c}))}),Zt.combos.push(pt),this.pushStack("uncombo",{before:Zt,after:se})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){xo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var _=(0,b.__spreadArray)([],l.getStates(),!0);(0,h.each)(_,function(I){return r.setItemState(l,I,!1)}),o.updateCombo(l,f.children,t),(0,h.each)(_,function(I){return r.setItemState(l,I,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,h.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){xo(c,function(l){if(!l)return!0;var _=f[l.id];if(o===l.id&&_&&_.getType&&_.getType()==="combo"){var I=(0,b.__spreadArray)([],_.getStates(),!0);(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!1)}),u.updateCombo(_,l.children),(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,h.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,_;if((c||[]).forEach(function(ct){_||ji(ct,function(pt){if(!_)return pt.id===o.getID()&&(_=pt),!0})}),ji(_,function(ct){return ct.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var I={},B={};f==="combo"?(I.combos=[{id:s.id,parentId:s.parentId}],B.combos=[{id:s.id,parentId:r}]):f==="node"&&(I.nodes=[{id:s.id,parentId:s.comboId}],B.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:I,after:B})}if(s.parentId||s.comboId){var j=this.findById(s.parentId||s.comboId);j&&j.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var et=this.findById(r);et&&et.addChild(o)}if(u){var et=this.findById(u);et&&et.removeChild(o)}var ut=Js(this.get("comboTrees"),s.id,r);this.set("comboTrees",ut),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,h.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,h.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,h.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,h.each)(r,function(o){o.refresh()}),(0,h.each)(n,function(o){o.refresh()}),(0,h.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,h.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var _=l.get("originAttrs"),I=l.get("model"),B=l.getContainer().getMatrix();if(_==null&&(B&&(_={x:B[6],y:B[7]}),l.set("originAttrs",_||0)),a){var j=a(l,f,c,_||{x:0,y:0});l.set("model",Object.assign(I,j))}else _?(I.x=_.x+(c.x-_.x)*f,I.y=_.y+(c.y-_.y)*f):(I.x=c.x,I.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,h.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(_){(0,h.each)(_,function(I){u=I.getModel();var B=I.get("originAttrs");if(!(B&&u.x===B.x&&u.y===B.y)){var j=I.updatePosition({x:u.x,y:u.y});f[u.id]=j,u.comboId&&(f[u.comboId]=f[u.comboId]||j),u.parentId&&(f[u.parentId]=f[u.parentId]||j)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,h.each)(a,function(l){var _=l.getSource().getModel(),I=l.getTarget();if(!(0,h.isPlainObject)(I)){var B=I.getModel();(f[_.id]||f[B.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,h.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,h.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(_){var I=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*I[0]+I[6],u.y=u.y*I[0]+I[7];var B=o.getGroup().getCanvasBBox(),j=B.minX,et=B.maxX,ut=B.minY,ct=B.maxY,pt={x:(j+et)/2,y:(ut+ct)/2};r==="begin"&&(pt.x=j,pt.y=ut),o.translate(u.x-pt.x,u.y-pt.y)})}var c=(0,b.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,h.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(_){c||ji(_,function(I){if(c&&I.depth<=a.depth)return!1;if(a.id===I.id&&(c=!0),c){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){var I=_.getModel(),B=I.isVEdge,j=I.size,et=j===void 0?1:j;if(!(_.isVisible()&&!B)){var ut=_.getSource(),ct=_.getTarget(),pt=null,Mt;if(ut.getModel().id===a.id||u.includes(ut)&&!u.includes(ct)?(pt=ct,Mt=!1):(ct.getModel().id===a.id||!u.includes(ut)&&u.includes(ct))&&(pt=ut,Mt=!0),pt){if(B){n.removeItem(_,!1);return}for(var Zt=pt.getModel();!pt.isVisible();){var se=Zt.parentId,oe=Zt.comboId,_e=se||oe;if(pt=n.findById(_e),!pt||!_e)return;Zt=pt.getModel()}var Ue=Zt.id,Re=Mt?{source:Ue,target:a.id,size:et,isVEdge:!0}:{source:a.id,target:Ue,size:et,isVEdge:!0},qe="".concat(Re.source,"-").concat(Re.target);if(l[qe]){l[qe].size+=et;return}l[qe]=Re}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(_){c||ji(_,function(I){if(c&&I.depth<=a.depth)return!1;if(a.id===I.id&&(c=!0),c){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){if(!(_.isVisible()&&!_.getModel().isVEdge)){var I=_.getSource(),B=_.getTarget(),j=I.get("id"),et=B.get("id"),ut=null,ct;if(j===a.id||u.includes(I)&&!u.includes(B)?(ut=B,ct=!1):et===a.id||!u.includes(I)&&u.includes(B)?(ut=I,ct=!0):u.includes(I)&&u.includes(B)&&I.isVisible()&&B.isVisible()&&_.show(),ut){var pt=_.getModel(),Mt=pt.isVEdge,Zt=pt.size,se=Zt===void 0?1:Zt;if(Mt){n.removeItem(_,!1);return}for(var oe=ut.getModel();!ut.isVisible();){var _e=oe.parentId,Ue=oe.comboId,Re=_e||Ue;if(ut=n.findById(Re),!ut||!Re)return;oe=ut.getModel()}for(var qe=oe.id,hr=ct?B:I,nn=hr.getModel();!hr.isVisible();){var kn=nn.parentId,En=nn.comboId,Kr=kn||En;if(hr=n.findById(Kr),!hr||!Kr)return;if(nn.comboId===a.id||nn.parentId===a.id)break;nn=hr.getModel()}var ta=nn.id;if(qe){var $n=ct?{source:qe,target:ta,isVEdge:!0,size:se}:{source:ta,target:qe,isVEdge:!0,size:se},$r="".concat($n.source,"-").concat($n.target);if(l[$r]){l[$r].size+=se;return}l[$r]=$n}}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,h.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,h.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=Jt(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,h.clone)(r):{before:{},after:(0,h.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=yt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=yt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=xn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new np(this,(0,b.__assign)((0,b.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,h.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(tt),ap=bm;function Gh(i){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(i)}var id=Xt,ip="-shape",Uh="-label",Zd=["startArrow","endArrow"],op={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Em={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Kd={edge:Em,node:op,combo:op},Wh="-label-bg",Yh={options:{labelCfg:{style:{fontFamily:ye.windowFontFamily}},descriptionCfg:{style:{fontFamily:ye.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+ip),t.shapeMap[this.itemType+ip]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Uh),t.shapeMap[this.itemType+Uh]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=id(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=id(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=id(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=id(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=id(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Wh;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,h.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=ye[a]?ye[a].style:null;return(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,h.mix)({},o.attr(),e.style),u=function(l){var _,I=s[l];if((0,h.isPlainObject)(I)){var B=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(j){return j.get("name")===l});B==null||B.attr(I)}else o.attr((_={},_[l]=I,_))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Uh,c=o.shapeMap[f]||o.find(function(Mt){return Mt.get("className")===f}),l=this.itemType+Wh,_=o.shapeMap[l]||o.find(function(Mt){return Mt.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],_&&(o.removeChild(_),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,h.deepMix)(u,e.labelCfg));var B=this.getLabelStyleByPosition(e,u,o),j=(n=e.labelCfg)===null||n===void 0?void 0:n.style,et=(0,b.__assign)((0,b.__assign)({},B),j),ut=et.rotate;if(delete et.rotate,!isNaN(ut)&&ut!==""){var ct=[1,0,0,0,1,0,0,0,1];ct=id(ct,[["t",-et.x,-et.y],["r",ut],["t",et.x,et.y]]),et.matrix=ct,c.attr(et)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(et);if(!_)et.background&&(_=this.drawLabelBg(e,o,c),_.set("classname",l),o.shapeMap[l]=_,c.toFront());else if(et.background){var pt=this.getLabelBgStyleByPosition(c,u);_.attr(pt)}else o.removeChild(_)}else{var I=this.drawLabel(e,o);I.set("className",f),o.shapeMap[f]=I}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,h.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var _=(0,h.mix)({},l||c),I=r.getContainer(),B={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(B.r=1,B.width=1,B.height=1),t){var j=function(Kr){var ta,$n=_[Kr];if((0,h.isPlainObject)($n)&&!Zd.includes(Kr)){var $r=((o=I.shapeMap)===null||o===void 0?void 0:o[Kr])||I.find(function(yn){return yn.get("name")===Kr});$r==null||$r.attr($n)}else s.attr((ta={},ta[Kr]=$n,ta))};for(var et in _)j(et)}else{var ut=Us(r.getCurrentStatesStyle()),ct=r.getModel(),pt=(0,h.mix)({},ct.style,Us(r.getOriginStyle())),Mt=s.get("name"),Zt=s.attr(),se={};Object.keys(Zt).forEach(function(En){if(En!=="img"){var Kr=Zt[En];Kr&&Gh(Kr)==="object"?se[En]=(0,h.clone)(Kr):se[En]=Kr}});var oe={},_e=function(Kr){var ta=_[Kr];if((0,h.isPlainObject)(ta)&&!Zd.includes(Kr)){var $n=I.shapeMap[Kr]||I.find(function(Fn){return Fn.get("name")===Kr});if($n){var $r=Us($n.attr());(0,h.each)(ta,function(Fn,zn){if(Kr===Mt&&se[zn]&&!B[zn]){delete se[zn];var ia=pt[Kr][zn]||Kd[u][zn];s.attr(zn,ia)}else if($r[zn]||$r[zn]===0){delete $r[zn];var da=pt[Kr][zn]||Kd[u][zn];$n.attr(zn,da)}}),oe[Kr]=$r}}else if(se[Kr]&&!B[Kr]){delete se[Kr];var yn=pt[Kr]||(pt[Mt]?pt[Mt][Kr]:void 0)||Kd[u][Kr];s.attr(Kr,yn)}};for(var Ue in _)_e(Ue);Mt?oe[Mt]=se:(0,h.mix)(oe,se);for(var et in ut)if(!B[et]){var Re=ut[et];(!(0,h.isPlainObject)(Re)||Zd.includes(et))&&(Mt?((0,h.mix)(pt[Mt],(a={},a[et]=Re,a)),delete pt[et]):(0,h.mix)(pt,(n={},n[et]=Re,n)),delete ut[et])}var qe={};(0,h.deepMix)(qe,pt,oe,ut);var hr=!1,nn=function(Kr){var ta,$n,$r=qe[Kr];if((0,h.isPlainObject)($r)&&!Zd.includes(Kr)){var yn=I.shapeMap[Kr]||I.find(function(zn){return zn.get("name")===Kr});yn&&((yn.get("type")==="text"||yn.get("labelRelated"))&&(delete $r.x,delete $r.y,delete $r.matrix),Kr===Mt&&(u==="combo"&&(delete $r.r,delete $r.width,delete $r.height),hr=!0),yn.attr($r))}else if(!hr){var Fn=$r||Kd[u][Kr];u==="combo"?Mt||s.attr((ta={},ta[Kr]=Fn,ta)):s.attr(($n={},$n[Kr]=Fn,$n))}};for(var kn in qe)nn(kn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,h.clone)(f):(0,h.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},wm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ye.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||ye.defaultNode.size;return(0,h.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,h.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=qs(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,h.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Ih(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,b.__assign)((0,b.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(qe){return qe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(qe){return qe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(qe){return qe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(qe){return qe.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,h.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,_=f.lineWidth,I=f.size/2;I||(I=f.r);var B=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},j=B.left,et=B.right,ut=B.top,ct=B.bottom,pt=this.getSize(e),Mt=pt[0],Zt=pt[1],se={r:I,fill:c,stroke:l,lineWidth:_};if(n)!j&&j!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.__assign)((0,b.__assign)({},se),{x:-Mt/2,y:0}));else if(j){var oe="link-point-left";t.shapeMap[oe]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},se),{x:-Mt/2,y:0}),className:oe,name:oe,isAnchorPoint:!0})}if(a)!et&&et!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,b.__assign)((0,b.__assign)({},se),{x:Mt/2,y:0}));else if(et){var _e="link-point-right";t.shapeMap[_e]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},se),{x:Mt/2,y:0}),className:_e,name:_e,isAnchorPoint:!0})}if(o)!ut&&ut!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,b.__assign)((0,b.__assign)({},se),{x:0,y:-Zt/2}));else if(ut){var Ue="link-point-top";t.shapeMap[Ue]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},se),{x:0,y:-Zt/2}),className:Ue,name:Ue,isAnchorPoint:!0})}if(s)!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,b.__assign)((0,b.__assign)({},se),{x:0,y:Zt/2}));else if(ct){var Re="link-point-bottom";t.shapeMap[Re]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},se),{x:0,y:Zt/2}),className:Re,name:Re,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,b.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ut){return ut.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,h.mix)({},f.attr(),a),l=c.width,_=l===void 0?20:l,I=c.height,B=I===void 0?20:I;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(_=0,B=0),f.attr((0,b.__assign)((0,b.__assign)({},c),{x:-_/2,y:-B/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var j="".concat(this.type,"-icon");if(u)n.shapeMap[j]=n.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:j,name:j});else{var _=a.width,B=a.height;n.shapeMap[j]=n.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},a),{x:-_/2,y:-B/2}),className:j,name:j})}var et=n.shapeMap["node-label"]||n.find(function(ut){return ut.get("name")==="node-label"});et&&et.toFront()}}},Sm=(0,b.__assign)((0,b.__assign)({},Yh),wm);Fs.registerNode("single-node",Sm);var $d="edge-shape";function Mm(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var _m={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ye.defaultEdge.size,style:{x:0,y:0,stroke:ye.defaultEdge.style.stroke,lineAppendWidth:ye.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ye.edgeLabel.style.fill,fontSize:ye.edgeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.edgeStateStyles)},getPath:function(e){var t=[];return(0,h.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style),a=e.size||ye.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,h.mix)({},ye.defaultEdge.style,{stroke:ye.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var _=o.attr(),I=e.style||{};I.stroke===void 0&&(I.stroke=e.color);var B=e.sourceNode,j=e.targetNode,et={radius:I.radius};c||(et={source:B,target:j,offset:I.offset,radius:I.radius});var ut=this.getPath(l,et),ct={};r==="move"?ct={path:ut}:(_.endArrow&&I.endArrow===!1&&(e.style.endArrow={path:""}),_.startArrow&&I.startArrow===!1&&(e.style.startArrow={path:""}),ct=(0,b.__assign)({},e.style),ct.lineWidth===void 0&&(ct.lineWdith=((0,h.isNumber)(s)?s:s==null?void 0:s[0])||_.lineWidth),ct.path===void 0&&(ct.path=ut),ct.stroke===void 0&&(ct.stroke=_.stroke||e.color)),o&&o.attr(ct)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[$d],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,h.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=Go(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,b.__assign)((0,b.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,h.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Mm(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:$d,name:$d,attrs:r});return t.shapeMap[$d]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,h.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Wh;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,h.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},Cm=(0,b.__assign)((0,b.__assign)({},Yh),_m);Fs.registerEdge("single-edge",Cm),Fs.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Fs.registerEdge("spline",{getPath:function(e){var t=Zv(e);return t}},"single-edge"),Fs.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=sa(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=sa(t,o,r)}var f=Zn(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Fs.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,h.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Hd(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Fs.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Hd(r,n,e.curvePosition[0],e.curveOffset[0]),o=Hd(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Fs.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Fs.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Fs.registerEdge("loop",{getPathPoints:function(e){return Io(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Tm={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ye.comboLabel.refX,refY:ye.comboLabel.refY,options:{style:{stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,h.clone)(e.size||this.options.size||ye.defaultCombo.size);return(0,h.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,h.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,_=t.getContainer(),I=_.find(function(ut){return ut.get("name")==="combo-collapsed-substitute-icon"}),B=I&&!I.destroyed,j=t.get("keyShape");if(n&&u){if(B)I.show();else{var et={width:c||r.r*2||r.width,height:l||r.r*2||r.height};I=_.addShape("image",{attrs:(0,b.__assign)({img:f,x:-et.width/2,y:-et.height/2},et),name:"combo-collapsed-substitute-icon",draggable:!0})}j.hide()}else B&&(I.hide(),j.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,b.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Am=(0,b.__assign)((0,b.__assign)({},Yh),Tm);Fs.registerCombo("single-combo",Am),Fs.registerCombo("circle",{options:{size:[ye.defaultCombo.size[0],ye.defaultCombo.size[0]],padding:Math.max.apply(Math,ye.defaultCombo.padding),animate:!0,style:{stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,h.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,h.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||ye.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,b.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,h.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,h.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,h.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Fs.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize,fontFamily:ye.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],_;switch(r){case"top":_={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":_={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":_={x:u+s,y:0,textAlign:"left"};break;case"center":_={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":_={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:_={x:f+o,y:0,textAlign:"right"};break}return _.text=e.label,_},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,h.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,h.isNumber)(a.width)||isNaN(a.width)?s=o[0]||ye.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,h.isNumber)(a.height)||isNaN(a.height)?u=o[1]||ye.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var _=(0,b.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},_},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,h.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,h.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),_=(0,h.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,_,!1)}},"single-combo"),Fs.registerNode("simple-circle",{options:{size:ye.defaultNode.size,style:{x:0,y:0,stroke:ye.defaultNode.style.stroke,fill:ye.defaultNode.style.fill,lineWidth:ye.defaultNode.style.lineWidth},labelCfg:{style:{fill:ye.nodeLabel.style.fill,fontSize:ye.nodeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,h.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Fs.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ye.defaultNode.style.stroke,fill:ye.defaultNode.style.fill,lineWidth:ye.defaultNode.style.lineWidth},labelCfg:{style:{fill:ye.nodeLabel.style.fill,fontSize:ye.nodeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},ye.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,h.mix)({},a,s.attr(),u);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Fs.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:ye.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,b.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,_=o-c/2;t.setClip({type:"rect",attrs:(0,b.__assign)({x:l,y:_,width:f,height:c},s)})}else if(n==="ellipse"){var I=r.rx,B=r.ry;t.setClip({type:"ellipse",attrs:(0,b.__assign)({x:a,y:o,rx:I,ry:B},s)})}else if(n==="polygon"){var j=r.points;t.setClip({type:"polygon",attrs:(0,b.__assign)({points:j},s)})}else if(n==="path"){var et=r.path;t.setClip({type:"path",attrs:(0,b.__assign)({path:et},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var sp={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},up={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},Wc=Fs,Im=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],fp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Om=Xt,Dm=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},P),w),p),k),m),S),{transform:Om,mat3:rt}),Xs=Dm,Lm=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=fp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,b.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),_=f.length,I=0;I<_;I++){var B=f[I];if(!(!B||B.destroyed)){var j=B.getModel();if(!B.isVisible()){r.push(j);continue}t.push(j)}}for(var et=c.length,I=0;I<et;I++){var ut=c[I];if(!(!ut||ut.destroyed)){var j=ut.getModel();if(!ut.isVisible()){a.push(j);continue}j.isComboEdge?o.push(j):n.push(j)}}for(var ct=l.length,I=0;I<ct;I++){var pt=l[I];if(!pt.destroyed){var j=pt.getModel();if(!pt.isVisible()){u.push(j);continue}s.push(j)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(Mt){return Mt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var _,I=t.execLayoutMethod(l,c);return c===a.length-1&&((_=o.onAllLayoutEnd)===null||_===void 0||_.call(o)),I})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,b.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,h.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,h.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,b.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,h.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Dv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,h.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||_f(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,b.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,b.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return _f(u.x)||_f(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),_=u/(c-1),I=f/(l-1);(!isFinite(_)||!_)&&(_=0),(!isFinite(I)||!_)&&(I=0);for(var B=e[0]-u/2,j=e[1]-f/2,et=!0,ut=0;ut<o;ut++){var ct=a[ut];_f(+ct.x)&&(et=!1,ct.x=ut%c*_+B),_f(+ct.y)&&(et=!1,ct.y=Math.floor(ut/c)*I+j)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),cp=Lm,Pm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),lp=Pm,ic=Wc.registerNode,dp=Wc.registerEdge,Nm=Wc.registerCombo,hp=V.registerBehavior,Jn=ye,RS={version:ye.version,AbstractGraph:ap,BaseGlobal:Jn,Util:Xs,Shape:Wc,Node:kh,Edge:Gv,Combo:jv,Hull:np,registerNode:Wc.registerNode,registerEdge:Wc.registerEdge,registerCombo:Wc.registerCombo,registerBehavior:V.registerBehavior,Arrow:sp,Marker:up,AbstractLayout:cp,AbstractEvent:lp},Rm=C(810369);function km(){return window?window.devicePixelRatio:1}function vp(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Tl(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Ed(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Bm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function pp(i,e){return i[0]===e[0]&&i[1]===e[1]}var Fm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Gm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,gp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function mp(i,e){var t=i.match(gp);(0,h.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function Um(i,e,t){var r=Fm.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,_=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,I=i.createLinearGradient(s.x,s.y,l,_);return mp(a,I),I}function Wm(i,e,t){var r=zm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(gp);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,_=Math.sqrt(c*c+l*l)/2,I=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*_);return mp(s,I),I}function Ym(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=Gm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function Xm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,h.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Um(i,e,t);if(t[0]==="r")return Wm(i,e,t);if(t[0]==="p")return Ym(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function jm(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function qd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Xh(i,e){return qd(i)*qd(e)?(i[0]*e[0]+i[1]*e[1])/(qd(i)*qd(e)):1}function yp(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Xh(i,e))}function xp(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,_=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ct=(s+f)/2+Math.cos(n)*et-Math.sin(n)*ut,pt=(u+c)/2+Math.sin(n)*et+Math.cos(n)*ut,Mt=[(l-et)/t,(_-ut)/r],Zt=[(-1*l-et)/t,(-1*_-ut)/r],se=yp([1,0],Mt),oe=yp(Mt,Zt);return Xh(Mt,Zt)<=-1&&(oe=Math.PI),Xh(Mt,Zt)>=1&&(oe=0),o===0&&oe>0&&(oe=oe-2*Math.PI),o===1&&oe<0&&(oe=oe+2*Math.PI),{cx:ct,cy:pt,rx:pp(i,[f,c])?0:t,ry:pp(i,[f,c])?0:r,startAngle:se,endAngle:se+oe,xRotation:n,arcFlag:a,sweepFlag:o}}var Qd=Math.sin,Jd=Math.cos,jh=Math.atan2,th=Math.PI;function bp(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=jh(c,f),_=new Qh({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Jd(th/6)+","+10*Qd(th/6)+" L0,0 L"+10*Jd(th/6)+",-"+10*Qd(th/6),stroke:s,lineWidth:u}});_.translate(n,a),_.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",_)}function Ep(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,_=l.d,I=l.fill,B=l.stroke,j=l.lineWidth,et=(0,b.__rest)(l,["d","fill","stroke","lineWidth"]),ut=t-n,ct=r-a,pt=jh(ct,ut);_&&(n=n-Jd(pt)*_,a=a-Qd(pt)*_);var Mt=new Qh({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,b.__assign)((0,b.__assign)({},et),{stroke:B||f,lineWidth:j||c,fill:I})});Mt.translate(n,a),Mt.rotateAtPoint(n,a,pt),i.set(o?"startArrowShape":"endArrowShape",Mt)}function Al(i,e,t,r,n){var a=jh(r-e,t-i);return{dx:Jd(a)*n,dy:Qd(a)*n}}function Vh(i,e,t,r,n,a){typeof e.startArrow=="object"?Ep(i,e,t,r,n,a,!0):e.startArrow?bp(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Hh(i,e,t,r,n,a){typeof e.endArrow=="object"?Ep(i,e,t,r,n,a,!1):e.endArrow?bp(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var wp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function od(i,e){var t=e.attr();for(var r in t){var n=t[r],a=wp[r]?wp[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,h.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=Xm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Zh(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function Vm(i,e,t){var r=i.get("refreshElements");(0,h.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?$h(e,t):Kh(e,t)}function Kh(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&$h(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Kh(r.cfg.children,e);else{var n=Hm(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Kh(r.cfg.children,e)}}}function Sp(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Sp(t.cfg.children)}}function $h(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&$h(r.get("children"),e))}}function Hm(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Ed(t,e);return r}function Mp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],_=l[0];if(c===0&&a&&a.d){var I=i.getStartTangent();f=Al(I[0][0],I[0][1],I[1][0],I[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var B=n[c+1];if(B[0]==="Z"){var I=i.getEndTangent();f=Al(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var I=i.getEndTangent();f=Al(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}var j=f.dx,et=f.dy;switch(_){case"M":e.moveTo(l[1]-j,l[2]-et),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-j,l[2]-et);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-j,l[4]-et);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-j,l[6]-et);break;case"A":{var ut=void 0;r?(ut=r[c],ut||(ut=xp(s,l),r[c]=ut)):ut=xp(s,l);var ct=ut.cx,pt=ut.cy,Mt=ut.rx,Zt=ut.ry,se=ut.startAngle,oe=ut.endAngle,_e=ut.xRotation,Ue=ut.sweepFlag;if(e.ellipse)e.ellipse(ct,pt,Mt,Zt,_e,se,oe,1-Ue);else{var Re=Mt>Zt?Mt:Zt,qe=Mt>Zt?1:Mt/Zt,hr=Mt>Zt?Zt/Mt:1;e.translate(ct,pt),e.rotate(_e),e.scale(qe,hr),e.arc(0,0,Re,se,oe,1-Ue),e.scale(1/qe,1/hr),e.rotate(-_e),e.translate(-ct,-pt)}break}case"Z":e.closePath();break;default:break}if(_==="Z")s=u;else{var nn=l.length;s=[l[nn-2],l[nn-1]]}}}}function _p(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function Zm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Bm(t,n):r?e=t:a&&(e=n)}return e}function Km(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,h.each)(i,function(a){var o=Zm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,h.min)(e),minY:(0,h.min)(t),maxX:(0,h.max)(r),maxY:(0,h.max)(n)}}function $m(i,e){return!i||!e||!Ed(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var qm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){_p(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),od(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,h.each)(t,function(_){var I=_.cfg.cacheCanvasBBox;I&&_.cfg.isInView&&(r.push(I.minX,I.maxX),n.push(I.minY,I.maxY))});var a=null;if(r.length){var o=(0,h.min)(r),s=(0,h.max)(r),u=(0,h.min)(n),f=(0,h.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Ed(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),od(t,this),this._applyClip(t,this.getClip()),Zh(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(wl),Cp=qm,Qm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Cp},e.prototype.onCanvasChange=function(t){_p(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=bu(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),od(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ed(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),od(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Ed(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(ec),uf=Qm,Jm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,_=vp(u,f,t,r);return a&&n?_<=c+l:a?_<=c:n?_>=c-l&&_<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(uf),ty=Jm;function eh(i,e,t,r){return i/(t*t)+e/(r*r)}var ey=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,_=s.ry,I=(t-f)*(t-f),B=(r-c)*(r-c);return a&&n?eh(I,B,l+u,_+u)<=1:a?eh(I,B,l,_)<=1:n?eh(I,B,l-u,_-u)>=1&&eh(I,B,l+u,_+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(uf),ry=ey;function Tp(i){return i instanceof HTMLElement&&(0,h.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var ny=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,h.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Tp(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,_=r.img;(_ instanceof Image||Tp(_))&&(!(0,h.isNil)(u)&&!(0,h.isNil)(f)&&!(0,h.isNil)(c)&&!(0,h.isNil)(l)?t.drawImage(_,u,f,c,l,n,a,o,s):t.drawImage(_,n,a,o,s))},e}(uf),ay=ny;function Yc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?cs.pointToLine(i,e,t,r,a,o)<=n/2:!1}var iy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Vh(this,t,a,o,r,n),u&&Hh(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Yc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Al(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Al(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return cs.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return cs.pointAt(n,a,o,s,t)},e}(uf),oy=iy,sy={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},uy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,h.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,h.isFunction)(a))s=a,u=s(r,n,o),u=Ii(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Mp(this,t,{path:r},n)},e.Symbols=sy,e}(uf),fy=uy;function Ap(i,e,t){var r=wr();return i.createPath(r),r.isPointInPath(e,t)}var cy=1e-6;function qh(i){return Math.abs(i)<cy?0:i<0?-1:1}function ly(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Ip(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(ly(o,s,[e,t]))return!0;qh(o[1]-t)>0!=qh(s[1]-t)>0&&qh(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function wd(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return vp(f.x,f.y,o,s)<=a/2}var dy=Xt;function hy(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function vy(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,_=u.box;if(!(_&&!Tl(_.x-o,_.y-o,_.width+e,_.height+e,t,r))){switch(u.command){case"L":case"Z":a=Yc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var I=nd.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=I<=e/2;break;case"C":var B=je.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=B<=e/2;break;case"A":var j=u.arcParams,et=j.cx,ut=j.cy,ct=j.rx,pt=j.ry,Mt=j.startAngle,Zt=j.endAngle,se=j.xRotation,oe=[t,r,1],_e=ct>pt?ct:pt,Ue=ct>pt?1:ct/pt,Re=ct>pt?pt/ct:1,qe=dy(null,[["t",-et,-ut],["r",-se],["s",1/Ue,1/Re]]);Jo.transformMat3(oe,oe,qe),a=wd(0,0,_e,Mt,Zt,e,oe[0],oe[1]);break;default:break}if(a)break}}return a}function py(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var rh=(0,b.__assign)({hasArc:hy,extractPolygons:py,isPointInStroke:vy},T);function Op(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Ip(a,e,t),r)break}return r}var gy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ii(t);var r=rh.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=va(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Vh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Hh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=rh.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Ap(this,t,r);else{var l=this.attr("path"),_=rh.extractPolygons(l);f=Op(_.polygons,t,r)||Op(_.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Mp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,h.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,h.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,h.isNil)(s)||(0,h.isNil)(a))return null;var u=s.length,f=o[a+1];return je.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",rh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,h.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=je.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,h.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=je.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(uf),Qh=gy;function Dp(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Yc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],_=i[a-1];if(Yc(l[0],l[1],_[0],_[1],e,t,r))return!0}return!1}var my=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Dp(s,o,t,r,!0)),!u&&a&&(u=Ip(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(uf),yy=my,xy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&Vh(this,t,n[1][0],n[1][1],u,f),o&&Hh(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Dp(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var _=Al(u,f,n[1][0],n[1][1],a.d);u+=_.dx,f+=_.dy}if(o&&o.d){var _=Al(n[s-2][0],n[s-2][1],c,l,o.d);c-=_.dx,l-=_.dy}t.beginPath(),t.moveTo(u,f);for(var I=0;I<s-1;I++){var B=n[I];t.lineTo(B[0],B[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",Kt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),cs.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=cs.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(uf),by=xy;function Ey(i,e,t,r,n,a,o){var s=n/2;return Tl(i-s,e-s,t,n,a,o)||Tl(i+t-s,e-s,n,r,a,o)||Tl(i+s,e+r-s,t,n,a,o)||Tl(i-s,e+s,n,r,a,o)}function wy(i,e,t,r,n,a,o,s){var u=a/2;return Yc(i+n,e,i+t-n,e,a,o,s)||Yc(i+t,e+n,i+t,e+r-n,a,o,s)||Yc(i+t-n,e+r,i+n,e+r,a,o,s)||Yc(i,e+r-n,i,e+n,a,o,s)||wd(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||wd(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||wd(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||wd(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Sy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,_=s.radius;if(_){var B=!1;return n&&(B=wy(u,f,c,l,_,o,t,r)),!B&&a&&(B=Ap(this,t,r)),B}else{var I=o/2;if(a&&n)return Tl(u-I,f-I,c+I,l+I,t,r);if(a)return Tl(u,f,c,l,t,r);if(n)return Ey(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=jm(u),c=f[0],l=f[1],_=f[2],I=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-_),_!==0&&t.arc(n+o-_,a+s-_,_,0,Math.PI/2),t.lineTo(n+I,a+s),I!==0&&t.arc(n+I,a+s-I,I,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(uf),My=Sy,_y=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Nn(t)},e.prototype._setText=function(t){var r=null;(0,h.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Er(a.text,a.fontSize,a.lineHeight),_;(0,h.each)(r,function(I,B){_=u+B*(c+f)-l+f,o==="middle"&&(_+=l-f-(l-f)/2),o==="top"&&(_+=l-f),(0,h.isNil)(I)||(n?t.fillText(I,s,_):t.strokeText(I,s,_))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,h.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(uf),Cy=_y;function Ty(i,e){if(e){var t=le(e);return Vt(t,i)}return i}function Lp(i,e,t){var r=i.getTotalMatrix();if(r){var n=Ty([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Pp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Rf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Lp(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Np(i,e,t){if(!Pp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Np(s,e,t);else if(Pp(s,e,t)){var u=s,f=Lp(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var Ay=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Cp},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||km();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Np(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Km(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=$m(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,h.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),od(t,this),Zh(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),od(t,this),Vm(this,n,a),Zh(t,n,a),t.restore()):r.length&&Sp(r),(0,h.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,h.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(of),oc=Ay,kS="0.5.12",Jh={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Fi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},BS=null;function Bu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Rp(i){var e=Jh[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Bu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function kp(i,e){var t=i.get("el"),r=(0,h.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Iy(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Oy(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Sd(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Md(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Rp(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Bp(i,e){e.forEach(function(t){t.draw(i)})}function Fp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Iy(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&kp(i,function(l,_){return c.indexOf(l)-c.indexOf(_)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Sd(i):e==="clip"?Md(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Dy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Bu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Fp(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Md(this,t),this.createPath(t),r.length&&Bp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){Fi[s]&&a.setAttribute(Fi[s],o)}),Sd(this)},e}(wl),zp=Dy,Ly=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return zp},e.prototype.onCanvasChange=function(t){Fp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=bu(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,_=o-c,I=a+s+c,B=o+u+c;return{x:l,y:_,minX:l,minY:_,maxX:I,maxY:B,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Rp(this),Md(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,_=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&_.setAttribute(Fi.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&_.setAttribute(Fi.strokeOpacity,c),l&&_.setAttribute(Fi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(Fi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(Fi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(Fi[r],"url(#"+o+")")}else a.setAttribute(Fi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Oy(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Sd(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(ec),Fu=Ly,Py=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Fu),Ny=Py,Ry=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,h.each)(r||n,function(f,c){Fi[c]&&a.setAttribute(Fi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Fu),ky=Ry,By=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Fu),Fy=By,zy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,h.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,h.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Fu),Gy=zy,Uy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,h.isObject)(o)?t.addArrow(n,Fi[s]):t.getDefaultArrow(n,Fi[s]);a.setAttribute(Fi[s],"url(#"+u+")")}else a.removeAttribute(Fi[s]);else Fi[s]&&a.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return cs.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return cs.pointAt(n,a,o,s,t)},e}(Fu),Wy=Uy,nh={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Gp={get:function(i){return nh[i]},register:function(i,e){nh[i]=e},remove:function(i){delete nh[i]},getAll:function(){return nh}},Yy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,h.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,h.isFunction)(o)?s=o:s=Gp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Gp,e}(Fu),Xy=Yy,jy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){if(u==="path"&&(0,h.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,h.isObject)(s)?t.addArrow(a,Fi[u]):t.getDefaultArrow(a,Fi[u]);o.setAttribute(Fi[u],"url(#"+f+")")}else o.removeAttribute(Fi[u]);else Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Fu),Vy=jy,Hy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Fu),Zy=Hy,Ky=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&a.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",Kt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),cs.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=cs.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Fu),$y=Ky,qy=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Qy=/[^\s,]+/gi;function Jy(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function FS(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(qy),each(i,function(e,t){if(e=e.match(Qy),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var t1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,h.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&Fi[c]&&o.setAttribute(Fi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=Jy(s);(0,h.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Fu),e1=t1,Up=.3,r1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},n1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},a1={left:"left",start:"left",center:"middle",right:"end",end:"end"},i1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,h.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Sd(n):Fi[u]&&o.setAttribute(Fi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Bf();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",n1[n]||"alphabetic"):t.setAttribute("alignment-baseline",r1[n]||"baseline"),t.setAttribute("text-anchor",a1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,h.each)(u,function(l,_){_===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+Up)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-Up)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Fu),o1=i1,s1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,u1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,f1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Wp(i){var e=i.match(f1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,h.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function c1(i,e){var t=s1.exec(i),r=(0,h.mod)((0,h.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=Wp(n)}function l1(i,e){var t=u1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Wp(o)}var d1=function(){function i(e){this.cfg={};var t=null,r=(0,h.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Bu("linearGradient"),c1(e,t)):(t=Bu("radialGradient"),l1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),h1=d1,v1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},p1={x:"-40%",y:"-40%",width:"200%",height:"200%"},g1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Bu("filter");return(0,h.each)(p1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,h.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,h.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[v1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),m1=g1,y1=function(){function i(e,t){this.cfg={};var r=Bu("marker"),n=(0,h.uniqueId)("marker_");r.setAttribute("id",n);var a=Bu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,h.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Yp=y1,x1=function(){function i(e){this.type="clip",this.cfg={};var t=Bu("clipPath");this.el=t,this.id=(0,h.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),b1=x1,E1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,w1=function(){function i(e){this.cfg={};var t=Bu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Bu("image");t.appendChild(r);var n=(0,h.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=E1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),S1=w1,M1=function(){function i(e){var t=Bu("defs"),r=(0,h.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Yp(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new h1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Yp(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new m1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new S1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new b1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),_1=M1,C1=function(i){(0,b.__extends)(e,i);function e(t){return i.call(this,(0,b.__assign)((0,b.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return zp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!Jh[a.tagName]){for(var o=a.parentNode;o&&!Jh[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Bu("svg"),r=new _1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&kp(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Sd(this):t==="clip"?Md(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Md(this,t),r.length&&Bp(t,r)},e}(of),_d=C1,zS="0.5.6",T1=C(6767),Cd=C.n(T1),ah=C(697234),ih=2,Xp=.16,A1=.05,I1=.05,O1=.15,jp=5,Vp=4,D1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Hp(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-ih*e:Math.round(i.h)+ih*e:r=t?Math.round(i.h)+ih*e:Math.round(i.h)-ih*e,r<0?r+=360:r>=360&&(r-=360),r}function Zp(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-Xp*e:e===Vp?r=i.s+Xp:r=i.s+A1*e,r>1&&(r=1),t&&e===jp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Kp(i,e,t){var r;return t?r=i.v+I1*e:r=i.v-O1*e,r>1&&(r=1),Number(r.toFixed(2))}function oh(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,ah.Z)(i),n=jp;n>0;n-=1){var a=r.toHsv(),o=(0,ah.Z)({h:Hp(a,n,!0),s:Zp(a,n,!0),v:Kp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=Vp;s+=1){var u=r.toHsv(),f=(0,ah.Z)({h:Hp(u,s),s:Zp(u,s),v:Kp(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?D1.map(function(c){var l=c.index,_=c.opacity,I=ah.Z.mix(e.backgroundColor||"#141414",t[l],_*100).toHexString();return I}):t}var tv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$s={},ev={};Object.keys(tv).forEach(function(i){$s[i]=oh(tv[i]),$s[i].primary=$s[i][5],ev[i]=oh(tv[i],{theme:"dark",backgroundColor:"#141414"}),ev[i].primary=ev[i][5]});var GS=$s.red,US=$s.volcano,WS=$s.gold,YS=$s.orange,XS=$s.yellow,jS=$s.lime,VS=$s.green,HS=$s.cyan,ZS=$s.blue,KS=$s.geekblue,$S=$s.purple,qS=$s.magenta,QS=$s.grey,Ps=function(e,t,r){var n=Cd()(e),a=Cd()(t);return Cd()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},L1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=Ps(t,e,.05).rgb().toString(),a=Ps(t,e,.1).rgb().toString(),o=Ps(t,e,.2).rgb().toString(),s=Ps(t,e,.4).rgb().toString(),u=Ps(t,r,.02).rgb().toString(),f=Ps(t,r,.05).rgb().toString(),c=Ps(t,r,.1).rgb().toString(),l=Ps(t,r,.2).rgb().toString(),_=Ps(t,r,.3).rgb().toString(),I=oh(e,{theme:"default",backgroundColor:t}),B=Cd()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:et,highlightFill:o,disableStroke:_,disableFill:f,edgeMainStroke:_,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:_,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:_,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},P1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=Ps(t,e,.2).rgb().toString(),a=Ps(t,e,.3).rgb().toString(),o=Ps(t,e,.6).rgb().toString(),s=Ps(t,e,.8).rgb().toString(),u=Ps(t,r,.2).rgb().toString(),f=Ps(t,r,.25).rgb().toString(),c=Ps(t,r,.3).rgb().toString(),l=Ps(t,r,.4).rgb().toString(),_=Ps(t,r,.5).rgb().toString(),I=oh(e,{theme:"dark",backgroundColor:t}),B=Cd()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:_,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},rv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?L1(e,t,"rgb(150, 150, 150)"):P1(e,t,"#777")},N1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(rv(o,t,r,n))}),a},R1="rgb(95, 149, 255)",k1="rgb(255, 255, 255)",$p="rgb(0, 0, 0)",Di=rv(R1,k1),Il={version:"0.8.17",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Di.mainStroke,fill:Di.mainFill},size:20,color:Di.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Di.activeFill,stroke:Di.activeStroke}},nodeStateStyles:{active:{fill:Di.activeFill,stroke:Di.activeStroke,lineWidth:2,shadowColor:Di.mainStroke,shadowBlur:10},selected:{fill:Di.selectedFill,stroke:Di.selectedStroke,lineWidth:4,shadowColor:Di.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Di.highlightFill,stroke:Di.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Di.inactiveFill,stroke:Di.inactiveStroke,lineWidth:1},disable:{fill:Di.disableFill,stroke:Di.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:$p,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Di.edgeMainStroke,lineAppendWidth:2},color:Di.edgeMainStroke},edgeStateStyles:{active:{stroke:Di.edgeActiveStroke,lineWidth:1},selected:{stroke:Di.edgeSelectedStroke,lineWidth:2,shadowColor:Di.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Di.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Di.edgeInactiveStroke,lineWidth:1},disable:{stroke:Di.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:$p,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Di.comboMainFill,lineWidth:1,stroke:Di.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Di.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Di.comboActiveStroke,lineWidth:1,fill:Di.comboActiveFill},selected:{stroke:Di.comboSelectedStroke,lineWidth:2,fill:Di.comboSelectedFill,shadowColor:Di.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Di.comboHighlightStroke,lineWidth:2,fill:Di.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Di.comboInactiveStroke,fill:Di.comboInactiveFill,lineWidth:1},disable:{stroke:Di.comboDisableStroke,fill:Di.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function sh(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var B1=Xs.cloneEvent,F1=Xs.isViewportChanged,z1=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,h.wrapBehavior)(this,"onCanvasEvents"),f=(0,h.wrapBehavior)(this,"onExtendEvents"),c=(0,h.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(sh(s,"wheel",c)),typeof window!="undefined"&&(a.push(sh(window,"keydown",f)),a.push(sh(window,"keyup",f)),a.push(sh(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,h.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),F1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var _=l.get("item");if(!_.destroyed){var I=_.getType();if(t.target=o,t.item=_,t.canvasX===t.x&&t.canvasY===t.y){var B=n.getCanvasByPoint(t.x,t.y);t.canvasX=B.x,t.canvasY=B.y}t.name&&!t.name.includes(":")?(n.emit("".concat(I,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,I)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,h.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=B1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,h.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(lp),G1=z1,Mi=C(483360),U1=C(981746),uh=C.n(U1),qp=Xs.traverseTree,W1=function(e,t){var r;return e?(0,h.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},Y1=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],_=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var I=0;I<_;++I){var B=l[I];r.push(+B)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},X1=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,_=a[s],I=_.length;n[s*4+2]=l,n[s*4+3]=I/2,c=Math.max(c,I/2);for(var B=0;B<I;++B){var j=_[B];n.push(+j)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},j1=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var _=a.length,I=o[u],B=I.length;a[u*4+2]=_+1048576*B/4,a[u*4+3]=0,l=Math.max(l,B/4);for(var j=0;j<B;++j){var et=I[j];a.push(+et)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},V1=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},H1=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Z1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;qp(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||qp(e,function(l){var _=(l[s]-n[s])/c*(Math.PI*2-f)+f,I=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=I*Math.cos(_),l.y=I*Math.sin(_),!0}),e},Qp=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},Jp=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},K1=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},Xs),A),E),D),F),sc=K1,$1=sc.radialLayout,q1=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=uh()[t.type](r,t.config);return $1(n),n};return}this.layoutMethod=function(r){return uh()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Q1=q1;(0,Mi.registerLayout)("grid",Mi.GridLayout),(0,Mi.registerLayout)("random",Mi.RandomLayout),(0,Mi.registerLayout)("force",Mi.ForceLayout),(0,Mi.registerLayout)("circular",Mi.CircularLayout),(0,Mi.registerLayout)("dagre",Mi.DagreLayout),(0,Mi.registerLayout)("dagreCompound",Mi.DagreCompoundLayout),(0,Mi.registerLayout)("radial",Mi.RadialLayout),(0,Mi.registerLayout)("concentric",Mi.ConcentricLayout),(0,Mi.registerLayout)("mds",Mi.MDSLayout),(0,Mi.registerLayout)("fruchterman",Mi.FruchtermanLayout),(0,Mi.registerLayout)("fruchterman-gpu",Mi.FruchtermanGPULayout),(0,Mi.registerLayout)("gForce",Mi.GForceLayout),(0,Mi.registerLayout)("force2",Mi.Force2Layout),(0,Mi.registerLayout)("gForce-gpu",Mi.GForceGPULayout),(0,Mi.registerLayout)("comboForce",Mi.ComboForceLayout),(0,Mi.registerLayout)("comboCombined",Mi.ComboCombinedLayout),(0,Mi.registerLayout)("forceAtlas2",Mi.ForceAtlas2Layout);var J1=function(e,t){t.isCustomLayout=!0,Mi.Layouts[e]=(0,Mi.registerLayout)(e,t)},tx=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),ex=tx,rx=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,_=c.edges,I=c.layoutCfg,B=I===void 0?{}:I,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}var ut;B.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),ut==null||ut.destroy()},ut=new et(B),ut.init({nodes:l,edges:_}),ut.execute();break}case n.GPURUN:{var ct=s.data,pt=ct.nodes,_=ct.edges,Mt=ct.layoutCfg,B=Mt===void 0?{}:Mt,Zt=ct.canvas,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}if(j.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(j," does not support GPU")});break}var se=new et(B);se.init({nodes:pt,edges:_}),se.executeWithWorker(Zt,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new ex(t,e);return r},sd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function nv(i){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(i)}var tg=function(e){return setTimeout(e,16)},eg=function(e){return clearTimeout(e)},fh={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||tg;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||eg;return t(e)}},nx=["fruchterman","gForce"],ax=["force","grid","circular"],ix=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=rx(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(fh.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(fh.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,j,_,I,B,j,et;return(0,b.__generator)(this,function(ut){switch(ut.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(rg(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Xs.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),j=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=j):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),_=!1;try{I=new Mi.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=I}catch(ct){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return _=I.enableTick,_&&(B=t.onTick,j=function(){B&&B(),s.refreshPositions()},I.tick=j),et=this.filterLayoutData(this.data,t),fx(et,r),I.init(et),s.emit("beforesublayout",{type:u}),[4,I.execute()];case 1:return ut.sent(),I.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,_,I;return(0,b.__generator)(this,function(B){switch(B.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Xs.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),_=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=_),I=this.filterLayoutData(this.data,r),t.init(I),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return B.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var _=l.type,I=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Zt){var se;return I=!!(!((se=Zt.nodes)===null||se===void 0)&&se.length)||I});var B=this.destoryLayoutMethods();a.emit("beforelayout");var j=Promise.resolve();I&&_&&(B==null?void 0:B.length)===1&&B[0]===_?this.tweakInit():j=this.initPositions(l.center,s);var et=this.initPositions(l.center,u);et.then(),this.isGPU=ng(l,_);var ut=l.onLayoutEnd,ct=l.layoutEndFormatted,pt=l.adjust;if(ct||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(Zt){switch(Zt.label){case 0:return ut&&ut(s),this.refreshLayout(),pt&&l.pipes?[4,this.adjustPipesBox(this.data,pt)]:[3,2];case 1:Zt.sent(),this.refreshLayout(),Zt.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var Mt=!1;return l.type?(Mt=!0,j=j.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(Zt){switch(Zt.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,Zt.sent()]}})})})):l.pipes&&(Mt=!0,l.pipes.forEach(function(Zt,se){j=j.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(oe){switch(oe.label){case 0:return[4,this.execLayoutMethod(Zt,se)];case 1:return[2,oe.sent()]}})})})})),Mt?j.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(Zt){console.warn("graph layout failed,",Zt)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,_=c.y;!isNaN(l)&&!isNaN(_)&&(s[c.id]={x:l,y:_},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,_=c.target,I=s[l],B=s[_];!I&&B?s[l]={x:B.x+(Math.random()-.5)*80,y:B.y+(Math.random()-.5)*80}:!B&&I&&(s[_]={x:I.x+(Math.random()-.5)*80,y:I.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,_,I;return(0,b.__generator)(this,function(B){switch(B.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Mi.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=ng(c,c.type),_=l?"".concat(c.type,"-gpu"):c.type,I=new Mi.Layouts[_](c),delete u.preset,I.init(f),[4,I.execute()]);case 1:return B.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var _=function(ut){c=c.then(function(){return n.runWebworker(u,t,ut)})},I=0,B=o.pipes;I<B.length;I++){var j=B[I];_(j)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(et){console.error("layout failed",et)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,_=sx(n,function(B){return typeof B!="function"});if(!l)t.postMessage({type:sd.RUN,nodes:u,edges:f,layoutCfg:_});else{var I=c.transferControlToOffscreen();_.type="".concat(_.type,"-gpu"),t.postMessage({type:sd.GPURUN,nodes:u,edges:f,layoutCfg:_,canvas:I},[I])}return new Promise(function(B,j){t.onmessage=function(et){a.handleWorkerMessage(B,j,et,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,_=function(){o.onTick&&o.onTick()};switch(l){case sd.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=fh.requestAnimationFrame(function(){av(a,c),u.refreshPositions(),_(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=fh.requestAnimationFrame(function(){av(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,_(),t()})),f.requestId=null}));break;case sd.END:f.currentTick==null&&(av(a,c),t());break;case sd.GPUEND:f.currentTick==null&&(ux(a,c),t());break;case sd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,b.__rest)(t,["disableTriggerLayout"]),f=(0,h.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(_){switch(_.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,_.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(_,I){var B=f.pipes[I];c=c.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(j){switch(j.label){case 0:return[4,this.updateLayoutMethod(_,B)];case 1:return[2,j.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(_){console.warn("layout failed",_)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),ax.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(B){return Math.max(B.height,B.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,h.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(I,B){var j,et,ut,ct=I.x-((j=l[B])===null||j===void 0?void 0:j.x),pt=I.y-((et=l[B])===null||et===void 0?void 0:et.y);(ut=f[B])===null||ut===void 0||ut.forEach(function(Mt){Mt.x+=ct,Mt.y+=pt})}),a()};var _=new Mi.Layouts[r](s);_.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(cp),ox=ix;function av(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function sx(i,e){var t={};return i&&nv(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function ux(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function fx(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function rg(i){return nx.includes(i)}function ng(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,Qp().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!rg(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Td,iv,ag,ov;function cx(){Td=document.createElement("table"),iv=document.createElement("tr"),ag=/^\s*<(\w+|!)[^>]*>/,ov={tr:document.createElement("tbody"),tbody:Td,thead:Td,tfoot:Td,td:iv,th:iv,"*":document.createElement("div")}}function qo(i){Td||cx();var e=ag.test(i)&&RegExp.$1;(!e||!(e in ov))&&(e="*");var t=ov[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var lx=function(e){var t=e.clone();return dx(e,t),t},dx=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},ig=Xt,hx="svg",vx=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new ox(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new G1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===hx)u=new _d({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new oc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,h.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,b.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,b.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),_=s||c.get("el"),I="";t||(t="image/png"),setTimeout(function(){return(0,b.__awaiter)(u,void 0,void 0,function(){var B,j,et,ut,ct,pt,Mt,Zt,se,oe;return(0,b.__generator)(this,function(_e){switch(_e.label){case 0:return l!=="svg"?[3,1]:(B=_.cloneNode(!0),j=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),et=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",j),et.replaceChild(B,et.documentElement),ut=new XMLSerializer().serializeToString(et),I="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ut)),[3,4]);case 1:return ct=void 0,pt=_.getContext("2d"),Mt=a||this.get("width"),Zt=o||this.get("height"),se=void 0,f?[4,this.downloadImageWatermark(f,pt,Mt,Zt)]:[3,3];case 2:_e.sent(),_e.label=3;case 3:if(r){oe=typeof window!="undefined"?window.devicePixelRatio:1;try{ct=pt.getImageData(0,0,Mt*oe,Zt*oe),se=pt.globalCompositeOperation,pt.globalCompositeOperation="destination-over",pt.fillStyle=r,pt.fillRect(0,0,Mt,Zt)}catch(Ue){console.error("Download image failed. Out of memory at ImageData creation")}}I=_.toDataURL(t),r&&(pt.clearRect(0,0,Mt,Zt),pt.putImageData(ct,0,0),pt.globalCompositeOperation=se),_e.label=4;case 4:return n&&n(I),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var _=void 0,I=o.getContext("2d"),B=Math.max(this.get("width"),500),j=Math.max(this.get("height"),500),et=void 0;if(r){var ut=typeof window!="undefined"&&window.devicePixelRatio||1;try{_=I.getImageData(0,0,B*ut,j*ut),et=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=r,I.fillRect(0,0,B,j)}catch(ct){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(I.clearRect(0,0,B,j),I.putImageData(_,0,0),I.globalCompositeOperation=et)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=qo('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,h.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var _=o+l[0]+l[2],I=s+l[1]+l[3],B={container:f,height:_,width:I,quickHit:!0},j=u==="svg"?new _d(B):new oc(B),et=this.get("group"),ut=et.clone(),ct=(0,h.clone)(ut.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]);var pt=(a.maxX+a.minX)/2,Mt=(a.maxY+a.minY)/2;ct=ig(ct,[["t",-pt,-Mt],["t",s/2+l[3],o/2+l[0]]]),ut.resetMatrix(),ut.setMatrix(ct),j.add(ut);var Zt=j.get("el"),se="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var oe=Zt.cloneNode(!0),_e=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ue=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_e);Ue.replaceChild(oe,Ue.documentElement);var Re=new XMLSerializer().serializeToString(Ue);se="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Re))}else{var qe=void 0,hr=Zt.getContext("2d"),nn=void 0;if(c){var kn=typeof window!="undefined"?window.devicePixelRatio:1;try{qe=hr.getImageData(0,0,I*kn,_*kn),nn=hr.globalCompositeOperation,hr.globalCompositeOperation="destination-over",hr.fillStyle=c,hr.fillRect(0,0,I,_)}catch(En){console.error("Download image failed. Out of memory at ImageData creation")}}se=Zt.toDataURL(r),c&&(hr.clearRect(0,0,I,_),hr.putImageData(qe,0,0),hr.globalCompositeOperation=nn)}t&&t(se)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=qo('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),_=n?n.backgroundColor:void 0,I=n?n.padding:void 0;I?(0,h.isNumber)(I)&&(I=[I,I,I,I]):I=[0,0,0,0];var B=s+I[0]+I[2],j=u+I[1]+I[3];if(l){var et=this.get("graphWaterMarker").cfg||{},ut=et.width,ct=et.height;B=Math.ceil(B/ct)*ct,j=Math.ceil(j/ut)*ut}var pt={container:c,height:B,width:j},Mt=f==="svg"?new _d(pt):new oc(pt),Zt=this.get("group"),se=lx(Zt),oe=(0,h.clone)(se.getMatrix());oe||(oe=[1,0,0,0,1,0,0,0,1]);var _e=(o.maxX+o.minX)/2,Ue=(o.maxY+o.minY)/2;oe=ig(oe,[["t",-_e,-Ue],["t",u/2+I[3],s/2+I[0]]]),se.resetMatrix(),se.setMatrix(oe),Mt.add(se);var Re=Mt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,_,function(qe){var hr=document.createElement("a"),nn=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(qe,f,hr,nn);var kn=document.createEvent("MouseEvents");kn.initEvent("click",!1,!1),hr.dispatchEvent(kn)},j,B,Re)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var _=document.createEvent("MouseEvents");_.initEvent("click",!1,!1),c.dispatchEvent(_)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var _=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(_,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(_)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Il.waterMarkerImage);var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Il.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new oc(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=c.rotate,et=c.x,ut=c.y;B.rotate(-j*Math.PI/180);var ct=new Image;ct.crossOrigin="anonymous",ct.src=t,ct.onload=function(){if(B.drawImage(ct,et,ut,c.width,c.height),B.rotate(j*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var pt=document.querySelector(".g6-graph-watermarker");pt||(pt=document.createElement("div"),pt.className="g6-graph-watermarker"),pt.className="g6-graph-watermarker",a.destroyed||(pt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(pt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Il.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new oc(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=c.rotate,et=c.fill,ut=c.fontFamily,ct=c.fontSize,pt=c.baseline,Mt=c.x,Zt=c.y,se=c.lineHeight;B.rotate(-j*Math.PI/180),B.font="".concat(ct,"px ").concat(ut),B.fillStyle=et,B.textBaseline=pt;for(var oe=(0,h.isString)(t)?[t]:t,_e=oe.length-1;_e>=0;_e--)B.fillText(oe[_e],Mt,Zt+_e*se);if(B.rotate(j*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Ue=document.querySelector(".g6-graph-watermarker");Ue||(Ue=document.createElement("div"),Ue.className="g6-graph-watermarker"),Ue.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(Ue)}},e.prototype.destroy=function(){var t,r,n,a;(0,h.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(ap),og=vx,px=sc.radialLayout,sv=sc.traverseTree,gx=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=uh()[t.type](r,t);return px(n),n}:function(r){return uh()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,h.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,h.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,h.each)(t.children||[],function(B){a.innerUpdateChild(B,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,_;o.get("originAttrs")&&(l=o.get("originAttrs").x,_=o.get("originAttrs").y);var I=o.getModel();n&&o.set("originAttrs",{x:I.x,y:I.y}),o.set("model",Object.assign(I,t.data)),(l!==t.x||_!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,h.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY,B={x:(c+l)/2,y:(_+I)/2};r==="begin"&&(B.x=c,B.y=_),this.translate(s.x-B.x,s.y-B.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,h.clone)(n.get("data"));var f={};sv(a,function(_){var I=_.children;if(!(I!=null&&I.length))return!0;for(var B=I.length-1;B>=0;B--){var j=r.findById(I[B].id),et=j?!j.isVisible():I[B].visible===!1;et&&(f[_.id]=f[_.id]||[],f[_.id].push({idx:B,child:I.splice(B,1)[0]}))}}),u=o?o(a,n.get("layout")):a,sv(u,function(_){var I=f[_.id];if(I!=null&&I.length)for(var B=I.length-1;B>=0;B--){var j=I[B],et=j.idx,ut=j.child;_.children.splice(et,0,ut)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,h.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var _=l.getModel().children||[];return!!_.find(function(I){return I.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,h.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){sv(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,h.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,h.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,h.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,h.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(og),mx=gx;function pi(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var yx=function(){function i(e){this._cfgs=(0,h.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,h.each)(r,function(a,o){var s=(0,h.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,h.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),cu=yx,xx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sg="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",bx=function(i){xx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:sg,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||sg;a.includes("url(")||(a='url("'.concat(a,'")'));var o=qo(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=qo(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");pi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;pi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");pi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(cu),Ex=bx,wx=C(738186),ch=C.n(wx),Sx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ch()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Mx=function(i){Sx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=qo("<div class=".concat(t||"g6-component-contextmenu","></div>"));pi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,h.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,h.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(_e){c(_e.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var _=u.get("width"),I=u.get("height"),B=o.getBoundingClientRect(),j=this.get("offsetX")||0,et=this.get("offsetY")||0,ut=u.getContainer().offsetTop,ct=u.getContainer().offsetLeft,pt=t.canvasX+ct+j,Mt=t.canvasY+ut+et;pt+B.width>_&&(pt=t.canvasX-B.width-j+ct),Mt+B.height>I&&(Mt=t.canvasY-B.height-et+ut),pi(o,{top:"".concat(Mt,"px"),left:"".concat(pt,"px"),visibility:"visible"});var Zt=this.get("trigger")==="click",se=function(_e){if(Zt){Zt=!1;return}r.onMenuHide()};document.body.addEventListener("click",se),this.set("handler",se)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&pi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(cu),_x=Mx,Cx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uv=function(){return uv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},uv.apply(this,arguments)},ug=Math.max,Tx=Xt,Ax="default",Ix="keyShape",Ox="delegate",fg="svg",Dx=function(i){Cx(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,h.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=qo(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,_=0,I=!1,B=0,j=0,et=0,ut=0,ct=0,pt=0,Mt=f||u?"mousedown":"dragstart";c.addEventListener(Mt,function(_e){var Ue,Re;if(_e.dataTransfer){var qe=new Image;qe.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Re=(Ue=_e.dataTransfer).setDragImage)===null||Re===void 0||Re.call(Ue,qe,0,0);try{_e.dataTransfer.setData("text/html","view-port-minimap")}catch(nn){_e.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,_e.target===c){var hr=c.style;B=parseInt(hr.left,10),j=parseInt(hr.top,10),et=parseInt(hr.width,10),ut=parseInt(hr.height,10),!(et>n[0]||ut>n[1])&&(pt=a.getZoom(),ct=t.get("ratio"),I=!0,l=_e.clientX,_=_e.clientY)}},!1);var Zt=function(Ue){if(!(!I||(0,h.isNil)(Ue.clientX)||(0,h.isNil)(Ue.clientY))){var Re=l-Ue.clientX,qe=_-Ue.clientY;(B-Re<0||B-Re+et>=n[0])&&(Re=0),(j-qe<0||j-qe+ut>=n[1])&&(qe=0),B-=Re,j-=qe,pi(c,{left:"".concat(B,"px"),top:"".concat(j,"px")}),a.translate(Re*pt/ct,qe*pt/ct),l=Ue.clientX,_=Ue.clientY}};!f&&!u&&c.addEventListener("drag",Zt,!1);var se=function(){I=!1,r.refresh=!0},oe=f||u?"mouseup":"dragend";c.addEventListener(oe,se,!1),s.addEventListener("mouseleave",se),s.addEventListener("mouseup",se),(f||u)&&s.addEventListener("mousemove",Zt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),_=this.get("viewport");_||this.initViewport();var I=(l.x-c.x)*t,B=(l.y-c.y)*t,j=c.x*t+r,et=c.y*t+n,ut=j+I,ct=et+B;j<0&&(I+=j,j=0),ut>o[0]&&(I=I-(ut-o[0])),et<0&&(B+=et,et=0),ct>o[1]&&(B=B-(ct-o[1])),this.set("ratio",t);var pt="".concat(j,"px"),Mt="".concat(et,"px");pi(_,{left:pt,top:Mt,width:"".concat(I,"px"),height:"".concat(B,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===fg&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:uv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=qo("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,h.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=qo('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===fg?f=new _d({container:u,width:n[0],height:n[1]}):f=new oc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Ax:this.updateGraphShapes();break;case Ix:this.updateKeyShapes();break;case Ox:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,_=c.width/l,I=c.height/l;Number.isFinite(f.width)&&(_=ug(f.width,_),I=ug(f.height,I)),_+=2*s,I+=2*s;var B=Math.min(n[0]/_,n[1]/I),j=[1,0,0,0,1,0,0,0,1],et=0,ut=0;Number.isFinite(f.minX)&&(et=-f.minX),Number.isFinite(f.minY)&&(ut=-f.minY);var ct=(n[0]-(_-2*s)*B)/2,pt=(n[1]-(I-2*s)*B)/2;j=Tx(j,[["t",et,ut],["s",B,B],["t",ct,pt]]),u.setMatrix(j),this.set("ratio",B),this.set("totaldx",ct+et*B),this.set("totaldy",pt+ut*B),this.set("dx",ct),this.set("dy",pt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(cu),Lx=Dx,Px=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Tf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Nx(i,e){return i.x*e.x+i.y*e.y}function cg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Rx=function(i){Px(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(Mt){(Mt.x===null||!Mt.y===null||Mt.x===void 0||!Mt.y===void 0)&&(s=!0),o[Mt.id]=Mt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var _=r.get("cycles"),I=r.get("iterations"),B=r.get("iterRate"),j=r.get("lambda"),et=0;et<_;et++){for(var ut=function(Zt){var se=[];n.forEach(function(oe,_e){if(oe.source!==oe.target){var Ue=o[oe.source],Re=o[oe.target];se[_e]=r.getEdgeForces({source:Ue,target:Re},_e,u,j);for(var qe=0;qe<u+1;qe++)c[_e][qe].x+=se[_e][qe].x,c[_e][qe].y+=se[_e][qe].y}})},ct=0;ct<I;ct++)ut(ct);j=j/2,u*=f,I*=B,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(Mt,Zt){Mt.source!==Mt.target&&(Mt.type="polyline",Mt.controlPoints=c[Zt].slice(1,c[Zt].length-1))});var pt=r.get("graph");pt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var _=0;!((f=o[u])===null||f===void 0)&&f.length?_=r.getEdgeLength(o[u]):_=Tf({x:c.x,y:c.y},{x:l.x,y:l.y});var I=_/(t+1),B=I,j=[{x:c.x,y:c.y}];o[u].forEach(function(et,ut){if(ut!==0){for(var ct=Tf(et,o[u][ut-1]);ct>B;){var pt=B/ct,Mt={x:o[u][ut-1].x,y:o[u][ut-1].y};Mt.x+=pt*(et.x-o[u][ut-1].x),Mt.y+=pt*(et.y-o[u][ut-1].y),j.push(Mt),ct-=B,B=I}B-=ct}}),j.push({x:l.x,y:l.y}),o[u]=j}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Tf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(_,I){if(!(I<=f)){var B=o[_.source],j=o[_.target],et=t.getBundleScore({source:c,target:l},{source:B,target:j});et>=a&&(s[f].push(I),s[I].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Tf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Tf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Nx({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Tf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=cg(r.source,t),a=cg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Tf(o,s)/Tf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Tf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var _={x:0,y:0},I=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),B=o.getElectrostaticForce(l,r);_.x=a*(I.x+B.x),_.y=a*(I.y+B.y),c.push(_)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var _=Tf(s[c][t],s[r][t]),I=1/_;f.x+=l.x*I,f.y+=l.y*I}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(cu),kx=Rx,Bx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fv=function(){return fv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},fv.apply(this,arguments)},lh=.05,lg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Fx=function(i){Bx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,h.clone)(lg),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-lh:a=1/(1-lh);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var _=r.get("d");r.set("molecularParam",(_+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-lh:o=1/(1-lh);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),_=n.get("molecularParam"),I=a.getNodes(),B=I.length,j=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(j=n.get("cacheCenter"));var et=n.get("delegateCenterDiff");et&&(j.x+=et.x,j.y+=et.y),n.updateDelegate(j,f);for(var ut=0;ut<B;ut++){var ct=I[ut].getModel(),pt=ct.x,Mt=ct.y;if(!(isNaN(pt)||isNaN(Mt))){var Zt=(pt-j.x)*(pt-j.x)+(Mt-j.y)*(Mt-j.y);if(!isNaN(Zt)&&Zt<c&&Zt!==0){var se=Math.sqrt(Zt),oe=_*se/(l*se+f),_e=(pt-j.x)/se,Ue=(Mt-j.y)/se;if(ct.x=_e*oe+j.x,ct.y=Ue*oe+j.y,s[ct.id]||(s[ct.id]={x:pt,y:Mt,texts:[]}),o.push(ct),u&&2*se<f)for(var Re=I[ut],qe=Re.getContainer(),hr=qe.getChildren(),nn=hr.length,kn=0;kn<nn;kn++){var En=hr[kn];En.get("type")==="text"&&(s[ct.id].texts.push({visible:En.get("visible"),shape:En}),En.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var _=f.texts[l];_.shape.set("visible",_.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,_=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var I=r.get("d"),B=r.get("r");if(r.set("molecularParam",(I+1)*B),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}if(_==="drag"||_==="wheel"||_==="unset"){r.set("scaleRBy",_),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||lg;s=u.addShape("circle",{attrs:fv({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(B){a.scaleRByWheel(B)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){a.scaleRByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(B){n.scaleDByWheel(B)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){n.scaleDByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),_=t.y+r/1.5+16;if(!l||l.destroyed){var I=o.get("group");l=I.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:_,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:_})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(cu),zx=Fx,Gx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dg=.05;typeof document!="undefined"&&ch()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Ux=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Wx=function(i){Gx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,h.isString)(a)&&(o=qo(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,h.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var _=Ux(l).filter(function(B){return B.nodeName==="LI"});if(_.length!==0){var I=_[0].getAttribute("code");I&&(f?f(I,r):t.handleDefaultOperator(I))}});var c=this.get("position");c&&pi(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,h.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);I.visible?t.showItem(B,!1):t.hideItem(B,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);delete I.id,t.updateItem(B,I,!1),B.getType()==="combo"&&t.updateCombo(B)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=I.itemType;delete I.itemType,t.addItem(B,I,!1)})});break}case"add":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.removeItem(I.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,h.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=t.findById(_.id);_.visible?t.showItem(I,!1):t.hideItem(I,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=t.findById(_.id);delete _.id,t.updateItem(I,_,!1),I.getType()==="combo"&&t.updateCombo(I)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=_.itemType;delete _.itemType,t.addItem(I,_,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){t.updateComboTree(_.id,_.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-dg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-dg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(cu),Yx=Wx,Xx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ch()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var jx=function(i){Xx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=qo("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),pi(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){pi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,h.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&pi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){pi(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),_=t.item;if(_.getType&&_.getType()==="node"&&l&&(0,h.isArray)(l)&&l.length>=2){var I=_.getBBox();c={x:I.minX+I.width*l[0],y:I.minY+I.height*l[1]}}var B=a.getCanvasByPoint(c.x,c.y),j=B.x,et=B.y,ut=a.getContainer(),ct={x:j+ut.offsetLeft+u,y:et+ut.offsetTop+f};pi(n,{visibility:"visible",display:"unset"});var pt=n.getBoundingClientRect();j+pt.width+u>o&&(ct.x-=pt.width+u),et+pt.height+f>s&&(ct.y-=pt.height+f,ct.y<0&&(ct.y=0)),pi(n,{left:"".concat(ct.x,"px"),top:"".concat(ct.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(cu),Vx=jx,hg="timebarstartplay",vg="timebarendplay",Af="valuechange",Ol="timebarConfigChanged",Xc="playPauseBtn",Ad="nextStepBtn",Id="preStepBtn",JS={opacity:.5,fill:"#000"},tM={opacity:.5,fill:"#000",r:5},eM={fill:"#fff",fontSize:12},Hx=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,_=e.backgroundColor,I=_===void 0?"#000":_,B=e.textColor,j=B===void 0?"#fff":B,et=e.opacity,ut=et===void 0?.8:et,ct=e.fontSize,pt=ct===void 0?12:ct;this.container=o,this.className=l,this.backgroundColor=I,this.textColor=j,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=ut,this.fontSize=pt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,_=qo("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,h.isString)(l)&&(l=document.getElementById(l)),l.appendChild(_),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,pi(_,{visibility:"hidden",top:0,left:0});var I=qo(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));I.innerHTML=s,_.appendChild(I),e.backgroundDOM=I;var B=qo("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));_.appendChild(B),e.arrowDOM=B,e.container=_},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;pi(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),pi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),pi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var _=n-u/2,I=n+u/2;_<0?pi(t.backgroundDOM,{marginLeft:"".concat(-u/2-_,"px")}):I>t.parentWidth&&pi(t.backgroundDOM,{marginLeft:"".concat(-u/2-I+t.parentWidth+12,"px")})},i.prototype.hide=function(){pi(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Zx=Hx,cv=function(){return cv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},cv.apply(this,arguments)},Kx=function(){function i(e){this.config=(0,h.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,h.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,_=t.addGroup({name:Xc});this.startMarkerGroup=_.addGroup({name:Xc}),this.circle=t.addShape("circle",{attrs:cv({x:c,y:l,r:this.config.r*a},r),name:Xc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=_.addGroup({name:Xc});var I=.25*this.config.r*a,B=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),$x=Kx,xs=function(){return xs=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xs.apply(this,arguments)},Od=Xt,qx="#aaa",Qx="green",Jx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},tb={fill:"#fff"},eb={fill:"green"},pg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},gg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},rb={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:pg,timeTypeControllerStyle:gg},lv=110,jc=50,If={SINGLE:"single",RANGE:"range"},nb=function(){function i(e){this.controllerCfg=(0,h.deepMix)({},rb,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||If.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?qx:s,f=e.stroke,c=f===void 0?Qx:f,l=e.containerStyle,_=l===void 0?{}:l,I=xs(xs({},Jx),e.playBtnStyle||{}),B=xs(xs({},tb),e.preBtnStyle||{}),j=xs(xs({},eb),e.nextBtnStyle||{}),et=r/2-5,ut=a+10,ct=this.controllerGroup.addShape("rect",{attrs:xs({x:n,y:ut,width:t,height:r,stroke:c,fill:u},_),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ut,r:et}):this.playButton=new $x({group:this.controllerGroup,x:t/2,y:ut+et+5,r:et,isPlay:this.isPlay,style:I});var pt=B.offsetX||0,Mt=B.offsetY||0,Zt=(B.scale||1)*et;this.controllerGroup.addShape("path",{attrs:xs({path:this.getPreMarkerPath(t/2-5*et+pt,ut+et+5+Mt,Zt*.5)},B),name:Id});var se=j.offsetX||0,oe=j.offsetY||0,_e=(j.scale||1)*et;this.controllerGroup.addShape("path",{attrs:xs({path:this.getNextMarkerPath(t/2+5*et+se,ut+et+5+oe,_e*.5)},j),name:Ad}),ct.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var Ue=this.controllerCfg.scale,Re=Ue===void 0?1:Ue,qe=this.controllerGroup.getCanvasBBox(),hr=(qe.maxX+qe.minX)/2,nn=(qe.maxY+qe.minY)/2,kn=Od([1,0,0,0,1,0,0,0,1],[["t",-hr,-nn],["s",Re,Re],["t",hr,nn]]);this.controllerGroup.setMatrix(kn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=xs(xs({},pg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,_=a.scale,I=_===void 0?1:_,B=a.offsetX,j=B===void 0?0:B,et=a.offsetY,ut=et===void 0?0:et,ct=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ct;var pt=[],Mt=5;this.speedAxisY=[19,22,26,32,39];for(var Zt=0;Zt<5;Zt++){var se=t+this.speedAxisY[Zt],oe=r-(n?jc:lv);ct.addShape("line",{attrs:xs({x1:oe,x2:oe+15,y1:se,y2:se},s),speed:Mt,name:"speed-rect"}),this.speedAxisY[Zt]=se,pt.push(Mt),Mt=Mt-1}this.speedText=ct.addShape("text",{attrs:xs({x:r-(n?jc:lv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=ct.addShape("path",{attrs:xs({path:this.getPointerPath(r-(n?jc:lv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var _e=this.speedGroup.getCanvasBBox(),Ue=(_e.maxX+_e.minX)/2,Re=(_e.maxY+_e.minY)/2,qe=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];qe=Od(qe,[["t",-Ue,-Re],["s",I,I],["t",Ue+j*I,Re+ut*I]]),this.speedGroup.setMatrix(qe)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=xs(xs({},gg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,_=l===void 0?0:l,I=o.box,B=I===void 0?{}:I,j=o.check,et=j===void 0?{}:j,ut=o.text,ct=ut===void 0?{}:ut;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var pt=a===If.SINGLE;this.toggleGroup.addShape("rect",{attrs:xs({x:n-jc,y:this.speedAxisY[0]+3.5},B),isChecked:pt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:xs({path:[["M",n-jc+3,this.speedAxisY[1]+6],["L",n-jc+7,this.speedAxisY[1]+10],["L",n-jc+12,this.speedAxisY[1]+4]]},et),capture:!1,name:"check-icon"}),pt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:xs({text:pt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-jc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ct),name:"checked-text"});var Mt=this.toggleGroup.getCanvasBBox(),Zt=(Mt.maxX+Mt.minX)/2,se=(Mt.maxY+Mt.minY)/2,oe=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];oe=Od(oe,[["t",-Zt,-se],["s",u,u],["t",Zt+c*u,se+_*u]]),this.toggleGroup.setMatrix(oe)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Od(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Ol,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Od(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Ol,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=If.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=If.SINGLE),t.target.set("isChecked",!a),e.group.emit(Ol,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),mg=nb,Dd=function(){return Dd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Dd.apply(this,arguments)},ab=Xt,ib={fill:"#5B8FF9"},ob={fill:"#e6e8e9"},sb=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,_=l===void 0?0:l,I=e.y,B=I===void 0?0:I,j=e.tickLabelFormatter,et=e.selectedTickStyle,ut=et===void 0?ib:et,ct=e.unselectedTickStyle,pt=ct===void 0?ob:ct,Mt=e.tooltipBackgroundColor,Zt=e.tooltipFomatter,se=e.tickLabelStyle,oe=e.controllerCfg,_e=oe===void 0?{speed:1}:oe;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=j,this.tickLabelStyle=se||{},this.selectedTickStyle=ut,this.unselectedTickStyle=pt,this.controllerCfg=_e,this.currentSpeed=_e.speed||1,this.x=_,this.y=B,this.tooltipBackgroundColor=Mt,this.tooltipFomatter=Zt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,_=t.tickLabelStyle,I=r-2*a,B=10,j=4,et=3*a+j+B,ut=n-et-2*a,ct=2,pt=o.length,Mt=(I-ct*(pt-1))/pt;this.tickWidth=Mt;var Zt=this.sliceGroup,se=[],oe=[],_e=Math.round(pt*s),Ue=Math.round(pt*u);this.startTickRectId=_e,this.endTickRectId=Ue;var Re=_.rotate;delete _.rotate,o.forEach(function(hr,nn){var kn=nn>=_e&&nn<=Ue,En=kn?c:l,Kr=Zt.addShape("rect",{attrs:Dd({x:a+nn*(Mt+ct),y:a,width:Mt,height:ut},En),draggable:!0,name:"tick-rect-".concat(nn)}),ta=Zt.addShape("rect",{attrs:{x:a+nn*Mt+ct*(2*nn-1)/2,y:a,width:nn===0||nn===pt-1?Mt+ct/2:Mt+ct,height:ut,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(nn)});ta.toFront();var $n=Kr.getBBox(),$r=($n.minX+$n.maxX)/2;se.push({rect:Kr,pickRect:ta,value:hr.date,x:$r,y:$n.minY});var yn;if(f?(yn=f(hr),!(0,h.isString)(yn)&&yn&&(yn=hr.date)):nn%Math.round(pt/10)===0&&(yn=hr.date),yn){oe.push(yn);var Fn=$n.maxY+a*2;Zt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:$r,y1:Fn,x2:$r,y2:Fn+j},name:"tick-line"});var zn=Fn+j+a,ia=Zt.addShape("text",{attrs:Dd({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:$r,y:zn,textAlign:"center",text:yn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},_),capture:!1,name:"tick-label"}),da=ia.getBBox();if(da.maxX>r?ia.attr("textAlign","right"):da.minX<0&&ia.attr("textAlign","left"),(0,h.isNumber)(Re)&&oe.length!==10){var Wa=ab([1,0,0,0,1,0,0,0,1],[["t",-$r,-zn],["r",Re],["t",$r-5,zn+2]]);ia.attr({textAlign:"left",matrix:Wa})}oe.length===1?ia.attr({textAlign:"left"}):oe.length===10&&ia.attr({textAlign:"right"})}}),this.tickRects=se;var qe=this.group;this.currentSpeed=1,this.controllerBtnGroup=new mg(Dd({group:qe,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var _=parseInt(l.get("name").split("-")[2],10);if(!isNaN(_)){var I=e.tickRects,B=e.unselectedTickStyle;I.forEach(function(ct){ct.rect.attr(B)});var j=e.selectedTickStyle;I[_].rect.attr(j),e.startTickRectId=_,e.endTickRectId=_;var et=I.length,ut=_/et;e.graph.emit(Af,{value:[ut,ut]})}}}),t.on("dragstart",function(c){var l=e.tickRects,_=e.unselectedTickStyle;l.forEach(function(ct){ct.rect.attr(_)});var I=c.target,B=parseInt(I.get("name").split("-")[2],10),j=e.selectedTickStyle;l[B].rect.attr(j),e.startTickRectId=B;var et=l.length,ut=B/et;e.graph.emit(Af,{value:[ut,ut]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),_=e.startTickRectId,I=e.tickRects,B=e.selectedTickStyle,j=e.unselectedTickStyle,et=0;et<I.length;et++){var ut=et>=_&&et<=l?B:j;I[et].rect.attr(ut)}var ct=I.length;e.endTickRectId=l;var pt=_/ct,Mt=l/ct;e.graph.emit(Af,{value:[pt,Mt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,_=parseInt(c.target.get("name").split("-")[2],10);if(!(_<l)){var I=e.selectedTickStyle,B=e.tickRects;B[_].rect.attr(I),e.endTickRectId=_;var j=B.length,et=l/j,ut=_/j;e.graph.emit(Af,{value:[et,ut]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Zx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(_){var I=_.target;if(I.get("type")==="rect"){var B=parseInt(I.get("name").split("-")[2],10),j=o.getClientByPoint(u[B].x,u[B].y);s.show({x:u[B].x,y:u[B].y,clientX:j.x,clientY:j.y,text:a?a(u[B].value):u[B].value})}}),l.on("mouseleave",function(_){s.hide()})});var f=this.group;f.on("".concat(Xc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ad,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Id,":click"),function(){e.updateStartEnd(-1)}),f.on(Ol,function(c){var l=c.type,_=c.speed;e.currentSpeed=_})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(hg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(vg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Af,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Xc,":click")),e.off("".concat(Ad,":click")),e.off("".concat(Id,":click")),e.off(Ol),this.sliceGroup.destroy()},i}(),ub=sb,yg={};function fb(i){return yg[i]}function Of(i,e){yg[i]=e}var cb=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,h.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,h.map)(this.ticks,function(t,r){return(0,h.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,h.isNil)(n)||!(0,h.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,h.assign)(this,this.__cfg__),this.setDomain(),(0,h.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,h.isString)(e)){var r=fb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,h.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,h.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),dv=cb,lb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,h.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,h.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,b.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,h.isNil)(this.getConfig("min"))&&(this.min=0),(0,h.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(dv),Ld=lb,xg=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Vc="\\d\\d?",Hc="\\d\\d",db="\\d{3}",hb="\\d{4}",Pd="[^\\s]+",bg=/\[([^]*?)\]/gm;function Eg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var wg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Zc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Sg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Mg=["January","February","March","April","May","June","July","August","September","October","November","December"],vb=Eg(Mg,3),pb=Eg(Sg,3),hv={dayNamesShort:pb,dayNames:Sg,monthNamesShort:vb,monthNames:Mg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},dh=Zc({},hv),_g=function(i){return dh=Zc(dh,i)},Cg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},lu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},gb={D:function(i){return String(i.getDate())},DD:function(i){return lu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return lu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return lu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return lu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return lu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return lu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return lu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return lu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return lu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return lu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return lu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+lu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+lu(Math.floor(Math.abs(e)/60),2)+":"+lu(Math.abs(e)%60,2)}},Tg=function(i){return+i-1},Ag=[null,Vc],Ig=[null,Pd],Og=["isPm",Pd,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Dg=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],mb={D:["day",Vc],DD:["day",Hc],Do:["day",Vc+Pd,function(i){return parseInt(i,10)}],M:["month",Vc,Tg],MM:["month",Hc,Tg],YY:["year",Hc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Vc,void 0,"isPm"],hh:["hour",Hc,void 0,"isPm"],H:["hour",Vc],HH:["hour",Hc],m:["minute",Vc],mm:["minute",Hc],s:["second",Vc],ss:["second",Hc],YYYY:["year",hb],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Hc,function(i){return+i*10}],SSS:["millisecond",db],d:Ag,dd:Ag,ddd:Ig,dddd:Ig,MMM:["month",Pd,wg("monthNamesShort")],MMMM:["month",Pd,wg("monthNames")],a:Og,A:Og,ZZ:Dg,Z:Dg},hh={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Lg=function(i){return Zc(hh,i)},Pg=function(i,e,t){if(e===void 0&&(e=hh.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=hh[e]||e;var r=[];e=e.replace(bg,function(a,o){return r.push(o),"@@@"});var n=Zc(Zc({},dh),t);return e=e.replace(xg,function(a){return gb[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Ng(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=hh[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(bg,function(Mt,Zt){return o.push(Cg(Zt)),"@@@"}),u={},f={};s=Cg(s).replace(xg,function(Mt){var Zt=mb[Mt],se=Zt[0],oe=Zt[1],_e=Zt[3];if(u[se])throw new Error("Invalid format. "+se+" specified twice in format");return u[se]=!0,_e&&(f[_e]=!0),a.push(Zt),"("+oe+")"}),Object.keys(f).forEach(function(Mt){if(!u[Mt])throw new Error("Invalid format. "+Mt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Zc(Zc({},dh),t),_=1;_<c.length;_++){var I=a[_-1],B=I[0],j=I[2],et=j?j(c[_],l):+c[_];if(et==null)return null;n[B]=et}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ut;if(n.timezoneOffset==null){ut=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ct=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],_=0,pt=ct.length;_<pt;_++)if(u[ct[_][0]]&&n[ct[_][0]]!==ut[ct[_][1]]())return null}else if(ut=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ut}var yb={format:Pg,parse:Ng,defaultI18n:hv,setGlobalDateI18n:_g,setGlobalDateMasks:Lg},Rg=yb;function xb(i){return function(e,t,r,n){for(var a=(0,h.isNil)(r)?0:r,o=(0,h.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var kg="format";function Bg(i,e){var t=Y[kg]||Rg[kg];return t(i,e)}function vh(i){return(0,h.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,h.isDate)(i)&&(i=i.getTime()),i}var ff=1e3,Dl=60*ff,Ll=60*Dl,uc=24*Ll,Nd=uc*31,Fg=uc*365,Rd=[["HH:mm:ss",ff],["HH:mm:ss",ff*10],["HH:mm:ss",ff*30],["HH:mm",Dl],["HH:mm",Dl*10],["HH:mm",Dl*30],["HH",Ll],["HH",Ll*6],["HH",Ll*12],["YYYY-MM-DD",uc],["YYYY-MM-DD",uc*4],["YYYY-WW",uc*7],["YYYY-MM",Nd],["YYYY-MM",Nd*4],["YYYY-MM",Nd*6],["YYYY",uc*380]];function bb(i,e,t){var r=(e-i)/t,n=xb(function(o){return o[1]})(Rd,r)-1,a=Rd[n];return n<0?a=Rd[0]:n>=Rd.length&&(a=(0,h.last)(Rd)),a}var Eb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=vh(t);var r=this.values.indexOf(t);return r===-1&&((0,h.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Bg(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,h.each)(t,function(r,n){t[n]=vh(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Ld),wb=Eb,Sb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,h.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,h.head)(t),n=(0,h.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,h.isNil)(this.minLimit)||(this.min=r),(0,h.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,h.getRange)(this.values),r=t.min,n=t.max;(0,h.isNil)(this.min)&&(this.min=r),(0,h.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,h.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(dv),ph=Sb,Mb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(ph),kd=Mb;function Kc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function zu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function zg(i,e,t){(0,h.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,h.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Gg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function rM(i,e){var t=Gg(i),r=Gg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var _b=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=zu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=zu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=zu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=zg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(zu(a,r)-zu(a,n)):s=(zu(a,t)-zu(a,n))/(zu(a,r)-zu(a,n)),s},e}(ph),Cb=_b,Tb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Kc(n,this.max),o=Kc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Kc(a,t)-Kc(a,n))/(Kc(a,r)-Kc(a,n));return o},e}(ph),Ab=Tb,Ib=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Bg(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,h.isString)(r)||(0,h.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return vh(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,h.isNil)(r)||!(0,h.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,h.isNil)(n)||!(0,h.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,h.each)(t,function(f){var c=vh(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,h.isNil)(r)&&(this.min=o),(0,h.isNil)(n)&&(this.max=u)}},e}(kd),Ob=Ib,Db=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,h.last)(r);if(o<0)return(0,h.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,h.last)(t)!==this.max&&t.push(this.max),(0,h.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,h.head)(r))return 0;if(t>(0,h.last)(r))return 1;var n=0;return(0,h.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(ph),Ug=Db,Lb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Ug),Pb=Lb,Wg={};function Nb(i){return Wg[i]}function Df(i,e){if(Nb(i))throw new Error("type '"+i+"' existed.");Wg[i]=e}var Rb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,h.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(dv),kb=Rb;function Yg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,h.isNumber)(t)){var a=(0,h.filter)(e,function(B,j){return j%t===0}),o=(0,h.last)(e);return n&&(0,h.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,h.isNil)(u)&&(u=0),(0,h.isNil)(f)&&(f=e.length-1),!(0,h.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],_=u,I=0;I<r&&!(_>=f);I++)_=Math.min(u+I*c,f),I===r-1&&n?l.push(e[f]):l.push(e[_]);return l}function Bb(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new Fb;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var vv=5,Xg=Math.sqrt(50),jg=Math.sqrt(10),Vg=Math.sqrt(2),Fb=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=vv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=gh(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=gh(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=gh(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=vv),zb(this._domain[0],this._domain[this._domain.length-1],e||vv)},i}();function zb(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=gh(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function gh(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Xg?10:a>=jg?5:a>=Vg?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Xg?10:a>=jg?5:a>=Vg?2:1)}function Hg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function pv(i,e,t){var r=Hg(i,t,"floor"),n=Hg(e,t,"ceil");r=(0,h.fixedBase)(r,t),n=(0,h.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,h.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function gv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,h.isNil)(n)?(0,h.isNil)(e)?o:e:n,l=(0,h.isNil)(a)?(0,h.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var _=(l-c)/(f-1),I=[],B=0;B<f;B++)I.push(c+_*B);return I}function Gb(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=Bb(i);return!(0,h.isNil)(n)||!(0,h.isNil)(a)?gv(i,(0,h.head)(o),(0,h.last)(o)):r?pv(e,t,r).ticks:o}function Pl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var Ub=[1,5,2,2.5,4,3],nM=null,Zg=Number.EPSILON*100;function Wb(i,e){return(i%e+e)%e}function Yb(i){return Math.round(i*1e12)/1e12}function Xb(i,e,t,r,n,a){var o=(0,h.size)(e),s=(0,h.indexOf)(e,i),u=0,f=Wb(r,a);return(f<Zg||a-f<Zg)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function jb(i,e,t){var r=(0,h.size)(e),n=(0,h.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Vb(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function Hb(i,e){return i>=e?2-(i-1)/(e-1):1}function Zb(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Kb(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function $b(){return 1}function qb(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=Ub),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(Fn,zn){return Pl(i+u*zn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var _=n[l],I=jb(_,n,c);if(a[0]*I+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var B=2;B<1/0;){var j=Hb(B,o);if(a[0]*I+a[1]+a[2]*j+a[3]<f.score)break;for(var et=(e-i)/(B+1)/c/_,ut=Math.ceil(Math.log10(et));ut<1/0;){var ct=c*_*Math.pow(10,ut),pt=Kb(i,e,ct*(B-1));if(a[0]*I+a[1]*pt+a[2]*j+a[3]<f.score)break;var Mt=Math.floor(e/ct)*c-(B-1)*c,Zt=Math.ceil(i/ct)*c;if(Mt<=Zt)for(var s=Zt-Mt,se=0;se<=s;se+=1){var oe=Mt+se,_e=oe*(ct/c),Ue=_e+ct*(B-1),Re=ct,qe=Xb(_,n,c,_e,Ue,Re),hr=Zb(i,e,_e,Ue),nn=Vb(B,o,i,e,_e,Ue),kn=$b(),En=a[0]*qe+a[1]*hr+a[2]*nn+a[3]*kn;En>f.score&&(!r||_e<=i&&Ue>=e)&&(f.lmin=_e,f.lmax=Ue,f.lstep=Re,f.score=En)}ut+=1}B+=1}}c+=1}var Kr=Pl(f.lmax),ta=Pl(f.lmin),$n=Pl(f.lstep),$r=Math.floor(Yb((Kr-ta)/$n))+1,yn=new Array($r);yn[0]=Pl(ta);for(var l=1;l<$r;l++)yn[l]=Pl(yn[l-1]+$n);return{min:Math.min(i,(0,h.head)(yn)),max:Math.max(e,(0,h.last)(yn)),ticks:yn}}function Qb(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=qb(e,t,r,n).ticks;return!(0,h.isNil)(o)||!(0,h.isNil)(s)?gv(i,(0,h.head)(u),(0,h.last)(u)):a?pv(e,t,a).ticks:u}function Jb(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=zu(e,n);if(r>0)o=Math.floor(zu(e,r));else{var u=zg(a,e,n);o=Math.floor(zu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],_=o;_<s+c;_=_+c)l.push(Math.pow(e,_));return r<=0&&l.unshift(0),l}function Kg(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),_=Math.max(c*f,e),I=Math.min(l*f,i),B=Math.floor((_-I)/f)+1,j=new Array(B),et=0;et<B;et++)j[et]=Pl(I+et*f);return{min:I,max:_,ticks:j}}function tE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Kc(e,i.max)),n=Math.floor(Kc(e,i.min)),a=Kg(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function eE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function rE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(eE(r,o))}return n}function nE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=Kg(e,t,r).ticks;return!(0,h.isNil)(a)||!(0,h.isNil)(o)?gv(i,(0,h.head)(s),(0,h.last)(s)):n?pv(e,t,n).ticks:s}function aE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=bb(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function iE(i){var e=Yg((0,b.__assign)({showLast:!0},i));return e}function mh(i){return new Date(i).getFullYear()}function oE(i){return new Date(i,0,1).getTime()}function mv(i){return new Date(i).getMonth()}function sE(i,e){var t=mh(i),r=mh(e),n=mv(i),a=mv(e);return(r-t)*12+(a-n)%12}function uE(i,e){return new Date(i,e,1).getTime()}function fE(i,e){return Math.ceil((e-i)/uc)}function cE(i,e){return Math.ceil((e-i)/Ll)}function lE(i,e){return Math.ceil((e-i)/(60*1e3))}function dE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=mh(e);if(a>Fg)for(var u=mh(t),f=Math.ceil(a/Fg),c=s;c<=u+f;c=c+f)o.push(oE(c));else if(a>Nd)for(var l=Math.ceil(a/Nd),_=mv(e),I=sE(e,t),c=0;c<=I+l;c=c+l)o.push(uE(s,c+_));else if(a>uc)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ut=B.getDate(),ct=Math.ceil(a/uc),pt=fE(e,t),c=0;c<pt+ct;c=c+ct)o.push(new Date(j,et,ut+c).getTime());else if(a>Ll)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ct=B.getDate(),Mt=B.getHours(),Zt=Math.ceil(a/Ll),se=cE(e,t),c=0;c<=se+Zt;c=c+Zt)o.push(new Date(j,et,ct,Mt+c).getTime());else if(a>Dl)for(var oe=lE(e,t),_e=Math.ceil(a/Dl),c=0;c<=oe+_e;c=c+_e)o.push(e+c*Dl);else{var Ue=a;Ue<ff&&(Ue=ff);for(var Re=Math.floor(e/ff)*ff,qe=Math.ceil((t-e)/ff),hr=Math.ceil(Ue/ff),c=0;c<qe+hr;c=c+hr)o.push(Re+c*ff)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Of("cat",Yg),Of("time-cat",iE),Of("wilkinson-extended",Qb),Of("r-pretty",nE),Of("time",aE),Of("time-pretty",dE),Of("log",Jb),Of("pow",tE),Of("quantile",rE),Of("d3-linear",Gb),Df("cat",Ld),Df("category",Ld),Df("identity",kb),Df("linear",kd),Df("log",Cb),Df("pow",Ab),Df("time",Ob),Df("timeCat",wb),Df("quantize",Ug),Df("quantile",Pb);var hE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function vE(i){return(0,h.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function $g(i){return vE(i)}function pE(i){if(i.length<=2)return $g(i);var e=[];(0,h.each)(i,function(o){(0,h.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Do(e,!1),r=(0,h.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function gE(i,e,t,r){r===void 0&&(r=!0);var n=new kd({values:i}),a=new Ld({values:(0,h.map)(i,function(s,u){return u})}),o=(0,h.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?pE(o):$g(o)}function mE(i,e,t,r){r===void 0&&(r=5);for(var n=new kd({values:i}),a=new Ld({values:(0,h.map)(i,function(_,I){return I})}),o=(0,h.map)(i,function(_,I){return[a.scale(I)*e,t-n.scale(_)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=bE(c);s.push.apply(s,l)}return EE(s)}function yE(i,e){var t=new kd({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function xE(i,e,t,r){var n=hE([],i,!0),a=yE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function bE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,h.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,h.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function EE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Bd=function(){return Bd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bd.apply(this,arguments)},wE={stroke:"#C5C5C5",strokeOpacity:.85},SE={fill:"#CACED4",opacity:.85},ME=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,_=e.isArea,I=_===void 0?!1:_,B=e.data,j=B===void 0?[]:B,et=e.lineStyle,ut=e.areaStyle,ct=e.group,pt=e.interval,Mt=pt===void 0?null:pt;this.group=ct,this.x=r,this.y=a,this.width=s,this.height=f,this.data=j,this.smooth=l,this.isArea=I,this.lineStyle=Object.assign({},wE,et),this.areaStyle=Object.assign({},SE,ut),this.intervalConfig=Mt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,_=this.group.addGroup({name:"trend-group"});if(s){var I=gE(s,n,a,u);if(_.addShape("path",{attrs:Bd({path:I},c),name:"trend-line"}),f){var B=xE(I,n,a,s);_.addShape("path",{attrs:Bd({path:B},l),name:"trend-area"})}}this.intervalConfig&&_.addShape("path",{attrs:Bd({path:mE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),_.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),_E=ME,ud=function(){return ud=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ud.apply(this,arguments)},CE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},TE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},AE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,_=l===void 0?24:l,I=e.style,B=I===void 0?{}:I;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=_,n==="trend"?this.style=ud(ud({},CE),B):n==="simple"&&(this.style=ud(ud({},TE),B)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,h.isNumber)(e)&&(this.x=e),(0,h.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),qg=AE,Xo=function(){return Xo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xo.apply(this,arguments)},IE=Xt,OE={fill:"#416180",opacity:.05},DE={fill:"#416180",opacity:.15,radius:5},LE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},yv=2,PE={width:yv,height:24},NE={textBaseline:"middle",fill:"#000",opacity:.45},RE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},kE={lineWidth:1,stroke:"#ccc"},BE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(Fn){return function(zn){t.currentHandler=Fn;var ia=zn.originalEvent;ia.stopPropagation(),ia.preventDefault(),t.prevX=(0,h.get)(ia,"touches.0.pageX",ia.pageX);var da=t.canvas.get("container");da.addEventListener("mousemove",t.onMouseMove),da.addEventListener("mouseup",t.onMouseUp),da.addEventListener("mouseleave",t.onMouseUp),da.addEventListener("touchmove",t.onMouseMove),da.addEventListener("touchend",t.onMouseUp),da.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Fn){Fn.stopPropagation(),Fn.preventDefault();var zn=(0,h.get)(Fn,"touches.0.pageX",Fn.pageX),ia=zn-t.prevX,da=t.adjustOffsetRange(ia/t.width);t.updateStartEnd(da),t.updateUI(),t.prevX=zn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Fn=t.canvas.get("container");Fn&&(Fn.removeEventListener("mousemove",t.onMouseMove),Fn.removeEventListener("mouseup",t.onMouseUp),Fn.removeEventListener("mouseleave",t.onMouseUp),Fn.removeEventListener("touchmove",t.onMouseMove),Fn.removeEventListener("touchend",t.onMouseUp),Fn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,_=e.trendCfg,I=e.controllerCfg,B=I===void 0?{speed:1}:I,j=e.backgroundStyle,et=j===void 0?{}:j,ut=e.foregroundStyle,ct=ut===void 0?{}:ut,pt=e.handlerStyle,Mt=pt===void 0?{}:pt,Zt=e.textStyle,se=Zt===void 0?{}:Zt,oe=e.start,_e=oe===void 0?0:oe,Ue=e.end,Re=Ue===void 0?1:Ue,qe=e.minText,hr=qe===void 0?"":qe,nn=e.maxText,kn=nn===void 0?"":nn,En=e.group,Kr=e.graph,ta=e.canvas,$n=e.tick,$r=$n===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(zn){return zn},ticks:[]}:$n,yn=e.type;this.graph=Kr,this.canvas=ta,this.group=En,this.timeBarType=yn,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=$r.ticks,this.trendCfg=_,this.controllerCfg=B,this.currentSpeed=B.speed||1,this.tickLabelFormatter=$r.tickLabelFormatter,yn==="trend"?this.backgroundStyle=Xo(Xo({},OE),et):yn==="simple"&&(this.backgroundStyle=Xo(Xo({},DE),et)),this.foregroundStyle=Xo(Xo({},LE),ct),this.handlerStyle=Xo(Xo({},PE),Mt),this.textStyle=Xo(Xo({},NE),se),this.tickLabelStyle=Xo(Xo({},RE),$r.tickLabelStyle),this.tickLineStyle=Xo(Xo({},kE),$r.tickLineStyle),this.currentMode=B.defaultTimeType||If.RANGE,this.start=_e,this.end=Re,this.minText=hr,this.maxText=kn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,h.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,h.size)((0,h.get)(this.trendCfg,"data"))){var o=new _E(Xo(Xo({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Xo({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Xo({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Xo({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Xo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Xo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Xo({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ut){ut.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ut){ut.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,h.get)(this.handlerStyle,"width",2),c=(0,h.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new qg({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var _=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new qg({name:"maxHandlerShape",group:_,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var I=this.ticks,B=r/(I.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ut){ut.destroy()});var j=-1/0,et=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=I.map(function(ut,ct){e.tickPosList.push(e.x+ct*B);var pt;e.tickLabelFormatter?(pt=e.tickLabelFormatter(ut),!(0,h.isString)(pt)&&pt&&(pt=ut.date)):pt=ut.date;var Mt=e.x+ct*B,Zt=e.y+n+5,se=e.group.addShape("text",{attrs:Xo({x:Mt,y:Zt,text:pt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,h.isNumber)(et)&&ct!==I.length-1){var oe=IE([1,0,0,0,1,0,0,0,1],[["t",-Mt,-Zt],["r",et],["t",Mt-5,Zt+2]]);se.attr({textAlign:"left",matrix:oe})}ct===0?se.attr({textAlign:"left"}):ct!==I.length-1&&se.attr({textAlign:"right"});var _e=e.group.addShape("line",{attrs:Xo({x1:e.x+ct*B,y1:e.y+n+2,x2:e.x+ct*B,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});_e.toBack();var Ue=se.getBBox();return Ue.minX>j?(se.show(),_e.show(),j=Ue.minX+Ue.width+10):(se.hide(),_e.hide()),se}),this.controllerBtnGroup=new mg(Xo({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===If.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Xc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ad,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Id,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Ol,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===If.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===If.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,h.get)(this.handlerStyle,"width",yv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,h.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,h.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===If.RANGE?this.graph.emit(Af,{value:[this.start,this.end].sort()}):this.currentMode===If.SINGLE&&this.graph.emit(Af,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,h.get)(this.handlerStyle,"width",yv),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),_=s.getBBox(),I=null,B=null;return this.timeBarType==="trend"?(I=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},B=f+_.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(I=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},B=s.attr("x")>this.width-_.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[B,I]:[I,B]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(hg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(vg,null))},i.prototype.destory=function(){this.graph.off(Af,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Xc,":click")),e.off("".concat(Ad,":click")),e.off("".concat(Id,":click")),e.off(Ol),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),FE=BE,zE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fc=function(){return fc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},fc.apply(this,arguments)},GE=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},UE=4,WE=26,YE=function(i){zE(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,h.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,h.isString)(u)&&(u=document.getElementById(u)),f=u):(f=qo("<div class='".concat(s,"'></div>")),pi(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,_=t.get("renderer");_==="SVG"?l=new _d({container:f,width:n,height:a}):l=new oc({container:f,width:n,height:a}),this.get("containerCSS")&&pi(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,_=r.textStyle,I=r.tick,B=r.backgroundStyle,j=r.foregroundStyle,et=f.data,ut=GE(f,["data"]),ct=n-2*s,pt=u==="trend"?WE:UE,Mt=this.get("graph"),Zt=this.get("timeBarGroup"),se=this.get("canvas"),oe=null;if(u==="trend"||u==="simple"){var _e=this.get("getValue");oe=new FE(fc(fc({graph:Mt,canvas:se,group:Zt,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:ct,height:pt,padding:s,backgroundStyle:B,foregroundStyle:j,trendCfg:fc(fc({},ut),{data:et.map(function(Re){return(_e==null?void 0:_e(Re))||Re.value})})},c),{tick:{ticks:et,tickLabelFormatter:I.tickLabelFormatter,tickLabelStyle:I.tickLabelStyle,tickLineStyle:I.tickLineStyle},handlerStyle:fc(fc({},c.handlerStyle),{height:c.height||pt}),controllerCfg:l,textStyle:_}))}else u==="tick"&&(oe=new ub(fc({graph:Mt,canvas:se,group:Zt,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},I)));var Ue=function Re(){var qe=t.get("timebar");qe.draggingHandler=!1,qe.isPlay&&(qe.isPlay=!1,qe.currentHandler=qe.maxHandlerShape,qe.changePlayStatus()),document.removeEventListener("mouseup",Re)};se.on("mousedown",function(Re){(Re.target.get("name")==="maxHandlerShape-handler"||Re.target.get("name")==="minHandlerShape-handler"||Re.target===oe.foregroundShape)&&document.addEventListener("mouseup",Ue)}),this.set("timebar",oe)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var _=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,I=_?_(o[c]):o[c].date,B=_?_(o[l]):o[l].date;if(s!=="tick"){var j=this.get("timebar");j.setText(I,B)}if(u)u(f,I,B);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var et=this.get("filterItemTypes"),ut=this.get("changeData"),ct=this.get("getDate"),pt=this.get("shouldIgnore"),Mt=o[c].date,Zt=o[l].date;if(ut||ut===void 0){var se=this.cacheGraphData.nodes,oe=this.cacheGraphData.edges,_e={},Ue={};f.getNodes().forEach(function(Re){return _e[Re.getID()]=!0}),f.getEdges().forEach(function(Re){return Ue[Re.getID()]=!0}),et.includes("node")&&(se==null||se.forEach(function(Re){var qe=+((ct==null?void 0:ct(Re))||Re.date),hr=qe>=Mt&&qe<=Zt||(pt==null?void 0:pt("node",Re,{min:Mt,max:Zt})),nn=_e[Re.id];nn&&!hr?(f.removeItem(Re.id),_e[Re.id]=!1):!nn&&hr&&(f.addItem("node",Re),_e[Re.id]=!0)}),oe==null||oe.forEach(function(Re){var qe=_e[Re.source]&&_e[Re.target]||(pt==null?void 0:pt("edge",Re,{min:Mt,max:Zt})),hr=!!f.findById(Re.id);hr&&!qe?(f.removeItem(Re.id),Ue[Re.id]=!1):!hr&&qe?(f.addItem("edge",Re),Ue[Re.id]=!0):hr||(Ue[Re.id]=!1)})),(this.get("filterEdge")||et.includes("edge"))&&(oe==null||oe.filter(function(Re){var qe=+((ct==null?void 0:ct(Re))||Re.date),hr=qe>=Mt&&qe<=Zt||(pt==null?void 0:pt("edge",Re,{min:Mt,max:Zt})),nn=_e[Re.source]&&_e[Re.target],kn=hr&&nn,En=Ue[Re.id];En&&!kn?(Ue[Re.id]=!1,f.removeItem(Re.id)):!En&&kn&&(Ue[Re.id]=!0,f.addItem("edge",Re))}))}else et.includes("node")&&f.getNodes().forEach(function(Re){var qe=Re.getModel();if(!(pt!=null&&pt("node",qe,{min:Mt,max:Zt}))){var hr=+((ct==null?void 0:ct(qe))||qe.date);hr<Mt||hr>Zt?f.hideItem(Re):f.showItem(Re)}}),(this.get("filterEdge")||et.includes("edge"))&&f.getEdges().forEach(function(Re){var qe=Re.getModel();if(!(pt!=null&&pt("edge",qe,{min:o[c].date,max:o[l].date}))){var hr=+((ct==null?void 0:ct(qe))||qe.date);if(hr<o[c].date||hr>o[l].date)f.hideItem(Re);else{var nn=Re.getSource().isVisible(),kn=Re.getTarget().isVisible();nn&&kn&&f.showItem(Re)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Af,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Af,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(cu),XE=YE,jE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VE=Xs.applyMatrix;function HE(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var ZE=function(i){jE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,h.isString)(a)&&(a=document.getElementById(a));var o=qo("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,_=0,I=0,B=0,j=0;a.addEventListener("mousedown",function(et){if(r.refresh=!1,et.target===o){var ut=o.style;_=parseInt(ut.width,10),I=parseInt(ut.height,10);var ct=t.get("width"),pt=t.get("height");_>ct||I>pt||(j=n.getZoom(),B=t.get("ratio"),f=!0,s=et.clientX,u=et.clientY)}},!1),a.addEventListener("mousemove",function(et){if(!(!f||(0,h.isNil)(et.clientX)||(0,h.isNil)(et.clientY))){var ut=t.get("width"),ct=t.get("height"),pt=o.style;c=parseInt(pt.left,10),l=parseInt(pt.top,10),_=parseInt(pt.width,10),I=parseInt(pt.height,10);var Mt=s-et.clientX,Zt=u-et.clientY;c-Mt<0?Mt=c:c-Mt+_>=ut&&(Mt=0),l-Zt<0?Zt=l:l-Zt+I>=ct&&(Zt=0),c-=Mt,l-=Zt,pi(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(Mt*j/B,Zt*j/B),s=et.clientX,u=et.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],_=[c.maxX-c.minX,c.maxY-c.minY],I={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(I.width=_[0],I.height=I.width/u):(I.height=_[1],I.width=I.height*u),I.minX=l[0]-I.width/2,I.minY=l[1]-I.height/2;var B=f.getMatrix();B||(B=[1,0,0,0,1,0,0,0,1]);var j=rt.invert([1,0,0,0,1,0,0,0,1],B),et=VE({x:I.minX,y:I.minY},j),ut=a.getCanvasByPoint(et.x,et.y),ct=this.get("viewport");ct||this.initViewport();var pt=o/I.width,Mt=pt*r,Zt=pt*n,se=r*-ut.x/I.width,oe=n*-ut.y/I.height,_e=se+Mt,Ue=oe+Zt;se<0&&(Mt+=se,se=0),_e>r&&(Mt=Mt-(_e-r)),oe<0&&(Zt+=oe,oe=0),Ue>n&&(Zt=Zt-(Ue-n)),this.set("ratio",t);var Re="".concat(se,"px"),qe="".concat(oe,"px");pi(ct,{left:Re,top:qe,width:"".concat(Mt,"px"),height:"".concat(Zt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=qo("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,h.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var _=qo('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(_);var I=qo('<span style="display: table-cell; vertical-align: middle; "></span>');_.appendChild(I),t.set("containerDOM",_),t.set("containerSpan",I);var B=qo('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",B),t.updateImgSize(),I.appendChild(B),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=HE(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=qo('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(cu),KE=ZE,$E=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xv=function(){return xv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xv.apply(this,arguments)},qE=Xs.distance,Qg=.05,Jg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},QE=function(i){$E(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,h.clone)(Jg),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Qg:a=1/(1-Qg);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(ut){ut.remove(),ut.destroy()}),l=[],a.forEach(function(ut){var ct=ut.getModel(),pt=ct.x,Mt=ct.y;qE({x:pt,y:Mt},f)<s&&(o[ct.id]=ut)});var _=n.getEdges(),I=[];_.forEach(function(ut){var ct=ut.getModel(),pt=ct.source,Mt=ct.target;c(ct)&&(u==="only-source"||u==="one"?o[pt]&&!o[Mt]&&I.push(ut):u==="only-target"||u==="one"?o[Mt]&&!o[pt]&&I.push(ut):u==="both"&&o[pt]&&o[Mt]&&I.push(ut))});var B=r.get("showNodeLabel"),j=r.get("showEdgelabel"),et=n.get("group");I.forEach(function(ut){var ct=ut.get("group").get("children");ct.forEach(function(pt){var Mt=pt.get("type"),Zt=et.addShape(Mt,{attrs:pt.attr()});l.push(Zt),B&&Mt==="text"&&Zt.set("visible",!0)})}),Object.keys(o).forEach(function(ut){var ct=o[ut],pt=ct.get("group").clone();if(et.add(pt),l.push(pt),j)for(var Mt=pt.get("children"),Zt=0;Zt<Mt.length;Zt++){var se=Mt[Zt];se.get("type")==="text"&&se.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||Jg;o=s.addShape("circle",{attrs:xv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(cu),JE=QE,tw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ew=Xs.pointLineDistance,rw={stroke:"#FA8C16",lineWidth:1},nw=function(i){tw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:rw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,h.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},_={x:n.x+r.width/2,y:n.y+r.height},I={x:n.x,y:n.y+r.height/2},B={x:n.x+r.width,y:n.y+r.height/2},j=[],et=[],ut=null;if(this.clearAlignLine(),(0,h.each)(s,function(pt){pt[4].isVisible&&(j.push(a.getLineDisObject(pt,c)),j.push(a.getLineDisObject(pt,l)),j.push(a.getLineDisObject(pt,_)))}),(0,h.each)(u,function(pt){pt[4].isVisible&&(et.push(a.getLineDisObject(pt,I)),et.push(a.getLineDisObject(pt,l)),et.push(a.getLineDisObject(pt,B)))}),j.sort(function(pt,Mt){return pt.dis-Mt.dis}),et.sort(function(pt,Mt){return pt.dis-Mt.dis}),j.length!==0&&j[0].dis<f){t.y=j[0].line[1]-j[0].point.y+n.y,ut={type:"item",horizontals:[j[0]]};for(var ct=1;ct<3;ct++)j[0].dis===j[ct].dis&&ut.horizontals.push(j[ct])}if(et.length!==0&&et[0].dis<f){t.x=et[0].line[0]-et[0].point.x+n.x,ut?ut.verticals=[et[0]]:ut={type:"item",verticals:[et[0]]};for(var ct=1;ct<3;ct++)et[0].dis===et[ct].dis&&ut.verticals.push(et[ct])}ut&&(ut.bbox=r,this.addAlignLine(ut))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,h.each)(a,function(_){var I=_.line,B=_.point,j=(I[0]+I[2])/2,et,ut;B.x<j?(et=B.x-r.width/2,ut=Math.max(I[0],I[2])):(et=B.x+r.width/2,ut=Math.min(I[0],I[2]));var ct=(0,h.mix)({x1:et,y1:I[1],x2:ut,y2:I[1]},u),pt=l.addShape("line",{attrs:ct,capture:!1});f.push(pt)}),o&&(0,h.each)(o,function(_){var I=_.line,B=_.point,j=(I[1]+I[3])/2,et,ut;B.y<j?(et=B.y-r.height/2,ut=Math.max(I[1],I[3])):(et=B.y+r.height/2,ut=Math.min(I[1],I[3]));var ct=(0,h.mix)({x1:I[0],y1:et,x2:I[0],y2:ut},u),pt=l.addShape("line",{attrs:ct,capture:!1});f.push(pt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:ew(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,h.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(cu),aw=nw,iw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),is=function(){return is=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},is.apply(this,arguments)},ow=["click","mouseenter"],sw=function(i){iw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=qo(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();pi(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,_={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(I){var B=s[f[I]],j=I;switch(I){case"top":B+=l;break;case"left":B+=c;break;case"bottom":B=n.getHeight()-t[1]-B+l,j="top";break;default:B=n.getWidth()-t[0]-B+c,j="left";break}_[j]=B}),_.top+=o+n.getContainer().offsetTop,_.left+=a+n.getContainer().offsetLeft,Object.keys(_).forEach(function(I){_[I]="".concat(_[I],"px")}),_},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";ow.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();pi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(is(is({},I.get("oriAttrs")),s)),B.attr(is(is({},B.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(is(is({},I.get("oriAttrs")),f)),B.attr(is(is({},B.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(ut){return ut.get("name")==="root"}),l=c.find(function(ut){return ut.get("name")==="node-group"}),_=c.find(function(ut){return ut.get("name")==="edge-group"}),I=l.get("children").filter(function(ut){return ut.get("active")}),B=_.get("children").filter(function(ut){return ut.get("active")}),j=0,et=["getNodes","getEdges"];et.forEach(function(ut){o[ut]().forEach(function(ct){var pt=!1,Mt=ut==="getNodes"?I:B;Mt.forEach(function(Zt){var se=n[Zt.get("id")];pt=pt||se(ct.getModel())}),pt?(o.setItemState(ct,u,!1),o.setItemState(ct,s,!0),j++):(o.setItemState(ct,s,!1),o.setItemState(ct,u,!0))})}),j||et.forEach(function(ut){o[ut]().forEach(function(ct){o.clearItemStates(ct,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new oc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(Kr,ta){s[Kr].forEach(function($n){var $r,yn=f[ta].addGroup({id:$n.id,name:"node-container"}),Fn,zn=$n.type,ia=t.getShapeSize($n),da=ia.width,Wa=ia.height,oi=ia.r,Qi=t.getStyle(Kr.substr(0,4),$n);switch($n.type){case"circle":Fn={r:oi,x:0,y:0};break;case"rect":Fn={width:da,height:Wa,x:-da/2,y:-Wa/2};break;case"ellipse":Fn={rx:da,ry:Wa,x:0,y:0},zn="ellipse";break;case"line":Fn={x1:-da/2,y1:0,x2:da/2,y2:0},zn="line";break;case"quadratic":Fn={path:[["M",-da/2,0],["Q",0,da/2,da/2,0]]},zn="path";break;case"cubic":Fn={path:[["M",-da/2,0],["C",-da/6,da/2,da/6,-da/2,da/2,0]]},zn="path";break;case"diamond":Fn={path:[["M",0,-Wa],["L",da,0],["L",0,Wa],["L",-da,0],["Z"]]},zn="path";break;case"triangle":Fn={path:[["M",-da,Wa],["L",0,-Wa],["L",da,Wa],["Z"]]},zn="path";break;case"star":Fn={path:Xs.getStarPath(oi*3,oi*1.2)},zn="path";break;default:Fn={r:oi,x:0,y:0};break}var Li=yn.addShape(zn,{attrs:is(is({},Fn),Qi),name:"".concat($n.type,"-node-keyShape"),oriAttrs:is({opacity:1},Qi)});if($n.label){var Ji=Li.getBBox(),co=(($r=$n.labelCfg)===null||$r===void 0?void 0:$r.style)||{},jo=is({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},co);yn.addShape("text",{attrs:is({x:Ji.maxX+4,y:0,text:$n.label},jo),className:"legend-label",name:"".concat($n.type,"-node-text"),oriAttrs:jo})}})});var c=this.get("padding"),l,_=n.find(function(Kr){return Kr.get("name")==="title-container"}),I={height:0,maxY:0,width:0};if(this.get("title")){_||(_=n.addGroup({name:"title-container"}));var B={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},j=this.get("titleConfig")||{},et=Object.assign(B,j.style||{});l=_.addShape("text",{attrs:is({text:this.get("title")},et)}),I=_.getCanvasBBox(),_.setMatrix([1,0,0,0,1,0,j.offsetX,j.offsetY,1])}this.layoutItems();var ut=n.getCanvasBBox(),ct=a.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],Mt=I.maxY<ct.minY?Math.abs(I.maxY-ct.minY)+c[0]:I.maxY+c[0],Zt=[1,0,0,0,1,0,pt,Mt,1];a.setMatrix(Zt),ut=n.getCanvasBBox();var se=[ut.minX+ut.width+c[1],ut.minY+ut.height+c[2]];if(l){var j=is({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));I=_.getCanvasBBox();var oe=_.getMatrix()||[1,0,0,0,1,0,0,0,1];j.position==="center"?oe[6]=se[0]/2+j.offsetX:j.position==="right"?(oe[6]=se[0]-c[3]+j.offsetX,l.attr({textAlign:"right"})):(oe[6]=c[3]+j.offsetX,l.attr({textAlign:"left"})),_.setMatrix(oe),I=_.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],Mt=ct.minY<I.maxY?Math.abs(I.maxY-ct.minY)+c[0]:I.maxY+c[0],Zt=[1,0,0,0,1,0,pt,Mt,1],a.setMatrix(Zt);var _e=[1,0,0,0,1,0,pt,Mt,1];this.get("layout")==="vertical"?_e[6]+=ct.maxX+this.get("horiSep"):_e[7]+=ct.maxY+this.get("vertiSep"),o.setMatrix(_e)}else{ct=a.getCanvasBBox();var Ue=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Ue[6]+=Zt[6]+ct.maxX+this.get("horiSep"):Ue[7]+=Zt[7]+ct.maxY+this.get("vertiSep"),o.setMatrix(Ue)}ut=n.getCanvasBBox(),ct=a.getCanvasBBox(),Zt=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var Re=o.getMatrix()||[1,0,0,0,1,0,0,0,1],qe=o.getCanvasBBox();se=[Math.max(ct.width+Zt[6],qe.width+Re[6])+c[1],Math.max(ct.height+Zt[7],qe.height+Re[7])+c[2]],r.changeSize(se[0],se[1]);var hr=this.get("containerStyle"),nn=n.getMatrix()||[1,0,0,0,1,0,0,0,1],kn=Xs.invertMatrix({x:0,y:0},nn),En=n.addShape("rect",{attrs:is({x:kn.x+(hr.lineWidth||1),y:kn.y+(hr.lineWidth||1),width:se[0]-2*(hr.lineWidth||1),height:se[1]-2*(hr.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},hr),name:"legend-back-rect",capture:!1});return En.toBack(),se},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(Mt){return Mt.get("name")==="root"}),f=u.find(function(Mt){return Mt.get("name")==="node-group"}),c=u.find(function(Mt){return Mt.get("name")==="edge-group"}),l={min:0,max:-1/0},_=-1/0;f.get("children").forEach(function(Mt,Zt){Zt===0&&(l.min=s[0]);var se=Mt.get("children")[0],oe=Mt.getCanvasBBox(),_e=se.getBBox(),Ue=_e.width,Re=_e.height,qe=0,hr=0,nn=0;a==="vertical"?(hr=s[1],nn=s[0]+Ue/2,s[0]=nn+oe.height+n,qe=oe.maxX+hr+Ue/2):(hr=s[0]+Ue/2,nn=s[1],s[0]=hr+oe.width+r,qe=oe.maxY+nn+Re/2),s[0]>l.max&&(l.max=s[0]),qe>_&&(_=qe),Mt.setMatrix([1,0,0,0,1,0,hr,nn,1])});var I=l.max-l.min,B={min:0,max:-1/0},j=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?j.maxX+r:j.maxY+n,c.get("children").forEach(function(Mt,Zt){Zt===0&&(B.min=s[0]);var se=Mt.get("children")[0],oe=Mt.getCanvasBBox(),_e=se.getBBox(),Ue=_e.width,Re=_e.height,qe=0,hr=0;a==="vertical"?(qe=s[1],hr=s[0],s[0]=hr+oe.height+n,Mt.setMatrix([1,0,0,0,1,0,0,hr+Re/2,1])):(qe=s[0],hr=s[1],s[0]=qe+oe.width+r,Mt.setMatrix([1,0,0,0,1,0,qe+Ue/2,0,1])),s[0]>B.max&&(B.max=s[0])});var et=B.max-B.min;if(o&&o!==""&&o!=="left"){var ut=I-et,ct=o==="center"?Math.abs(ut)/2:Math.abs(ut),pt=ut<0?f:c;pt.get("children").forEach(function(Mt){var Zt=Mt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Zt[7]+=ct:Zt[6]+=ct,Mt.setMatrix(Zt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,h.uniqueId)(),type:n.type||"circle",style:is({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:is({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,h.uniqueId)(),type:s,size:f,style:is({lineWidth:(0,h.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:is({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,h.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,h.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,h.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,h.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return is(is({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(cu),uw=sw,fw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gu=function(){return Gu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Gu.apply(this,arguments)},t0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&ch()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var e0="canvas-annotation",cw=function(i){fw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Gu(Gu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",_=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),I="<p class='g6-annotation-close'>x</p>",B=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(B,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(I,`
        </div>
        `).concat(_,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new oc({container:n,width:s.right-s.left,height:s.bottom-s.top});pi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,h.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var _,I=((_=l==null?void 0:l.getModel)===null||_===void 0?void 0:_.call(l))||{},B=I.label,j=I.id;return B||j||"-"}),t.get("getContent")||t.set("getContent",function(l){var _,I;if(!l)return"-";var B=((_=l.getModel)===null||_===void 0?void 0:_.call(l))||{},j=B.label,et=B.id,ut=(I=l.getType)===null||I===void 0?void 0:I.call(l),ct=ut?"".concat(ut,": "):"";return"".concat(ct).concat(j||et||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,_=u-s,I=r.position,B=I===void 0?"top":I,j=r.offsetX,et=j===void 0?0:j,ut=r.offsetY,ct=ut===void 0?0:ut,pt=t0(r,["position","offsetX","offsetY"]),Mt=r.height,Zt=Mt===void 0?"fit-content":Mt,se=r.width,oe=se===void 0?n.getWidth():se;Zt==="100%"&&(Zt=l),oe==="100%"&&(oe=_);var _e="unset",Ue="unset",Re={};switch(B){case"right":_e="".concat(l,"px"),Re={top:0,right:0},Re.right+=s+et,Re.top+=f+ct;break;case"bottom":Ue="".concat(_,"px"),Re={bottom:0,left:0},Re.left+=s+et,Re.bottom+=f+ct;break;case"top":Ue="".concat(_,"px");case"left":_e="".concat(l,"px");default:Re={top:0,left:0},Re.left+=s+et,Re.top+=f+ct;break}Object.keys(Re).forEach(function(hr){Re[hr]="".concat(Re[hr],"px")});var qe=qo("<div class='".concat(r.className," g6-annotation-container'></div>"));return pi(qe,Gu(Gu({position:"absolute",display:B==="top"||B==="bottom"?"inline-flex":"unset",width:(0,h.isNumber)(oe)?"".concat(oe,"px"):oe,height:(0,h.isNumber)(Zt)?"".concat(Zt,"px"):Zt,maxHeight:_e,maxWidth:Ue,overflow:"scroll"},Re),pt)),a.appendChild(qe),qe.addEventListener("scroll",function(hr){t.updateLinks()}),qe}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),_=l.x,I=l.y;Object.values(n).forEach(function(B){var j=B.card;if(j){var et=j.style,ut=Nl(et.left),ct=Nl(et.top),pt=j.getBoundingClientRect(),Mt=pt.width,Zt=pt.height,se=ut,oe=ct;ut+Mt>_-f&&(se=_-f-Mt),ut<0&&(se=0),ct+Zt>I-c&&(oe=I-c-Zt),ct<0&&(oe=0),pi(j,{left:"".concat(se,"px"),top:"".concat(oe,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),_=l.minHeight,I=l.minWidth,B=l.width,j=l.height,et=l.collapsed,ut=et===void 0?!1:et,ct=l.x,pt=l.y,Mt=l.title,Zt=l.content,se=l.maxTitleLength,oe=l.defaultBegin,_e=t0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Ue=o.get("linkGroup"),Re=this.get("rows")||[[]],qe=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),hr=qe?e0:t.getID(),nn=s[hr]||{},kn=nn.card,En=nn.link,Kr=nn.x,ta=nn.y,$n=nn.title,$r=nn.content,yn=this.get("getTitle"),Fn=this.get("getContent"),zn=this.get("getContentPlaceholder")||function(){return""},ia=this.get("getTitlePlaceHolder")||function(){return""},da=zn(t),Wa=ia(t),oi=qo(this.getDOMContent(Gu({itemId:hr,collapsed:ut,title:((a=$n||Mt||(yn==null?void 0:yn(t)))===null||a===void 0?void 0:a.substr(0,se))||Wa,content:$r||Zt||(Fn==null?void 0:Fn(t))||da},_e))),Qi=(0,h.isNumber)(_)?"".concat(_,"px"):_;pi(oi,{minHeight:ut?"unset":Qi,minWidth:(0,h.isNumber)(I)?"".concat(I,"px"):I,height:j,width:B});var Li=!!kn;Li?(En==null||En.remove(!0),f.replaceChild(oi,kn)):f.appendChild(oi);var Ji;if(!c){if(Ji=f.getBoundingClientRect()||{},ct!==void 0&&pt!==void 0)Kr=ct,ta=pt;else if(!Li&&!qe){var co=Ji.top,jo=oe||{},Lo=jo.left,Uu=jo.right,Ts=Uu===void 0?16:Uu,Wu=jo.top,As=Wu===void 0?8:Wu,Is=jo.bottom,wu=Ts,js=As;isNaN(Lo)||(wu=f.scrollWidth-Lo),isNaN(Is)||(js=f.scrollHeight-Is);var au=(0,h.isNumber)(I)?I:100;Kr=f.scrollWidth-oi.scrollWidth-(Re.length-1)*au-wu;var gi=Re[Re.length-1],Zi=(gi[gi.length-1]||{}).bbox;ta=(Zi==null?void 0:Zi.bottom)-co||js}pi(oi,{position:"absolute",left:"".concat(Kr,"px"),top:"".concat(ta,"px"),cusor:c?"unset":"move"})}this.bindListener(oi,hr);var vi=oi.getBoundingClientRect();if(!qe){var Ki=bv(t,vi,u,this.get("canvas")),Mo=this.get("linkStyle");En=Ue.addShape("path",{attrs:Gu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Ki},Mo)})}if(s[hr]=Gu(Gu({},s[hr]||{}),{id:hr,collapsed:ut,card:oi,link:En,x:Kr,y:ta,cardBBox:vi,content:$r||Zt,title:$n||Mt,contentPlaceholder:da,titlePlaceholder:Wa,isCanvas:qe}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Aa=!isNaN(ct)&&!isNaN(pt);if(!Li&&!qe&&!Aa){var Ei=Ji.bottom,_i=Ei===void 0?0:Ei,co=Ji.top;Re[Re.length-1].push({id:hr,bbox:vi}),vi.top>_i-co-vi.height-16&&Re.push([]),this.set("rows",Re)}}this.updateCardSize(hr);var _o=this.get("onAnnotationChange");_o==null||_o(s[hr],Li?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Nl(o.paddingLeft)+Nl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":pi(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":pi(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Gu(Gu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;pi(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var _=n.get("itemHighlightState");c.setItemState(l,_,!0)}var I=f[r].link;if(I){var B=n.get("linkHighlightStyle")||{};I.attr(B)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var _=n.get("itemHighlightState");c.setItemState(l,_,!1)}var I=f[r].link;if(I){var B=n.get("linkHighlightStyle")||{};Object.keys(B).forEach(function(et){I.attr(et,void 0),I.attr(et,void 0)});var j=n.get("linkStyle");I.attr(j)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var _=u.target,I=_.className;if(!(I!=="g6-annotation-title"&&I!=="g6-annotation-content")){var B=I==="g6-annotation-title"?_.getBoundingClientRect():_.parentNode.getBoundingClientRect(),j=B.width,et=B.height,ut=getComputedStyle(_),ct=I==="g6-annotation-title"?"input":"textarea",pt=qo("<".concat(ct,' class="').concat(I,'-input" type="textarea" style="width:').concat(j,"px; height: ").concat(et,'px; min-width: 16px;"/>')),Mt=qo('<div class="'.concat(I,'-input-wrapper" style="width: ').concat(j,"px; height: ").concat(et,"px; min-width: 16px; margin-right: ").concat(ut.marginRight,'" />'));Mt.appendChild(pt),_.parentNode.replaceChild(Mt,_);var Zt=f[r],se=Zt.contentPlaceholder,oe=Zt.titlePlaceholder,_e=Zt.content,Ue=Zt.title,Re=_e;I==="g6-annotation-title"?(pt.name="title",pt.maxLength=l,Re=Ue):pt.name="content",Re?(pt.innerHTML=_.innerHTML,pt.value=_.innerHTML):pt.placeholder=I==="g6-annotation-title"?oe:se,pt.focus(),pt.addEventListener("blur",function(qe){pt.value&&(_.innerHTML=pt.value,Zt[pt.name||"title"]=pt.value),Mt.parentNode.replaceChild(_,Mt),n.updateCardSize(r);var hr=n.get("onAnnotationChange");hr==null||hr(Zt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Nl(c.left),top:Nl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,_=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!_)){var I=_.x,B=_.y,j=_.left,et=_.top,ut=_.card,ct=c-I,pt=l-B;j+=ct,et+=pt;var Mt=n.get("graph"),Zt=Mt.getPointByCanvas(0,0),se=Mt.getPointByCanvas(Mt.getWidth(),Mt.getHeight()),oe=Mt.getClientByPoint(Zt.x,Zt.y),_e=oe.x,Ue=oe.y,Re=Mt.getClientByPoint(se.x,se.y),qe=Re.x,hr=Re.y,nn=ut.getBoundingClientRect(),kn=nn.right-nn.left,En=nn.bottom-nn.top;(j>qe-_e-kn&&ct>0||j<0&&ct<0)&&(j-=ct),(et>hr-Ue-En&&pt>0||et<0&&pt<0)&&(et-=pt),pi(ut,{left:"".concat(j,"px"),top:"".concat(et,"px"),visibility:"hidden"}),I=c,B=l;var Kr=(f[r]||{}).link;if(Kr){var ta=Mt.findById(r);Kr.attr("path",bv(ta,nn,Mt,n.get("canvas")))}n.set("dragging",{x:I,y:B,left:j,top:et,card:ut})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var _=l.left,I=l.top,B=l.card;c[r].x=_,c[r].y=I,pi(B,{visibility:"visible"}),n.set("dragging",!1);var j=n.get("rows");j==null||j.forEach(function(ut){for(var ct=ut.length-1;ct>=0;ct--)ut[ct].id===r&&ut.splice(ct,1)});var et=n.get("onAnnotationChange");et==null||et(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Nl(s.marginLeft),f=o.getBoundingClientRect().width;pi(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=bv(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,_=u.y,I=u.id,B=u.collapsed,j=u.card;if(!(j&&j.style.display==="none"&&!t)){var et=n.findById(I)||n.get("canvas");s.push({id:I,x:l,y:_,collapsed:B,title:f||(a==null?void 0:a(et)),content:c||(o==null?void 0:o(et)),visible:j&&j.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,_=a.visible,I=n.findById(o);if(!I&&o===e0&&(I=n.get("canvas")),!I){var B=r.get("cardInfoMap")||{};B[o]=a,r.set("cardInfoMap",B);return}r.toggleAnnotation(I,{x:s,y:u,title:f,content:c,collapsed:l}),_||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(cu),lw=cw,dw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var _=t[l],I=c.x-_.x,B=c.y-_.y,j=I*I+B*B;o>j&&(o=j,r=c,n=_,a=[f,l])})});var s=20,u=Xs.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},bv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,_=u.maxY,I=e.getModel(),B=I.x,j=I.y;f+=B,c+=j,l+=B,_+=j,o={left:{x:f,y:(c+_)/2},right:{x:l,y:(c+_)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:_}}}Object.keys(o).forEach(function(Ue){var Re=o[Ue],qe=Re.x,hr=Re.y,nn=r.getClientByPoint(qe,hr);o[Ue]=n.getPointByClient(nn.x,nn.y)});var et=t.top,ut=et===void 0?0:et,ct=t.left,pt=ct===void 0?0:ct,Mt=t.right,Zt=Mt===void 0?0:Mt,se=t.bottom,oe=se===void 0?0:se,_e={left:n.getPointByClient(pt,(ut+oe)/2),right:n.getPointByClient(Zt,(ut+oe)/2),top:n.getPointByClient((pt+Zt)/2,ut),bottom:n.getPointByClient((pt+Zt)/2,oe)};return dw(o,_e)},Nl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},hw={PluginBase:cu,Menu:_x,Grid:Ex,Minimap:Lx,Bundling:kx,ToolBar:Yx,Tooltip:Vx,Fisheye:zx,TimeBar:XE,ImageMinimap:KE,EdgeFilterLens:JE,SnapLine:aw,Legend:uw,Annotation:lw},vw=hw,Cs=vw;ic("circle",{options:{size:Jn.defaultNode.size,style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,_=o.text;if(l){var I="".concat(this.type,"-icon");_?t.shapeMap[I]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:I,name:I,draggable:!0}):t.shapeMap[I]=t.addShape("image",{attrs:(0,b.__assign)({x:-f/2,y:-c/2},o),className:I,name:I,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2;if(o){var B="link-point-left";t.shapeMap[B]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I,y:0,r:f/2||c||5}),className:B,name:B,isAnchorPoint:!0})}if(s){var j="link-point-right";t.shapeMap[j]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I,y:0,r:f/2||c||5}),className:j,name:j,isAnchorPoint:!0})}if(a){var et="link-point-top";t.shapeMap[et]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-I,r:f/2||c||5}),className:et,name:et,isAnchorPoint:!0})}if(u){var ut="link-point-bottom";t.shapeMap[ut]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:I,r:f/2||c||5}),className:ut,name:ut,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,b.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),ic("rect",{options:{size:[100,30],style:{radius:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,h.mix)({},a,s.attr(),u);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),ic("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2,B=_[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,b.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),ic("diamond",{options:{size:[80,80],style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),ic("triangle",{options:{size:40,direction:"up",style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,_=a.show,I=a.offset,B=a.text;if(_)if(B)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var j=-c/2,et=-l/2;(u==="up"||u==="down")&&(et+=I),(u==="left"||u==="right")&&(j+=I),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:j,y:et},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,_=a.size,I=a.r,B=(0,b.__rest)(a,["top","left","right","bottom","size","r"]),j=this.getSize(e),et=j[0];if(f){var ut=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?ut=[-pt,ct]:s==="down"?ut=[-pt,-ct]:s==="left"&&(ut=[-pt,pt-ct]),ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:ut[0],y:ut[1],r:_/2||I||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var Mt=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?Mt=[pt,ct]:s==="down"?Mt=[pt,-ct]:s==="right"&&(Mt=[pt,pt-ct]),Mt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:Mt[0],y:Mt[1],r:_/2||I||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Zt=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?Zt=[pt-ct,-ct]:s==="left"?Zt=[pt,-ct]:s==="right"&&(Zt=[-pt,-ct]),Zt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:Zt[0],y:Zt[1],r:_/2||I||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var se=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="down"?se=[-pt+ct,ct]:s==="left"?se=[pt,ct]:s==="right"&&(se=[-pt,ct]),se&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:se[0],y:se[1],r:_/2||I||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Kr){return Kr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Kr){return Kr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Kr){return Kr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Kr){return Kr.get("className")==="link-point-bottom"}),l=n,_=s||u||f||c;_&&(l=_.attr());var I=(0,h.mix)({},l,e.linkPoints),B=I.fill,j=I.stroke,et=I.lineWidth,ut=I.size/2;ut||(ut=I.r);var ct=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},pt=ct.left,Mt=ct.right,Zt=ct.top,se=ct.bottom,oe=this.getSize(e),_e=oe[0],Ue={r:ut,fill:B,stroke:j,lineWidth:et},Re=null,qe=_e*Math.sin(1/3*Math.PI),hr=_e*Math.sin(1/3*Math.PI);o==="up"?Re=[-hr,qe]:o==="down"?Re=[-hr,-qe]:o==="left"&&(Re=[-hr,hr-qe]),Re&&(s?!pt&&pt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,b.__assign)((0,b.__assign)({},Ue),{x:Re[0],y:Re[1]})):pt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ue),{x:Re[0],y:Re[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var nn=null;o==="up"?nn=[hr,qe]:o==="down"?nn=[hr,-qe]:o==="right"&&(nn=[hr,hr-qe]),nn&&(u?!Mt&&Mt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,b.__assign)((0,b.__assign)({},Ue),{x:nn[0],y:nn[1]})):Mt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ue),{x:nn[0],y:nn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var kn=null;o==="up"?kn=[hr-qe,-qe]:o==="left"?kn=[hr,-qe]:o==="right"&&(kn=[-hr,-qe]),kn&&(f?!Zt&&Zt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,b.__assign)((0,b.__assign)({},Ue),{x:kn[0],y:kn[1]})):Zt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ue),{x:kn[0],y:kn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var En=null;o==="down"?En=[-hr+qe,qe]:o==="left"?En=[hr,qe]:o==="right"&&(En=[-hr,qe]),En&&(c?!se&&se!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,b.__assign)((0,b.__assign)({},Ue),{x:En[0],y:En[1]})):se&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ue),{x:En[0],y:En[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),ic("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Jn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Jn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Jn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,b.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,b.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,_=n.text,I=(0,b.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},I),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,_=n.text,I=(0,b.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},I),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],_=null,I=s.show,B=s.width,j=-l/2+a.offset;I&&(j=-l/2+B+a.offset);var et=a.style,ut=f.style,ct=f.paddingTop;return(0,h.isString)(e.description)?(_=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},et),{x:j,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},ut),{x:j,y:17+(ct||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(_=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},et),{x:j,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_),_},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],_=c[1],I=t.get("keyShape");I.attr((0,b.__assign)((0,b.__assign)({},a),{x:-l/2,y:-_/2,width:l,height:_}));var B=t.getContainer(),j=B.shapeMap["rect-logo-icon"]||B.find(function(oi){return oi.get("className")==="rect-logo-icon"}),et=j?j.attr():{},ut=(0,h.mix)({},et,e.logoIcon),ct=ut.width;ct===void 0&&(ct=this.options.logoIcon.width);var pt=e.logoIcon?e.logoIcon.show:void 0,Mt=s.offset,Zt=-l/2+ct+Mt;!pt&&pt!==void 0&&(Zt=-l/2+Mt);var se=B.shapeMap["node-label"]||B.find(function(oi){return oi.get("className")==="node-label"}),oe=B.shapeMap["rect-description"]||B.find(function(oi){return oi.get("className")==="rect-description"});if(e.label)if(!se)B.shapeMap["node-label"]=B.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},s.style),{x:Zt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var _e=e.labelCfg?e.labelCfg.style:{},Ue=(0,h.mix)({},se.attr(),_e);e.label&&(Ue.text=e.label),Ue.x=Zt,(0,h.isString)(e.description)&&(Ue.y=-5),oe&&(oe.resetMatrix(),oe.attr({x:Zt})),se.resetMatrix(),se.attr(Ue)}if((0,h.isString)(e.description)){var Re=f.paddingTop;if(!oe)B.shapeMap["rect-description"]=B.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},f.style),{x:Zt,y:17+(Re||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var _e=e.descriptionCfg?e.descriptionCfg.style:{},qe=(0,h.mix)({},oe.attr(),_e);(0,h.isString)(e.description)&&(qe.text=e.description),qe.x=Zt,oe.resetMatrix(),oe.attr((0,b.__assign)((0,b.__assign)({},qe),{y:17+(Re||0)}))}}var hr=B.shapeMap["pre-rect"]||B.find(function(oi){return oi.get("className")==="pre-rect"});if(hr&&!hr.destroyed){var nn=(0,h.mix)({},hr.attr(),e.preRect);hr.attr((0,b.__assign)((0,b.__assign)({},nn),{x:-l/2,y:-_/2,height:_}))}if(j&&!j.destroyed)if(!pt&&pt!==void 0)j.remove(),delete B.shapeMap["pre-rect"];else{var kn=ut.width,En=ut.height,Kr=ut.x,ta=ut.y,$n=ut.offset,$r=(0,b.__rest)(ut,["width","height","x","y","offset"]);j.attr((0,b.__assign)((0,b.__assign)({},$r),{x:Kr||-l/2+kn+$n,y:ta||-En/2,width:kn,height:En}))}else pt&&this.drawLogoIcon(e,B);var yn=B.shapeMap["rect-state-icon"]||B.find(function(oi){return oi.get("className")==="rect-state-icon"}),Fn=yn?yn.attr():{},zn=(0,h.mix)({},Fn,e.stateIcon);if(yn){!zn.show&&zn.show!==void 0&&(yn.remove(),delete B.shapeMap["rect-state-icon"]);var ia=zn.width,En=zn.height,Kr=zn.x,ta=zn.y,da=zn.offset,Wa=(0,b.__rest)(zn,["width","height","x","y","offset"]);yn.attr((0,b.__assign)((0,b.__assign)({},Wa),{x:Kr||l/2-ia+da,y:ta||-En/2,width:ia,height:En}))}else zn.show&&this.drawStateIcon(e,B);this.updateLinkPoints(e,B)},getOptions:function(e,t){return t==="move"?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),ic("star",{options:{size:60,style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,_=(0,b.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),I=this.getSize(e),B=I[0];if(s){var j=Math.cos(.1*Math.PI)*B,et=Math.sin((18+72*0)/180*Math.PI)*B;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var j=Math.cos(.5*Math.PI)*B,et=Math.sin((18+72*1)/180*Math.PI)*B;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var j=Math.cos(.9*Math.PI)*B,et=Math.sin((18+72*2)/180*Math.PI)*B;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var j=Math.cos(1.3*Math.PI)*B,et=Math.sin((18+72*3)/180*Math.PI)*B;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var j=Math.cos(1.7*Math.PI)*B,et=Math.sin((18+72*4)/180*Math.PI)*B;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Xs.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(qe){return qe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(qe){return qe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(qe){return qe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(qe){return qe.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(qe){return qe.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,h.mix)({},f,e.linkPoints),_=l.fill,I=l.stroke,B=l.lineWidth,j=l.size/2;j||(j=l.r);var et=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ut=et.left,ct=et.right,pt=et.top,Mt=et.leftBottom,Zt=et.rightBottom,se=this.getSize(e),oe=se[0],_e={r:j,fill:_,stroke:I,lineWidth:B},Ue=Math.cos((18+72*0)/180*Math.PI)*oe,Re=Math.sin((18+72*0)/180*Math.PI)*oe;a?!ct&&ct!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Ue=Math.cos((18+72*1)/180*Math.PI)*oe,Re=Math.sin((18+72*1)/180*Math.PI)*oe,o?!pt&&pt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re})):pt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Ue=Math.cos((18+72*2)/180*Math.PI)*oe,Re=Math.sin((18+72*2)/180*Math.PI)*oe,n?!ut&&ut!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Ue=Math.cos((18+72*3)/180*Math.PI)*oe,Re=Math.sin((18+72*3)/180*Math.PI)*oe,s?!Mt&&Mt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re})):Mt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Ue=Math.cos((18+72*4)/180*Math.PI)*oe,Re=Math.sin((18+72*4)/180*Math.PI)*oe,u?!Zt&&Zt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re})):Zt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_e),{x:Ue,y:-Re}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var r0=Xs.defaultSubjectColors,Fd="fan-shape-";ic("donut",{options:{size:Jn.defaultNode.size,style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),pw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,b.__assign)({},r)),gw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var pw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=n0(a,s),c=f.configs,l=f.totalValue;if(l){var _=a0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0;if(u===1){Ev(t,{arcR:B,arcBegin:j,beginAngle:et,config:c[0],fanIndex:0,lineWidth:I,totalValue:l,drawWhole:!0});return}for(var ut=0;ut<c.length;ut++){var ct=Ev(t,{arcR:B,arcBegin:j,beginAngle:et,config:c[ut],fanIndex:ut,lineWidth:I,totalValue:l});if(ct.shouldEnd)return;j=ct.arcBegin,et=ct.beginAngle}}}},Ev=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,_=t.updateShape,I=_===void 0?void 0:_,B=o.value/f;if(B<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var j,et,ut;if(l||B>.999)j=[r,1e-4],ut=1;else{var ct=B*Math.PI*2;et=a+ct,j=[r*Math.cos(et),-r*Math.sin(et)],ut=ct>Math.PI?1:0}var pt={path:[["M",n[0],n[1]],["A",r,r,0,ut,0,j[0],j[1]]],stroke:o.color||(I==null?void 0:I.attr("stroke"))||r0[s%r0.length],lineWidth:u};return I?I.attr(pt):e.shapeMap["".concat(Fd).concat(s)]=e.addShape("path",{attrs:pt,name:"".concat(Fd).concat(s),draggable:!0}),{beginAngle:et,arcBegin:j,shape:e.shapeMap["".concat(Fd).concat(s)],shouldEnd:l||B>.999}},gw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=n0(n,o),c=f.configs,l=f.totalValue;if(l)for(var _=a0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0,ut=0;ut<c.length;ut++){var ct="".concat(Fd).concat(ut),pt=Ev(u,{arcR:B,arcBegin:j,beginAngle:et,config:c[ut],fanIndex:ut,lineWidth:I,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[ct]});if(pt.shape&&(s[ct]=!0),pt.shouldEnd)break;j=pt.arcBegin,et=pt.beginAngle}}var Mt=Object.keys(u.shapeMap).filter(function(Zt){return Zt.includes(Fd)});Mt.forEach(function(Zt){s[Zt]||(u.shapeMap[Zt].remove(!0),delete u.shapeMap[Zt])})},n0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},a0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},yh=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},mw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},aM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},wv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},i0=function(e){return wv(e)},iM=function(e,t){return[e,{x:e.x,y:t.y},t]},xh=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},yw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Sv=function(e,t,r){var n=yw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},o0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Mv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},bh=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},xw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},bw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},Ew=function(e,t){return xw(e,t.x).concat(bw(e,t.y))},zd=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},ww=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},s0=function(e,t,r,n,a){return zd(e,t)+zd(e,r)+ww(e,[t,r,n,a])},Sw=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},oM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Eh=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,_=n.y-t.y,I=a*u-o*s,B=f*_-c*l,j=a*c-o*f,et=s*_-u*l;return I*B<=0&&j*et<=0},_v=function(e,t,r){if(r.width||r.height){var n=Mv(r),a=n[0],o=n[1],s=n[2],u=n[3];return Eh(e,t,a,o)||Eh(e,t,a,u)||Eh(e,t,o,s)||Eh(e,t,s,u)}return!1},Mw=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(_v(o,t,r)||_v(o,t,n))return;a.push(o)}}),wv(a)},_w=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},_={},I={};_[t.id]=0,I[t.id]=s0(t,r,t);var B=new c0;B.add({id:t.id,value:I[t.id]});var j={};e.forEach(function(Zt){j[Zt.id]=Zt});for(var et;Object.keys(c).length;){var ut=B.minId(!1);if(ut)et=c[ut];else break;if(et===r){var ct=[];return Sw(ct,j,l,r.id),ct}delete c[et.id],B.remove(et.id),f.push(et);var pt=Mw(e,et,n,a),Mt=function(se){se.forEach(function(oe){if(f.indexOf(oe)===-1){var _e=oe.id;c[_e]||(c[_e]=oe);var Ue=I[et.id]+zd(et,oe);if(_[_e]&&Ue>=_[_e]){B.add({id:_e,value:I[_e]});return}l[_e]=et.id,_[_e]=Ue,I[_e]=_[_e]+s0(oe,r,t,o,s),B.add({id:_e,value:I[_e]})}})};Mt(pt)}return[t,r]},Cw=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Tw=function(e,t,r,n){var a=zd(e,t),o=zd(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},u0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Cw(a,s,u)){var f=Tw(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},f0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=yh(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=yh(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=yh(t);else if(n.getType()==="combo"){var _=n.getKeyShape().getBBox();if(_){var I=n.getModel(),B=I.x,j=I.y;s={x:B,y:j,width:_.width,height:_.height,minX:_.minX+B,maxX:_.maxX+B,minY:_.minY+j,maxY:_.maxY+j},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=yh(t)}else s=n&&n.getBBox();var et=xh(o,a),ut=xh(s,a),ct=Sv(et,e,t),pt=Sv(ut,t,e),Mt=mw([ct,pt]),Zt=o0(et,Mt),se=o0(ut,Mt),oe=[];oe=oe.concat(Mv(Zt)).concat(Mv(se));var _e={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[Mt,Zt,se].forEach(function(Re){oe=oe.concat(Ew(Re,_e).filter(function(qe){return bh(qe,et)&&bh(qe,ut)}))}),[{x:ct.x,y:pt.y},{x:pt.x,y:ct.y}].forEach(function(Re){bh(Re,et)&&bh(Re,ut)&&oe.push(Re)}),oe.unshift(ct),oe.push(pt),oe=wv(oe);var Ue=_w(oe,ct,pt,o,s,e,t);return Ue.unshift(e),Ue.push(t),i0(Ue)},Aw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},c0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),Iw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Ow=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Dw=function(e,t){return[e,t]},Lw=function(e,t,r,n,a){return i0(f0(e,t,r,n,a.offset))},Pw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Iw,fallbackRoute:Lw},sM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Ow,fallbackRoute:Dw},cc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Nw=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=xh(a.getBBox(),r),s=cc(o.minX,t);s<=cc(o.maxX,t);s+=1)for(var u=cc(o.minY,t);u<=cc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Cv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},l0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},d0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},h0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=xh(f,u);for(var _ in l)l[_]=cc(l[_],a.gridSize);if(c){for(var I=0,B=s;I<B.length;I++)for(var j=B[I],et=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],_=0;_<4;_++){var ut=et[_],ct=Xs.getLineIntersect(e,{x:e.x+j.stepX*l.width,y:e.y+j.stepY*l.height},ut[0],ut[1]);ct&&!_v(e,ct,f)&&(ct.id="".concat(ct.x,"|||").concat(ct.y),o.push(ct))}return o}var pt=Sv(l,e,n);return pt.id="".concat(pt.x,"|||").concat(pt.y),[pt]},Tv=function(e,t,r,n){var a=Cv(e,t),o=r[e.id];if(!o){var s=Cv(n,e);return l0(s,a)}var u=Cv({x:o.x,y:o.y},e);return l0(u,a)},Rw=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,_=e.y,I={x:l,y:_,id:c};Tv(I,o,t,r)&&(f={x:o.x===n.x?n.x:I.x*s,y:o.y===n.y?n.y:I.y*s},u.unshift(f));for(var B=t[c];B&&B.id!==c;){var j={x:l,y:_,id:c},et={x:B.x,y:B.y,id:B.id},ut=Tv(et,j,t,r);ut&&(f={x:et.x===j.x?f.x:et.x*s,y:et.y===j.y?f.y:et.y*s},u.unshift(f)),c=et.id,l=et.x,_=et.y,B=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=_===r.y?a.y:f.y,u.unshift(a),u},kw=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,h.deepMix)(Pw,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=Nw(o.obstacles.concat([r,n]),u,o.offset),c={x:cc(e.x,u),y:cc(e.y,u)},l={x:cc(t.x,u),y:cc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var _=h0(c,e,r,l,o),I=h0(l,t,n,c,o);_.forEach(function($r){delete f[$r.id]}),I.forEach(function($r){delete f[$r.id]});for(var B={},j={},et={},ut={},ct={},pt=new c0,Mt=0;Mt<_.length;Mt++){var Zt=_[Mt];B[Zt.id]=Zt,ut[Zt.id]=0,ct[Zt.id]=d0(Zt,I,o.distFunc),pt.add({id:Zt.id,value:ct[Zt.id]})}var se=o.maximumLoops,oe,_e,Ue,Re,qe,hr,nn=1/0,kn={};for(I.forEach(function($r){kn["".concat($r.x,"|||").concat($r.y)]=!0}),Object.keys(B).forEach(function($r){var yn=B[$r].id;ct[yn]<=nn&&(nn=ct[yn],oe=B[yn])});Object.keys(B).length>0&&se>0;){var En=pt.minId((se+1)%30===0);if(En)oe=B[En];else break;if(kn["".concat(oe.x,"|||").concat(oe.y)])return Rw(oe,et,c,t,e,l,u);delete B[oe.id],pt.remove(oe.id),j[oe.id]=!0;for(var Mt=0;Mt<o.directions.length;Mt++){_e=o.directions[Mt];var Kr="".concat(Math.round(oe.x)+_e.stepX,"|||").concat(Math.round(oe.y)+_e.stepY);if(Ue={x:oe.x+_e.stepX,y:oe.y+_e.stepY,id:Kr},!j[Kr]&&(hr=Tv(oe,Ue,et,c),!(hr>o.maxAllowedDirectionChange)&&!f[Kr])){B[Kr]||(B[Kr]=Ue);var ta=s[hr];Re=o.distFunc(oe,Ue)+(isNaN(ta)?u:ta),qe=ut[oe.id]+Re;var $n=ut[Kr];$n&&qe>=$n||(et[Kr]=oe,ut[Kr]=qe,ct[Kr]=qe+d0(Ue,I,o.distFunc),pt.add({id:Kr,value:ct[Kr]}))}}se-=1}return o.fallbackRoute(e,t,r,n,o)};dp("polyline",{options:{color:Jn.defaultEdge.color,size:Jn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Jn.defaultEdge.style.stroke,lineAppendWidth:Jn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Jn.edgeLabel.style.fill,fontSize:Jn.edgeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.__assign)({},Jn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,_=this.options.routeCfg,I=(0,h.mix)({},_,e.routeCfg);I.offset=n.offset;var B=this.getPath(u,f,c,l,I,!s);((0,h.isArray)(B)&&B.length<=1||(0,h.isString)(B)&&B.indexOf("L")===-1)&&(B="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(B="M0 0, L0 0");var j=(0,h.mix)({},Jn.defaultEdge.style,n,{lineWidth:e.size,path:B});return j},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(Mt){return Mt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),_=(0,h.mix)({},n,l,e.style),I=e.sourceNode,B=e.targetNode,j=_.radius,et=this.options.routeCfg,ut=(0,h.mix)({},et,e.routeCfg);ut.offset=_.offset;var ct=this.getPath(c,I,B,j,ut,!f);((0,h.isArray)(ct)&&ct.length<=1||(0,h.isString)(ct)&&ct.indexOf("L")===-1)&&(ct="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ct="M0 0, L0 0"),l.endArrow&&_.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&_.startArrow===!1&&(e.style.startArrow={path:""});var pt=(0,h.mix)(n,a.attr(),{lineWidth:o,path:ct},e.style);a&&a.attr(pt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return u0(e,n);var c=[];return(0,h.each)(e,function(B,j){j===0?c.push(["M",B.x,B.y]):c.push(["L",B.x,B.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?f0(e[e.length-1],e[0],r,t,s):kw(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var _=u0(l,n);return _}l=Aw(l);var I=Xs.pointsToPolygon(l);return I}},"single-edge");var v0=sc.cloneEvent,p0=sc.isNaN,g0=Math.abs,Bw=10,Fw=["shift","ctrl","alt","control"],zw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(p0(r)||p0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(pt){pt.set("ori-visibility",pt.get("ori-visibility")||pt.get("visible")),pt.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var _=f[c].getContainer(),I=_.get("children"),B=0,j=I;B<j.length;B++){var et=j[B],ut=et.get("isKeyShape");ut||(et.set("ori-visibility",et.get("ori-visibility")||et.get("visible")),et.hide())}}if(typeof window!="undefined"){var ct=this;this.handleDOMContextMenu=function(pt){return ct.onMouseUp(pt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=v0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(g0(this.origin.x-e.clientX)+g0(this.origin.y-e.clientY)<Bw)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(oe){return oe.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var _=f[c].get("group").get("children");_&&_.forEach(function(oe){var _e=oe.get("ori-visibility");oe.set("ori-visibility",void 0),_e&&oe.show()})}if(a>u)for(var I=n.getNodes(),B=0,j=I.length;B<j;B++)for(var et=I[B].getContainer(),ut=et.get("children"),ct=0,pt=ut;ct<pt.length;ct++){var Mt=pt[ct],Zt=Mt.get("isKeyShape");if(!Zt){var se=Mt.get("ori-visibility");Mt.set("ori-visibility",void 0),se&&Mt.show()}}}if(!this.dragging){this.origin=null;return}e=v0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(Fw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},Gw={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,b.__assign)((0,b.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,b.__assign)((0,b.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(I){var B=I.get("id");return c===B});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(I){var B=I.hasLocked();B||t.targets.push(I)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var _=[];this.targets.forEach(function(I){var B=I.getModel(),j=B.x,et=B.y,ut=B.id;_.push({x:j,y:et,id:ut})}),this.set("beforeDragNodes",_)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(I){var B=I.getEdges();B.forEach(function(j){j.isVisible()&&(t.hidenEdge[j.getID()]=!0,j.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,h.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,h.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var _=a.x-n.x+r[l].x,I=a.y-n.y+r[l].y,B={x:_,y:I};o?t.updateItem(f,B,!1):f.updatePosition(B)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:_,y:I})}else{var r=t.get("group"),n=(0,h.deepMix)({},Il.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,b.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,_=f.maxX,I=f.maxY;c<r&&(r=c),l<a&&(a=l),_>n&&(n=_),I>o&&(o=I)}var B=Math.floor(r),j=Math.floor(a),et=Math.ceil(n)-Math.floor(r),ut=Math.ceil(o)-Math.floor(a);return{x:B,y:j,width:et,height:ut,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},Uw={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,h.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,l=s.length,_=u.length,I=f.length,B=e.inactiveItems||{},j=e.activeItems||{},et=0;et<c;et++){var ut=o[et],ct=ut.getID(),pt=ut.hasState("selected");e.resetSelected&&pt&&r.setItemState(ut,"selected",!1),j[ct]&&(r.setItemState(ut,n,!1),delete j[ct]),a&&!B[ct]&&(r.setItemState(ut,a,!0),B[ct]=ut)}for(var et=0;et<l;et++){var Mt=s[et],Zt=Mt.getID(),pt=Mt.hasState("selected");e.resetSelected&&pt&&r.setItemState(Mt,"selected",!1),j[Zt]&&(r.setItemState(Mt,n,!1),delete j[Zt]),a&&!B[Zt]&&(r.setItemState(Mt,a,!0),B[Zt]=Mt)}for(var et=0;et<_;et++){var se=u[et],oe=se.getID();j[oe]&&(r.setItemState(se,n,!1),delete j[oe]),a&&!B[oe]&&(r.setItemState(se,a,!0),B[oe]=se)}for(var et=0;et<I;et++){var _e=f[et],Ue=_e.getID();j[Ue]&&(r.setItemState(_e,n,!1),delete j[Ue]),a&&!B[Ue]&&(r.setItemState(_e,a,!0),B[Ue]=_e)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete B[t.getID()]),j[t.getID()]||(r.setItemState(t,n,!0),j[t.getID()]=t);for(var Re=t.getEdges(),qe=Re.length,et=0;et<qe;et++){var se=Re[et],oe=se.getID(),hr=void 0;se.getSource()===t?hr=se.getTarget():hr=se.getSource();var nn=hr.getID();a&&B[nn]&&(r.setItemState(hr,a,!1),delete B[nn]),j[nn]||(r.setItemState(hr,n,!0),j[nn]=hr),B[oe]&&(r.setItemState(se,a,!1),delete B[oe]),j[oe]||(r.setItemState(se,n,!0),j[oe]=se),se.toFront()}}e.activeItems=j,e.inactiveItems=B,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,h.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},wh=Math.min,m0=Math.max,y0=Math.abs,x0="shift",Ww=["drag","shift","ctrl","alt","control"],Yw={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:x0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Ww.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=x0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=wh(f.x,c.x),_=m0(f.x,c.x),I=wh(f.y,c.y),B=m0(f.y,c.y),j=[],et=[];n.getNodes().forEach(function(pt){if(pt.isVisible()&&s(pt,l,_,I,B)&&o(pt,"select",t)){j.push(pt);var Mt=pt.getModel();et.push(Mt.id),n.setItemState(pt,u,!0)}});var ut=[];this.includeEdges&&j.forEach(function(pt){var Mt=pt.getOutEdges();Mt.forEach(function(Zt){if(Zt.isVisible()){var se=Zt.getModel(),oe=se.source,_e=se.target;et.includes(oe)&&et.includes(_e)&&o(Zt,"select",t)&&(ut.push(Zt),n.setItemState(Zt,t.selectedState,!0))}})});var ct=[];this.includeCombos&&n.getCombos().forEach(function(pt){if(pt.isVisible()&&s(pt,l,_,I,B)&&o(pt,"select",t)){ct.push(pt);var Mt=pt.getModel();et.push(Mt.id),n.setItemState(pt,u,!0)}}),this.selectedEdges=ut,this.selectedNodes=j,this.selectedCombos=ct,this.onSelect&&this.onSelect(j,ut,ct),n.emit("nodeselectchange",{selectedItems:{nodes:j,edges:ut,combos:ct},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:y0(e.canvasX-t.x),height:y0(e.canvasY-t.y),x:wh(e.canvasX,t.x),y:wh(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},b0="shift",Xw=["shift","ctrl","alt","control"],jw={getDefaultCfg:function(){return{multiple:!0,trigger:b0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Xw.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=b0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,h.each)(c,function(j){j!==r&&a.setItemState(j,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:_,edges:I,combos:B},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,h.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,h.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,h.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Vw=Xt,Sh=.05,Hw={getDefaultCfg:function(){return this.isFireFox=Jp()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(j,et){return Math.hypot(et.x-j.x,et.y-j.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),_=this.graph.get("canvas"),I=_.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:I.x,y:I.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Sh*u:c=1/(1-Sh*u):e.wheelDelta<0?c=1-Sh*u:c=1/(1-Sh*u),l=f*c;var _=this.get("minZoom")||n.get("minZoom"),I=this.get("maxZoom")||n.get("maxZoom");l>I?l=I:l<_&&(l=_);var B=this.get("enableOptimize");if(B){var j=this.get("optimizeZoom"),et=this.get("optimized"),ut=n.getNodes(),ct=n.getEdges(),pt=ut.length,Mt=ct.length;if(!et){for(var Zt=0;Zt<pt;Zt++){var se=ut[Zt];if(!se.destroyed)for(var oe=se.get("group").get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Re=oe[Ue];!Re.destoryed&&!Re.get("isKeyShape")&&(Re.set("ori-visibility",Re.get("ori-visibility")||Re.get("visible")),Re.hide())}}for(var qe=0;qe<Mt;qe++)for(var hr=ct[qe],oe=hr.get("group").get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Re=oe[Ue];Re.set("ori-visibility",Re.get("ori-visibility")||Re.get("visible")),Re.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var nn=setTimeout(function(){var gi=n.getZoom(),Zi=t.get("optimized");if(Zi){t.set("optimized",!1);for(var vi=0;vi<pt;vi++){var Ki=ut[vi],Mo=Ki.get("group").get("children"),Aa=Mo.length;if(gi<j){var Ei=Ki.getKeyShape(),_i=Ei.get("ori-visibility");Ei.set("ori-visibility",void 0),_i&&Ei.show()}else for(var _o=0;_o<Aa;_o++){var Ti=Mo[_o],_i=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),!Ti.get("visible")&&_i&&_i&&Ti.show()}}for(var zi=0;zi<Mt;zi++){var ts=ct[zi],Mo=ts.get("group").get("children"),Aa=Mo.length;if(gi<j){var Ei=ts.getKeyShape(),_i=Ei.get("ori-visibility");Ei.set("ori-visibility",void 0),_i&&Ei.show()}else for(var _o=0;_o<Aa;_o++){var Ti=Mo[_o];if(!Ti.get("visible")){var _i=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),_i&&Ti.show()}}}}},100);this.set("timeout",nn)}if(f<=1){var kn=void 0,En=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){kn=n.findAllByState("node",a.fixState),En=n.findAllByState("edge",a.fixState);for(var Kr=f/l,ta=kn.length,$n=0;$n<ta;$n++){var se=kn[$n],$r=se.getContainer(),yn=se.getModel(),Fn=se.getOriginStyle(),zn=se.getStateStyle(a.fixState),ia=se.get("shapeFactory").getShape(yn.type).getStateStyle(a.fixState,se)[a.fixState];if(a.fixAll){if(l<=1){var da=(0,h.clone)($r.getMatrix());da||(da=[1,0,0,0,1,0,0,0,1]);var Wa=se.getModel(),oi=Wa.x,Qi=Wa.y;da=Vw(da,[["t",-oi,-Qi],["s",Kr,Kr],["t",oi,Qi]]),$r.setMatrix(da)}}else for(var oe=$r.get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Re=oe[Ue],Li=void 0,Ji=void 0;if(a.fixLabel){var co=Re.get("type");if(co==="text"){Li=Re.attr("fontSize")||12;var jo=zn[Re.get("name")],Lo=ia[Re.get("name")],Uu=jo?jo.fontSize:12,Ts=Lo?Lo.fontSize:12,Wu=Uu||Ts||12;if(l<=1&&Re.attr("fontSize",Wu/l),Ji)break}}if(a.fixLineWidth&&Re.get("isKeyShape")){Ji=Re.attr("lineWidth")||0;var As=zn.lineWidth||ia.lineWidth||Fn.lineWidth||0;if(l<=1&&Re.attr("lineWidth",As/l),Li)break}}}for(var Is=En.length,wu=0;wu<Is;wu++)for(var hr=En[wu],$r=hr.getContainer(),oe=$r.get("children"),yn=hr.getModel(),zn=hr.getStateStyle(a.fixState),ia=hr.get("shapeFactory").getShape(yn.type).getStateStyle(a.fixState,hr)[a.fixState],_e=oe.length,Ue=0;Ue<_e;Ue++){var Re=oe[Ue],Li=void 0,Ji=void 0;if(a.fixLabel||a.fixAll){var co=Re.get("type");if(co==="text"){Li=Re.attr("fontSize")||12;var jo=zn[Re.get("name")],Lo=ia[Re.get("name")],Uu=jo?jo.fontSize:12,Ts=Lo?Lo.fontSize:12,Wu=Uu||Ts||12;if(l<=1&&Re.attr("fontSize",Wu/l),Ji)break}}if((a.fixLineWidth||a.fixAll)&&Re.get("isKeyShape")){Ji=Re.attr("lineWidth")||0;var As=zn.lineWidth||ia.lineWidth||1;if(l<=1&&Re.attr("lineWidth",As/l),Li)break}}}}var js=this.get("animate"),au=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},js,au),n.emit("wheelzoom",e)}}},E0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,pi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){pi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){pi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,_=o.getBoundingClientRect();c>n/2?c-=_.width:c+=this.offset,l>a/2?l-=_.height:l+=this.offset;var I="".concat(c,"px"),B="".concat(l,"px");pi(this.container,{left:I,top:B,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=qo('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),pi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},Zw=(0,b.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},E0),Kw=(0,b.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},E0),w0="click",$w=["click","dblclick"],qw={getDefaultCfg:function(){return{trigger:w0,onChange:function(){}}},getEvents:function(){var e,t;return $w.includes(this.trigger)?t=this.trigger:(t=w0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},Qw=sc.calculationItemsBBox,Jw=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,h.each)(r,function(n){i(n,t)})}},tS={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,_=c.y,I=c.id;u.push({x:l,y:_,id:I})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Jw(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(_){var I=_.getModel();return a.parentId,I.id!==a.id&&!t.currentItemChildCombos.includes(I.id)});l.map(function(_){var I=_.getBBox(),B=I.centerX,j=I.centerY,et=I.width,ut=u-B,ct=f-j,pt=2*Math.sqrt(ut*ut+ct*ct);c+et-pt>.8*c?r.setItemState(_,t.activeState,!0):r.setItemState(_,t.activeState,!1)})}(0,h.each)(this.targets,function(_){t.updateCombo(_,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,h.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,_=f.id;s.after.combos.push({x:c,y:l,id:_}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,h.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,h.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:_,y:I})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=Qw(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,b.__assign)((0,b.__assign)({},Il.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,b.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},S0="dblclick",eS=["click","dblclick"],rS={getDefaultCfg:function(){return{trigger:S0,relayout:!0}},getEvents:function(){var e,t;return eS.includes(this.trigger)?t=this.trigger:(t=S0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},nS=sc.isPolygonsIntersect,aS=sc.pathToPoints,M0="shift",iS=["drag","shift","ctrl","alt","control"],oS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=aS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return nS(t,r)},sS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:M0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return iS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=M0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&oS(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(_){if(_.isVisible()){var I=_.getModel(),B=I.source,j=I.target;u.includes(B)&&u.includes(j)&&n(_,"select",e)&&(f.push(_),r.setItemState(_,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,b.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},_0="click",uS=["click","drag"],C0=void 0,fS=["shift","ctrl","control","alt","meta",void 0],cS={getDefaultCfg:function(){return{trigger:_0,key:C0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;uS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=_0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&fS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=C0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,b.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,b.__assign)((0,b.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,b.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},T0="ctrl",lS=["shift","ctrl","alt","control"],dS="1",hS={getDefaultCfg:function(){return{trigger:T0,combinedKey:dS,functionName:"fitView",functionParams:[]}},getEvents:function(){return lS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=T0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},vS=["shift","ctrl","alt","control","meta"],pS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||vS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(yn){return e["".concat(yn,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),_=this.graph.get("height"),I=this.graph.get("canvas").getCanvasBBox(),B=this.scalableRange,j=this.scalableRange;B<1&&B>-1&&(B=l*B,j=_*j);var et=I.minX,ut=I.maxX,ct=I.minY,pt=I.maxY;f>0?ut<-B?f=0:ut-f<-B&&(f=ut+B):f<0&&(et>l+B?f=0:et-f>l+B&&(f=et-(l+B))),c>0?pt<-j?c=0:pt-c<-j&&(c=pt+j):c<0&&(ct>_+j?c=0:ct-c>_+j&&(c=ct-(_+j))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var Mt=this.get("enableOptimize");if(Mt){var Zt=this.get("optimizeZoom"),se=this.get("optimized"),oe=r.getNodes(),_e=r.getEdges(),Ue=oe.length,Re=_e.length;if(!se){for(var qe=0;qe<Ue;qe++){var hr=oe[qe];if(!hr.destroyed)for(var nn=hr.get("group").get("children"),kn=nn.length,En=0;En<kn;En++){var Kr=nn[En];!Kr.destoryed&&!Kr.get("isKeyShape")&&(Kr.set("ori-visibility",Kr.get("ori-visibility")||Kr.get("visible")),Kr.hide())}}for(var ta=0;ta<Re;ta++)for(var $n=_e[ta],nn=$n.get("group").get("children"),kn=nn.length,En=0;En<kn;En++){var Kr=nn[En];Kr.set("ori-visibility",Kr.get("ori-visibility")||Kr.get("visible")),Kr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var $r=setTimeout(function(){var yn=r.getZoom(),Fn=t.get("optimized");if(Fn){t.set("optimized",!1);for(var zn=0;zn<Ue;zn++){var ia=oe[zn],da=ia.get("group").get("children"),Wa=da.length;if(yn<Zt){var oi=ia.getKeyShape(),Qi=oi.get("ori-visibility");Qi&&oi.show()}else for(var Li=0;Li<Wa;Li++){var Ji=da[Li],Qi=Ji.get("ori-visibility");!Ji.get("visible")&&Qi&&Qi&&Ji.show()}}for(var co=0;co<Re;co++){var jo=_e[co],da=jo.get("group").get("children"),Wa=da.length;if(yn<Zt){var oi=jo.getKeyShape(),Qi=oi.get("ori-visibility");Qi&&oi.show()}else for(var Li=0;Li<Wa;Li++){var Ji=da[Li];if(!Ji.get("visible")){var Qi=Ji.get("ori-visibility");Qi&&Ji.show()}}}}},100);this.set("timeout",$r)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},gS={"drag-canvas":zw,"zoom-canvas":Hw,"drag-node":Gw,"activate-relations":Uw,"brush-select":Yw,"click-select":jw,"lasso-select":sS,tooltip:Zw,"edge-tooltip":Kw,"collapse-expand":qw,"drag-combo":tS,"collapse-expand-combo":rS,"create-edge":cS,"shortcuts-call":hS,"scroll-canvas":pS};(0,h.each)(gS,function(i,e){hp(e,i)});var mS=(0,b.__assign)((0,b.__assign)({},x),Rm),uM=Cs.Grid,fM=Cs.Minimap,cM=Cs.Bundling,lM=Cs.Menu,yS=Cs.Fisheye,dM=Cs.ToolBar,hM=Cs.Tooltip,xS=Cs.TimeBar,bS=Cs.ImageMinimap,ES=Cs.EdgeFilterLens,wS=Cs.SnapLine,vM=Cs.Legend,SS=Cs.Annotation,A0={version:Il.version,Graph:og,TreeGraph:mx,Util:sc,Layout:Mi.Layouts,TreeLayout:Q1,registerLayout:J1,Global:Il,registerBehavior:hp,registerCombo:Nm,registerEdge:dp,registerNode:ic,Minimap:Cs.Minimap,Grid:Cs.Grid,Bundling:Cs.Bundling,Menu:Cs.Menu,ToolBar:Cs.ToolBar,Tooltip:Cs.Tooltip,Legend:Cs.Legend,TimeBar:xS,SnapLine:wS,Fisheye:yS,ImageMinimap:bS,EdgeFilterLens:ES,Annotation:SS,Algorithm:mS,Arrow:sp,Marker:up,Shape:Wc};A0.version="4.8.17";var MS=A0,pM="4.8.17"},199905:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Graph:function(){return H},GraphWithEvent:function(){return _t},algorithm:function(){return x},comparision:function(){return w},essence:function(){return k},generate:function(){return T}});var x={};C.r(x),C.d(x,{components:function(){return ue},dfs:function(){return ne},dijkstra:function(){return _r},dijkstraAll:function(){return Or},findCycles:function(){return Dn},floydWarshall:function(){return Ut},isAcyclic:function(){return Je},postorder:function(){return te},preorder:function(){return Me},prim:function(){return Dt},tarjan:function(){return cn},topsort:function(){return jn}});var k={};C.r(k),C.d(k,{hasSelfLoop:function(){return lr},isGraph:function(){return Pr},isNullGraph:function(){return Ke},isSimpleGraph:function(){return un}});var w={};C.r(w),C.d(w,{containAllSameEdges:function(){return mt},containAllSameNodes:function(){return X},containSameEdges:function(){return ot},containSameNodes:function(){return Q},getSameEdges:function(){return M},getSameNodes:function(){return R},isGraphComplement:function(){return Rr},isGraphContainsAnother:function(){return Bt},isGraphOptionSame:function(){return O},isGraphSame:function(){return Ft}});var T={};C.r(T),C.d(T,{getGraphComplement:function(){return Dr}});var L;(function(ce){ce.DEFAULT_EDGE_NAME="\0",ce.GRAPH_NODE="\0",ce.EDGE_KEY_DELIM=""})(L||(L={}));function P(ce,jt){var pe=ce.get(jt)||0;ce.set(jt,pe+1)}function p(ce,jt){var pe=ce.get(jt);pe!==void 0&&(pe=pe-1,pe>0?ce.set(jt,pe):ce.delete(jt))}function m(ce,jt,pe,Oe){var Se=String(jt),Fe=String(pe);if(!ce&&Se>Fe){var or=Se;Se=Fe,Fe=or}return Se+L.EDGE_KEY_DELIM+Fe+L.EDGE_KEY_DELIM+(Oe===void 0?L.DEFAULT_EDGE_NAME:Oe)}function S(ce,jt,pe,Oe){var Se=String(jt),Fe=String(pe),or={v:jt,w:pe};if(!ce&&Se>Fe){var gr=or.v;or.v=or.w,or.w=gr}return Oe!==void 0&&(or.name=Oe),or}function y(ce,jt){return m(ce,jt.v,jt.w,jt.name)}function g(ce){return typeof ce=="function"}var A=function(jt){return jt.nodes().map(function(pe){var Oe=jt.node(pe),Se=jt.parent(pe),Fe={id:pe,value:Oe,parent:Se};return Fe.value===void 0&&delete Fe.value,Fe.parent===void 0&&delete Fe.parent,Fe})},E=function(jt){return jt.edges().map(function(pe){var Oe=jt.edge(pe),Se={v:pe.v,w:pe.w,value:Oe,name:pe.name};return Se.name===void 0&&delete Se.name,Se.value===void 0&&delete Se.value,Se})},D=function(jt){var pe={options:{directed:jt.isDirected(),multigraph:jt.isMultigraph(),compound:jt.isCompound()},nodes:A(jt),edges:E(jt),value:jt.graph()};return pe.value===void 0&&delete pe.value,pe},F=function(jt){var pe=new H(jt.options);return jt.value!==void 0&&pe.setGraph(jt.value),jt.nodes.forEach(function(Oe){pe.setNode(Oe.id,Oe.value),Oe.parent&&pe.setParent(Oe.id,Oe.parent)}),jt.edges.forEach(function(Oe){pe.setEdge(Oe.v,Oe.w,Oe.value,Oe.name)}),pe};function Y(ce,jt){var pe=Object.keys(ce);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(ce);jt&&(Oe=Oe.filter(function(Se){return Object.getOwnPropertyDescriptor(ce,Se).enumerable})),pe.push.apply(pe,Oe)}return pe}function b(ce){for(var jt=1;jt<arguments.length;jt++){var pe=arguments[jt]!=null?arguments[jt]:{};jt%2?Y(Object(pe),!0).forEach(function(Oe){h(ce,Oe,pe[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(pe)):Y(Object(pe)).forEach(function(Oe){Object.defineProperty(ce,Oe,Object.getOwnPropertyDescriptor(pe,Oe))})}return ce}function h(ce,jt,pe){return jt in ce?Object.defineProperty(ce,jt,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ce[jt]=pe,ce}function $(ce,jt){if(!(ce instanceof jt))throw new TypeError("Cannot call a class as a function")}function U(ce,jt){for(var pe=0;pe<jt.length;pe++){var Oe=jt[pe];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(ce,Oe.key,Oe)}}function W(ce,jt,pe){return jt&&U(ce.prototype,jt),pe&&U(ce,pe),Object.defineProperty(ce,"prototype",{writable:!1}),ce}var V={compound:!1,multigraph:!1,directed:!0},H=function(){function ce(){var jt=this,pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,ce),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=L.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return jt.directed},this.isMultigraph=function(){return jt.multigraph},this.isCompound=function(){return jt.compound},this.setGraph=function(Se){return jt.label=Se,jt},this.graph=function(){return jt.label},this.setDefaultNodeLabel=function(Se){return g(Se)?jt.defaultNodeLabelFn=Se:jt.defaultNodeLabelFn=function(){return Se},jt},this.nodeCount=function(){return jt.nodeCountNum},this.node=function(Se){return jt.nodesLabelMap.get(Se)},this.nodes=function(){return Array.from(jt.nodesLabelMap.keys())},this.sources=function(){return jt.nodes().filter(function(Se){var Fe;return!(!((Fe=jt.inEdgesMap.get(Se))===null||Fe===void 0)&&Fe.size)})},this.sinks=function(){return jt.nodes().filter(function(Se){var Fe;return!(!((Fe=jt.outEdgesMap.get(Se))===null||Fe===void 0)&&Fe.size)})},this.setNodes=function(Se,Fe){return Se.map(function(or){return jt.setNode(or,Fe)}),jt},this.hasNode=function(Se){return jt.nodesLabelMap.has(Se)},this.checkCompound=function(){if(!jt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Se){if(jt.isCompound()){var Fe,or=(Fe=jt.parentMap)===null||Fe===void 0?void 0:Fe.get(Se);if(or!==jt.GRAPH_NODE)return or}},this.removeFromParentsChildList=function(Se){var Fe=jt.parentMap.get(Se);jt.childrenMap.get(Fe).delete(Se)},this.setParent=function(Se,Fe){var or,gr;jt.checkCompound();for(var Jr=Fe===void 0?jt.GRAPH_NODE:Fe,Gn=jt.parent(Jr);Gn;){if(Se===Gn)throw new Error("Setting "+Fe+" as parent of "+Se+" would create a cycle");Gn=jt.parent(Gn)}Fe&&jt.setNode(Fe),jt.setNode(Se),jt.removeFromParentsChildList(Se),(or=jt.parentMap)===null||or===void 0||or.set(Se,Jr);var pn=jt.childrenMap.get(Jr);return pn.set(Se,!0),(gr=jt.childrenMap)===null||gr===void 0||gr.set(Jr,pn),jt},this.children=function(Se){var Fe=Se===void 0?jt.GRAPH_NODE:Se;if(jt.isCompound()){var or,gr=(or=jt.childrenMap)===null||or===void 0?void 0:or.get(Fe);return gr?Array.from(gr.keys()):void 0}if(Fe===jt.GRAPH_NODE)return jt.nodes();if(Se&&jt.hasNode(Se))return[]},this.predecessors=function(Se){var Fe=jt.predecessorsMap.get(Se);return Fe?Array.from(Fe.keys()):void 0},this.successors=function(Se){var Fe=jt.successorsMap.get(Se);return Fe?Array.from(Fe.keys()):void 0},this.neighbors=function(Se){var Fe;if(jt.hasNode(Se))return Array.from(new Set((Fe=jt.predecessors(Se))===null||Fe===void 0?void 0:Fe.concat(jt.successors(Se))))},this.isLeaf=function(Se){var Fe;if(jt.isDirected()){var or;return!(!((or=jt.successors(Se))===null||or===void 0)&&or.length)}return!(!((Fe=jt.neighbors(Se))===null||Fe===void 0)&&Fe.length)},this.filterNodes=function(Se){var Fe=jt.directed,or=jt.multigraph,gr=jt.compound,Jr=new ce({directed:Fe,multigraph:or,compound:gr});if(Jr.setGraph(jt.graph()),jt.nodes().forEach(function(pn){Se(pn)&&Jr.setNode(pn,jt.node(pn))}),jt.edges().forEach(function(pn){Jr.hasNode(pn.v)&&Jr.hasNode(pn.w)&&Jr.setEdgeObj(pn,jt.edge(pn))}),gr){var Gn=function(qn){for(var ln=jt.parent(qn);ln!==void 0&&!Jr.hasNode(ln);)ln=jt.parent(ln);return ln};Jr.nodes().forEach(function(pn){Jr.setParent(pn,Gn(pn))})}return Jr},this.setDefaultEdgeLabel=function(Se){return g(Se)?jt.defaultEdgeLabelFn=Se:jt.defaultEdgeLabelFn=function(){return Se},jt},this.edgeCount=function(){return jt.edgeCountNum},this.setEdgeObj=function(Se,Fe){return jt.setEdge(Se.v,Se.w,Fe,Se.name)},this.setPath=function(Se,Fe){return Se.reduce(function(or,gr){return jt.setEdge(or,gr,Fe),gr}),jt},this.edgeFromArgs=function(Se,Fe,or){return jt.edge({v:Se,w:Fe,name:or})},this.edge=function(Se){return jt.edgesLabelsMap.get(y(jt.isDirected(),Se))},this.hasEdge=function(Se,Fe,or){return jt.edgesLabelsMap.has(y(jt.isDirected(),{v:Se,w:Fe,name:or}))},this.removeEdgeObj=function(Se){var Fe=Se.v,or=Se.w,gr=Se.name;return jt.removeEdge(Fe,or,gr)},this.edges=function(){return Array.from(jt.edgesMap.values())},this.inEdges=function(Se,Fe){var or=jt.inEdgesMap.get(Se);if(or)return Array.from(or.values()).filter(function(gr){return!Fe||gr.v===Fe})},this.outEdges=function(Se,Fe){var or=jt.outEdgesMap.get(Se);if(or)return Array.from(or.values()).filter(function(gr){return!Fe||gr.w===Fe})},this.nodeEdges=function(Se,Fe){var or;if(jt.hasNode(Se))return(or=jt.inEdges(Se,Fe))===null||or===void 0?void 0:or.concat(jt.outEdges(Se,Fe))},this.toJSON=function(){return D(jt)},this.nodeInDegree=function(Se){var Fe=jt.inEdgesMap.get(Se);return Fe?Fe.size:0},this.nodeOutDegree=function(Se){var Fe=jt.outEdgesMap.get(Se);return Fe?Fe.size:0},this.nodeDegree=function(Se){return jt.nodeInDegree(Se)+jt.nodeOutDegree(Se)},this.source=function(Se){return Se.v},this.target=function(Se){return Se.w};var Oe=b(b({},V),pe);this.compound=Oe.compound,this.directed=Oe.directed,this.multigraph=Oe.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(ce,[{key:"setNode",value:function(pe,Oe){var Se=this.nodesLabelMap,Fe=this.defaultNodeLabelFn,or=this.isCompound,gr=this.parentMap,Jr=this.childrenMap,Gn=this.inEdgesMap,pn=this.outEdgesMap,qn=this.predecessorsMap,ln=this.successorsMap;if(Se.has(pe))return Oe!==void 0&&Se.set(pe,Oe),this;if(Se.set(pe,Oe||Fe(pe)),or()){var Vn;gr==null||gr.set(pe,this.GRAPH_NODE),Jr==null||Jr.set(pe,new Map),Jr!=null&&Jr.has(this.GRAPH_NODE)||Jr==null||Jr.set(this.GRAPH_NODE,new Map),Jr==null||(Vn=Jr.get(this.GRAPH_NODE))===null||Vn===void 0||Vn.set(pe,!0)}return[Gn,pn,qn,ln].forEach(function(ca){return ca.set(pe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(pe){var Oe=this;if(this.hasNode(pe)){var Se=function(Ea){Oe.removeEdge(Ea.v,Ea.w,Ea.name)},Fe=this.inEdgesMap,or=this.outEdgesMap,gr=this.predecessorsMap,Jr=this.successorsMap,Gn=this.nodesLabelMap;if(this.isCompound()){var pn,qn,ln;this.removeFromParentsChildList(pe),(pn=this.parentMap)===null||pn===void 0||pn.delete(pe),(qn=this.children(pe))===null||qn===void 0||qn.forEach(function(ba){return Oe.setParent(ba)}),(ln=this.childrenMap)===null||ln===void 0||ln.delete(pe)}var Vn=Fe.get(pe),ca=or.get(pe);Array.from(Vn.values()).forEach(function(ba){return Se(ba)}),Array.from(ca.values()).forEach(function(ba){return Se(ba)}),Gn.delete(pe),Fe.delete(pe),or.delete(pe),gr.delete(pe),Jr.delete(pe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(pe,Oe,Se,Fe){var or,gr,Jr=S(this.isDirected(),pe,Oe,Fe),Gn=y(this.isDirected(),Jr),pn=Jr.v,qn=Jr.w;if(this.edgesLabelsMap.has(Gn))return this.edgesLabelsMap.set(Gn,Se),this;if(Fe!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(pn),this.setNode(qn),this.edgesLabelsMap.set(Gn,Se||this.defaultEdgeLabelFn(pn,qn,Fe)),Object.freeze(Jr),this.edgesMap.set(Gn,Jr);var ln=this.predecessorsMap.get(qn),Vn=this.successorsMap.get(pn);return P(ln,pn),P(Vn,qn),(or=this.inEdgesMap.get(qn))===null||or===void 0||or.set(Gn,Jr),(gr=this.outEdgesMap.get(pn))===null||gr===void 0||gr.set(Gn,Jr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(pe,Oe,Se){var Fe=m(this.isDirected(),pe,Oe,Se),or=this.edgesMap.get(Fe);if(or){var gr=S(this.isDirected(),pe,Oe,Se),Jr=gr.v,Gn=gr.w;this.edgesLabelsMap.delete(Fe),this.edgesMap.delete(Fe);var pn=this.predecessorsMap.get(Gn),qn=this.successorsMap.get(Jr);p(pn,Jr),p(qn,Gn),this.inEdgesMap.get(Gn).delete(Fe),this.outEdgesMap.get(Jr).delete(Fe),this.edgeCountNum-=1}return this}}]),ce}();H.fromJSON=F;function q(ce){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},q(ce)}function tt(ce,jt){if(!(ce instanceof jt))throw new TypeError("Cannot call a class as a function")}function rt(ce,jt){for(var pe=0;pe<jt.length;pe++){var Oe=jt[pe];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(ce,Oe.key,Oe)}}function ft(ce,jt,pe){return jt&&rt(ce.prototype,jt),pe&&rt(ce,pe),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function it(){return typeof Reflect!="undefined"&&Reflect.get?it=Reflect.get:it=function(jt,pe,Oe){var Se=bt(jt,pe);if(Se){var Fe=Object.getOwnPropertyDescriptor(Se,pe);return Fe.get?Fe.get.call(arguments.length<3?jt:Oe):Fe.value}},it.apply(this,arguments)}function bt(ce,jt){for(;!Object.prototype.hasOwnProperty.call(ce,jt)&&(ce=yt(ce),ce!==null););return ce}function gt(ce,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(jt&&jt.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),jt&&Xt(ce,jt)}function Xt(ce,jt){return Xt=Object.setPrototypeOf||function(Oe,Se){return Oe.__proto__=Se,Oe},Xt(ce,jt)}function Ct(ce){var jt=J();return function(){var Oe=yt(ce),Se;if(jt){var Fe=yt(this).constructor;Se=Reflect.construct(Oe,arguments,Fe)}else Se=Oe.apply(this,arguments);return At(this,Se)}}function At(ce,jt){if(jt&&(q(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(ce)}function Z(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ce){return!1}}function yt(ce){return yt=Object.setPrototypeOf?Object.getPrototypeOf:function(pe){return pe.__proto__||Object.getPrototypeOf(pe)},yt(ce)}var _t=function(ce){gt(pe,ce);var jt=Ct(pe);function pe(){var Oe;tt(this,pe);for(var Se=arguments.length,Fe=new Array(Se),or=0;or<Se;or++)Fe[or]=arguments[or];return Oe=jt.call.apply(jt,[this].concat(Fe)),Oe.eventPool={},Oe}return ft(pe,[{key:"appendEvent",value:function(Se,Fe){this.eventPool[Se]||(this.eventPool[Se]=[]),this.eventPool[Se].push(Fe)}},{key:"removeEvent",value:function(Se,Fe){if(this.eventPool[Se]){var or=this.eventPool[Se].indexOf(Fe);or>-1&&this.eventPool[Se].splice(or,1)}}},{key:"emitEvent",value:function(Se){for(var Fe=arguments.length,or=new Array(Fe>1?Fe-1:0),gr=1;gr<Fe;gr++)or[gr-1]=arguments[gr];this.eventPool[Se]&&this.eventPool[Se].forEach(function(Jr){Jr.apply(void 0,or)})}},{key:"setNode",value:function(Se,Fe){return it(yt(pe.prototype),"setNode",this).call(this,Se,Fe),this.emitEvent("nodeAdd",Se,Fe),this}},{key:"removeNode",value:function(Se){return it(yt(pe.prototype),"removeNode",this).call(this,Se),this.emitEvent("nodeRemove",Se),this}},{key:"setEdge",value:function(Se,Fe,or,gr){return it(yt(pe.prototype),"setEdge",this).call(this,Se,Fe,or,gr),this.emitEvent("edgeAdd",Se,Fe,or,gr),this}},{key:"removeEdge",value:function(Se,Fe,or){return it(yt(pe.prototype),"removeEdge",this).call(this,Se,Fe,or),this.emitEvent("edgeRemove",Se,Fe,or),this}}]),pe}(H);function nt(ce,jt){for(var pe=0;pe<jt.length;pe++){var Oe=jt[pe];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(ce,Oe.key,Oe)}}function vt(ce,jt,pe){return jt&&nt(ce.prototype,jt),pe&&nt(ce,pe),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function It(ce,jt){if(!(ce instanceof jt))throw new TypeError("Cannot call a class as a function")}var Pt=vt(function ce(){var jt=this;It(this,ce),this.arr=[],this.keyIndice=new Map,this.size=function(){return jt.arr.length},this.keys=function(){return jt.arr.map(function(pe){return pe.key})},this.has=function(pe){return jt.keyIndice.has(pe)},this.priority=function(pe){var Oe=jt.keyIndice.get(pe);if(Oe!==void 0)return jt.arr[Oe].priority},this.swap=function(pe,Oe){var Se=jt.arr,Fe=jt.keyIndice,or=[Se[pe],Se[Oe]],gr=or[0],Jr=or[1];Se[pe]=Jr,Se[Oe]=gr,Fe.set(gr.key,Oe),Fe.set(Jr.key,pe)},this.innerDecrease=function(pe){for(var Oe=jt.arr,Se=Oe[pe].priority,Fe,or=pe;or!==0;){var gr;if(Fe=or>>1,((gr=Oe[Fe])===null||gr===void 0?void 0:gr.priority)<Se)break;jt.swap(or,Fe),or=Fe}},this.heapify=function(pe){var Oe=jt.arr,Se=pe<<1,Fe=Se+1,or=pe;Se<Oe.length&&(or=Oe[Se].priority<Oe[or].priority?Se:or,Fe<Oe.length&&(or=Oe[Fe].priority<Oe[or].priority?Fe:or),or!==pe&&(jt.swap(pe,or),jt.heapify(or)))},this.min=function(){if(jt.size()===0)throw new Error("Queue underflow");return jt.arr[0].key},this.add=function(pe,Oe){var Se=jt.keyIndice,Fe=jt.arr;if(!Se.has(pe)){var or=Fe.length;return Se.set(pe,or),Fe.push({key:pe,priority:Oe}),jt.innerDecrease(or),!0}return!1},this.removeMin=function(){jt.swap(0,jt.arr.length-1);var pe=jt.arr.pop();return jt.keyIndice.delete(pe.key),jt.heapify(0),pe.key},this.decrease=function(pe,Oe){if(!jt.has(pe))throw new Error("There's no key named ".concat(pe));var Se=jt.keyIndice.get(pe);if(Oe>jt.arr[Se].priority)throw new Error("New priority is greater than current priority.Key: ".concat(pe," Old: + ").concat(jt.arr[Se].priority," New: ").concat(Oe));jt.arr[Se].priority=Oe,jt.innerDecrease(Se)}}),St=function(jt,pe){var Oe=new H,Se=new Map,Fe=new Pt,or;function gr(pn){var qn=pn.v===or?pn.w:pn.v,ln=Fe.priority(qn);if(ln!==void 0){var Vn=pe(pn);Vn<ln&&(Se.set(qn,or),Fe.decrease(qn,Vn))}}if(jt.nodeCount()===0)return Oe;jt.nodes().forEach(function(pn){Fe.add(pn,Number.POSITIVE_INFINITY),Oe.setNode(pn)}),Fe.decrease(jt.nodes()[0],0);for(var Jr=!1;Fe.size()>0;){var Gn;if(or=Fe.removeMin(),Se.has(or))Oe.setEdge(or,Se.get(or));else{if(Jr)throw new Error("Input graph is not connected: "+jt.graph());Jr=!0}(Gn=jt.nodeEdges(or))===null||Gn===void 0||Gn.forEach(gr)}return Oe},Dt=St,Qt=function(jt){var pe=new Set,Oe=[],Se=jt.nodes();return Se.forEach(function(Fe){for(var or=[],gr=[Fe];gr.length>0;){var Jr=gr.pop();if(!pe.has(Jr)){var Gn,pn;pe.add(Jr),or.push(Jr),(Gn=jt.successors(Jr))===null||Gn===void 0||Gn.forEach(function(qn){return gr.push(qn)}),(pn=jt.predecessors(Jr))===null||pn===void 0||pn.forEach(function(qn){return gr.push(qn)})}}or.length&&Oe.push(or)}),Oe},ue=Qt,ie=function ce(jt,pe,Oe,Se,Fe,or){Se.includes(pe)||(Se.push(pe),Oe||or.push(pe),Fe(pe).forEach(function(gr){return ce(jt,gr,Oe,Se,Fe,or)}),Oe&&or.push(pe))},Lt=function(jt,pe,Oe){var Se=Array.isArray(pe)?pe:[pe],Fe=function(Gn){return jt.isDirected()?jt.successors(Gn):jt.neighbors(Gn)},or=[],gr=[];return Se.forEach(function(Jr){if(jt.hasNode(Jr))ie(jt,Jr,Oe==="post",gr,Fe,or);else throw new Error("Graph does not have node: "+Jr)}),or},ne=Lt;function ve(ce,jt){return Jt(ce)||xe(ce,jt)||ae(ce,jt)||Wt()}function Wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(ce,jt){if(ce){if(typeof ce=="string")return Ce(ce,jt);var pe=Object.prototype.toString.call(ce).slice(8,-1);if(pe==="Object"&&ce.constructor&&(pe=ce.constructor.name),pe==="Map"||pe==="Set")return Array.from(ce);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return Ce(ce,jt)}}function Ce(ce,jt){(jt==null||jt>ce.length)&&(jt=ce.length);for(var pe=0,Oe=new Array(jt);pe<jt;pe++)Oe[pe]=ce[pe];return Oe}function xe(ce,jt){var pe=ce==null?null:typeof Symbol!="undefined"&&ce[Symbol.iterator]||ce["@@iterator"];if(pe!=null){var Oe=[],Se=!0,Fe=!1,or,gr;try{for(pe=pe.call(ce);!(Se=(or=pe.next()).done)&&(Oe.push(or.value),!(jt&&Oe.length===jt));Se=!0);}catch(Jr){Fe=!0,gr=Jr}finally{try{!Se&&pe.return!=null&&pe.return()}finally{if(Fe)throw gr}}return Oe}}function Jt(ce){if(Array.isArray(ce))return ce}var we=function(){return 1},Tt=function(jt,pe,Oe,Se){return Pe(jt,pe,Oe||we,Se||function(Fe){return jt.outEdges(Fe)})},Pe=function(jt,pe,Oe,Se){var Fe=new Map,or=new Pt,gr,Jr,Gn=function(ln){var Vn=ln.v!==gr?ln.v:ln.w,ca=Fe.get(Vn),ba=Oe(ln),Ea=Jr.distance+ba;if(ba<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ln+" Weight: "+ba);Ea<ca.distance&&(ca.distance=Ea,ca.predecessor=gr,or.decrease(Vn,Ea))};for(jt.nodes().forEach(function(qn){var ln=qn===pe?0:Number.POSITIVE_INFINITY;Fe.set(qn,{distance:ln}),or.add(qn,ln)});or.size()>0&&(gr=or.removeMin(),Jr=Fe.get(gr),!(Jr&&Jr.distance===Number.POSITIVE_INFINITY));)Se(gr).forEach(Gn);var pn={};return Array.from(Fe.entries()).forEach(function(qn){var ln=ve(qn,2),Vn=ln[0],ca=ln[1];return pn[String(Vn)]=ca,pn}),pn},_r=Tt,Ar=function(jt,pe,Oe){var Se={};return jt.nodes().forEach(function(Fe){return Se[String(Fe)]=_r(jt,Fe,pe,Oe),Se}),Se},Or=Ar,Br=function(jt){var pe=0,Oe=[],Se=new Map,Fe=[];function or(gr){var Jr,Gn={onStack:!0,lowlink:pe,index:pe};if(Se.set(gr,Gn),pe+=1,Oe.push(gr),(Jr=jt.successors(gr))===null||Jr===void 0||Jr.forEach(function(Vn){var ca;if(Se.has(Vn)){if(!((ca=Se.get(Vn))===null||ca===void 0)&&ca.onStack){var Ea=Se.get(Vn);Gn.lowlink=Math.min(Gn.lowlink,Ea.index)}}else{or(Vn);var ba=Se.get(Vn);Gn.lowlink=Math.min(Gn.lowlink,ba.lowlink)}}),Gn.lowlink===Gn.index){var pn=[],qn;do{qn=Oe.pop();var ln=Se.get(qn);ln.onStack=!1,pn.push(qn)}while(gr!==qn);Fe.push(pn)}}return jt.nodes().forEach(function(gr){Se.has(gr)||or(gr)}),Fe},cn=Br,an=function(jt){return cn(jt).filter(function(pe){return pe.length>1||pe.length===1&&jt.hasEdge(pe[0],pe[0])})},Dn=an;function Un(ce){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Un(ce)}function Xn(ce,jt){for(var pe=0;pe<jt.length;pe++){var Oe=jt[pe];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(ce,Oe.key,Oe)}}function xr(ce,jt,pe){return jt&&Xn(ce.prototype,jt),pe&&Xn(ce,pe),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function $e(ce,jt){if(!(ce instanceof jt))throw new TypeError("Cannot call a class as a function")}function Tr(ce,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(jt&&jt.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),jt&&sn(ce,jt)}function qr(ce){var jt=dn();return function(){var Oe=Wn(ce),Se;if(jt){var Fe=Wn(this).constructor;Se=Reflect.construct(Oe,arguments,Fe)}else Se=Oe.apply(this,arguments);return gn(this,Se)}}function gn(ce,jt){if(jt&&(Un(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xn(ce)}function xn(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function Rn(ce){var jt=typeof Map=="function"?new Map:void 0;return Rn=function(Oe){if(Oe===null||!hn(Oe))return Oe;if(typeof Oe!="function")throw new TypeError("Super expression must either be null or a function");if(typeof jt!="undefined"){if(jt.has(Oe))return jt.get(Oe);jt.set(Oe,Se)}function Se(){return Mr(Oe,arguments,Wn(this).constructor)}return Se.prototype=Object.create(Oe.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),sn(Se,Oe)},Rn(ce)}function Mr(ce,jt,pe){return dn()?Mr=Reflect.construct:Mr=function(Se,Fe,or){var gr=[null];gr.push.apply(gr,Fe);var Jr=Function.bind.apply(Se,gr),Gn=new Jr;return or&&sn(Gn,or.prototype),Gn},Mr.apply(null,arguments)}function dn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ce){return!1}}function hn(ce){return Function.toString.call(ce).indexOf("[native code]")!==-1}function sn(ce,jt){return sn=Object.setPrototypeOf||function(Oe,Se){return Oe.__proto__=Se,Oe},sn(ce,jt)}function Wn(ce){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(pe){return pe.__proto__||Object.getPrototypeOf(pe)},Wn(ce)}var Mn=function(ce){Tr(pe,ce);var jt=qr(pe);function pe(){return $e(this,pe),jt.apply(this,arguments)}return xr(pe)}(Rn(Error));function In(ce){var jt=new Set,pe=new Set,Oe=[];function Se(Fe){if(pe.has(Fe))throw new Mn;if(!jt.has(Fe)){var or;pe.add(Fe),jt.add(Fe),(or=ce.predecessors(Fe))===null||or===void 0||or.forEach(Se),pe.delete(Fe),Oe.push(Fe)}}if(ce.sinks().forEach(Se),jt.size!==ce.nodeCount())throw new Mn;return Oe}var jn=In,at=function(jt){try{jn(jt)}catch(pe){if(pe instanceof Mn)return!1;throw pe}return!0},Je=at,Ht=function(jt,pe){return ne(jt,pe,"post")},te=Ht,wt=function(jt,pe){return ne(jt,pe,"pre")},Me=wt,kt=function(){return 1};function qt(ce,jt,pe){return dt(ce,jt||kt,pe||function(Oe){return ce.outEdges(Oe)})}function dt(ce,jt,pe){var Oe={},Se=ce.nodes();return Se.forEach(function(Fe){var or=String(Fe);Oe[or]={},Oe[or][or]={distance:0},Se.forEach(function(gr){Fe!==gr&&(Oe[or][String(gr)]={distance:Number.POSITIVE_INFINITY})}),pe(Fe).forEach(function(gr){var Jr=gr.v===Fe?gr.w:gr.v,Gn=jt(gr);Oe[or][String(Jr)]={distance:Gn,predecessor:Fe}})}),Se.forEach(function(Fe){var or=String(Fe),gr=Oe[or];Se.forEach(function(Jr){var Gn=String(Jr),pn=Oe[Gn];Se.forEach(function(qn){var ln=String(qn),Vn=pn[or],ca=gr[ln],ba=pn[ln],Ea=Vn.distance+ca.distance;Ea<ba.distance&&(ba.distance=Ea,ba.predecessor=ca.predecessor)})})}),Oe}var Ut=qt,Q=function(jt,pe){for(var Oe=jt.nodes(),Se=0;Se<Oe.length;Se++){var Fe=Oe[Se];if(pe.hasNode(Fe))return!0}return!1},ot=function(jt,pe){for(var Oe=jt.edges(),Se=0;Se<Oe.length;Se++){var Fe=Oe[Se];if(pe.hasEdge(Fe.v,Fe.w,Fe.name))return!0}return!1},R=function(jt,pe){var Oe=jt.nodes(),Se=Oe.filter(function(Fe){return pe.hasNode(Fe)});return Se},M=function(jt,pe){var Oe=jt.edges(),Se=Oe.filter(function(Fe){return pe.hasEdge(Fe.v,Fe.w,Fe.name)});return Se},O=function(jt,pe){return jt.isCompound()===pe.isCompound()&&jt.isDirected()===pe.isDirected()&&jt.isMultigraph()===pe.isMultigraph()},X=function(jt,pe){var Oe=R(jt,pe);return Oe.length===jt.nodes().length},mt=function(jt,pe){var Oe=M(jt,pe);return Oe.length===jt.edges().length},Ft=function(jt,pe){return O(jt,pe)&&jt.nodeCount()===pe.nodeCount()&&X(jt,pe)&&jt.edgeCount()===pe.edgeCount()&&mt(jt,pe)},Bt=function(jt,pe){return X(jt,pe)&&mt(jt,pe)};function ee(ce,jt){return Ze(ce)||pr(ce,jt)||me(ce,jt)||Le()}function Le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(ce,jt){if(ce){if(typeof ce=="string")return Xe(ce,jt);var pe=Object.prototype.toString.call(ce).slice(8,-1);if(pe==="Object"&&ce.constructor&&(pe=ce.constructor.name),pe==="Map"||pe==="Set")return Array.from(ce);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return Xe(ce,jt)}}function Xe(ce,jt){(jt==null||jt>ce.length)&&(jt=ce.length);for(var pe=0,Oe=new Array(jt);pe<jt;pe++)Oe[pe]=ce[pe];return Oe}function pr(ce,jt){var pe=ce==null?null:typeof Symbol!="undefined"&&ce[Symbol.iterator]||ce["@@iterator"];if(pe!=null){var Oe=[],Se=!0,Fe=!1,or,gr;try{for(pe=pe.call(ce);!(Se=(or=pe.next()).done)&&(Oe.push(or.value),!(jt&&Oe.length===jt));Se=!0);}catch(Jr){Fe=!0,gr=Jr}finally{try{!Se&&pe.return!=null&&pe.return()}finally{if(Fe)throw gr}}return Oe}}function Ze(ce){if(Array.isArray(ce))return ce}function Pr(ce){return ce instanceof H}function un(ce){if(ce.isMultigraph())return!1;for(var jt=ce.edges(),pe=new Map,Oe=0;Oe<jt.length;Oe++){var Se=jt[Oe];if(Se.v===Se.w)return!1;var Fe=[Se.v,Se.w].sort(),or=ee(Fe,2),gr=or[0],Jr=or[1],Gn="".concat(gr,"-").concat(Jr);if(pe.has(Gn))return!1;pe.set(Gn,!0)}return!0}function Ke(ce){return ce.nodes().length===0}function lr(ce){for(var jt=ce.edges(),pe=0;pe<jt.length;pe++){var Oe=jt[pe];if(Oe.v===Oe.w)return!0}return!1}var Rr=function(jt,pe){if(!un(jt)||!un(pe)||!X(jt,pe)||ot(jt,pe))return!1;var Oe=jt.nodeCount();return jt.edgeCount()+pe.edgeCount()===Oe*(Oe-1)/2},Dr=function(jt){if(!un(jt))return null;for(var pe=jt.nodeCount(),Oe=new H({compound:jt.isCompound(),directed:jt.isDirected(),multigraph:jt.isMultigraph()}),Se=jt.nodes(),Fe=0;Fe<pe;Fe++){var or=Se[Fe];Oe.setNode(or,jt.node(or));for(var gr=Fe+1;gr<pe;gr++){var Jr=Se[gr];jt.hasEdge(or,Jr)||Oe.setEdge(or,Jr)}}return Oe}},981746:function(Ve){(function(C,x){Ve.exports=x()})(typeof self!="undefined"?self:this,function(){return function(z){var C={};function x(k){if(C[k])return C[k].exports;var w=C[k]={i:k,l:!1,exports:{}};return z[k].call(w.exports,w,w.exports,x),w.l=!0,w.exports}return x.m=z,x.c=C,x.d=function(k,w,T){x.o(k,w)||Object.defineProperty(k,w,{configurable:!1,enumerable:!0,get:T})},x.n=function(k){var w=k&&k.__esModule?function(){return k.default}:function(){return k};return x.d(w,"a",w),w},x.o=function(k,w){return Object.prototype.hasOwnProperty.call(k,w)},x.p="",x(x.s=36)}([function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Array.isArray?Array.isArray(w):Object(k.a)(w,"Array")}},function(z,C,x){"use strict";var k=function(w){return w!==null&&typeof w!="function"&&isFinite(w.length)};C.a=k},function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Object(k.a)(w,"Function")}},function(z,C,x){"use strict";var k={}.toString,w=function(T,L){return k.call(T)==="[object "+L+"]"};C.a=w},function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Object(k.a)(w,"String")}},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Number")};C.a=w},function(z,C,x){var k=x(38),w=k.mix;function T(L,P,p,m){return m===void 0&&(m="height"),p==="center"?(L[m]+P[m])/2:L.height}z.exports={assign:w,getHeight:T}},function(z,C,x){"use strict";var k=function(w){return w==null};C.a=k},function(z,C,x){"use strict";var k=x(0),w=x(12);function T(L,P){if(L){var p;if(Object(k.a)(L))for(var m=0,S=L.length;m<S&&(p=P(L[m],m),p!==!1);m++);else if(Object(w.a)(L)){for(var y in L)if(L.hasOwnProperty(y)&&(p=P(L[y],y),p===!1))break}}}C.a=T},function(z,C,x){"use strict";var k=x(7);C.a=function(w){return Object(k.a)(w)?"":w.toString()}},function(z,C,x){"use strict";var k=x(14),w=x(3),T=function(L){if(!Object(k.a)(L)||!Object(w.a)(L,"Object"))return!1;if(Object.getPrototypeOf(L)===null)return!0;for(var P=L;Object.getPrototypeOf(P)!==null;)P=Object.getPrototypeOf(P);return Object.getPrototypeOf(L)===P};C.a=T},function(z,C,x){var k=x(18),w=function(){function T(P,p){p===void 0&&(p={});var m=this;m.options=p,m.rootNode=k(P,p)}var L=T.prototype;return L.execute=function(){throw new Error("please override this method")},T}();z.exports=w},function(z,C,x){"use strict";C.a=function(k){var w=typeof k;return k!==null&&w==="object"||w==="function"}},function(z,C,x){"use strict";var k=x(1),w=function(T,L){return Object(k.a)(T)?T.indexOf(L)>-1:!1};C.a=w},function(z,C,x){"use strict";var k=function(w){return typeof w=="object"&&w!==null};C.a=k},function(z,C,x){"use strict";var k=x(8),w=x(2),T=Object.values?function(L){return Object.values(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(p)}),P};C.a=T},function(z,C,x){"use strict";C.a=w;function k(T,L){for(var P in L)L.hasOwnProperty(P)&&P!=="constructor"&&L[P]!==void 0&&(T[P]=L[P])}function w(T,L,P,p){return L&&k(T,L),P&&k(T,P),p&&k(T,p),T}},function(z,C,x){var k=x(35),w=["LR","RL","TB","BT","H","V"],T=["LR","RL","H"],L=function(m){return T.indexOf(m)>-1},P=w[0];z.exports=function(p,m,S){var y=m.direction||P;if(m.isHorizontal=L(y),y&&w.indexOf(y)===-1)throw new TypeError("Invalid direction: "+y);if(y===w[0])S(p,m);else if(y===w[1])S(p,m),p.right2left();else if(y===w[2])S(p,m);else if(y===w[3])S(p,m),p.bottom2top();else if(y===w[4]||y===w[5]){var g=k(p,m),A=g.left,E=g.right;S(A,m),S(E,m),m.isHorizontal?A.right2left():A.bottom2top(),E.translate(A.x-E.x,A.y-E.y),p.x=A.x,p.y=E.y;var D=p.getBoundingBox();m.isHorizontal?D.top<0&&p.translate(0,-D.top):D.left<0&&p.translate(-D.left,0)}var F=m.fixedRoot;return F===void 0&&(F=!0),F&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(z,C,x){var k=x(6),w=18,T=w*2,L=w,P={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||L},getVGap:function(y){return y.vgap||L},getChildren:function(y){return y.children},getHeight:function(y){return y.height||T},getWidth:function(y){var g=y.label||" ";return y.width||g.split("").length*w}};function p(S,y){var g=this;if(g.vgap=g.hgap=0,S instanceof p)return S;g.data=S;var A=y.getHGap(S),E=y.getVGap(S);return g.preH=y.getPreH(S),g.preV=y.getPreV(S),g.width=y.getWidth(S),g.height=y.getHeight(S),g.width+=g.preH,g.height+=g.preV,g.id=y.getId(S),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(A,E),g}k.assign(p.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,g){var A=this;A.hgap+=y,A.vgap+=g,A.width+=2*y,A.height+=2*g},eachNode:function(y){for(var g=this,A=[g],E;E=A.shift();)y(E),A=E.children.concat(A)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var g=this,A=[g],E;E=A.shift();)y(E),A=A.concat(E.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){y.left=Math.min(y.left,g.x),y.top=Math.min(y.top,g.y),y.width=Math.max(y.width,g.x+g.width),y.height=Math.max(y.height,g.y+g.height)}),y},translate:function(y,g){y===void 0&&(y=0),g===void 0&&(g=0),this.eachNode(function(A){A.x+=y,A.y+=g,A.x+=A.preH,A.y+=A.preV})},right2left:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(A){A.x=A.x-(A.x-g.left)*2-A.width}),y.translate(g.width,0)},bottom2top:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(A){A.y=A.y-(A.y-g.top)*2-A.height}),y.translate(0,g.height)}});function m(S,y,g){y===void 0&&(y={}),y=k.assign({},P,y);var A=new p(S,y),E=[A],D;if(!g&&!S.collapsed){for(;D=E.shift();)if(!D.data.collapsed){var F=y.getChildren(D.data),Y=F?F.length:0;if(D.children=new Array(Y),F&&Y)for(var b=0;b<Y;b++){var h=new p(F[b],y);D.children[b]=h,E.push(h),h.parent=D,h.depth=D.depth+1}}}return A}z.exports=m},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];L(m,p)&&P.push(m)}return P};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(21);function T(L,P){var p=Object(w.a)(P),m=p.length;if(Object(k.a)(L))return!m;for(var S=0;S<m;S+=1){var y=p[S];if(P[y]!==L[y]||!(y in L))return!1}return!0}C.a=T},function(z,C,x){"use strict";var k=x(8),w=x(2),T=Object.keys?function(L){return Object.keys(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(m)}),P};C.a=T},function(z,C,x){"use strict";var k=x(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.max(T,L)},w[0])}},function(z,C,x){"use strict";var k=x(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.min(T,L)},w[0])}},function(z,C,x){"use strict";var k=x(1),w=Array.prototype.splice,T=function(P,p){if(!Object(k.a)(P))return[];for(var m=P?p.length:0,S=m-1;m--;){var y=void 0,g=p[m];(m===S||g!==y)&&(y=g,w.call(P,g,1))}return P};C.a=T},function(z,C,x){"use strict";var k=x(8),w=x(0),T=x(10),L=function(P,p,m){if(!Object(w.a)(P)&&!Object(T.a)(P))return P;var S=m;return Object(k.a)(P,function(y,g){S=p(S,y,g)}),S};C.a=L},function(z,C,x){"use strict";C.a=k;function k(w,T){T===void 0&&(T=new Map);var L=[];if(Array.isArray(w))for(var P=0,p=w.length;P<p;P++){var m=w[P];T.has(m)||(L.push(m),T.set(m,!0))}return L}},function(z,C,x){"use strict";C.a=L;var k=x(0),w=x(2),T=x(28);function L(P,p){if(!p)return{0:P};if(!Object(w.a)(p)){var m=Object(k.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(S){for(var y="_",g=0,A=m.length;g<A;g++)y+=S[m[g]]&&S[m[g]].toString();return y}}return Object(T.a)(P,p)}},function(z,C,x){"use strict";var k=x(0),w=x(2),T=Object.prototype.hasOwnProperty;function L(P,p){if(!p||!Object(k.a)(P))return{};for(var m={},S=Object(w.a)(p)?p:function(E){return E[p]},y,g=0;g<P.length;g++){var A=P[g];y=S(A),T.call(m,y)?m[y].push(A):m[y]=[A]}return m}C.a=L},function(z,C,x){"use strict";C.a=function(k,w){return k.hasOwnProperty(w)}},function(z,C,x){"use strict";var k={}.toString,w=function(T){return k.call(T).replace(/^\[object /,"").replace(/]$/,"")};C.a=w},function(z,C,x){"use strict";var k=Object.prototype,w=function(T){var L=T&&T.constructor,P=typeof L=="function"&&L.prototype||k;return T===P};C.a=w},function(z,C,x){"use strict";var k=x(2);C.a=function(w,T){if(!Object(k.a)(w))throw new TypeError("Expected a function");var L=function(){for(var P=[],p=0;p<arguments.length;p++)P[p]=arguments[p];var m=T?T.apply(this,P):P[0],S=L.cache;if(S.has(m))return S.get(m);var y=w.apply(this,P);return S.set(m,y),y};return L.cache=new Map,L}},function(z,C,x){"use strict";var k=x(14),w=x(1),T=x(4),L=function(P,p){if(P===p)return!0;if(!P||!p||Object(T.a)(P)||Object(T.a)(p))return!1;if(Object(w.a)(P)||Object(w.a)(p)){if(P.length!==p.length)return!1;for(var m=!0,S=0;S<P.length&&(m=L(P[S],p[S]),!!m);S++);return m}if(Object(k.a)(P)||Object(k.a)(p)){var y=Object.keys(P),g=Object.keys(p);if(y.length!==g.length)return!1;for(var m=!0,S=0;S<y.length&&(m=L(P[y[S]],p[y[S]]),!!m);S++);return m}return!1};C.a=L},function(z,C,x){"use strict";var k=x(116),w=x(15),T=x(32),L=x(4),P;C.a=Object(T.a)(function(p,m){m===void 0&&(m={});var S=m.fontSize,y=m.fontFamily,g=m.fontWeight,A=m.fontStyle,E=m.fontVariant;return P||(P=document.createElement("canvas").getContext("2d")),P.font=[A,E,g,S+"px",y].join(" "),P.measureText(Object(L.a)(p)?p:"").width},function(p,m){return m===void 0&&(m={}),Object(k.a)([p],Object(w.a)(m)).join("")})},function(z,C,x){var k=x(18);z.exports=function(w,T){for(var L=k(w.data,T,!0),P=k(w.data,T,!0),p=w.children.length,m=Math.round(p/2),S=T.getSide||function(E,D){return D<m?"right":"left"},y=0;y<p;y++){var g=w.children[y],A=S(g,y);A==="right"?P.children.push(g):L.children.push(g)}return L.eachNode(function(E){E.isRoot()||(E.side="left")}),P.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:L,right:P}}},function(z,C,x){var k={compactBox:x(37),dendrogram:x(120),indented:x(122),mindmap:x(124)};z.exports=k},function(z,C,x){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=x(11),L=x(119),P=x(17),p=x(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},A}(T),S={};function y(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=y},function(z,C,x){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=x(13);x.d(C,"contains",function(){return k.a}),x.d(C,"includes",function(){return k.a});var w=x(39);x.d(C,"difference",function(){return w.a});var T=x(40);x.d(C,"find",function(){return T.a});var L=x(41);x.d(C,"findIndex",function(){return L.a});var P=x(42);x.d(C,"firstValue",function(){return P.a});var p=x(43);x.d(C,"flatten",function(){return p.a});var m=x(44);x.d(C,"flattenDeep",function(){return m.a});var S=x(45);x.d(C,"getRange",function(){return S.a});var y=x(46);x.d(C,"pull",function(){return y.a});var g=x(24);x.d(C,"pullAt",function(){return g.a});var A=x(25);x.d(C,"reduce",function(){return A.a});var E=x(47);x.d(C,"remove",function(){return E.a});var D=x(48);x.d(C,"sortBy",function(){return D.a});var F=x(49);x.d(C,"union",function(){return F.a});var Y=x(26);x.d(C,"uniq",function(){return Y.a});var b=x(50);x.d(C,"valuesOfKey",function(){return b.a});var h=x(51);x.d(C,"head",function(){return h.a});var $=x(52);x.d(C,"last",function(){return $.a});var U=x(53);x.d(C,"startsWith",function(){return U.a});var W=x(54);x.d(C,"endsWith",function(){return W.a});var V=x(19);x.d(C,"filter",function(){return V.a});var H=x(55);x.d(C,"every",function(){return H.a});var q=x(56);x.d(C,"some",function(){return q.a});var tt=x(57);x.d(C,"group",function(){return tt.a});var rt=x(28);x.d(C,"groupBy",function(){return rt.a});var ft=x(27);x.d(C,"groupToMap",function(){return ft.a});var it=x(58);x.d(C,"getWrapBehavior",function(){return it.a});var bt=x(59);x.d(C,"wrapBehavior",function(){return bt.a});var gt=x(60);x.d(C,"number2color",function(){return gt.a});var Xt=x(61);x.d(C,"parseRadius",function(){return Xt.a});var Ct=x(62);x.d(C,"clamp",function(){return Ct.a});var At=x(63);x.d(C,"fixedBase",function(){return At.a});var Z=x(64);x.d(C,"isDecimal",function(){return Z.a});var J=x(65);x.d(C,"isEven",function(){return J.a});var yt=x(66);x.d(C,"isInteger",function(){return yt.a});var _t=x(67);x.d(C,"isNegative",function(){return _t.a});var nt=x(68);x.d(C,"isNumberEqual",function(){return nt.a});var vt=x(69);x.d(C,"isOdd",function(){return vt.a});var It=x(70);x.d(C,"isPositive",function(){return It.a});var Pt=x(22);x.d(C,"max",function(){return Pt.a});var St=x(71);x.d(C,"maxBy",function(){return St.a});var Dt=x(23);x.d(C,"min",function(){return Dt.a});var Qt=x(72);x.d(C,"minBy",function(){return Qt.a});var ue=x(73);x.d(C,"mod",function(){return ue.a});var ie=x(74);x.d(C,"toDegree",function(){return ie.a});var Lt=x(75);x.d(C,"toInteger",function(){return Lt.a});var ne=x(76);x.d(C,"toRadian",function(){return ne.a});var ve=x(77);x.d(C,"forIn",function(){return ve.a});var Wt=x(29);x.d(C,"has",function(){return Wt.a});var ae=x(78);x.d(C,"hasKey",function(){return ae.a});var Ce=x(79);x.d(C,"hasValue",function(){return Ce.a});var xe=x(21);x.d(C,"keys",function(){return xe.a});var Jt=x(20);x.d(C,"isMatch",function(){return Jt.a});var we=x(15);x.d(C,"values",function(){return we.a});var Tt=x(80);x.d(C,"lowerCase",function(){return Tt.a});var Pe=x(81);x.d(C,"lowerFirst",function(){return Pe.a});var _r=x(82);x.d(C,"substitute",function(){return _r.a});var Ar=x(83);x.d(C,"upperCase",function(){return Ar.a});var Or=x(84);x.d(C,"upperFirst",function(){return Or.a});var Br=x(30);x.d(C,"getType",function(){return Br.a});var cn=x(85);x.d(C,"isArguments",function(){return cn.a});var an=x(0);x.d(C,"isArray",function(){return an.a});var Dn=x(1);x.d(C,"isArrayLike",function(){return Dn.a});var Un=x(86);x.d(C,"isBoolean",function(){return Un.a});var Xn=x(87);x.d(C,"isDate",function(){return Xn.a});var xr=x(88);x.d(C,"isError",function(){return xr.a});var $e=x(2);x.d(C,"isFunction",function(){return $e.a});var Tr=x(89);x.d(C,"isFinite",function(){return Tr.a});var qr=x(7);x.d(C,"isNil",function(){return qr.a});var gn=x(90);x.d(C,"isNull",function(){return gn.a});var xn=x(5);x.d(C,"isNumber",function(){return xn.a});var Rn=x(12);x.d(C,"isObject",function(){return Rn.a});var Mr=x(14);x.d(C,"isObjectLike",function(){return Mr.a});var dn=x(10);x.d(C,"isPlainObject",function(){return dn.a});var hn=x(31);x.d(C,"isPrototype",function(){return hn.a});var sn=x(91);x.d(C,"isRegExp",function(){return sn.a});var Wn=x(4);x.d(C,"isString",function(){return Wn.a});var Mn=x(3);x.d(C,"isType",function(){return Mn.a});var In=x(92);x.d(C,"isUndefined",function(){return In.a});var jn=x(93);x.d(C,"isElement",function(){return jn.a});var at=x(94);x.d(C,"requestAnimationFrame",function(){return at.a});var Je=x(95);x.d(C,"clearAnimationFrame",function(){return Je.a});var Ht=x(96);x.d(C,"augment",function(){return Ht.a});var te=x(97);x.d(C,"clone",function(){return te.a});var wt=x(98);x.d(C,"debounce",function(){return wt.a});var Me=x(32);x.d(C,"memoize",function(){return Me.a});var kt=x(99);x.d(C,"deepMix",function(){return kt.a});var qt=x(8);x.d(C,"each",function(){return qt.a});var dt=x(100);x.d(C,"extend",function(){return dt.a});var Ut=x(101);x.d(C,"indexOf",function(){return Ut.a});var Q=x(102);x.d(C,"isEmpty",function(){return Q.a});var ot=x(33);x.d(C,"isEqual",function(){return ot.a});var R=x(103);x.d(C,"isEqualWith",function(){return R.a});var M=x(104);x.d(C,"map",function(){return M.a});var O=x(105);x.d(C,"mapValues",function(){return O.a});var X=x(16);x.d(C,"mix",function(){return X.a}),x.d(C,"assign",function(){return X.a});var mt=x(106);x.d(C,"get",function(){return mt.a});var Ft=x(107);x.d(C,"set",function(){return Ft.a});var Bt=x(108);x.d(C,"pick",function(){return Bt.a});var ee=x(109);x.d(C,"omit",function(){return ee.a});var Le=x(110);x.d(C,"throttle",function(){return Le.a});var me=x(111);x.d(C,"toArray",function(){return me.a});var Xe=x(9);x.d(C,"toString",function(){return Xe.a});var pr=x(112);x.d(C,"uniqueId",function(){return pr.a});var Ze=x(113);x.d(C,"noop",function(){return Ze.a});var Pr=x(114);x.d(C,"identity",function(){return Pr.a});var un=x(115);x.d(C,"size",function(){return un.a});var Ke=x(34);x.d(C,"measureTextWidth",function(){return Ke.a});var lr=x(117);x.d(C,"getEllipsisText",function(){return lr.a});var Rr=x(118);x.d(C,"Cache",function(){return Rr.a})},function(z,C,x){"use strict";var k=x(19),w=x(13),T=function(L,P){return P===void 0&&(P=[]),Object(k.a)(L,function(p){return!Object(w.a)(P,p)})};C.a=T},function(z,C,x){"use strict";var k=x(2),w=x(20),T=x(0),L=x(10);function P(p,m){if(!Object(T.a)(p))return null;var S;if(Object(k.a)(m)&&(S=m),Object(L.a)(m)&&(S=function(g){return Object(w.a)(g,m)}),S){for(var y=0;y<p.length;y+=1)if(S(p[y]))return p[y]}return null}C.a=P},function(z,C,x){"use strict";function k(w,T,L){L===void 0&&(L=0);for(var P=L;P<w.length;P++)if(T(w[P],P))return P;return-1}C.a=k},function(z,C,x){"use strict";var k=x(7),w=x(0),T=function(L,P){for(var p=null,m=0;m<L.length;m++){var S=L[m],y=S[P];if(!Object(k.a)(y)){Object(w.a)(y)?p=y[0]:p=y;break}}return p};C.a=T},function(z,C,x){"use strict";var k=x(0),w=function(T){if(!Object(k.a)(T))return[];for(var L=[],P=0;P<T.length;P++)L=L.concat(T[P]);return L};C.a=w},function(z,C,x){"use strict";var k=x(0),w=function(T,L){if(L===void 0&&(L=[]),!Object(k.a)(T))L.push(T);else for(var P=0;P<T.length;P+=1)w(T[P],L);return L};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(22),T=x(23),L=function(P){var p=P.filter(function(A){return!isNaN(A)});if(!p.length)return{min:0,max:0};if(Object(k.a)(P[0])){for(var m=[],S=0;S<P.length;S++)m=m.concat(P[S]);p=m}var y=Object(w.a)(p),g=Object(T.a)(p);return{min:g,max:y}};C.a=L},function(z,C,x){"use strict";var k=Array.prototype,w=k.splice,T=k.indexOf,L=function(P){for(var p=[],m=1;m<arguments.length;m++)p[m-1]=arguments[m];for(var S=0;S<p.length;S++)for(var y=p[S],g=-1;(g=T.call(P,y))>-1;)w.call(P,g,1);return P};C.a=L},function(z,C,x){"use strict";var k=x(1),w=x(24),T=function(L,P){var p=[];if(!Object(k.a)(L))return p;for(var m=-1,S=[],y=L.length;++m<y;){var g=L[m];P(g,m,L)&&(p.push(g),S.push(m))}return Object(w.a)(L,S),p};C.a=T},function(z,C,x){"use strict";var k=x(0),w=x(4),T=x(2);function L(P,p){var m;if(Object(T.a)(p))m=function(y,g){return p(y)-p(g)};else{var S=[];Object(w.a)(p)?S.push(p):Object(k.a)(p)&&(S=p),m=function(y,g){for(var A=0;A<S.length;A+=1){var E=S[A];if(y[E]>g[E])return 1;if(y[E]<g[E])return-1}return 0}}return P.sort(m),P}C.a=L},function(z,C,x){"use strict";var k=x(26),w=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];return Object(k.a)([].concat.apply([],T))};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(7);C.a=function(T,L){for(var P=[],p={},m=0;m<T.length;m++){var S=T[m],y=S[L];if(!Object(w.a)(y)){Object(k.a)(y)||(y=[y]);for(var g=0;g<y.length;g++){var A=y[g];p[A]||(P.push(A),p[A]=!0)}}}return P}},function(z,C,x){"use strict";C.a=w;var k=x(1);function w(T){if(Object(k.a)(T))return T[0]}},function(z,C,x){"use strict";C.a=w;var k=x(1);function w(T){if(Object(k.a)(T)){var L=T;return L[L.length-1]}}},function(z,C,x){"use strict";var k=x(0),w=x(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[0]===P:!1}C.a=T},function(z,C,x){"use strict";var k=x(0),w=x(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[L.length-1]===P:!1}C.a=T},function(z,C,x){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(!T(w[L],L))return!1;return!0};C.a=k},function(z,C,x){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(T(w[L],L))return!0;return!1};C.a=k},function(z,C,x){"use strict";var k=x(27);C.a=function(w,T){if(!T)return[w];var L=Object(k.a)(w,T),P=[];for(var p in L)P.push(L[p]);return P}},function(z,C,x){"use strict";function k(w,T){return w["_wrap_"+T]}C.a=k},function(z,C,x){"use strict";function k(w,T){if(w["_wrap_"+T])return w["_wrap_"+T];var L=function(P){w[T](P)};return w["_wrap_"+T]=L,L}C.a=k},function(z,C,x){"use strict";var k={};function w(T){var L=k[T];if(!L){for(var P=T.toString(16),p=P.length;p<6;p++)P="0"+P;L="#"+P,k[T]=L}return L}C.a=w},function(z,C,x){"use strict";var k=x(0);function w(T){var L=0,P=0,p=0,m=0;return Object(k.a)(T)?T.length===1?L=P=p=m=T[0]:T.length===2?(L=p=T[0],P=m=T[1]):T.length===3?(L=T[0],P=m=T[1],p=T[2]):(L=T[0],P=T[1],p=T[2],m=T[3]):L=P=p=m=T,{r1:L,r2:P,r3:p,r4:m}}C.a=w},function(z,C,x){"use strict";var k=function(w,T,L){return w<T?T:w>L?L:w};C.a=k},function(z,C,x){"use strict";var k=function(w,T){var L=T.toString(),P=L.indexOf(".");if(P===-1)return Math.round(w);var p=L.substr(P+1).length;return p>20&&(p=20),parseFloat(w.toFixed(p))};C.a=k},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%1!==0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%2===0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=Number.isInteger?Number.isInteger:function(T){return Object(k.a)(T)&&T%1===0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T<0};C.a=w},function(z,C,x){"use strict";C.a=w;var k=1e-5;function w(T,L,P){return P===void 0&&(P=k),Math.abs(T-L)<P}},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%2!==0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T>0};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=-1/0,m=0;m<T.length;m++){var S=T[m],y=Object(w.a)(L)?L(S):S[L];y>p&&(P=S,p=y)}return P}}},function(z,C,x){"use strict";var k=x(0),w=x(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=1/0,m=0;m<T.length;m++){var S=T[m],y=Object(w.a)(L)?L(S):S[L];y<p&&(P=S,p=y)}return P}}},function(z,C,x){"use strict";var k=function(w,T){return(w%T+T)%T};C.a=k},function(z,C,x){"use strict";var k=180/Math.PI,w=function(T){return k*T};C.a=w},function(z,C,x){"use strict";C.a=parseInt},function(z,C,x){"use strict";var k=Math.PI/180,w=function(T){return k*T};C.a=w},function(z,C,x){"use strict";var k=x(8);C.a=k.a},function(z,C,x){"use strict";var k=x(29);C.a=k.a},function(z,C,x){"use strict";var k=x(13),w=x(15);C.a=function(T,L){return Object(k.a)(Object(w.a)(T),L)}},function(z,C,x){"use strict";var k=x(9),w=function(T){return Object(k.a)(T).toLowerCase()};C.a=w},function(z,C,x){"use strict";var k=x(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toLowerCase()+L.substring(1)};C.a=w},function(z,C,x){"use strict";function k(w,T){return!w||!T?w:w.replace(/\\?\{([^{}]+)\}/g,function(L,P){return L.charAt(0)==="\\"?L.slice(1):T[P]===void 0?"":T[P]})}C.a=k},function(z,C,x){"use strict";var k=x(9),w=function(T){return Object(k.a)(T).toUpperCase()};C.a=w},function(z,C,x){"use strict";var k=x(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toUpperCase()+L.substring(1)};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Arguments")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Boolean")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Date")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Error")};C.a=w},function(z,C,x){"use strict";var k=x(5);C.a=function(w){return Object(k.a)(w)&&isFinite(w)}},function(z,C,x){"use strict";var k=function(w){return w===null};C.a=k},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"RegExp")};C.a=w},function(z,C,x){"use strict";var k=function(w){return w===void 0};C.a=k},function(z,C,x){"use strict";var k=function(w){return w instanceof Element||w instanceof HTMLDocument};C.a=k},function(z,C,x){"use strict";C.a=k;function k(w){var T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(L){return setTimeout(L,16)};return T(w)}},function(z,C,x){"use strict";C.a=k;function k(w){var T=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;T(w)}},function(z,C,x){"use strict";var k=x(16),w=x(2),T=function(){for(var L=[],P=0;P<arguments.length;P++)L[P]=arguments[P];for(var p=L[0],m=1;m<L.length;m++){var S=L[m];Object(w.a)(S)&&(S=S.prototype),Object(k.a)(p.prototype,S)}};C.a=T},function(z,C,x){"use strict";var k=x(0),w=function(T){if(typeof T!="object"||T===null)return T;var L;if(Object(k.a)(T)){L=[];for(var P=0,p=T.length;P<p;P++)typeof T[P]=="object"&&T[P]!=null?L[P]=w(T[P]):L[P]=T[P]}else{L={};for(var m in T)typeof T[m]=="object"&&T[m]!=null?L[m]=w(T[m]):L[m]=T[m]}return L};C.a=w},function(z,C,x){"use strict";function k(w,T,L){var P;return function(){var p=this,m=arguments,S=function(){P=null,L||w.apply(p,m)},y=L&&!P;clearTimeout(P),P=setTimeout(S,T),y&&w.apply(p,m)}}C.a=k},function(z,C,x){"use strict";var k=x(0),w=x(10),T=5;function L(p,m,S,y){S=S||0,y=y||T;for(var g in m)if(m.hasOwnProperty(g)){var A=m[g];A!==null&&Object(w.a)(A)?(Object(w.a)(p[g])||(p[g]={}),S<y?L(p[g],A,S+1,y):p[g]=m[g]):Object(k.a)(A)?(p[g]=[],p[g]=p[g].concat(A)):A!==void 0&&(p[g]=A)}}var P=function(p){for(var m=[],S=1;S<arguments.length;S++)m[S-1]=arguments[S];for(var y=0;y<m.length;y+=1)L(p,m[y]);return p};C.a=P},function(z,C,x){"use strict";var k=x(16),w=x(2),T=function(L,P,p,m){Object(w.a)(P)||(p=P,P=L,L=function(){});var S=Object.create?function(g,A){return Object.create(g,{constructor:{value:A}})}:function(g,A){function E(){}E.prototype=g;var D=new E;return D.constructor=A,D},y=S(P.prototype,L);return L.prototype=Object(k.a)(y,L.prototype),L.superclass=S(P.prototype,P),Object(k.a)(y,p),Object(k.a)(L,m),L};C.a=T},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return-1;var P=Array.prototype.indexOf;if(P)return P.call(T,L);for(var p=-1,m=0;m<T.length;m++)if(T[m]===L){p=m;break}return p};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(1),T=x(30),L=x(31),P=Object.prototype.hasOwnProperty;function p(m){if(Object(k.a)(m))return!0;if(Object(w.a)(m))return!m.length;var S=Object(T.a)(m);if(S==="Map"||S==="Set")return!m.size;if(Object(L.a)(m))return!Object.keys(m).length;for(var y in m)if(P.call(m,y))return!1;return!0}C.a=p},function(z,C,x){"use strict";var k=x(2),w=x(33);C.a=function(T,L,P){return Object(k.a)(P)?!!P(T,L):Object(w.a)(T,L)}},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];P.push(L(m,p))}return P};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(12),T=function(L){return L};C.a=function(L,P){P===void 0&&(P=T);var p={};return Object(w.a)(L)&&!Object(k.a)(L)&&Object.keys(L).forEach(function(m){p[m]=P(L[m],m)}),p}},function(z,C,x){"use strict";var k=x(4);C.a=function(w,T,L){for(var P=0,p=Object(k.a)(T)?T.split("."):T;w&&P<p.length;)w=w[p[P++]];return w===void 0||P<p.length?L:w}},function(z,C,x){"use strict";var k=x(12),w=x(4),T=x(5);C.a=function(L,P,p){var m=L,S=Object(w.a)(P)?P.split("."):P;return S.forEach(function(y,g){g<S.length-1?(Object(k.a)(m[y])||(m[y]=Object(T.a)(S[g+1])?[]:{}),m=m[y]):m[y]=p}),L}},function(z,C,x){"use strict";var k=x(8),w=x(10),T=Object.prototype.hasOwnProperty;C.a=function(L,P){if(L===null||!Object(w.a)(L))return{};var p={};return Object(k.a)(P,function(m){T.call(L,m)&&(p[m]=L[m])}),p}},function(z,C,x){"use strict";var k=x(25);C.a=function(w,T){return Object(k.a)(w,function(L,P,p){return T.includes(p)||(L[p]=P),L},{})}},function(z,C,x){"use strict";C.a=function(k,w,T){var L,P,p,m,S=0;T||(T={});var y=function(){S=T.leading===!1?0:Date.now(),L=null,m=k.apply(P,p),L||(P=p=null)},g=function(){var A=Date.now();!S&&T.leading===!1&&(S=A);var E=w-(A-S);return P=this,p=arguments,E<=0||E>w?(L&&(clearTimeout(L),L=null),S=A,m=k.apply(P,p),L||(P=p=null)):!L&&T.trailing!==!1&&(L=setTimeout(y,E)),m};return g.cancel=function(){clearTimeout(L),S=0,L=P=p=null},g}},function(z,C,x){"use strict";var k=x(1);C.a=function(w){return Object(k.a)(w)?Array.prototype.slice.call(w):[]}},function(z,C,x){"use strict";var k={};C.a=function(w){return w=w||"g",k[w]?k[w]+=1:k[w]=1,w+k[w]}},function(z,C,x){"use strict";C.a=function(){}},function(z,C,x){"use strict";C.a=function(k){return k}},function(z,C,x){"use strict";C.a=T;var k=x(7),w=x(1);function T(L){return Object(k.a)(L)?0:Object(w.a)(L)?L.length:Object.keys(L).length}},function(z,C,x){"use strict";C.a=U;var k=function(At,Z){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,yt){J.__proto__=yt}||function(J,yt){for(var _t in yt)Object.prototype.hasOwnProperty.call(yt,_t)&&(J[_t]=yt[_t])},k(At,Z)};function w(At,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");k(At,Z);function J(){this.constructor=At}At.prototype=Z===null?Object.create(Z):(J.prototype=Z.prototype,new J)}var T=function(){return T=Object.assign||function(Z){for(var J,yt=1,_t=arguments.length;yt<_t;yt++){J=arguments[yt];for(var nt in J)Object.prototype.hasOwnProperty.call(J,nt)&&(Z[nt]=J[nt])}return Z},T.apply(this,arguments)};function L(At,Z){var J={};for(var yt in At)Object.prototype.hasOwnProperty.call(At,yt)&&Z.indexOf(yt)<0&&(J[yt]=At[yt]);if(At!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _t=0,yt=Object.getOwnPropertySymbols(At);_t<yt.length;_t++)Z.indexOf(yt[_t])<0&&Object.prototype.propertyIsEnumerable.call(At,yt[_t])&&(J[yt[_t]]=At[yt[_t]]);return J}function P(At,Z,J,yt){var _t=arguments.length,nt=_t<3?Z:yt===null?yt=Object.getOwnPropertyDescriptor(Z,J):yt,vt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(At,Z,J,yt);else for(var It=At.length-1;It>=0;It--)(vt=At[It])&&(nt=(_t<3?vt(nt):_t>3?vt(Z,J,nt):vt(Z,J))||nt);return _t>3&&nt&&Object.defineProperty(Z,J,nt),nt}function p(At,Z){return function(J,yt){Z(J,yt,At)}}function m(At,Z,J,yt,_t,nt){function vt(Wt){if(Wt!==void 0&&typeof Wt!="function")throw new TypeError("Function expected");return Wt}for(var It=yt.kind,Pt=It==="getter"?"get":It==="setter"?"set":"value",St=!Z&&At?yt.static?At:At.prototype:null,Dt=Z||(St?Object.getOwnPropertyDescriptor(St,yt.name):{}),Qt,ue=!1,ie=J.length-1;ie>=0;ie--){var Lt={};for(var ne in yt)Lt[ne]=ne==="access"?{}:yt[ne];for(var ne in yt.access)Lt.access[ne]=yt.access[ne];Lt.addInitializer=function(Wt){if(ue)throw new TypeError("Cannot add initializers after decoration has completed");nt.push(vt(Wt||null))};var ve=(0,J[ie])(It==="accessor"?{get:Dt.get,set:Dt.set}:Dt[Pt],Lt);if(It==="accessor"){if(ve===void 0)continue;if(ve===null||typeof ve!="object")throw new TypeError("Object expected");(Qt=vt(ve.get))&&(Dt.get=Qt),(Qt=vt(ve.set))&&(Dt.set=Qt),(Qt=vt(ve.init))&&_t.push(Qt)}else(Qt=vt(ve))&&(It==="field"?_t.push(Qt):Dt[Pt]=Qt)}St&&Object.defineProperty(St,yt.name,Dt),ue=!0}function S(At,Z,J){for(var yt=arguments.length>2,_t=0;_t<Z.length;_t++)J=yt?Z[_t].call(At,J):Z[_t].call(At);return yt?J:void 0}function y(At){return typeof At=="symbol"?At:"".concat(At)}function g(At,Z,J){return typeof Z=="symbol"&&(Z=Z.description?"[".concat(Z.description,"]"):""),Object.defineProperty(At,"name",{configurable:!0,value:J?"".concat(J," ",Z):Z})}function A(At,Z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(At,Z)}function E(At,Z,J,yt){function _t(nt){return nt instanceof J?nt:new J(function(vt){vt(nt)})}return new(J||(J=Promise))(function(nt,vt){function It(Dt){try{St(yt.next(Dt))}catch(Qt){vt(Qt)}}function Pt(Dt){try{St(yt.throw(Dt))}catch(Qt){vt(Qt)}}function St(Dt){Dt.done?nt(Dt.value):_t(Dt.value).then(It,Pt)}St((yt=yt.apply(At,Z||[])).next())})}function D(At,Z){var J={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},yt,_t,nt,vt;return vt={next:It(0),throw:It(1),return:It(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function It(St){return function(Dt){return Pt([St,Dt])}}function Pt(St){if(yt)throw new TypeError("Generator is already executing.");for(;vt&&(vt=0,St[0]&&(J=0)),J;)try{if(yt=1,_t&&(nt=St[0]&2?_t.return:St[0]?_t.throw||((nt=_t.return)&&nt.call(_t),0):_t.next)&&!(nt=nt.call(_t,St[1])).done)return nt;switch(_t=0,nt&&(St=[St[0]&2,nt.value]),St[0]){case 0:case 1:nt=St;break;case 4:return J.label++,{value:St[1],done:!1};case 5:J.label++,_t=St[1],St=[0];continue;case 7:St=J.ops.pop(),J.trys.pop();continue;default:if(nt=J.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(St[0]===6||St[0]===2)){J=0;continue}if(St[0]===3&&(!nt||St[1]>nt[0]&&St[1]<nt[3])){J.label=St[1];break}if(St[0]===6&&J.label<nt[1]){J.label=nt[1],nt=St;break}if(nt&&J.label<nt[2]){J.label=nt[2],J.ops.push(St);break}nt[2]&&J.ops.pop(),J.trys.pop();continue}St=Z.call(At,J)}catch(Dt){St=[6,Dt],_t=0}finally{yt=nt=0}if(St[0]&5)throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}}var F=Object.create?function(At,Z,J,yt){yt===void 0&&(yt=J);var _t=Object.getOwnPropertyDescriptor(Z,J);(!_t||("get"in _t?!Z.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return Z[J]}}),Object.defineProperty(At,yt,_t)}:function(At,Z,J,yt){yt===void 0&&(yt=J),At[yt]=Z[J]};function Y(At,Z){for(var J in At)J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J)&&F(Z,At,J)}function b(At){var Z=typeof Symbol=="function"&&Symbol.iterator,J=Z&&At[Z],yt=0;if(J)return J.call(At);if(At&&typeof At.length=="number")return{next:function(){return At&&yt>=At.length&&(At=void 0),{value:At&&At[yt++],done:!At}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(At,Z){var J=typeof Symbol=="function"&&At[Symbol.iterator];if(!J)return At;var yt=J.call(At),_t,nt=[],vt;try{for(;(Z===void 0||Z-- >0)&&!(_t=yt.next()).done;)nt.push(_t.value)}catch(It){vt={error:It}}finally{try{_t&&!_t.done&&(J=yt.return)&&J.call(yt)}finally{if(vt)throw vt.error}}return nt}function $(){for(var At=[],Z=0;Z<arguments.length;Z++)At=At.concat(h(arguments[Z]));return At}function U(){for(var At=0,Z=0,J=arguments.length;Z<J;Z++)At+=arguments[Z].length;for(var yt=Array(At),_t=0,Z=0;Z<J;Z++)for(var nt=arguments[Z],vt=0,It=nt.length;vt<It;vt++,_t++)yt[_t]=nt[vt];return yt}function W(At,Z,J){if(J||arguments.length===2)for(var yt=0,_t=Z.length,nt;yt<_t;yt++)(nt||!(yt in Z))&&(nt||(nt=Array.prototype.slice.call(Z,0,yt)),nt[yt]=Z[yt]);return At.concat(nt||Array.prototype.slice.call(Z))}function V(At){return this instanceof V?(this.v=At,this):new V(At)}function H(At,Z,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt=J.apply(At,Z||[]),_t,nt=[];return _t={},vt("next"),vt("throw"),vt("return"),_t[Symbol.asyncIterator]=function(){return this},_t;function vt(ue){yt[ue]&&(_t[ue]=function(ie){return new Promise(function(Lt,ne){nt.push([ue,ie,Lt,ne])>1||It(ue,ie)})})}function It(ue,ie){try{Pt(yt[ue](ie))}catch(Lt){Qt(nt[0][3],Lt)}}function Pt(ue){ue.value instanceof V?Promise.resolve(ue.value.v).then(St,Dt):Qt(nt[0][2],ue)}function St(ue){It("next",ue)}function Dt(ue){It("throw",ue)}function Qt(ue,ie){ue(ie),nt.shift(),nt.length&&It(nt[0][0],nt[0][1])}}function q(At){var Z,J;return Z={},yt("next"),yt("throw",function(_t){throw _t}),yt("return"),Z[Symbol.iterator]=function(){return this},Z;function yt(_t,nt){Z[_t]=At[_t]?function(vt){return(J=!J)?{value:V(At[_t](vt)),done:!1}:nt?nt(vt):vt}:nt}}function tt(At){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=At[Symbol.asyncIterator],J;return Z?Z.call(At):(At=typeof b=="function"?b(At):At[Symbol.iterator](),J={},yt("next"),yt("throw"),yt("return"),J[Symbol.asyncIterator]=function(){return this},J);function yt(nt){J[nt]=At[nt]&&function(vt){return new Promise(function(It,Pt){vt=At[nt](vt),_t(It,Pt,vt.done,vt.value)})}}function _t(nt,vt,It,Pt){Promise.resolve(Pt).then(function(St){nt({value:St,done:It})},vt)}}function rt(At,Z){return Object.defineProperty?Object.defineProperty(At,"raw",{value:Z}):At.raw=Z,At}var ft=Object.create?function(At,Z){Object.defineProperty(At,"default",{enumerable:!0,value:Z})}:function(At,Z){At.default=Z};function it(At){if(At&&At.__esModule)return At;var Z={};if(At!=null)for(var J in At)J!=="default"&&Object.prototype.hasOwnProperty.call(At,J)&&F(Z,At,J);return ft(Z,At),Z}function bt(At){return At&&At.__esModule?At:{default:At}}function gt(At,Z,J,yt){if(J==="a"&&!yt)throw new TypeError("Private accessor was defined without a getter");if(typeof Z=="function"?At!==Z||!yt:!Z.has(At))throw new TypeError("Cannot read private member from an object whose class did not declare it");return J==="m"?yt:J==="a"?yt.call(At):yt?yt.value:Z.get(At)}function Xt(At,Z,J,yt,_t){if(yt==="m")throw new TypeError("Private method is not writable");if(yt==="a"&&!_t)throw new TypeError("Private accessor was defined without a setter");if(typeof Z=="function"?At!==Z||!_t:!Z.has(At))throw new TypeError("Cannot write private member to an object whose class did not declare it");return yt==="a"?_t.call(At,J):_t?_t.value=J:Z.set(At,J),J}function Ct(At,Z){if(Z===null||typeof Z!="object"&&typeof Z!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof At=="function"?Z===At:At.has(Z)}},function(z,C,x){"use strict";var k=x(4),w=x(9),T=x(34);C.a=function(L,P,p,m){m===void 0&&(m="...");var S=16,y=Object(T.a)(m,p),g=Object(k.a)(L)?L:Object(w.a)(L),A=P,E=[],D,F;if(Object(T.a)(L,p)<=P)return L;for(;D=g.substr(0,S),F=Object(T.a)(D,p),!(F+y>A&&F>A);)if(E.push(D),A-=F,g=g.substr(S),!g)return E.join("");for(;D=g.substr(0,1),F=Object(T.a)(D,p),!(F+y>A);)if(E.push(D),A-=F,g=g.substr(1),!g)return E.join("");return""+E.join("")+m}},function(z,C,x){"use strict";var k=function(){function w(){this.map={}}return w.prototype.has=function(T){return this.map[T]!==void 0},w.prototype.get=function(T,L){var P=this.map[T];return P===void 0?L:P},w.prototype.set=function(T,L){this.map[T]=L},w.prototype.clear=function(){this.map={}},w.prototype.delete=function(T){delete this.map[T]},w.prototype.size=function(){return Object.keys(this.map).length},w}();C.a=k},function(z,C){function x(p,m,S,y){y===void 0&&(y=[]);var g=this;g.w=p||0,g.h=m||0,g.y=S||0,g.x=0,g.c=y||[],g.cs=y.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}x.fromNode=function(p,m){if(!p)return null;var S=[];return p.children.forEach(function(y){S.push(x.fromNode(y,m))}),m?new x(p.height,p.width,p.x,S):new x(p.width,p.height,p.y,S)};function k(p,m,S){S?p.y+=m:p.x+=m,p.children.forEach(function(y){k(y,m,S)})}function w(p,m){var S=m?p.y:p.x;return p.children.forEach(function(y){S=Math.min(w(y,m),S)}),S}function T(p,m){var S=w(p,m);k(p,-S,m)}function L(p,m,S){S?m.y=p.x:m.x=p.x,p.c.forEach(function(y,g){L(y,m.children[g],S)})}function P(p,m,S){S===void 0&&(S=0),m?(p.x=S,S+=p.width):(p.y=S,S+=p.height),p.children.forEach(function(y){P(y,m,S)})}z.exports=function(p,m){m===void 0&&(m={});var S=m.isHorizontal;function y(tt){if(tt.cs===0){g(tt);return}y(tt.c[0]);for(var rt=H(Y(tt.c[0].el),0,null),ft=1;ft<tt.cs;++ft){y(tt.c[ft]);var it=Y(tt.c[ft].er);A(tt,ft,rt),rt=H(it,ft,rt)}$(tt),g(tt)}function g(tt){tt.cs===0?(tt.el=tt,tt.er=tt,tt.msel=tt.mser=0):(tt.el=tt.c[0].el,tt.msel=tt.c[0].msel,tt.er=tt.c[tt.cs-1].er,tt.mser=tt.c[tt.cs-1].mser)}function A(tt,rt,ft){for(var it=tt.c[rt-1],bt=it.mod,gt=tt.c[rt],Xt=gt.mod;it!==null&&gt!==null;){Y(it)>ft.low&&(ft=ft.nxt);var Ct=bt+it.prelim+it.w-(Xt+gt.prelim);Ct>0&&(Xt+=Ct,E(tt,rt,ft.index,Ct));var At=Y(it),Z=Y(gt);At<=Z&&(it=F(it),it!==null&&(bt+=it.mod)),At>=Z&&(gt=D(gt),gt!==null&&(Xt+=gt.mod))}!it&&gt?b(tt,rt,gt,Xt):it&&!gt&&h(tt,rt,it,bt)}function E(tt,rt,ft,it){tt.c[rt].mod+=it,tt.c[rt].msel+=it,tt.c[rt].mser+=it,W(tt,rt,ft,it)}function D(tt){return tt.cs===0?tt.tl:tt.c[0]}function F(tt){return tt.cs===0?tt.tr:tt.c[tt.cs-1]}function Y(tt){return tt.y+tt.h}function b(tt,rt,ft,it){var bt=tt.c[0].el;bt.tl=ft;var gt=it-ft.mod-tt.c[0].msel;bt.mod+=gt,bt.prelim-=gt,tt.c[0].el=tt.c[rt].el,tt.c[0].msel=tt.c[rt].msel}function h(tt,rt,ft,it){var bt=tt.c[rt].er;bt.tr=ft;var gt=it-ft.mod-tt.c[rt].mser;bt.mod+=gt,bt.prelim-=gt,tt.c[rt].er=tt.c[rt-1].er,tt.c[rt].mser=tt.c[rt-1].mser}function $(tt){tt.prelim=(tt.c[0].prelim+tt.c[0].mod+tt.c[tt.cs-1].mod+tt.c[tt.cs-1].prelim+tt.c[tt.cs-1].w)/2-tt.w/2}function U(tt,rt){rt+=tt.mod,tt.x=tt.prelim+rt,V(tt);for(var ft=0;ft<tt.cs;ft++)U(tt.c[ft],rt)}function W(tt,rt,ft,it){if(ft!==rt-1){var bt=rt-ft;tt.c[ft+1].shift+=it/bt,tt.c[rt].shift-=it/bt,tt.c[rt].change-=it-it/bt}}function V(tt){for(var rt=0,ft=0,it=0;it<tt.cs;it++)rt+=tt.c[it].shift,ft+=rt+tt.c[it].change,tt.c[it].mod+=ft}function H(tt,rt,ft){for(;ft!==null&&tt>=ft.low;)ft=ft.nxt;return{low:tt,index:rt,nxt:ft}}P(p,S);var q=x.fromNode(p,S);return y(q),U(q,0),L(q,p,S),T(p,S),p}},function(z,C,x){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=x(11),L=x(121),P=x(17),p=x(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return F.rootNode.width=0,P(F.rootNode,F.options,L)},A}(T),S={};function y(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=y},function(z,C,x){var k=x(6);function w(P,p){P===void 0&&(P=0),p===void 0&&(p=[]);var m=this;m.x=m.y=0,m.leftChild=m.rightChild=null,m.height=0,m.children=p}var T={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function L(P,p,m){m?(p.x=P.x,p.y=P.y):(p.x=P.y,p.y=P.x),P.children.forEach(function(S,y){L(S,p.children[y],m)})}z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},T,p);var m=0;function S(D){if(!D)return null;D.width=0,D.depth&&D.depth>m&&(m=D.depth);var F=D.children,Y=F.length,b=new w(D.height,[]);return F.forEach(function(h,$){var U=S(h);b.children.push(U),$===0&&(b.leftChild=U),$===Y-1&&(b.rightChild=U)}),b.originNode=D,b.isLeaf=D.isLeaf(),b}function y(D){if(D.isLeaf||D.children.length===0)D.drawingDepth=m;else{var F=D.children.map(function(b){return y(b)}),Y=Math.min.apply(null,F);D.drawingDepth=Y-1}return D.drawingDepth}var g;function A(D){D.x=D.drawingDepth*p.rankSep,D.isLeaf?(D.y=0,g&&(D.y=g.y+g.height+p.nodeSep,D.originNode.parent!==g.originNode.parent&&(D.y+=p.subTreeSep)),g=D):(D.children.forEach(function(F){A(F)}),D.y=(D.leftChild.y+D.rightChild.y)/2)}var E=S(P);return y(E),A(E),L(E,P,p.isHorizontal),P}},function(z,C,x){function k(E,D){E.prototype=Object.create(D.prototype),E.prototype.constructor=E,w(E,D)}function w(E,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,b){return Y.__proto__=b,Y},w(E,D)}var T=x(11),L=x(123),P=x(35),p=x(6),m=["LR","RL","H"],S=m[0],y=function(E){k(D,E);function D(){return E.apply(this,arguments)||this}var F=D.prototype;return F.execute=function(){var b=this,h=b.options,$=b.rootNode;h.isHorizontal=!0;var U=h.indent,W=U===void 0?20:U,V=h.dropCap,H=V===void 0?!0:V,q=h.direction,tt=q===void 0?S:q,rt=h.align;if(tt&&m.indexOf(tt)===-1)throw new TypeError("Invalid direction: "+tt);if(tt===m[0])L($,W,H,rt);else if(tt===m[1])L($,W,H,rt),$.right2left();else if(tt===m[2]){var ft=P($,h),it=ft.left,bt=ft.right;L(it,W,H,rt),it.right2left(),L(bt,W,H,rt);var gt=it.getBoundingBox();bt.translate(gt.width,0),$.x=bt.x-$.width/2}return $},D}(T),g={};function A(E,D){return D=p.assign({},g,D),new y(E,D).execute()}z.exports=A},function(z,C,x){var k=x(6);function w(T,L,P,p,m){var S=typeof P=="function"?P(T):P*T.depth;if(!p)try{if(T.id===T.parent.children[0].id){T.x+=S,T.y=L?L.y:0;return}}catch(A){}if(T.x+=S,L){if(T.y=L.y+k.getHeight(L,T,m),L.parent&&T.parent.id!==L.parent.id){var y=L.parent,g=y.y+k.getHeight(y,T,m);T.y=g>T.y?g:T.y}}else T.y=0}z.exports=function(T,L,P,p){var m=null;T.eachNode(function(S){w(S,m,L,P,p),m=S})}},function(z,C,x){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=x(11),L=x(125),P=x(17),p=x(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},A}(T),S={};function y(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=y},function(z,C,x){var k=x(6);function w(P,p){var m=0;return P.children.length?P.children.forEach(function(S){m+=w(S,p)}):m=P.height,P._subTreeSep=p.getSubTreeSep(P.data),P.totalHeight=Math.max(P.height,m)+2*P._subTreeSep,P.totalHeight}function T(P){var p=P.children,m=p.length;if(m){p.forEach(function(D){T(D)});var S=p[0],y=p[m-1],g=y.y-S.y+y.height,A=0;if(p.forEach(function(D){A+=D.totalHeight}),g>P.height)P.y=S.y+g/2-P.height/2;else if(p.length!==1||P.height>A){var E=P.y+(P.height-g)/2-S.y;p.forEach(function(D){D.translate(0,E)})}else P.y=(S.y+S.height/2+y.y+y.height/2)/2-P.height/2}}var L={getSubTreeSep:function(){return 0}};z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},L,p),P.parent={x:0,width:0,height:0,y:0},P.BFTraverse(function(m){m.x=m.parent.x+m.parent.width}),P.parent=null,w(P,p),P.startY=0,P.y=P.totalHeight/2-P.height/2,P.eachNode(function(m){var S=m.children,y=S.length;if(y){var g=S[0];if(g.startY=m.startY+m._subTreeSep,y===1)g.y=m.y+m.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var A=1;A<y;A++){var E=S[A];E.startY=S[A-1].startY+S[A-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),T(P)}}])})},483360:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(T,L,P,p){p===void 0&&(p=P);var m=Object.getOwnPropertyDescriptor(L,P);(!m||("get"in m?!L.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(T,p,m)}:function(T,L,P,p){p===void 0&&(p=P),T[p]=L[P]}),k=this&&this.__exportStar||function(T,L){for(var P in T)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&x(L,T,P)};Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var w=C(695326);Object.defineProperty(z,"registerLayout",{enumerable:!0,get:function(){return w.registerLayout}}),Object.defineProperty(z,"unRegisterLayout",{enumerable:!0,get:function(){return w.unRegisterLayout}}),Object.defineProperty(z,"getLayoutByName",{enumerable:!0,get:function(){return w.getLayoutByName}}),k(C(702584),z)},762329:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Base=void 0;var C=function(){function x(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return x.prototype.layout=function(k){return this.init(k),this.execute(!0)},x.prototype.init=function(k){this.nodes=k.nodes||[],this.edges=k.edges||[],this.combos=k.combos||[],this.comboEdges=k.comboEdges||[],this.hiddenNodes=k.hiddenNodes||[],this.hiddenEdges=k.hiddenEdges||[],this.hiddenCombos=k.hiddenCombos||[],this.vedges=k.vedges||[]},x.prototype.execute=function(k){},x.prototype.executeWithWorker=function(){},x.prototype.getDefaultCfg=function(){return{}},x.prototype.updateCfg=function(k){k&&Object.assign(this,k)},x.prototype.getType=function(){return"base"},x.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},x}();z.Base=C},964885:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.CircularLayout=void 0;var k=C(762329),w=C(449784);function T(m,S,y,g){m.forEach(function(A,E){m[E].children=[],m[E].parent=[]}),g?S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),F=0;E&&(F=y[E]);var Y=0;D&&(Y=y[D]);var b=m[F].children,h=m[Y].parent;b.push(m[Y].id),h.push(m[F].id)}):S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),F=0;E&&(F=y[E]);var Y=0;D&&(Y=y[D]);var b=m[F].children,h=m[Y].children;b.push(m[Y].id),h.push(m[F].id)})}function L(m,S,y){for(var g=y.length,A=0;A<g;A++){var E=(0,w.getEdgeTerminal)(y[A],"source"),D=(0,w.getEdgeTerminal)(y[A],"target");if(m.id===E&&S.id===D||S.id===E&&m.id===D)return!0}return!1}function P(m,S){var y=m.degree,g=S.degree;return y<g?-1:y>g?1:0}var p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},S.prototype.execute=function(){var y,g=this,A=g.nodes,E=g.edges,D=A.length;if(D===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var F=g.center;if(D===1){A[0].x=F[0],A[0].y=F[1],g.onLayoutEnd&&g.onLayoutEnd();return}var Y=g.radius,b=g.startRadius,h=g.endRadius,$=g.divisions,U=g.startAngle,W=g.endAngle,V=g.angleRatio,H=g.ordering,q=g.clockwise,tt=g.nodeSpacing,rt=g.nodeSize,ft=(W-U)/D,it={};A.forEach(function(It,Pt){it[It.id]=Pt}),g.nodeMap=it;var bt=(0,w.getDegree)(A.length,it,E);if(g.degrees=bt,tt){var gt=(0,w.getFuncByUnknownType)(10,tt),Xt=(0,w.getFuncByUnknownType)(10,rt),Ct=-1/0;A.forEach(function(It){var Pt=Xt(It);Ct<Pt&&(Ct=Pt)});var At=0;A.forEach(function(It,Pt){Pt===0?At+=Ct||10:At+=(gt(It)||0)+(Ct||10)}),Y=At/(2*Math.PI)}else!Y&&!b&&!h?Y=g.height>g.width?g.width/2:g.height/2:!b&&h?b=h:b&&!h&&(h=b);var Z=ft*V,J=[];H==="topology"?J=g.topologyOrdering():H==="topology-directed"?J=g.topologyOrdering(!0):H==="degree"?J=g.degreeOrdering():J=A;for(var yt=Math.ceil(D/$),_t=0;_t<D;++_t){var nt=Y;!nt&&b!==null&&h!==null&&(nt=b+_t*(h-b)/(D-1)),nt||(nt=10+_t*100/(D-1));var vt=U+_t%yt*Z+2*Math.PI/$*Math.floor(_t/yt);q||(vt=W-_t%yt*Z-2*Math.PI/$*Math.floor(_t/yt)),J[_t].x=F[0]+Math.cos(vt)*nt,J[_t].y=F[1]+Math.sin(vt)*nt,J[_t].weight=bt[_t].all}return(y=g.onLayoutEnd)===null||y===void 0||y.call(g),{nodes:J,edges:this.edges}},S.prototype.topologyOrdering=function(y){y===void 0&&(y=!1);var g=this,A=g.degrees,E=g.edges,D=g.nodes,F=(0,w.clone)(D),Y=g.nodeMap,b=[F[0]],h=[D[0]],$=[],U=D.length;$[0]=!0,T(F,E,Y,y);var W=0;return F.forEach(function(V,H){if(H!==0)if((H===U-1||A[H].all!==A[H+1].all||L(b[W],V,E))&&!$[H])b.push(V),h.push(D[Y[V.id]]),$[H]=!0,W++;else{for(var q=b[W].children,tt=!1,rt=0;rt<q.length;rt++){var ft=Y[q[rt]];if(A[ft].all===A[H].all&&!$[ft]){b.push(F[ft]),h.push(D[Y[F[ft].id]]),$[ft]=!0,tt=!0;break}}for(var it=0;!tt&&($[it]||(b.push(F[it]),h.push(D[Y[F[it].id]]),$[it]=!0,tt=!0),it++,it!==U););}}),h},S.prototype.degreeOrdering=function(){var y=this,g=y.nodes,A=[],E=y.degrees;return g.forEach(function(D,F){D.degree=E[F].all,A.push(D)}),A.sort(P),A},S.prototype.getType=function(){return"circular"},S}(k.Base);z.CircularLayout=p},263861:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.ComboCombinedLayout=void 0;var w=C(416470),T=C(762329),L=C(449784),P=C(702584),p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var y=this,g=y.nodes,A=y.center;if(!g||g.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(g.length===1){g[0].x=A[0],g[0].y=A[1],y.onLayoutEnd&&y.onLayoutEnd();return}y.initVals(),y.run(),y.onLayoutEnd&&y.onLayoutEnd()},S.prototype.run=function(){var y,g=this,A=g.nodes,E=g.edges,D=g.combos,F=g.comboEdges,Y=g.center,b={};A.forEach(function(Ct){b[Ct.id]=Ct});var h={};D.forEach(function(Ct){h[Ct.id]=Ct});var $=g.getInnerGraphs(b),U=[],W=[],V={},H=!0;this.comboTrees.forEach(function(Ct){var At=$[Ct.id],Z=k(k({},Ct),{x:At.x||h[Ct.id].x,y:At.y||h[Ct.id].y,fx:At.fx||h[Ct.id].fx,fy:At.fy||h[Ct.id].fy,mass:At.mass||h[Ct.id].mass,size:At.size});W.push(Z),!isNaN(Z.x)&&Z.x!==0&&!isNaN(Z.y)&&Z.y!==0?H=!1:(Z.x=Math.random()*100,Z.y=Math.random()*100),U.push(Ct.id),(0,L.traverseTreeUp)(Ct,function(J){return J.id!==Ct.id&&(V[J.id]=Ct.id),!0})}),A.forEach(function(Ct){if(!(Ct.comboId&&h[Ct.comboId])){var At=k({},Ct);W.push(At),!isNaN(At.x)&&At.x!==0&&!isNaN(At.y)&&At.y!==0?H=!1:(At.x=Math.random()*100,At.y=Math.random()*100),U.push(Ct.id)}});var q=[];if(E.concat(F).forEach(function(Ct){var At=V[Ct.source]||Ct.source,Z=V[Ct.target]||Ct.target;At!==Z&&U.includes(At)&&U.includes(Z)&&q.push({source:At,target:Z})}),W!=null&&W.length){if(W.length===1)W[0].x=Y[0],W[0].y=Y[1];else{var tt={nodes:W,edges:q},rt=this.outerLayout||new P.GForceLayout({gravity:1,factor:4,linkDistance:function(Ct,At,Z){var J,yt,_t=((((J=At.size)===null||J===void 0?void 0:J[0])||30)+(((yt=Z.size)===null||yt===void 0?void 0:yt[0])||30))/2;return Math.min(_t*1.5,700)}}),ft=(y=rt.getType)===null||y===void 0?void 0:y.call(rt);if(rt.updateCfg({center:Y,kg:5,preventOverlap:!0,animate:!1}),H&&w.FORCE_LAYOUT_TYPE_MAP[ft]){var it=W.length<100?new P.MDSLayout:new P.GridLayout;it.layout(tt)}rt.layout(tt)}W.forEach(function(Ct){var At=$[Ct.id];if(!At){var Z=b[Ct.id];Z&&(Z.x=Ct.x,Z.y=Ct.y);return}At.visited=!0,At.x=Ct.x,At.y=Ct.y,At.nodes.forEach(function(J){J.x+=Ct.x,J.y+=Ct.y})})}for(var bt=Object.keys($),gt=function(Ct){var At=bt[Ct],Z=$[At];if(!Z)return"continue";Z.nodes.forEach(function(J){Z.visited||(J.x+=Z.x||0,J.y+=Z.y||0),b[J.id]&&(b[J.id].x=J.x,b[J.id].y=J.y)}),h[At]&&(h[At].x=Z.x,h[At].y=Z.y)},Xt=bt.length-1;Xt>=0;Xt--)gt(Xt);return{nodes:A,edges:E,combos:D,comboEdges:F}},S.prototype.getInnerGraphs=function(y){var g=this,A=g.comboTrees,E=g.nodeSize,D=g.edges,F=g.comboPadding,Y=g.spacing,b={},h=this.innerLayout||new P.ConcentricLayout({type:"concentric",sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=Y,(A||[]).forEach(function($){(0,L.traverseTreeUp)($,function(U){var W,V=(F==null?void 0:F(U))||10;if((0,L.isArray)(V)&&(V=Math.max.apply(Math,V)),!((W=U.children)===null||W===void 0)&&W.length){var q=U.children.map(function(yt){if(yt.itemType==="combo")return b[yt.id];var _t=y[yt.id]||{};return k(k({},_t),yt)}),tt=q.map(function(yt){return yt.id}),rt={nodes:q,edges:D.filter(function(yt){return tt.includes(yt.source)&&tt.includes(yt.target)})},ft=1/0;q.forEach(function(yt){var _t;yt.size||(yt.size=((_t=b[yt.id])===null||_t===void 0?void 0:_t.size)||(E==null?void 0:E(yt))||[30,30]),(0,L.isNumber)(yt.size)&&(yt.size=[yt.size,yt.size]),ft>yt.size[0]&&(ft=yt.size[0]),ft>yt.size[1]&&(ft=yt.size[1])}),h.layout(rt);var it=(0,L.getLayoutBBox)(q),bt=it.minX,gt=it.minY,Xt=it.maxX,Ct=it.maxY,At={x:(Xt+bt)/2,y:(Ct+gt)/2};rt.nodes.forEach(function(yt){yt.x-=At.x,yt.y-=At.y});var Z=Math.max(Xt-bt,ft)+V*2,J=Math.max(Ct-gt,ft)+V*2;b[U.id]={id:U.id,nodes:q,size:[Z,J]}}else if(U.itemType==="combo"){var H=V?[V*2,V*2]:[30,30];b[U.id]={id:U.id,nodes:[],size:H}}return!0})}),b},S.prototype.initVals=function(){var y=this,g=y.nodeSize,A=y.spacing,E,D;if((0,L.isNumber)(A)?D=function(){return A}:(0,L.isFunction)(A)?D=A:D=function(){return 0},this.spacing=D,!g)E=function(U){var W=D(U);if(U.size){if((0,L.isArray)(U.size)){var V=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(V+W)/2}if((0,L.isObject)(U.size)){var V=U.size.width>U.size.height?U.size.width:U.size.height;return(V+W)/2}return(U.size+W)/2}return 10+W/2};else if((0,L.isFunction)(g))E=function(U){var W=g(U),V=D(U);if((0,L.isArray)(U.size)){var H=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(H+V)/2}return((W||10)+V)/2};else if((0,L.isArray)(g)){var F=g[0]>g[1]?g[0]:g[1],Y=F/2;E=function(U){return Y+D(U)/2}}else{var b=g/2;E=function(U){return b+D(U)/2}}this.nodeSize=E;var h=y.comboPadding,$;(0,L.isNumber)(h)?$=function(){return h}:(0,L.isArray)(h)?$=function(){return Math.max.apply(null,h)}:(0,L.isFunction)(h)?$=h:$=function(){return 0},this.comboPadding=$},S.prototype.getType=function(){return"comboCombined"},S}(T.Base);z.ComboCombinedLayout=p},366590:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ComboForceLayout=void 0;var k=C(762329),w=C(449784),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.center=[0,0],m.maxIteration=100,m.gravity=10,m.comboGravity=10,m.linkDistance=10,m.alpha=1,m.alphaMin=.001,m.alphaDecay=1-Math.pow(m.alphaMin,1/300),m.alphaTarget=0,m.velocityDecay=.6,m.edgeStrength=.6,m.nodeStrength=30,m.preventOverlap=!1,m.preventNodeOverlap=!1,m.preventComboOverlap=!1,m.collideStrength=void 0,m.nodeCollideStrength=.5,m.comboCollideStrength=.5,m.comboSpacing=20,m.comboPadding=10,m.optimizeRangeFactor=1,m.onTick=function(){},m.onLayoutEnd=function(){},m.depthAttractiveForceScale=1,m.depthRepulsiveForceScale=2,m.nodes=[],m.edges=[],m.combos=[],m.comboTrees=[],m.width=300,m.height=300,m.bias=[],m.nodeMap={},m.oriComboMap={},m.indexMap={},m.comboMap={},m.previousLayouted=!1,m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.center;if(p.comboTree={id:"comboTreeRoot",depth:-1,children:p.comboTrees},!m||m.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(m.length===1){m[0].x=S[0],m[0].y=S[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},P.prototype.run=function(){var p=this,m=p.nodes,S=p.previousLayouted?p.maxIteration/5:p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);var y=p.center,g=p.velocityDecay,A=p.comboMap;p.previousLayouted||p.initPos(A);for(var E=function(b){var h=[];m.forEach(function($,U){h[U]={x:0,y:0}}),p.applyCalculate(h),p.applyComboCenterForce(h),m.forEach(function($,U){!(0,w.isNumber)($.x)||!(0,w.isNumber)($.y)||($.x+=h[U].x*g,$.y+=h[U].y*g)}),p.alpha+=(p.alphaTarget-p.alpha)*p.alphaDecay,p.onTick()},D=0;D<S;D++)E(D);var F=[0,0];m.forEach(function(b){!(0,w.isNumber)(b.x)||!(0,w.isNumber)(b.y)||(F[0]+=b.x,F[1]+=b.y)}),F[0]/=m.length,F[1]/=m.length;var Y=[y[0]-F[0],y[1]-F[1]];m.forEach(function(b,h){!(0,w.isNumber)(b.x)||!(0,w.isNumber)(b.y)||(b.x+=Y[0],b.y+=Y[1])}),p.combos.forEach(function(b){var h=A[b.id];h&&h.empty&&(b.x=h.cx||b.x,b.y=h.cy||b.y)}),p.previousLayouted=!0},P.prototype.initVals=function(){var p=this,m=p.edges,S=p.nodes,y=p.combos,g={},A={},E={};S.forEach(function(nt,vt){A[nt.id]=nt,E[nt.id]=vt}),p.nodeMap=A,p.indexMap=E;var D={};y.forEach(function(nt){D[nt.id]=nt}),p.oriComboMap=D,p.comboMap=p.getComboMap();var F=p.preventOverlap;p.preventComboOverlap=p.preventComboOverlap||F,p.preventNodeOverlap=p.preventNodeOverlap||F;var Y=p.collideStrength;Y&&(p.comboCollideStrength=Y,p.nodeCollideStrength=Y),p.comboCollideStrength=p.comboCollideStrength?p.comboCollideStrength:0,p.nodeCollideStrength=p.nodeCollideStrength?p.nodeCollideStrength:0;for(var b=0;b<m.length;++b){var h=(0,w.getEdgeTerminal)(m[b],"source"),$=(0,w.getEdgeTerminal)(m[b],"target");g[h]?g[h]++:g[h]=1,g[$]?g[$]++:g[$]=1}for(var U=[],b=0;b<m.length;++b){var h=(0,w.getEdgeTerminal)(m[b],"source"),$=(0,w.getEdgeTerminal)(m[b],"target");U[b]=g[h]/(g[h]+g[$])}this.bias=U;var W=p.nodeSize,V=p.nodeSpacing,H,q;if((0,w.isNumber)(V)?q=function(){return V}:(0,w.isFunction)(V)?q=V:q=function(){return 0},this.nodeSpacing=q,!W)H=function(nt){if(nt.size){if((0,w.isArray)(nt.size)){var vt=nt.size[0]>nt.size[1]?nt.size[0]:nt.size[1];return vt/2}if((0,w.isObject)(nt.size)){var vt=nt.size.width>nt.size.height?nt.size.width:nt.size.height;return vt/2}return nt.size/2}return 10};else if((0,w.isFunction)(W))H=function(nt){return W(nt)};else if((0,w.isArray)(W)){var tt=W[0]>W[1]?W[0]:W[1],rt=tt/2;H=function(nt){return rt}}else{var ft=W/2;H=function(nt){return ft}}this.nodeSize=H;var it=p.comboSpacing,bt;(0,w.isNumber)(it)?bt=function(){return it}:(0,w.isFunction)(it)?bt=it:bt=function(){return 0},this.comboSpacing=bt;var gt=p.comboPadding,Xt;(0,w.isNumber)(gt)?Xt=function(){return gt}:(0,w.isArray)(gt)?Xt=function(){return Math.max.apply(null,gt)}:(0,w.isFunction)(gt)?Xt=gt:Xt=function(){return 0},this.comboPadding=Xt;var Ct=this.linkDistance,At;Ct||(Ct=10),(0,w.isNumber)(Ct)?At=function(nt){return Ct}:At=Ct,this.linkDistance=At;var Z=this.edgeStrength,J;Z||(Z=1),(0,w.isNumber)(Z)?J=function(nt){return Z}:J=Z,this.edgeStrength=J;var yt=this.nodeStrength,_t;yt||(yt=30),(0,w.isNumber)(yt)?_t=function(nt){return yt}:_t=yt,this.nodeStrength=_t},P.prototype.initPos=function(p){var m=this,S=m.nodes;S.forEach(function(y,g){var A=y.comboId,E=p[A];A&&E?(y.x=E.cx+100/(g+1),y.y=E.cy+100/(g+1)):(y.x=100/(g+1),y.y=100/(g+1))})},P.prototype.getComboMap=function(){var p=this,m=p.nodeMap,S=p.comboTrees,y=p.oriComboMap,g={};return(S||[]).forEach(function(A){var E=[];(0,w.traverseTreeUp)(A,function(D){if(D.itemType==="node"||!y[D.id])return!0;if(g[D.id]===void 0){var F={id:D.id,name:D.id,cx:0,cy:0,count:0,depth:p.oriComboMap[D.id].depth||0,children:[]};g[D.id]=F}var Y=D.children;Y&&Y.forEach(function($){if(!g[$.id]&&!m[$.id])return!0;E.push($)});var b=g[D.id];if(b.cx=0,b.cy=0,E.length===0){b.empty=!0;var h=y[D.id];b.cx=h.x,b.cy=h.y}return E.forEach(function($){if(b.count++,$.itemType!=="node"){var U=g[$.id];(0,w.isNumber)(U.cx)&&(b.cx+=U.cx),(0,w.isNumber)(U.cy)&&(b.cy+=U.cy);return}var W=m[$.id];W&&((0,w.isNumber)(W.x)&&(b.cx+=W.x),(0,w.isNumber)(W.y)&&(b.cy+=W.y))}),b.cx/=b.count||1,b.cy/=b.count||1,b.children=E,!0})}),g},P.prototype.applyComboCenterForce=function(p){var m=this,S=m.gravity,y=m.comboGravity||S,g=this.alpha,A=m.comboTrees,E=m.indexMap,D=m.nodeMap,F=m.comboMap;(A||[]).forEach(function(Y){(0,w.traverseTreeUp)(Y,function(b){if(b.itemType==="node")return!0;var h=F[b.id];if(!h)return!0;var $=F[b.id],U=($.depth+1)/10*.5,W=$.cx,V=$.cy;return $.cx=0,$.cy=0,$.children.forEach(function(H){if(H.itemType!=="node"){var q=F[H.id];q&&(0,w.isNumber)(q.cx)&&($.cx+=q.cx),q&&(0,w.isNumber)(q.cy)&&($.cy+=q.cy);return}var tt=D[H.id],rt=tt.x-W||.005,ft=tt.y-V||.005,it=Math.sqrt(rt*rt+ft*ft),bt=E[tt.id],gt=y*g/it*U;p[bt].x-=rt*gt,p[bt].y-=ft*gt,(0,w.isNumber)(tt.x)&&($.cx+=tt.x),(0,w.isNumber)(tt.y)&&($.cy+=tt.y)}),$.cx/=$.count||1,$.cy/=$.count||1,!0})})},P.prototype.applyCalculate=function(p){var m=this,S=m.comboMap,y=m.nodes,g={};y.forEach(function(E,D){y.forEach(function(F,Y){if(!(D<Y)){var b=E.x-F.x||.005,h=E.y-F.y||.005,$=b*b+h*h,U=Math.sqrt($);$<1&&($=U),g["".concat(E.id,"-").concat(F.id)]={vx:b,vy:h,vl2:$,vl:U},g["".concat(F.id,"-").concat(E.id)]={vl2:$,vl:U,vx:-b,vy:-h}}})}),m.updateComboSizes(S),m.calRepulsive(p,g),m.calAttractive(p,g);var A=m.preventComboOverlap;A&&m.comboNonOverlapping(p,S)},P.prototype.updateComboSizes=function(p){var m=this,S=m.comboTrees,y=m.nodeMap,g=m.nodeSize,A=m.comboSpacing,E=m.comboPadding;(S||[]).forEach(function(D){var F=[];(0,w.traverseTreeUp)(D,function(Y){if(Y.itemType==="node")return!0;var b=p[Y.id];if(!b)return!1;var h=Y.children;h&&h.forEach(function(W){!p[W.id]&&!y[W.id]||F.push(W)}),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0,F.forEach(function(W){if(W.itemType!=="node")return!0;var V=y[W.id];if(!V)return!0;var H=g(V),q=V.x-H,tt=V.y-H,rt=V.x+H,ft=V.y+H;b.minX>q&&(b.minX=q),b.minY>tt&&(b.minY=tt),b.maxX<rt&&(b.maxX=rt),b.maxY<ft&&(b.maxY=ft)});var $=m.oriComboMap[Y.id].size||10;(0,w.isArray)($)&&($=$[0]);var U=Math.max(b.maxX-b.minX,b.maxY-b.minY,$);return b.r=U/2+A(b)/2+E(b),!0})})},P.prototype.comboNonOverlapping=function(p,m){var S=this,y=S.comboTree,g=S.comboCollideStrength,A=S.indexMap,E=S.nodeMap;(0,w.traverseTreeUp)(y,function(D){if(!m[D.id]&&!E[D.id]&&D.id!=="comboTreeRoot")return!1;var F=D.children;return F&&F.length>1&&F.forEach(function(Y,b){if(Y.itemType==="node")return!1;var h=m[Y.id];h&&F.forEach(function($,U){if(b<=U||$.itemType==="node")return!1;var W=m[$.id];if(!W)return!1;var V=h.cx-W.cx||.005,H=h.cy-W.cy||.005,q=V*V+H*H,tt=h.r||1,rt=W.r||1,ft=tt+rt,it=rt*rt,bt=tt*tt;if(q<ft*ft){var gt=Y.children;if(!gt||gt.length===0)return!1;var Xt=$.children;if(!Xt||Xt.length===0)return!1;var Ct=Math.sqrt(q),At=(ft-Ct)/Ct*g,Z=V*At,J=H*At,yt=it/(bt+it),_t=1-yt;gt.forEach(function(nt){if(nt.itemType!=="node")return!1;if(E[nt.id]){var vt=A[nt.id];Xt.forEach(function(It){if(It.itemType!=="node"||!E[It.id])return!1;var Pt=A[It.id];p[vt].x+=Z*yt,p[vt].y+=J*yt,p[Pt].x-=Z*_t,p[Pt].y-=J*_t})}})}})}),!0})},P.prototype.calRepulsive=function(p,m){var S=this,y=S.nodes,g=S.width*S.optimizeRangeFactor,A=S.nodeStrength,E=S.alpha,D=S.nodeCollideStrength,F=S.preventNodeOverlap,Y=S.nodeSize,b=S.nodeSpacing,h=S.depthRepulsiveForceScale,$=S.center;y.forEach(function(U,W){if(!(!U.x||!U.y)){if($){var V=S.gravity,H=U.x-$[0]||.005,q=U.y-$[1]||.005,tt=Math.sqrt(H*H+q*q);p[W].x-=H*V*E/tt,p[W].y-=q*V*E/tt}y.forEach(function(rt,ft){if(W!==ft&&!(!rt.x||!rt.y)){var it=m["".concat(U.id,"-").concat(rt.id)],bt=it.vl2,gt=it.vl;if(!(gt>g)){var Xt=m["".concat(U.id,"-").concat(rt.id)],Ct=Xt.vx,At=Xt.vy,Z=Math.log(Math.abs(rt.depth-U.depth)/10)+1||1;Z=Z<1?1:Z,rt.comboId!==U.comboId&&(Z+=1);var J=Z?Math.pow(h,Z):1,yt=A(rt)*E/bt*J;if(p[W].x+=Ct*yt,p[W].y+=At*yt,W<ft&&F){var _t=Y(U)+b(U)||1,nt=Y(rt)+b(rt)||1,vt=_t+nt;if(bt<vt*vt){var It=(vt-gt)/gt*D,Pt=nt*nt,St=Pt/(_t*_t+Pt),Dt=Ct*It,Qt=At*It;p[W].x+=Dt*St,p[W].y+=Qt*St,St=1-St,p[ft].x-=Dt*St,p[ft].y-=Qt*St}}}}})}})},P.prototype.calAttractive=function(p,m){var S=this,y=S.edges,g=S.linkDistance,A=S.alpha,E=S.edgeStrength,D=S.bias,F=S.depthAttractiveForceScale;y.forEach(function(Y,b){var h=(0,w.getEdgeTerminal)(Y,"source"),$=(0,w.getEdgeTerminal)(Y,"target");if(!(!h||!$||h===$)){var U=S.indexMap[h],W=S.indexMap[$],V=S.nodeMap[h],H=S.nodeMap[$];if(!(!V||!H)){var q=V.depth===H.depth?0:Math.log(Math.abs(V.depth-H.depth)/10);V.comboId===H.comboId&&(q=q/2);var tt=q?Math.pow(F,q):1;if(V.comboId!==H.comboId&&tt===1?tt=F/2:V.comboId===H.comboId&&(tt=2),!(!(0,w.isNumber)(H.x)||!(0,w.isNumber)(V.x)||!(0,w.isNumber)(H.y)||!(0,w.isNumber)(V.y))){var rt=m["".concat($,"-").concat(h)],ft=rt.vl,it=rt.vx,bt=rt.vy,gt=(ft-g(Y))/ft*A*E(Y)*tt,Xt=it*gt,Ct=bt*gt,At=D[b];p[W].x-=Xt*At,p[W].y-=Ct*At,p[U].x+=Xt*(1-At),p[U].y+=Ct*(1-At)}}}})},P.prototype.getType=function(){return"comboForce"},P}(k.Base);z.ComboForceLayout=T},843281:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ConcentricLayout=void 0;var k=C(449784),w=C(762329),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.nodeSize=30,m.minNodeSpacing=10,m.nodeSpacing=10,m.preventOverlap=!1,m.equidistant=!1,m.startAngle=3/2*Math.PI,m.clockwise=!0,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},P.prototype.execute=function(){var p,m,S=this,y=S.nodes,g=S.edges,A=y.length;if(A===0){(p=S.onLayoutEnd)===null||p===void 0||p.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var E=S.center;if(A===1){y[0].x=E[0],y[0].y=E[1],(m=S.onLayoutEnd)===null||m===void 0||m.call(S);return}var D=S.nodeSize,F=S.nodeSpacing,Y=[],b,h=0;(0,k.isArray)(D)?b=Math.max(D[0],D[1]):b=D,(0,k.isArray)(F)?h=Math.max(F[0],F[1]):(0,k.isNumber)(F)&&(h=F),y.forEach(function(Z){Y.push(Z);var J=b;(0,k.isArray)(Z.size)?J=Math.max(Z.size[0],Z.size[1]):(0,k.isNumber)(Z.size)?J=Z.size:(0,k.isObject)(Z.size)&&(J=Math.max(Z.size.width,Z.size.height)),b=Math.max(b,J),(0,k.isFunction)(F)&&(h=Math.max(F(Z),h))}),S.clockwise=S.counterclockwise!==void 0?!S.counterclockwise:S.clockwise;var $={},U={};if(Y.forEach(function(Z,J){$[Z.id]=Z,U[Z.id]=J}),(S.sortBy==="degree"||!(0,k.isString)(S.sortBy)||Y[0][S.sortBy]===void 0)&&(S.sortBy="degree",!(0,k.isNumber)(y[0].degree))){var W=(0,k.getDegree)(y.length,U,g);Y.forEach(function(Z,J){Z.degree=W[J].all})}Y.sort(function(Z,J){return J[S.sortBy]-Z[S.sortBy]}),S.maxValueNode=Y[0],S.maxLevelDiff=S.maxLevelDiff||S.maxValueNode[S.sortBy]/4;var V=[[]],H=V[0];Y.forEach(function(Z){if(H.length>0){var J=Math.abs(H[0][S.sortBy]-Z[S.sortBy]);S.maxLevelDiff&&J>=S.maxLevelDiff&&(H=[],V.push(H))}H.push(Z)});var q=b+(h||S.minNodeSpacing);if(!S.preventOverlap){var tt=V.length>0&&V[0].length>1,rt=Math.min(S.width,S.height)/2-q,ft=rt/(V.length+(tt?1:0));q=Math.min(q,ft)}var it=0;if(V.forEach(function(Z){var J=S.sweep;J===void 0&&(J=2*Math.PI-2*Math.PI/Z.length);var yt=Z.dTheta=J/Math.max(1,Z.length-1);if(Z.length>1&&S.preventOverlap){var _t=Math.cos(yt)-Math.cos(0),nt=Math.sin(yt)-Math.sin(0),vt=Math.sqrt(q*q/(_t*_t+nt*nt));it=Math.max(vt,it)}Z.r=it,it+=q}),S.equidistant){for(var bt=0,gt=0,Xt=0;Xt<V.length;Xt++){var Ct=V[Xt],At=Ct.r-gt;bt=Math.max(bt,At)}gt=0,V.forEach(function(Z,J){J===0&&(gt=Z.r),Z.r=gt,gt+=bt})}return V.forEach(function(Z){var J=Z.dTheta,yt=Z.r;Z.forEach(function(_t,nt){var vt=S.startAngle+(S.clockwise?1:-1)*J*nt;_t.x=E[0]+yt*Math.cos(vt),_t.y=E[1]+yt*Math.sin(vt)})}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:y,edges:g}},P.prototype.getType=function(){return"concentric"},P}(w.Base);z.ConcentricLayout=T},416470:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.FORCE_LAYOUT_TYPE_MAP=z.LAYOUT_MESSAGE=void 0,z.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},z.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var S=function(y,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(y,g);function A(){this.constructor=y}y.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreLayout=void 0;var w=k(C(441106)),T=C(449784),L=C(762329),P=C(627652),p=function(S){x(y,S);function y(g){var A=S.call(this)||this;return A.rankdir="TB",A.nodesep=50,A.ranksep=50,A.controlPoints=!1,A.sortByCombo=!1,A.edgeLabelSpace=!0,A.radial=!1,A.nodes=[],A.edges=[],A.onLayoutEnd=function(){},A.layoutNode=function(E){var D=A,F=D.nodes,Y=F.find(function(h){return h.id===E});if(Y){var b=Y.layout!==!1;return b}return!0},A.updateCfg(g),A}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},y.prototype.execute=function(){var g=this,A,E,D,F,Y=this,b=Y.nodes,h=Y.nodeSize,$=Y.rankdir,U=Y.combos,W=Y.begin,V=Y.radial,H=Y.comboEdges,q=H===void 0?[]:H,tt=Y.vedges,rt=tt===void 0?[]:tt;if(b){var ft=Y.edges||[],it=new P.Graph({multigraph:!0,compound:!0});Y.nodeMap={};var bt={};b.forEach(function(xr){Y.nodeMap[xr.id]=xr,xr.comboId&&(bt[xr.comboId]=bt[xr.comboId]||[],bt[xr.comboId].push(xr.id))});var gt=[],Xt={};!((A=Y.nodeOrder)===null||A===void 0)&&A.length?(Y.nodeOrder.forEach(function(xr){Xt[xr]=!0,gt.push(Y.nodeMap[xr])}),b.forEach(function(xr){Xt[xr.id]||gt.push(xr)})):gt=b;var Ct;h?(0,T.isArray)(h)?Ct=function(){return h}:Ct=function(){return[h,h]}:Ct=function(xr){return xr.size?(0,T.isArray)(xr.size)?xr.size:(0,T.isObject)(xr.size)?[xr.size.width||40,xr.size.height||40]:[xr.size,xr.size]:[40,40]};var At=(0,T.getFunc)(Y.ranksep,50,Y.ranksepFunc),Z=(0,T.getFunc)(Y.nodesep,50,Y.nodesepFunc),J=Z,yt=At;($==="LR"||$==="RL")&&(J=At,yt=Z),it.setDefaultEdgeLabel(function(){return{}}),it.setGraph(Y);var _t={};this.sortByCombo&&U&&U.forEach(function(xr){if(_t[xr.id]=xr,xr.collapsed){var $e=Ct(xr),Tr=yt(xr),qr=J(xr),gn=$e[0]+2*qr,xn=$e[1]+2*Tr;it.setNode(xr.id,{width:gn,height:xn})}xr.parentId&&(_t[xr.parentId]||it.setNode(xr.parentId,{}),it.setParent(xr.id,xr.parentId))}),gt.filter(function(xr){return xr.layout!==!1}).forEach(function(xr){var $e=Ct(xr),Tr=yt(xr),qr=J(xr),gn=$e[0]+2*qr,xn=$e[1]+2*Tr,Rn=xr.layer;(0,T.isNumber)(Rn)?it.setNode(xr.id,{width:gn,height:xn,layer:Rn}):it.setNode(xr.id,{width:gn,height:xn}),g.sortByCombo&&xr.comboId&&(_t[xr.comboId]||(_t[xr.comboId]={id:xr.comboId},it.setNode(xr.comboId,{})),it.setParent(xr.id,xr.comboId))}),ft.forEach(function(xr){var $e=(0,T.getEdgeTerminal)(xr,"source"),Tr=(0,T.getEdgeTerminal)(xr,"target");g.layoutNode($e)&&g.layoutNode(Tr)&&it.setEdge($e,Tr,{weight:xr.weight||1})}),(E=q==null?void 0:q.concat(rt||[]))===null||E===void 0||E.forEach(function(xr){var $e,Tr,qr=xr.source,gn=xr.target,xn=!(($e=_t[qr])===null||$e===void 0)&&$e.collapsed?[qr]:bt[qr]||[qr],Rn=!((Tr=_t[gn])===null||Tr===void 0)&&Tr.collapsed?[gn]:bt[gn]||[gn];xn.forEach(function(Mr){Rn.forEach(function(dn){it.setEdge(Mr,dn,{weight:xr.weight||1})})})});var nt=void 0;!((D=Y.preset)===null||D===void 0)&&D.nodes&&(nt=new P.Graph({multigraph:!0,compound:!0}),Y.preset.nodes.forEach(function(xr){nt==null||nt.setNode(xr.id,xr)})),w.default.layout(it,{prevGraph:nt,edgeLabelSpace:Y.edgeLabelSpace,keepNodeOrder:!!Y.nodeOrder,nodeOrder:Y.nodeOrder});var vt=[0,0];if(W){var It=1/0,Pt=1/0;it.nodes().forEach(function(xr){var $e=it.node(xr);It>$e.x&&(It=$e.x),Pt>$e.y&&(Pt=$e.y)}),it.edges().forEach(function(xr){var $e,Tr=it.edge(xr);($e=Tr.points)===null||$e===void 0||$e.forEach(function(qr){It>qr.x&&(It=qr.x),Pt>qr.y&&(Pt=qr.y)})}),vt[0]=W[0]-It,vt[1]=W[1]-Pt}var St=$==="LR"||$==="RL";if(V){var Dt=this,Qt=Dt.focusNode,ue=Dt.ranksep,ie=Dt.getRadialPos,Lt=(0,T.isString)(Qt)?Qt:Qt==null?void 0:Qt.id,ne=Lt?(F=it.node(Lt))===null||F===void 0?void 0:F._rank:0,ve=[],Wt=St?"y":"x",ae=St?"height":"width",Ce=1/0,xe=-1/0;it.nodes().forEach(function(xr){var $e=it.node(xr);if(Y.nodeMap[xr]){var Tr=Z(Y.nodeMap[xr]);if(ne===0)ve[$e._rank]||(ve[$e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ve[$e._rank].nodes.push(xr),ve[$e._rank].totalWidth+=Tr*2+$e[ae],ve[$e._rank].maxSize<Math.max($e.width,$e.height)&&(ve[$e._rank].maxSize=Math.max($e.width,$e.height));else{var qr=$e._rank-ne;if(qr===0)ve[qr]||(ve[qr]={nodes:[],totalWidth:0,maxSize:-1/0}),ve[qr].nodes.push(xr),ve[qr].totalWidth+=Tr*2+$e[ae],ve[qr].maxSize<Math.max($e.width,$e.height)&&(ve[qr].maxSize=Math.max($e.width,$e.height));else{var gn=Math.abs(qr);ve[gn]||(ve[gn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ve[gn].totalWidth+=Tr*2+$e[ae],ve[gn].maxSize<Math.max($e.width,$e.height)&&(ve[gn].maxSize=Math.max($e.width,$e.height)),qr<0?ve[gn].left.push(xr):ve[gn].right.push(xr)}}var xn=$e[Wt]-$e[ae]/2-Tr,Rn=$e[Wt]+$e[ae]/2+Tr;xn<Ce&&(Ce=xn),Rn>xe&&(xe=Rn)}});var Jt=ue||50,we={},Tt=(xe-Ce)/.9,Pe=[(Ce+xe-Tt)*.5,(Ce+xe+Tt)*.5],_r=function(xr,$e,Tr,qr){Tr===void 0&&(Tr=-1/0),qr===void 0&&(qr=[0,1]);var gn=Tr;return xr.forEach(function(xn){var Rn=it.node(xn);we[xn]=$e;var Mr=ie(Rn[Wt],Pe,Tt,$e,qr),dn=Mr.x,hn=Mr.y;if(Y.nodeMap[xn]){Y.nodeMap[xn].x=dn+vt[0],Y.nodeMap[xn].y=hn+vt[1],Y.nodeMap[xn]._order=Rn._order;var sn=At(Y.nodeMap[xn]);gn<sn&&(gn=sn)}}),gn},Ar=!0,Or=0;ve.forEach(function(xr){var $e,Tr,qr,gn,xn,Rn,Mr;if(!(!(!(($e=xr==null?void 0:xr.nodes)===null||$e===void 0)&&$e.length)&&!(!((Tr=xr==null?void 0:xr.left)===null||Tr===void 0)&&Tr.length)&&!(!((qr=xr==null?void 0:xr.right)===null||qr===void 0)&&qr.length))){if(Ar&&xr.nodes.length===1){var dn=xr.nodes[0];if(!Y.nodeMap[dn])return;Y.nodeMap[dn].x=vt[0],Y.nodeMap[dn].y=vt[1],we[xr.nodes[0]]=0,Jt=At(Y.nodeMap[dn]),Ar=!1;return}Jt=Math.max(Jt,xr.totalWidth/(2*Math.PI));var hn=-1/0;if(ne===0||!((gn=xr.nodes)===null||gn===void 0)&&gn.length)hn=_r(xr.nodes,Jt,hn,[0,1]);else{var sn=((xn=xr.left)===null||xn===void 0?void 0:xn.length)/(((Rn=xr.left)===null||Rn===void 0?void 0:Rn.length)+((Mr=xr.right)===null||Mr===void 0?void 0:Mr.length));hn=_r(xr.left,Jt,hn,[0,sn]),hn=_r(xr.right,Jt,hn,[sn+.05,1])}Jt+=hn,Ar=!1,Or-xr.maxSize}}),it.edges().forEach(function(xr){var $e,Tr,qr,gn=it.edge(xr),xn=ft.findIndex(function(In){var jn=(0,T.getEdgeTerminal)(In,"source"),at=(0,T.getEdgeTerminal)(In,"target");return jn===xr.v&&at===xr.w});if(!(xn<=-1)&&Y.edgeLabelSpace&&Y.controlPoints&&ft[xn].type!=="loop"){var Rn=Wt==="x"?"y":"x",Mr=($e=gn==null?void 0:gn.points)===null||$e===void 0?void 0:$e.slice(1,gn.points.length-1),dn=[],hn=(Tr=it.node(xr.v))===null||Tr===void 0?void 0:Tr[Rn],sn=hn-((qr=it.node(xr.w))===null||qr===void 0?void 0:qr[Rn]),Wn=we[xr.v],Mn=Wn-we[xr.w];Mr==null||Mr.forEach(function(In){var jn=(In[Rn]-hn)/sn*Mn+Wn,at=ie(In[Wt],Pe,Tt,jn);dn.push({x:at.x+vt[0],y:at.y+vt[1]})}),ft[xn].controlPoints=dn}})}else{var Br=new Set,cn=$==="BT"||$==="RL",an=cn?function(xr,$e){return $e-xr}:function(xr,$e){return xr-$e};it.nodes().forEach(function(xr){var $e=it.node(xr);if($e){var Tr=g.nodeMap[xr];Tr||(Tr=U==null?void 0:U.find(function(qr){return qr.id===xr})),Tr&&(Tr.x=$e.x+vt[0],Tr.y=$e.y+vt[1],Tr._order=$e._order,Br.add(St?Tr.x:Tr.y))}});var Dn=Array.from(Br).sort(an),Un=St?function(xr,$e){return xr.x!==$e.x}:function(xr,$e){return xr.y!==$e.y},Xn=St?function(xr,$e,Tr){var qr=Math.max($e.y,Tr.y),gn=Math.min($e.y,Tr.y);return xr.filter(function(xn){return xn.y<=qr&&xn.y>=gn})}:function(xr,$e,Tr){var qr=Math.max($e.x,Tr.x),gn=Math.min($e.x,Tr.x);return xr.filter(function(xn){return xn.x<=qr&&xn.x>=gn})};it.edges().forEach(function(xr){var $e,Tr=it.edge(xr),qr=ft.findIndex(function(Rn){var Mr=(0,T.getEdgeTerminal)(Rn,"source"),dn=(0,T.getEdgeTerminal)(Rn,"target");return Mr===xr.v&&dn===xr.w});if(!(qr<=-1)&&Y.edgeLabelSpace&&Y.controlPoints&&ft[qr].type!=="loop"){($e=Tr==null?void 0:Tr.points)===null||$e===void 0||$e.forEach(function(Rn){Rn.x+=vt[0],Rn.y+=vt[1]});var gn=Y.nodeMap[xr.v],xn=Y.nodeMap[xr.w];ft[qr].controlPoints=m(Tr==null?void 0:Tr.points,gn,xn,Dn,St,Un,Xn)}})}return Y.onLayoutEnd&&Y.onLayoutEnd(),{nodes:b,edges:ft}}},y.prototype.getRadialPos=function(g,A,E,D,F){F===void 0&&(F=[0,1]);var Y=(g-A[0])/E;Y=Y*(F[1]-F[0])+F[0];var b=Y*2*Math.PI;return{x:Math.cos(b)*D,y:Math.sin(b)*D}},y.prototype.getType=function(){return"dagre"},y}(L.Base);z.DagreLayout=p;var m=function(S,y,g,A,E,D,F){var Y=(S==null?void 0:S.slice(1,S.length-1))||[];if(y&&g){var b=y.x,h=y.y,$=g.x,U=g.y;if(E&&(b=y.y,h=y.x,$=g.y,U=g.x),U!==h&&b!==$){var W=A.indexOf(h),V=A[W+1];if(V){var H=Y[0],q=E?{x:(h+V)/2,y:(H==null?void 0:H.y)||$}:{x:(H==null?void 0:H.x)||$,y:(h+V)/2};(!H||D(H,q))&&Y.unshift(q)}var tt=A.indexOf(U),rt=Math.abs(tt-W);if(rt===1)Y=F(Y,y,g),Y.length||Y.push(E?{x:(h+U)/2,y:b}:{x:b,y:(h+U)/2});else if(rt>1){var ft=A[tt-1];if(ft){var it=Y[Y.length-1],bt=E?{x:(U+ft)/2,y:(it==null?void 0:it.y)||$}:{x:(it==null?void 0:it.x)||b,y:(U+ft)/2};(!it||D(it,bt))&&Y.push(bt)}}}}return Y}},627652:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.Graph=void 0;var k=C(199905),w=function(T){x(L,T);function L(){return T!==null&&T.apply(this,arguments)||this}return L}(k.Graph);z.Graph=w},441106:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(265236)),w=C(269209);z.default={layout:k.default,util:{time:w.time,notime:w.notime}}},178029:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(40773)),w=function(P){var p=function(S){return function(y){var g;return((g=S.edge(y))===null||g===void 0?void 0:g.weight)||1}},m=P.graph().acyclicer==="greedy"?(0,k.default)(P,p(P)):T(P);m==null||m.forEach(function(S){var y=P.edge(S);P.removeEdgeObj(S),y.forwardName=S.name,y.reversed=!0,P.setEdge(S.w,S.v,y,"rev-".concat(Math.random()))})},T=function(P){var p=[],m={},S={},y=function(g){var A;S[g]||(S[g]=!0,m[g]=!0,(A=P.outEdges(g))===null||A===void 0||A.forEach(function(E){m[E.w]?p.push(E):y(E.w)}),delete m[g])};return P.nodes().forEach(y),p},L=function(P){P.edges().forEach(function(p){var m=P.edge(p);if(m.reversed){P.removeEdgeObj(p);var S=m.forwardName;delete m.reversed,delete m.forwardName,P.setEdge(p.w,p.v,m,S)}})};z.default={run:w,undo:L}},111500:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(T){var L,P=function(p){var m=T.children(p),S=T.node(p);if(m!=null&&m.length&&m.forEach(function(A){return P(A)}),S.hasOwnProperty("minRank")){S.borderLeft=[],S.borderRight=[];for(var y=S.minRank,g=S.maxRank+1;y<g;y+=1)w(T,"borderLeft","_bl",p,S,y),w(T,"borderRight","_br",p,S,y)}};(L=T.children())===null||L===void 0||L.forEach(function(p){return P(p)})},w=function(T,L,P,p,m,S){var y={rank:S,borderType:L,width:0,height:0},g=m[L][S-1],A=(0,x.addDummyNode)(T,"border",y,P);m[L][S]=A,T.setParent(A,p),g&&T.setEdge(g,A,{weight:1})};z.default=k},335279:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(m){var S,y=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(y==="lr"||y==="rl")&&k(m)},x=function(m){var S,y=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(y==="bt"||y==="rl")&&T(m),(y==="lr"||y==="rl")&&(P(m),k(m))},k=function(m){m.nodes().forEach(function(S){w(m.node(S))}),m.edges().forEach(function(S){w(m.edge(S))})},w=function(m){var S=m.width;m.width=m.height,m.height=S},T=function(m){m.nodes().forEach(function(S){L(m.node(S))}),m.edges().forEach(function(S){var y,g=m.edge(S);(y=g.points)===null||y===void 0||y.forEach(function(A){return L(A)}),g.hasOwnProperty("y")&&L(g)})},L=function(m){m!=null&&m.y&&(m.y=-m.y)},P=function(m){m.nodes().forEach(function(S){p(m.node(S))}),m.edges().forEach(function(S){var y,g=m.edge(S);(y=g.points)===null||y===void 0||y.forEach(function(A){return p(A)}),g.hasOwnProperty("x")&&p(g)})},p=function(m){var S=m.x;m.x=m.y,m.y=S};z.default={adjust:C,undo:x}},455532:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){if(w!=="next"&&w!=="prev")return T},x=function(w){w.prev.next=w.next,w.next.prev=w.prev,delete w.next,delete w.prev},k=function(){function w(){var T={};T.prev=T,T.next=T.prev,this.shortcut=T}return w.prototype.dequeue=function(){var T=this.shortcut,L=T.prev;if(L&&L!==T)return x(L),L},w.prototype.enqueue=function(T){var L=this.shortcut;T.prev&&T.next&&x(T),T.next=L.next,L.next.prev=T,L.next=T,T.prev=L},w.prototype.toString=function(){for(var T=[],L=this.shortcut,P=L.prev;P!==L;)T.push(JSON.stringify(P,C)),P=P==null?void 0:P.prev;return"[".concat(T.join(", "),"]")},w}();z.default=k},40773:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var E=function(D,F){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,b){Y.__proto__=b}||function(Y,b){for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(Y[h]=b[h])},E(D,F)};return function(D,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");E(D,F);function Y(){this.constructor=D}D.prototype=F===null?Object.create(F):(Y.prototype=F.prototype,new Y)}}(),k=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(455532)),T=C(199905),L=function(E){x(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(w.default),P=function(E){x(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(T.Graph),p=function(){return 1},m=function(E,D){var F;if(E.nodeCount()<=1)return[];var Y=g(E,D||p),b=S(Y.graph,Y.buckets,Y.zeroIdx);return(F=b.map(function(h){return E.outEdges(h.v,h.w)}))===null||F===void 0?void 0:F.flat()},S=function(E,D,F){for(var Y=[],b=D[D.length-1],h=D[0],$;E.nodeCount();){for(;$=h.dequeue();)y(E,D,F,$);for(;$=b.dequeue();)y(E,D,F,$);if(E.nodeCount()){for(var U=D.length-2;U>0;--U)if($=D[U].dequeue(),$){Y=Y.concat(y(E,D,F,$,!0));break}}}return Y},y=function(E,D,F,Y,b){var h,$,U=[];return(h=E.inEdges(Y.v))===null||h===void 0||h.forEach(function(W){var V=E.edge(W),H=E.node(W.v);b&&U.push({v:W.v,w:W.w,in:0,out:0}),H.out===void 0&&(H.out=0),H.out-=V,A(D,F,H)}),($=E.outEdges(Y.v))===null||$===void 0||$.forEach(function(W){var V=E.edge(W),H=W.w,q=E.node(H);q.in===void 0&&(q.in=0),q.in-=V,A(D,F,q)}),E.removeNode(Y.v),b?U:void 0},g=function(E,D){var F=new P,Y=0,b=0;E.nodes().forEach(function(V){F.setNode(V,{v:V,in:0,out:0})}),E.edges().forEach(function(V){var H=F.edge(V)||0,q=(D==null?void 0:D(V))||1,tt=H+q;F.setEdge(V.v,V.w,tt),b=Math.max(b,F.node(V.v).out+=q),Y=Math.max(Y,F.node(V.w).in+=q)});for(var h=[],$=b+Y+3,U=0;U<$;U++)h.push(new L);var W=Y+1;return F.nodes().forEach(function(V){A(h,W,F.node(V))}),{buckets:h,zeroIdx:W,graph:F}},A=function(E,D,F){F.out?F.in?E[F.out-F.in+D].enqueue(F):E[E.length-1].enqueue(F):E[0].enqueue(F)};z.default=m},265236:function(Ve,z,C){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(St){for(var Dt,Qt=1,ue=arguments.length;Qt<ue;Qt++){Dt=arguments[Qt];for(var ie in Dt)Object.prototype.hasOwnProperty.call(Dt,ie)&&(St[ie]=Dt[ie])}return St},x.apply(this,arguments)},k=this&&this.__importDefault||function(St){return St&&St.__esModule?St:{default:St}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(178029)),T=k(C(546171)),L=k(C(576827)),P=C(269209),p=k(C(933562)),m=k(C(59596)),S=k(C(111500)),y=k(C(335279)),g=k(C(819597)),A=k(C(100095)),E=k(C(724956)),D=C(627652),F=function(St,Dt){var Qt=Dt&&Dt.debugTiming?P.time:P.notime;Qt("layout",function(){Dt&&!Dt.keepNodeOrder&&Dt.prevGraph&&Qt("  inheritOrder",function(){b(St,Dt.prevGraph)});var ue=Qt("  buildLayoutGraph",function(){return ft(St)});Dt&&Dt.edgeLabelSpace===!1||Qt("  makeSpaceForEdgeLabels",function(){it(ue)});try{Qt("  runLayout",function(){Y(ue,Qt,Dt)})}catch(ie){if(ie.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ie);return}throw ie}Qt("  updateInputGraph",function(){h(St,ue)})})},Y=function(St,Dt,Qt){Dt("    removeSelfEdges",function(){_t(St)}),Dt("    acyclic",function(){w.default.run(St)}),Dt("    nestingGraph.run",function(){m.default.run(St)}),Dt("    rank",function(){(0,L.default)((0,P.asNonCompoundGraph)(St))}),Dt("    injectEdgeLabelProxies",function(){bt(St)}),Dt("    removeEmptyRanks",function(){(0,P.removeEmptyRanks)(St)}),Dt("    nestingGraph.cleanup",function(){m.default.cleanup(St)}),Dt("    normalizeRanks",function(){(0,P.normalizeRanks)(St)}),Dt("    assignRankMinMax",function(){gt(St)}),Dt("    removeEdgeLabelProxies",function(){Xt(St)}),Dt("    normalize.run",function(){T.default.run(St)}),Dt("    parentDummyChains",function(){(0,p.default)(St)}),Dt("    addBorderSegments",function(){(0,S.default)(St)}),Qt&&Qt.keepNodeOrder&&Dt("    initDataOrder",function(){(0,E.default)(St,Qt.nodeOrder)}),Dt("    order",function(){(0,g.default)(St,Qt==null?void 0:Qt.keepNodeOrder)}),Dt("    insertSelfEdges",function(){nt(St)}),Dt("    adjustCoordinateSystem",function(){y.default.adjust(St)}),Dt("    position",function(){(0,A.default)(St)}),Dt("    positionSelfEdges",function(){vt(St)}),Dt("    removeBorderNodes",function(){yt(St)}),Dt("    normalize.undo",function(){T.default.undo(St)}),Dt("    fixupEdgeLabelCoords",function(){Z(St)}),Dt("    undoCoordinateSystem",function(){y.default.undo(St)}),Dt("    translateGraph",function(){Ct(St)}),Dt("    assignNodeIntersects",function(){At(St)}),Dt("    reversePoints",function(){J(St)}),Dt("    acyclic.undo",function(){w.default.undo(St)})},b=function(St,Dt){St.nodes().forEach(function(Qt){var ue=St.node(Qt),ie=Dt.node(Qt);ie!==void 0?(ue.fixorder=ie._order,delete ie._order):delete ue.fixorder})},h=function(St,Dt){St.nodes().forEach(function(Qt){var ue,ie=St.node(Qt);if(ie){var Lt=Dt.node(Qt);ie.x=Lt.x,ie.y=Lt.y,ie._order=Lt.order,ie._rank=Lt.rank,!((ue=Dt.children(Qt))===null||ue===void 0)&&ue.length&&(ie.width=Lt.width,ie.height=Lt.height)}}),St.edges().forEach(function(Qt){var ue=St.edge(Qt),ie=Dt.edge(Qt);ue.points=ie?ie.points:[],ie&&ie.hasOwnProperty("x")&&(ue.x=ie.x,ue.y=ie.y)}),St.graph().width=Dt.graph().width,St.graph().height=Dt.graph().height},$=["nodesep","edgesep","ranksep","marginx","marginy"],U={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],V=["width","height","layer","fixorder"],H={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],tt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rt=["labelpos"],ft=function(St){var Dt=new D.Graph({multigraph:!0,compound:!0}),Qt=Pt(St.graph()),ue={};return W==null||W.forEach(function(ie){Qt[ie]!==void 0&&(ue[ie]=Qt[ie])}),Dt.setGraph(Object.assign({},U,It(Qt,$),ue)),St.nodes().forEach(function(ie){var Lt=Pt(St.node(ie)),ne=x(x({},H),Lt),ve=It(ne,V);Dt.setNode(ie,ve),Dt.setParent(ie,St.parent(ie))}),St.edges().forEach(function(ie){var Lt=Pt(St.edge(ie)),ne={};rt==null||rt.forEach(function(ve){Lt[ve]!==void 0&&(ne[ve]=Lt[ve])}),Dt.setEdgeObj(ie,Object.assign({},tt,It(Lt,q),ne))}),Dt},it=function(St){var Dt=St.graph();Dt.ranksep||(Dt.ranksep=0),Dt.ranksep/=2,St.nodes().forEach(function(Qt){var ue=St.node(Qt);isNaN(ue.layer)||ue.layer||(ue.layer=0)}),St.edges().forEach(function(Qt){var ue,ie=St.edge(Qt);ie.minlen*=2,((ue=ie.labelpos)===null||ue===void 0?void 0:ue.toLowerCase())!=="c"&&(Dt.rankdir==="TB"||Dt.rankdir==="BT"?ie.width+=ie.labeloffset:ie.height+=ie.labeloffset)})},bt=function(St){St.edges().forEach(function(Dt){var Qt=St.edge(Dt);if(Qt.width&&Qt.height){var ue=St.node(Dt.v),ie=St.node(Dt.w),Lt={e:Dt,rank:(ie.rank-ue.rank)/2+ue.rank};(0,P.addDummyNode)(St,"edge-proxy",Lt,"_ep")}})},gt=function(St){var Dt=0;St.nodes().forEach(function(Qt){var ue,ie,Lt=St.node(Qt);Lt.borderTop&&(Lt.minRank=(ue=St.node(Lt.borderTop))===null||ue===void 0?void 0:ue.rank,Lt.maxRank=(ie=St.node(Lt.borderBottom))===null||ie===void 0?void 0:ie.rank,Dt=Math.max(Dt,Lt.maxRank||-1/0))}),St.graph().maxRank=Dt},Xt=function(St){St.nodes().forEach(function(Dt){var Qt=St.node(Dt);Qt.dummy==="edge-proxy"&&(St.edge(Qt.e).labelRank=Qt.rank,St.removeNode(Dt))})},Ct=function(St){var Dt,Qt=0,ue,ie=0,Lt=St.graph(),ne=Lt.marginx||0,ve=Lt.marginy||0,Wt=function(ae){if(ae){var Ce=ae.x,xe=ae.y,Jt=ae.width,we=ae.height;!isNaN(Ce)&&!isNaN(Jt)&&(Dt===void 0&&(Dt=Ce-Jt/2),Dt=Math.min(Dt,Ce-Jt/2),Qt=Math.max(Qt,Ce+Jt/2)),!isNaN(xe)&&!isNaN(we)&&(ue===void 0&&(ue=xe-we/2),ue=Math.min(ue,xe-we/2),ie=Math.max(ie,xe+we/2))}};St.nodes().forEach(function(ae){Wt(St.node(ae))}),St.edges().forEach(function(ae){var Ce=St.edge(ae);Ce!=null&&Ce.hasOwnProperty("x")&&Wt(Ce)}),Dt-=ne,ue-=ve,St.nodes().forEach(function(ae){var Ce=St.node(ae);Ce&&(Ce.x-=Dt,Ce.y-=ue)}),St.edges().forEach(function(ae){var Ce,xe=St.edge(ae);(Ce=xe.points)===null||Ce===void 0||Ce.forEach(function(Jt){Jt.x-=Dt,Jt.y-=ue}),xe.hasOwnProperty("x")&&(xe.x-=Dt),xe.hasOwnProperty("y")&&(xe.y-=ue)}),Lt.width=Qt-Dt+ne,Lt.height=ie-ue+ve},At=function(St){St.edges().forEach(function(Dt){var Qt=St.edge(Dt),ue=St.node(Dt.v),ie=St.node(Dt.w),Lt,ne;Qt.points?(Lt=Qt.points[0],ne=Qt.points[Qt.points.length-1]):(Qt.points=[],Lt=ie,ne=ue),Qt.points.unshift((0,P.intersectRect)(ue,Lt)),Qt.points.push((0,P.intersectRect)(ie,ne))})},Z=function(St){St.edges().forEach(function(Dt){var Qt=St.edge(Dt);if(Qt!=null&&Qt.hasOwnProperty("x"))switch((Qt.labelpos==="l"||Qt.labelpos==="r")&&(Qt.width-=Qt.labeloffset),Qt.labelpos){case"l":Qt.x-=Qt.width/2+Qt.labeloffset;break;case"r":Qt.x+=Qt.width/2+Qt.labeloffset;break}})},J=function(St){St.edges().forEach(function(Dt){var Qt,ue=St.edge(Dt);ue.reversed&&((Qt=ue.points)===null||Qt===void 0||Qt.reverse())})},yt=function(St){St.nodes().forEach(function(Dt){var Qt,ue,ie;if(!((Qt=St.children(Dt))===null||Qt===void 0)&&Qt.length){var Lt=St.node(Dt),ne=St.node(Lt.borderTop),ve=St.node(Lt.borderBottom),Wt=St.node(Lt.borderLeft[((ue=Lt.borderLeft)===null||ue===void 0?void 0:ue.length)-1]),ae=St.node(Lt.borderRight[((ie=Lt.borderRight)===null||ie===void 0?void 0:ie.length)-1]);Lt.width=Math.abs((ae==null?void 0:ae.x)-(Wt==null?void 0:Wt.x))||10,Lt.height=Math.abs((ve==null?void 0:ve.y)-(ne==null?void 0:ne.y))||10,Lt.x=((Wt==null?void 0:Wt.x)||0)+Lt.width/2,Lt.y=((ne==null?void 0:ne.y)||0)+Lt.height/2}}),St.nodes().forEach(function(Dt){var Qt;((Qt=St.node(Dt))===null||Qt===void 0?void 0:Qt.dummy)==="border"&&St.removeNode(Dt)})},_t=function(St){St.edges().forEach(function(Dt){if(Dt.v===Dt.w){var Qt=St.node(Dt.v);Qt.selfEdges||(Qt.selfEdges=[]),Qt.selfEdges.push({e:Dt,label:St.edge(Dt)}),St.removeEdgeObj(Dt)}})},nt=function(St){var Dt=(0,P.buildLayerMatrix)(St);Dt==null||Dt.forEach(function(Qt){var ue=0;Qt==null||Qt.forEach(function(ie,Lt){var ne,ve=St.node(ie);ve.order=Lt+ue,(ne=ve.selfEdges)===null||ne===void 0||ne.forEach(function(Wt){(0,P.addDummyNode)(St,"selfedge",{width:Wt.label.width,height:Wt.label.height,rank:ve.rank,order:Lt+ ++ue,e:Wt.e,label:Wt.label},"_se")}),delete ve.selfEdges})})},vt=function(St){St.nodes().forEach(function(Dt){var Qt=St.node(Dt);if(Qt.dummy==="selfedge"){var ue=St.node(Qt.e.v),ie=ue.x+ue.width/2,Lt=ue.y,ne=Qt.x-ie,ve=ue.height/2;St.setEdgeObj(Qt.e,Qt.label),St.removeNode(Dt),Qt.label.points=[{x:ie+2*ne/3,y:Lt-ve},{x:ie+5*ne/6,y:Lt-ve},{y:Lt,x:ie+ne},{x:ie+5*ne/6,y:Lt+ve},{x:ie+2*ne/3,y:Lt+ve}],Qt.label.x=Qt.x,Qt.label.y=Qt.y}})},It=function(St,Dt){var Qt={};return Dt==null||Dt.forEach(function(ue){St[ue]!==void 0&&(Qt[ue]=+St[ue])}),Qt},Pt=function(St){St===void 0&&(St={});var Dt={};return Object.keys(St).forEach(function(Qt){Dt[Qt.toLowerCase()]=St[Qt]}),Dt};z.default=F},59596:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(p){var m,S=(0,x.addDummyNode)(p,"root",{},"_root"),y=T(p),g=Math.max.apply(Math,Object.values(y));Math.abs(g)===1/0&&(g=1);var A=g-1,E=2*A+1;p.graph().nestingRoot=S,p.edges().forEach(function(F){p.edge(F).minlen*=E});var D=L(p)+1;(m=p.children())===null||m===void 0||m.forEach(function(F){w(p,S,E,D,A,y,F)}),p.graph().nodeRankFactor=E},w=function(p,m,S,y,g,A,E){var D=p.children(E);if(!(D!=null&&D.length)){E!==m&&p.setEdge(m,E,{weight:0,minlen:S});return}var F=(0,x.addBorderNode)(p,"_bt"),Y=(0,x.addBorderNode)(p,"_bb"),b=p.node(E);p.setParent(F,E),b.borderTop=F,p.setParent(Y,E),b.borderBottom=Y,D==null||D.forEach(function(h){w(p,m,S,y,g,A,h);var $=p.node(h),U=$.borderTop?$.borderTop:h,W=$.borderBottom?$.borderBottom:h,V=$.borderTop?y:2*y,H=U!==W?1:g-A[E]+1;p.setEdge(F,U,{minlen:H,weight:V,nestingEdge:!0}),p.setEdge(W,Y,{minlen:H,weight:V,nestingEdge:!0})}),p.parent(E)||p.setEdge(m,F,{weight:0,minlen:g+A[E]})},T=function(p){var m,S={},y=function(g,A){var E=p.children(g);E==null||E.forEach(function(D){return y(D,A+1)}),S[g]=A};return(m=p.children())===null||m===void 0||m.forEach(function(g){return y(g,1)}),S},L=function(p){var m=0;return p.edges().forEach(function(S){m+=p.edge(S).weight}),m},P=function(p){var m=p.graph();m.nestingRoot&&p.removeNode(m.nestingRoot),delete m.nestingRoot,p.edges().forEach(function(S){var y=p.edge(S);y.nestingEdge&&p.removeEdgeObj(S)})};z.default={run:k,cleanup:P}},546171:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(L){L.graph().dummyChains=[],L.edges().forEach(function(P){return w(L,P)})},w=function(L,P){var p=P.v,m=L.node(p).rank,S=P.w,y=L.node(S).rank,g=P.name,A=L.edge(P),E=A.labelRank;if(y!==m+1){L.removeEdgeObj(P);var D=L.graph(),F,Y,b;for(b=0,++m;m<y;++b,++m)A.points=[],Y={edgeLabel:A,width:0,height:0,edgeObj:P,rank:m},F=(0,x.addDummyNode)(L,"edge",Y,"_d"),m===E&&(Y.width=A.width,Y.height=A.height,Y.dummy="edge-label",Y.labelpos=A.labelpos),L.setEdge(p,F,{weight:A.weight},g),b===0&&(D.dummyChains||(D.dummyChains=[]),D.dummyChains.push(F)),p=F;L.setEdge(p,S,{weight:A.weight},g)}},T=function(L){var P;(P=L.graph().dummyChains)===null||P===void 0||P.forEach(function(p){var m=L.node(p),S=m.edgeLabel,y;m.edgeObj&&L.setEdgeObj(m.edgeObj,S);for(var g=p;m.dummy;)y=L.successors(g)[0],L.removeNode(g),S.points.push({x:m.x,y:m.y}),m.dummy==="edge-label"&&(S.x=m.x,S.y=m.y,S.width=m.width,S.height=m.height),g=y,m=L.node(g)})};z.default={run:k,undo:T}},680314:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k,w){var T={},L;w==null||w.forEach(function(P){for(var p=x.parent(P),m,S;p;){if(m=x.parent(p),m?(S=T[m],T[m]=p):(S=L,L=p),S&&S!==p){k.setEdge(S,p);return}p=m}})};z.default=C},989921:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k){return k.map(function(w){var T=x.inEdges(w);if(!(T!=null&&T.length))return{v:w};{var L={sum:0,weight:0};return T==null||T.forEach(function(P){var p=x.edge(P),m=x.node(P.v);L.sum+=p.weight*m.order,L.weight+=p.weight}),{v:w,barycenter:L.sum/L.weight,weight:L.weight}}})};z.default=C},277006:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(627652),k=function(T,L,P){var p=w(T),m=new x.Graph({compound:!0}).setGraph({root:p}).setDefaultNodeLabel(function(S){return T.node(S)});return T.nodes().forEach(function(S){var y,g=T.node(S),A=T.parent(S);(g.rank===L||g.minRank<=L&&L<=g.maxRank)&&(m.setNode(S),m.setParent(S,A||p),(y=T[P](S))===null||y===void 0||y.forEach(function(E){var D=E.v===S?E.w:E.v,F=m.edgeFromArgs(D,S),Y=F!==void 0?F.weight:0;m.setEdge(D,S,{weight:T.edge(E).weight+Y})}),g.hasOwnProperty("minRank")&&m.setNode(S,{borderLeft:g.borderLeft[L],borderRight:g.borderRight[L]}))}),m},w=function(T){for(var L;T.hasNode(L="_root".concat(Math.random())););return L};z.default=k},632957:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(T,L,P){for(var p=(0,x.zipObject)(P,P.map(function(D,F){return F})),m=L.map(function(D){var F,Y=(F=T.outEdges(D))===null||F===void 0?void 0:F.map(function(b){return{pos:p[b.w]||0,weight:T.edge(b).weight}});return Y==null?void 0:Y.sort(function(b,h){return b.pos-h.pos})}),S=m.flat().filter(function(D){return D!==void 0}),y=1;y<P.length;)y<<=1;var g=2*y-1;y-=1;var A=Array(g).fill(0,0,g),E=0;return S==null||S.forEach(function(D){if(D){var F=D.pos+y;A[F]+=D.weight;for(var Y=0;F>0;)F%2&&(Y+=A[F+1]),F=F-1>>1,A[F]+=D.weight;E+=D.weight*Y}}),E},w=function(T,L){for(var P=0,p=1;p<(L==null?void 0:L.length);p+=1)P+=k(T,L[p-1],L[p]);return P};z.default=w},819597:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(115697)),w=x(C(632957)),T=x(C(277006)),L=x(C(680314)),P=x(C(99455)),p=C(449784),m=C(627652),S=C(269209),y=function(D,F){for(var Y=(0,S.maxRank)(D),b=[],h=[],$=1;$<Y+1;$++)b.push($);for(var $=Y-1;$>-1;$--)h.push($);var U=g(D,b,"inEdges"),W=g(D,h,"outEdges"),V=(0,k.default)(D);E(D,V);for(var H=Number.POSITIVE_INFINITY,q,$=0,tt=0;tt<4;++$,++tt){A($%2?U:W,$%4>=2,!1,F),V=(0,S.buildLayerMatrix)(D);var rt=(0,w.default)(D,V);rt<H&&(tt=0,q=(0,p.clone)(V),H=rt)}V=(0,k.default)(D),E(D,V);for(var $=0,tt=0;tt<4;++$,++tt){A($%2?U:W,$%4>=2,!0,F),V=(0,S.buildLayerMatrix)(D);var rt=(0,w.default)(D,V);rt<H&&(tt=0,q=(0,p.clone)(V),H=rt)}E(D,q)},g=function(D,F,Y){return F.map(function(b){return(0,T.default)(D,b,Y)})},A=function(D,F,Y,b){var h=new m.Graph;D==null||D.forEach(function($){for(var U,W=$.graph().root,V=(0,P.default)($,W,h,F,Y,b),H=0;H<((U=V.vs)===null||U===void 0?void 0:U.length);H++){var q=$.node(V.vs[H]);q&&(q.order=H)}(0,L.default)($,h,V.vs)})},E=function(D,F){F==null||F.forEach(function(Y){Y==null||Y.forEach(function(b,h){D.node(b).order=h})})};z.default=y},724956:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k){for(var w=x.nodes().filter(function(m){var S;return!(!((S=x.children(m))===null||S===void 0)&&S.length)}),T=w.map(function(m){return x.node(m).rank}),L=Math.max.apply(Math,T),P=[],p=0;p<L+1;p++)P[p]=[];k==null||k.forEach(function(m){var S=x.node(m);!S||S!=null&&S.dummy||isNaN(S.rank)||(S.fixorder=P[S.rank].length,P[S.rank].push(m))})};z.default=C},115697:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(233446),k=function(w){for(var T={},L=w.nodes().filter(function(D){var F;return!(!((F=w.children(D))===null||F===void 0)&&F.length)}),P=L.map(function(D){return w.node(D).rank}),p=(0,x.max)(P),m=[],S=0;S<p+1;S++)m.push([]);var y=function(D){var F;if(!T.hasOwnProperty(D)){T[D]=!0;var Y=w.node(D);isNaN(Y.rank)||m[Y.rank].push(D),(F=w.successors(D))===null||F===void 0||F.forEach(function(b){return y(b)})}},g=L.sort(function(D,F){return w.node(D).rank-w.node(F).rank}),A=g.filter(function(D){return w.node(D).fixorder!==void 0}),E=A.sort(function(D,F){return w.node(D).fixorder-w.node(F).fixorder});return E==null||E.forEach(function(D){isNaN(w.node(D).rank)||m[w.node(D).rank].push(D),T[D]=!0}),g==null||g.forEach(y),m};z.default=k},707043:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){var L,P,p,m={};w==null||w.forEach(function(y,g){m[y.v]={i:g,indegree:0,in:[],out:[],vs:[y.v]};var A=m[y.v];y.barycenter!==void 0&&(A.barycenter=y.barycenter,A.weight=y.weight)}),(L=T.edges())===null||L===void 0||L.forEach(function(y){var g=m[y.v],A=m[y.w];g!==void 0&&A!==void 0&&(A.indegree++,g.out.push(m[y.w]))});var S=(p=(P=Object.values(m)).filter)===null||p===void 0?void 0:p.call(P,function(y){return!y.indegree});return x(S)},x=function(w){for(var T,L,P=[],p=function(A){return function(E){E.merged||(E.barycenter===void 0||A.barycenter===void 0||E.barycenter>=A.barycenter)&&k(A,E)}},m=function(A){return function(E){E.in.push(A),--E.indegree===0&&w.push(E)}},S=function(){var A=w.pop();P.push(A),(T=A.in.reverse())===null||T===void 0||T.forEach(function(E){return p(A)(E)}),(L=A.out)===null||L===void 0||L.forEach(function(E){return m(A)(E)})};w!=null&&w.length;)S();var y=P.filter(function(A){return!A.merged}),g=["vs","i","barycenter","weight"];return y.map(function(A){var E={};return g==null||g.forEach(function(D){A[D]!==void 0&&(E[D]=A[D])}),E})},k=function(w,T){var L,P=0,p=0;w.weight&&(P+=w.barycenter*w.weight,p+=w.weight),T.weight&&(P+=T.barycenter*T.weight,p+=T.weight),w.vs=(L=T.vs)===null||L===void 0?void 0:L.concat(w.vs),w.barycenter=P/p,w.weight=p,w.i=Math.min(T.i,w.i),T.merged=!0};z.default=C},99455:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(989921)),w=x(C(707043)),T=x(C(421498)),L=function(m,S,y,g,A,E){var D,F,Y,b,h=m.children(S),$=m.node(S),U=$?$.borderLeft:void 0,W=$?$.borderRight:void 0,V={};U&&(h=h==null?void 0:h.filter(function(it){return it!==U&&it!==W}));var H=(0,k.default)(m,h||[]);H==null||H.forEach(function(it){var bt;if(!((bt=m.children(it.v))===null||bt===void 0)&&bt.length){var gt=L(m,it.v,y,g,E);V[it.v]=gt,gt.hasOwnProperty("barycenter")&&p(it,gt)}});var q=(0,w.default)(H,y);P(q,V),(D=q.filter(function(it){return it.vs.length>0}))===null||D===void 0||D.forEach(function(it){var bt=m.node(it.vs[0]);bt&&(it.fixorder=bt.fixorder,it.order=bt.order)});var tt=(0,T.default)(q,g,A,E);if(U&&(tt.vs=[U,tt.vs,W].flat(),!((F=m.predecessors(U))===null||F===void 0)&&F.length)){var rt=m.node(((Y=m.predecessors(U))===null||Y===void 0?void 0:Y[0])||""),ft=m.node(((b=m.predecessors(W))===null||b===void 0?void 0:b[0])||"");tt.hasOwnProperty("barycenter")||(tt.barycenter=0,tt.weight=0),tt.barycenter=(tt.barycenter*tt.weight+rt.order+ft.order)/(tt.weight+2),tt.weight+=2}return tt},P=function(m,S){m==null||m.forEach(function(y){var g,A=(g=y.vs)===null||g===void 0?void 0:g.map(function(E){return S[E]?S[E].vs:E});y.vs=A.flat()})},p=function(m,S){m.barycenter!==void 0?(m.barycenter=(m.barycenter*m.weight+S.barycenter*S.weight)/(m.weight+S.weight),m.weight+=S.weight):(m.barycenter=S.barycenter,m.weight=S.weight)};z.default=L},421498:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(L,P,p,m){var S=(0,x.partition)(L,function(b){var h=b.hasOwnProperty("fixorder")&&!isNaN(b.fixorder);return m?!h&&b.hasOwnProperty("barycenter"):h||b.hasOwnProperty("barycenter")}),y=S.lhs,g=S.rhs.sort(function(b,h){return-b.i- -h.i}),A=[],E=0,D=0,F=0;y==null||y.sort(T(!!P,!!p)),F=w(A,g,F),y==null||y.forEach(function(b){var h;F+=(h=b.vs)===null||h===void 0?void 0:h.length,A.push(b.vs),E+=b.barycenter*b.weight,D+=b.weight,F=w(A,g,F)});var Y={vs:A.flat()};return D&&(Y.barycenter=E/D,Y.weight=D),Y},w=function(L,P,p){for(var m=p,S;P.length&&(S=P[P.length-1]).i<=m;)P.pop(),L==null||L.push(S.vs),m++;return m},T=function(L,P){return function(p,m){if(p.fixorder!==void 0&&m.fixorder!==void 0)return p.fixorder-m.fixorder;if(p.barycenter<m.barycenter)return-1;if(p.barycenter>m.barycenter)return 1;if(P&&p.order!==void 0&&m.order!==void 0){if(p.order<m.order)return-1;if(p.order>m.order)return 1}return L?m.i-p.i:p.i-m.i}};z.default=k},933562:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w){var T,L={},P=0,p=function(m){var S,y=P;(S=w.children(m))===null||S===void 0||S.forEach(p),L[m]={low:y,lim:P++}};return(T=w.children())===null||T===void 0||T.forEach(p),L},x=function(w,T,L,P){var p=[],m=[],S=Math.min(T[L].low,T[P].low),y=Math.max(T[L].lim,T[P].lim),g,A;g=L;do g=w.parent(g),p.push(g);while(g&&(T[g].low>S||y>T[g].lim));for(A=g,g=P;g&&g!==A;)m.push(g),g=w.parent(g);return{lca:A,path:p.concat(m.reverse())}},k=function(w){var T,L=C(w);(T=w.graph().dummyChains)===null||T===void 0||T.forEach(function(P){var p,m,S=P,y=w.node(S),g=y.edgeObj;if(g)for(var A=x(w,L,g.v,g.w),E=A.path,D=A.lca,F=0,Y=E[F],b=!0;S!==g.w;){if(y=w.node(S),b){for(;Y!==D&&((p=w.node(Y))===null||p===void 0?void 0:p.maxRank)<y.rank;)F++,Y=E[F];Y===D&&(b=!1)}if(!b){for(;F<E.length-1&&((m=w.node(E[F+1]))===null||m===void 0?void 0:m.minRank)<=y.rank;)F++;Y=E[F]}w.setParent(S,Y),S=w.successors(S)[0]}})};z.default=k},371963:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var U=function(W,V){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,q){H.__proto__=q}||function(H,q){for(var tt in q)Object.prototype.hasOwnProperty.call(q,tt)&&(H[tt]=q[tt])},U(W,V)};return function(W,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");U(W,V);function H(){this.constructor=W}W.prototype=V===null?Object.create(V):(H.prototype=V.prototype,new H)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.width=z.sep=z.positionX=z.balance=z.alignCoordinates=z.findSmallestWidthAlignment=z.buildBlockGraph=z.horizontalCompaction=z.verticalAlignment=z.hasConflict=z.addConflict=z.findOtherInnerSegmentNode=z.findType2Conflicts=z.findType1Conflicts=void 0;var k=C(199905),w=C(233446),T=C(269209),L=function(U){x(W,U);function W(){return U!==null&&U.apply(this,arguments)||this}return W}(k.Graph),P=function(U,W){var V={},H=function(q,tt){var rt=0,ft=0,it=q.length,bt=tt==null?void 0:tt[(tt==null?void 0:tt.length)-1];return tt==null||tt.forEach(function(gt,Xt){var Ct,At=(0,z.findOtherInnerSegmentNode)(U,gt),Z=At?U.node(At).order:it;(At||gt===bt)&&((Ct=tt.slice(ft,Xt+1))===null||Ct===void 0||Ct.forEach(function(J){var yt;(yt=U.predecessors(J))===null||yt===void 0||yt.forEach(function(_t){var nt,vt=U.node(_t),It=vt.order;(It<rt||Z<It)&&!(vt.dummy&&(!((nt=U.node(J))===null||nt===void 0)&&nt.dummy))&&(0,z.addConflict)(V,_t,J)})}),ft=Xt+1,rt=Z)}),tt};return W!=null&&W.length&&W.reduce(H),V};z.findType1Conflicts=P;var p=function(U,W){var V={};function H(ft,it,bt,gt,Xt){for(var Ct,At,Z,J=it;J<bt;J++)Z=ft[J],!((Ct=U.node(Z))===null||Ct===void 0)&&Ct.dummy&&((At=U.predecessors(Z))===null||At===void 0||At.forEach(function(yt){var _t=U.node(yt);_t.dummy&&(_t.order<gt||_t.order>Xt)&&(0,z.addConflict)(V,yt,Z)}))}function q(ft){return JSON.stringify(ft.slice(1))}function tt(ft,it){var bt=q(ft);it.get(bt)||(H.apply(void 0,ft),it.set(bt,!0))}var rt=function(ft,it){var bt=-1,gt,Xt=0,Ct=new Map;return it==null||it.forEach(function(At,Z){var J;if(((J=U.node(At))===null||J===void 0?void 0:J.dummy)==="border"){var yt=U.predecessors(At)||[];yt.length&&(gt=U.node(yt[0]).order,tt([it,Xt,Z,bt,gt],Ct),Xt=Z,bt=gt)}tt([it,Xt,it.length,gt,ft.length],Ct)}),it};return W!=null&&W.length&&W.reduce(rt),V};z.findType2Conflicts=p;var m=function(U,W){var V,H;if(!((V=U.node(W))===null||V===void 0)&&V.dummy)return(H=U.predecessors(W))===null||H===void 0?void 0:H.find(function(q){return U.node(q).dummy})};z.findOtherInnerSegmentNode=m;var S=function(U,W,V){var H=W,q=V;if(H>q){var tt=H;H=q,q=tt}var rt=U[H];rt||(U[H]=rt={}),rt[q]=!0};z.addConflict=S;var y=function(U,W,V){var H=W,q=V;if(H>q){var tt=W;H=q,q=tt}return!!U[H]};z.hasConflict=y;var g=function(U,W,V,H){var q={},tt={},rt={};return W==null||W.forEach(function(ft){ft==null||ft.forEach(function(it,bt){q[it]=it,tt[it]=it,rt[it]=bt})}),W==null||W.forEach(function(ft){var it=-1;ft==null||ft.forEach(function(bt){var gt=H(bt);if(gt.length){gt=gt.sort(function(J,yt){return rt[J]-rt[yt]});for(var Xt=(gt.length-1)/2,Ct=Math.floor(Xt),At=Math.ceil(Xt);Ct<=At;++Ct){var Z=gt[Ct];tt[bt]===bt&&it<rt[Z]&&!(0,z.hasConflict)(V,bt,Z)&&(tt[Z]=bt,tt[bt]=q[bt]=q[Z],it=rt[Z])}}})}),{root:q,align:tt}};z.verticalAlignment=g;var A=function(U,W,V,H,q){var tt,rt={},ft=(0,z.buildBlockGraph)(U,W,V,q),it=q?"borderLeft":"borderRight",bt=function(Ct,At){for(var Z=ft.nodes(),J=Z.pop(),yt={};J;)yt[J]?Ct(J):(yt[J]=!0,Z.push(J),Z=Z.concat(At(J))),J=Z.pop()},gt=function(Ct){rt[Ct]=(ft.inEdges(Ct)||[]).reduce(function(At,Z){return Math.max(At,(rt[Z.v]||0)+ft.edge(Z))},0)},Xt=function(Ct){var At=(ft.outEdges(Ct)||[]).reduce(function(J,yt){return Math.min(J,(rt[yt.w]||0)-ft.edge(yt))},Number.POSITIVE_INFINITY),Z=U.node(Ct);At!==Number.POSITIVE_INFINITY&&Z.borderType!==it&&(rt[Ct]=Math.max(rt[Ct],At))};return bt(gt,ft.predecessors.bind(ft)),bt(Xt,ft.successors.bind(ft)),(tt=Object.values(H))===null||tt===void 0||tt.forEach(function(Ct){rt[Ct]=rt[V[Ct]]}),rt};z.horizontalCompaction=A;var E=function(U,W,V,H){var q=new L,tt=U.graph(),rt=(0,z.sep)(tt.nodesep,tt.edgesep,H);return W==null||W.forEach(function(ft){var it;ft==null||ft.forEach(function(bt){var gt=V[bt];if(q.setNode(gt),it){var Xt=V[it],Ct=q.edgeFromArgs(Xt,gt);q.setEdge(Xt,gt,Math.max(rt(U,bt,it),Ct||0))}it=bt})}),q};z.buildBlockGraph=E;var D=function(U,W){return(0,T.minBy)(Object.values(W),function(V){var H,q=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return(H=Object.keys(V))===null||H===void 0||H.forEach(function(rt){var ft=V[rt],it=(0,z.width)(U,rt)/2;q=Math.max(ft+it,q),tt=Math.min(ft-it,tt)}),q-tt})};z.findSmallestWidthAlignment=D;function F(U,W){var V=Object.values(W),H=(0,w.min)(V),q=(0,w.max)(V);["u","d"].forEach(function(tt){["l","r"].forEach(function(rt){var ft=tt+rt,it=U[ft],bt;if(it!==W){var gt=Object.values(it);bt=rt==="l"?H-(0,w.min)(gt):q-(0,w.max)(gt),bt&&(U[ft]={},Object.keys(it).forEach(function(Xt){U[ft][Xt]=it[Xt]+bt}))}})})}z.alignCoordinates=F;var Y=function(U,W){var V={};return Object.keys(U.ul).forEach(function(H){if(W)V[H]=U[W.toLowerCase()][H];else{var q=Object.values(U).map(function(tt){return tt[H]});V[H]=(q[0]+q[1])/2}}),V};z.balance=Y;var b=function(U){var W=(0,T.buildLayerMatrix)(U),V=Object.assign((0,z.findType1Conflicts)(U,W),(0,z.findType2Conflicts)(U,W)),H={},q;["u","d"].forEach(function(rt){q=rt==="u"?W:Object.values(W).reverse(),["l","r"].forEach(function(ft){ft==="r"&&(q=q.map(function(Xt){return Object.values(Xt).reverse()}));var it=(rt==="u"?U.predecessors:U.successors).bind(U),bt=(0,z.verticalAlignment)(U,q,V,it),gt=(0,z.horizontalCompaction)(U,q,bt.root,bt.align,ft==="r");ft==="r"&&Object.keys(gt).forEach(function(Xt){gt[Xt]=-gt[Xt]}),H[rt+ft]=gt})});var tt=(0,z.findSmallestWidthAlignment)(U,H);return F(H,tt),(0,z.balance)(H,U.graph().align)};z.positionX=b;var h=function(U,W,V){return function(H,q,tt){var rt=H.node(q),ft=H.node(tt),it=0,bt;if(it+=rt.width/2,rt.hasOwnProperty("labelpos"))switch((rt.labelpos||"").toLowerCase()){case"l":bt=-rt.width/2;break;case"r":bt=rt.width/2;break}if(bt&&(it+=V?bt:-bt),bt=0,it+=(rt.dummy?W:U)/2,it+=(ft.dummy?W:U)/2,it+=ft.width/2,ft.labelpos)switch((ft.labelpos||"").toLowerCase()){case"l":bt=ft.width/2;break;case"r":bt=-ft.width/2;break}return bt&&(it+=V?bt:-bt),bt=0,it}};z.sep=h;var $=function(U,W){return U.node(W).width||0};z.width=$},100095:function(Ve,z,C){"use strict";var x=this&&this.__spreadArray||function(p,m,S){if(S||arguments.length===2)for(var y=0,g=m.length,A;y<g;y++)(A||!(y in m))&&(A||(A=Array.prototype.slice.call(m,0,y)),A[y]=m[y]);return p.concat(A||Array.prototype.slice.call(m))};Object.defineProperty(z,"__esModule",{value:!0});var k=C(269209),w=C(371963),T=function(p){var m=(0,k.buildLayerMatrix)(p),S=p.graph().ranksep,y=0;m==null||m.forEach(function(g){var A=g.map(function(D){return p.node(D).height}),E=Math.max.apply(Math,x(x([],A,!1),[0],!1));g==null||g.forEach(function(D){p.node(D).y=y+E/2}),y+=E+S})},L=function(p){var m=(0,k.buildLayerMatrix)(p),S=Object.assign((0,w.findType1Conflicts)(p,m),(0,w.findType2Conflicts)(p,m)),y={},g=[];["u","d"].forEach(function(E){g=E==="u"?m:Object.values(m).reverse(),["l","r"].forEach(function(D){D==="r"&&(g=g.map(function(h){return Object.values(h).reverse()}));var F=(E==="u"?p.predecessors:p.successors).bind(p),Y=(0,w.verticalAlignment)(p,g,S,F),b=(0,w.horizontalCompaction)(p,g,Y.root,Y.align,D==="r");D==="r"&&Object.keys(b).forEach(function(h){return b[h]=-b[h]}),y[E+D]=b})});var A=(0,w.findSmallestWidthAlignment)(p,y);return A&&(0,w.alignCoordinates)(y,A),(0,w.balance)(y,p.graph().align)},P=function(p){var m,S=(0,k.asNonCompoundGraph)(p);T(S);var y=L(S);(m=Object.keys(y))===null||m===void 0||m.forEach(function(g){S.node(g).x=y[g]})};z.default=P},813614:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.feasibleTreeWithLayer=z.feasibleTree=void 0;var x=C(337323),k=C(269209),w=C(627652),T=function(y){var g=new w.Graph({directed:!1}),A=y.nodes()[0],E=y.nodeCount();g.setNode(A,{});for(var D,F;L(g,y)<E;)D=m(g,y),F=g.hasNode(D.v)?(0,x.slack)(y,D):-(0,x.slack)(y,D),S(g,y,F);return g};z.feasibleTree=T;var L=function(y,g){var A=function(E){g.nodeEdges(E).forEach(function(D){var F=D.v,Y=E===F?D.w:F;!y.hasNode(Y)&&!(0,x.slack)(g,D)&&(y.setNode(Y,{}),y.setEdge(E,Y,{}),A(Y))})};return y.nodes().forEach(A),y.nodeCount()},P=function(y){var g=new w.Graph({directed:!1}),A=y.nodes()[0],E=y.nodes().filter(function(Y){return!!y.node(Y)}).length;g.setNode(A,{});for(var D,F;p(g,y)<E;)D=m(g,y),F=g.hasNode(D.v)?(0,x.slack)(y,D):-(0,x.slack)(y,D),S(g,y,F);return g};z.feasibleTreeWithLayer=P;var p=function(y,g){var A=function(E){var D;(D=g.nodeEdges(E))===null||D===void 0||D.forEach(function(F){var Y=F.v,b=E===Y?F.w:Y;!y.hasNode(b)&&(g.node(b).layer!==void 0||!(0,x.slack)(g,F))&&(y.setNode(b,{}),y.setEdge(E,b,{}),A(b))})};return y.nodes().forEach(A),y.nodeCount()},m=function(y,g){return(0,k.minBy)(g.edges(),function(A){return y.hasNode(A.v)!==y.hasNode(A.w)?(0,x.slack)(g,A):1/0})},S=function(y,g,A){y.nodes().forEach(function(E){g.node(E).rank||(g.node(E).rank=0),g.node(E).rank+=A})};z.default={feasibleTree:T,feasibleTreeWithLayer:P}},576827:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0});var k=C(337323),w=C(813614),T=x(C(432253)),L=function(S){switch(S.graph().ranker){case"network-simplex":m(S);break;case"tight-tree":p(S);break;case"longest-path":P(S);break;default:p(S)}},P=k.longestPath,p=function(S){(0,k.longestPathWithLayer)(S),(0,w.feasibleTreeWithLayer)(S)},m=function(S){(0,T.default)(S)};z.default=L},432253:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.exchangeEdges=z.enterEdge=z.leaveEdge=z.initLowLimValues=z.calcCutValue=z.initCutValues=void 0;var x=C(813614),k=C(337323),w=C(269209),T=C(199905),L=T.algorithm.preorder,P=T.algorithm.postorder,p=function($){var U=(0,w.simplify)($);(0,k.longestPath)(U);var W=(0,x.feasibleTree)(U);(0,z.initLowLimValues)(W),(0,z.initCutValues)(W,U);for(var V,H;V=(0,z.leaveEdge)(W);)H=(0,z.enterEdge)(W,U,V),(0,z.exchangeEdges)(W,U,V,H)},m=function($,U){var W=P($,$.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(V){S($,U,V)})};z.initCutValues=m;var S=function($,U,W){var V=$.node(W),H=V.parent;$.edgeFromArgs(W,H).cutvalue=(0,z.calcCutValue)($,U,W)},y=function($,U,W){var V,H=$.node(W),q=H.parent,tt=!0,rt=U.edgeFromArgs(W,q),ft=0;return rt||(tt=!1,rt=U.edgeFromArgs(q,W)),ft=rt.weight,(V=U.nodeEdges(W))===null||V===void 0||V.forEach(function(it){var bt=it.v===W,gt=bt?it.w:it.v;if(gt!==q){var Xt=bt===tt,Ct=U.edge(it).weight;if(ft+=Xt?Ct:-Ct,b($,W,gt)){var At=$.edgeFromArgs(W,gt).cutvalue;ft+=Xt?-At:At}}}),ft};z.calcCutValue=y;var g=function($,U){U===void 0&&(U=$.nodes()[0]),A($,{},1,U)};z.initLowLimValues=g;var A=function($,U,W,V,H){var q,tt=W,rt=W,ft=$.node(V);return U[V]=!0,(q=$.neighbors(V))===null||q===void 0||q.forEach(function(it){U[it]||(rt=A($,U,rt,it,V))}),ft.low=tt,ft.lim=rt++,H?ft.parent=H:delete ft.parent,rt},E=function($){return $.edges().find(function(U){return $.edge(U).cutvalue<0})};z.leaveEdge=E;var D=function($,U,W){var V=W.v,H=W.w;U.hasEdge(V,H)||(V=W.w,H=W.v);var q=$.node(V),tt=$.node(H),rt=q,ft=!1;q.lim>tt.lim&&(rt=tt,ft=!0);var it=U.edges().filter(function(bt){return ft===h($,$.node(bt.v),rt)&&ft!==h($,$.node(bt.w),rt)});return(0,w.minBy)(it,function(bt){return(0,k.slack)(U,bt)})};z.enterEdge=D;var F=function($,U,W,V){var H=W.v,q=W.w;$.removeEdge(H,q),$.setEdge(V.v,V.w,{}),(0,z.initLowLimValues)($),(0,z.initCutValues)($,U),Y($,U)};z.exchangeEdges=F;var Y=function($,U){var W=$.nodes().find(function(H){var q;return!(!((q=U.node(H))===null||q===void 0)&&q.parent)}),V=L($,W);V=V==null?void 0:V.slice(1),V==null||V.forEach(function(H){var q=$.node(H).parent,tt=U.edgeFromArgs(H,q),rt=!1;tt||(tt=U.edgeFromArgs(q,H),rt=!0),U.node(H).rank=U.node(q).rank+(rt?tt.minlen:-tt.minlen)})},b=function($,U,W){return $.hasEdge(U,W)},h=function($,U,W){return W.low<=U.lim&&U.lim<=W.lim};z.default=p},337323:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.slack=z.longestPathWithLayer=z.longestPath=void 0;var C=function(w){var T,L={},P=function(p){var m,S=w.node(p);if(!S)return 0;if(L[p])return S.rank;L[p]=!0;var y;return(m=w.outEdges(p))===null||m===void 0||m.forEach(function(g){var A=P(g.w),E=w.edge(g).minlen,D=A-E;D&&(y===void 0||D<y)&&(y=D)}),y||(y=0),S.rank=y,y};(T=w.sources())===null||T===void 0||T.forEach(function(p){return P(p)})};z.longestPath=C;var x=function(w){var T,L={},P,p=function(y){var g,A=w.node(y);if(!A)return 0;if(L[y])return A.rank;L[y]=!0;var E;return(g=w.outEdges(y))===null||g===void 0||g.forEach(function(D){var F=p(D.w),Y=w.edge(D).minlen,b=F-Y;b&&(E===void 0||b<E)&&(E=b)}),E||(E=0),(P===void 0||E<P)&&(P=E),A.rank=E,E};(T=w.sources())===null||T===void 0||T.forEach(function(y){w.node(y)&&p(y)}),P===void 0&&(P=0);var m={},S=function(y,g){var A,E=w.node(y),D=isNaN(E.layer)?g:E.layer;(E.rank===void 0||E.rank<D)&&(E.rank=D),!m[y]&&(m[y]=!0,(A=w.outEdges(y))===null||A===void 0||A.map(function(F){S(F.w,D+w.edge(F).minlen)}))};w.nodes().forEach(function(y){var g=w.node(y);g&&(isNaN(g.layer)?g.rank-=P:S(y,g.layer))})};z.longestPathWithLayer=x;var k=function(w,T){return w.node(T.w).rank-w.node(T.v).rank-w.edge(T).minlen};z.slack=k,z.default={longestPath:C,longestPathWithLayer:x,slack:k}},269209:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.minBy=z.notime=z.time=z.partition=z.maxRank=z.addBorderNode=z.removeEmptyRanks=z.normalizeRanks=z.buildLayerMatrix=z.intersectRect=z.predecessorWeights=z.successorWeights=z.zipObject=z.asNonCompoundGraph=z.simplify=z.addDummyNode=void 0;var x=C(449784),k=C(627652),w=function(U,W){return Number(U)-Number(W)},T=function(U,W,V,H){var q;do q="".concat(H).concat(Math.random());while(U.hasNode(q));return V.dummy=W,U.setNode(q,V),q};z.addDummyNode=T;var L=function(U){var W=new k.Graph().setGraph(U.graph());return U.nodes().forEach(function(V){W.setNode(V,U.node(V))}),U.edges().forEach(function(V){var H=W.edgeFromArgs(V.v,V.w)||{weight:0,minlen:1},q=U.edge(V);W.setEdge(V.v,V.w,{weight:H.weight+q.weight,minlen:Math.max(H.minlen,q.minlen)})}),W};z.simplify=L;var P=function(U){var W=new k.Graph({multigraph:U.isMultigraph()}).setGraph(U.graph());return U.nodes().forEach(function(V){var H;!((H=U.children(V))===null||H===void 0)&&H.length||W.setNode(V,U.node(V))}),U.edges().forEach(function(V){W.setEdgeObj(V,U.edge(V))}),W};z.asNonCompoundGraph=P;var p=function(U,W){return U==null?void 0:U.reduce(function(V,H,q){return V[H]=W[q],V},{})};z.zipObject=p;var m=function(U){var W={};return U.nodes().forEach(function(V){var H,q={};(H=U.outEdges(V))===null||H===void 0||H.forEach(function(tt){var rt;q[tt.w]=(q[tt.w]||0)+(((rt=U.edge(tt))===null||rt===void 0?void 0:rt.weight)||0)}),W[V]=q}),W};z.successorWeights=m;var S=function(U){var W=U.nodes(),V=W.map(function(H){var q,tt={};return(q=U.inEdges(H))===null||q===void 0||q.forEach(function(rt){tt[rt.v]=(tt[rt.v]||0)+U.edge(rt).weight}),tt});return(0,z.zipObject)(W,V)};z.predecessorWeights=S;var y=function(U,W){var V=Number(U.x),H=Number(U.y),q=Number(W.x)-V,tt=Number(W.y)-H,rt=Number(U.width)/2,ft=Number(U.height)/2;if(!q&&!tt)return{x:0,y:0};var it,bt;return Math.abs(tt)*rt>Math.abs(q)*ft?(tt<0&&(ft=-ft),it=ft*q/tt,bt=ft):(q<0&&(rt=-rt),it=rt,bt=rt*tt/q),{x:V+it,y:H+bt}};z.intersectRect=y;var g=function(U){for(var W=[],V=(0,z.maxRank)(U)+1,H=0;H<V;H++)W.push([]);U.nodes().forEach(function(q){var tt=U.node(q);if(tt){var rt=tt.rank;rt!==void 0&&W[rt]&&W[rt].push(q)}});for(var H=0;H<V;H++)W[H]=W[H].sort(function(tt,rt){var ft,it;return w((ft=U.node(tt))===null||ft===void 0?void 0:ft.order,(it=U.node(rt))===null||it===void 0?void 0:it.order)});return W};z.buildLayerMatrix=g;var A=function(U){var W=U.nodes().filter(function(H){var q;return((q=U.node(H))===null||q===void 0?void 0:q.rank)!==void 0}).map(function(H){return U.node(H).rank}),V=Math.min.apply(Math,W);U.nodes().forEach(function(H){var q=U.node(H);q.hasOwnProperty("rank")&&V!==1/0&&(q.rank-=V)})};z.normalizeRanks=A;var E=function(U){var W=U.nodes(),V=W.filter(function(bt){var gt;return((gt=U.node(bt))===null||gt===void 0?void 0:gt.rank)!==void 0}).map(function(bt){return U.node(bt).rank}),H=Math.min.apply(Math,V),q=[];W.forEach(function(bt){var gt,Xt=(((gt=U.node(bt))===null||gt===void 0?void 0:gt.rank)||0)-H;q[Xt]||(q[Xt]=[]),q[Xt].push(bt)});for(var tt=0,rt=U.graph().nodeRankFactor||0,ft=0;ft<q.length;ft++){var it=q[ft];it===void 0?ft%rt!==0&&(tt-=1):tt&&(it==null||it.forEach(function(bt){var gt=U.node(bt);gt&&(gt.rank=gt.rank||0,gt.rank+=tt)}))}};z.removeEmptyRanks=E;var D=function(U,W,V,H){var q={width:0,height:0};return(0,x.isNumber)(V)&&(0,x.isNumber)(H)&&(q.rank=V,q.order=H),(0,z.addDummyNode)(U,"border",q,W)};z.addBorderNode=D;var F=function(U){var W;return U.nodes().forEach(function(V){var H,q=(H=U.node(V))===null||H===void 0?void 0:H.rank;q!==void 0&&(W===void 0||q>W)&&(W=q)}),W||(W=0),W};z.maxRank=F;var Y=function(U,W){var V={lhs:[],rhs:[]};return U==null||U.forEach(function(H){W(H)?V.lhs.push(H):V.rhs.push(H)}),V};z.partition=Y;var b=function(U,W){var V=Date.now();try{return W()}finally{console.log("".concat(U," time: ").concat(Date.now()-V,"ms"))}};z.time=b;var h=function(U,W){return W()};z.notime=h;var $=function(U,W){return U.reduce(function(V,H){var q=W(V),tt=W(H);return q>tt?H:V})};z.minBy=$},177057:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)},w=this&&this.__spreadArray||function(m,S,y){if(y||arguments.length===2)for(var g=0,A=S.length,E;g<A;g++)(E||!(g in S))&&(E||(E=Array.prototype.slice.call(S,0,g)),E[g]=S[g]);return m.concat(E||Array.prototype.slice.call(S))};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreCompoundLayout=void 0;var T=C(762329),L=C(631969),P=C(449784),p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},S.prototype.init=function(y){var g=y.hiddenNodes||[],A=y.hiddenEdges||[],E=y.hiddenCombos||[];this.nodes=this.getDataByOrder((y.nodes||[]).concat(g)),this.edges=this.getDataByOrder((y.edges||[]).concat(A)),this.combos=(y.combos||[]).concat(E.map(function(D){return k(k({},D),{collapsed:!0})}))},S.prototype.execute=function(){var y=this,g=y.nodes,A=y.edges;if(g){var E=y.getLayoutConfig(),D=E.graphDef,F=E.graphOption,Y=E.graphSettings,b=(0,L.buildGraph)(D,F,Y),h=(0,L.flatGraph)(b,!0);return this.updatePosition(h),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:g,edges:A}}},S.prototype.getNodePath=function(y){var g=this,A=g.nodes,E=g.combos,D=A.find(function(Y){return Y.id===y}),F=function(Y,b){b===void 0&&(b=[]);var h=E.find(function($){return $.id===Y});return h?(b.unshift(Y),h.parentId?F(h.parentId,b):b):b};return D&&D.comboId?F(D.comboId,[y]):[y]},S.prototype.getLayoutConfig=function(){var y,g,A,E=this,D=E.nodes,F=E.edges,Y=E.combos,b=E.nodeSize,h=E.rankdir,$=E.align,U=E.edgesep,W=E.nodesep,V=E.ranksep,H=E.settings,q=(Y||[]).reduce(function(It,Pt){var St=D.filter(function(Qt){return Qt.comboId===Pt.id}).map(function(Qt){return Qt.id}),Dt=(Y||[]).filter(function(Qt){return Qt.parentId===Pt.id}).map(function(Qt){return Qt.id});return(St.length||Dt.length)&&(It[Pt.id]=w(w([],St,!0),Dt,!0)),It},{}),tt;b?(0,P.isArray)(b)?tt=function(){return b}:tt=function(){return[b,b]}:tt=function(It){return It&&It.size?(0,P.isArray)(It.size)?It.size:(0,P.isObject)(It.size)?[It.size.width||40,It.size.height||40]:[It.size,It.size]:[40,40]};var rt=function(It){return It&&It.size?(0,P.isArray)(It.size)?It.size:[It.size,It.size]:[80,40]},ft=rt(Y==null?void 0:Y[0]),it=ft[0],bt=ft[1],gt=(g=(y=E.graphSettings)===null||y===void 0?void 0:y.subScene)===null||g===void 0?void 0:g.meta,Xt=((A=Y.find(function(It){return!It.collapsed}))===null||A===void 0?void 0:A.padding)||[20,20,20,20],Ct=Xt[0],At=Xt[1],Z=Xt[2],J=Xt[3],yt={compound:q,nodes:w([],(D||[]).map(function(It){var Pt=tt(It),St=Pt[0],Dt=Pt[1];return k(k({},It),{width:St,height:Dt})}),!0),edges:w([],(F||[]).map(function(It){return k(k({},It),{v:It.source,w:It.target})}),!0)},_t={expanded:(Y||[]).filter(function(It){return!It.collapsed}).map(function(It){return It.id})},nt={graph:{meta:{align:$,rankDir:h,nodeSep:W,edgeSep:U,rankSep:V}},subScene:{meta:{paddingTop:Ct||(gt==null?void 0:gt.paddingTop)||20,paddingRight:At||(gt==null?void 0:gt.paddingRight)||20,paddingBottom:Z||(gt==null?void 0:gt.paddingBottom)||20,paddingLeft:J||(gt==null?void 0:gt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:it,height:bt}}},vt=(0,L.mergeConfig)(H,k({},(0,L.mergeConfig)(nt,L.LAYOUT_CONFIG)));return E.graphSettings=vt,{graphDef:yt,graphOption:_t,graphSettings:vt}},S.prototype.updatePosition=function(y){var g=y.nodes,A=y.edges;this.updateNodePosition(g,A),this.updateEdgePosition(g,A)},S.prototype.getBegin=function(y,g){var A=this,E=A.begin,D=[0,0];if(E){var F=1/0,Y=1/0;y.forEach(function(b){F>b.x&&(F=b.x),Y>b.y&&(Y=b.y)}),g.forEach(function(b){b.points.forEach(function(h){F>h.x&&(F=h.x),Y>h.y&&(Y=h.y)})}),D[0]=E[0]-F,D[1]=E[1]-Y}return D},S.prototype.updateNodePosition=function(y,g){var A=this,E=A.combos,D=A.nodes,F=A.edges,Y=A.anchorPoint,b=A.graphSettings,h=this.getBegin(y,g);y.forEach(function($){var U,W=$.x,V=$.y,H=$.id,q=$.type,tt=$.coreBox;if(q===L.HierarchyNodeType.META&&H!==L.ROOT_NAME){var rt=E.findIndex(function(Xt){return Xt.id===H}),ft=(U=b==null?void 0:b.subScene)===null||U===void 0?void 0:U.meta;E[rt].offsetX=W+h[0],E[rt].offsetY=V+h[1],E[rt].fixSize=[tt.width,tt.height],E[rt].fixCollapseSize=[tt.width,tt.height],$.expanded?E[rt].padding=[ft==null?void 0:ft.paddingTop,ft==null?void 0:ft.paddingRight,ft==null?void 0:ft.paddingBottom,ft==null?void 0:ft.paddingLeft]:E[rt].padding=[0,0,0,0]}else if(q===L.HierarchyNodeType.OP){var rt=D.findIndex(function(Ct){return Ct.id===H});if(D[rt].x=W+h[0],D[rt].y=V+h[1],Y){var it=[],bt=g.filter(function(Ct){return Ct.v===H}),gt=g.filter(function(Ct){return Ct.w===H});bt.length>0&&bt.forEach(function(Ct){var At=Ct.points[0],Z=(At.x-W)/$.width+.5,J=(At.y-V)/$.height+.5;it.push([Z,J]),Ct.baseEdgeList.forEach(function(yt){var _t=F.find(function(nt){return nt.source===yt.v&&nt.target===yt.w});_t&&(_t.sourceAnchor=it.length-1)})}),gt.length>0&&gt.forEach(function(Ct){var At=Ct.points[Ct.points.length-1],Z=(At.x-W)/$.width+.5,J=(At.y-V)/$.height+.5;it.push([Z,J]),Ct.baseEdgeList.forEach(function(yt){var _t=F.find(function(nt){return nt.source===yt.v&&nt.target===yt.w});_t&&(_t.targetAnchor=it.length-1)})}),D[rt].anchorPoints=it.length>0?it:D[rt].anchorPoints||[]}}})},S.prototype.updateEdgePosition=function(y,g){var A=this,E=A.combos,D=A.edges,F=A.controlPoints,Y=this.getBegin(y,g);F&&(E.forEach(function(b){b.inEdges=[],b.outEdges=[]}),D.forEach(function(b){var h,$,U,W,V=y.find(function(Xt){return Xt.id===b.source}),H=y.find(function(Xt){return Xt.id===b.target}),q=[],tt=[];if(V&&H)tt=(0,L.getEdges)(V==null?void 0:V.id,H==null?void 0:H.id,y);else if(!V||!H){var rt=A.getNodePath(b.source),ft=A.getNodePath(b.target),it=rt.reverse().slice(V?0:1).find(function(Xt){return y.find(function(Ct){return Ct.id===Xt})}),bt=ft.reverse().slice(H?0:1).find(function(Xt){return y.find(function(Ct){return Ct.id===Xt})});V=y.find(function(Xt){return Xt.id===it}),H=y.find(function(Xt){return Xt.id===bt}),tt=(0,L.getEdges)(V==null?void 0:V.id,H==null?void 0:H.id,y,{v:b.source,w:b.target})}if(q=tt.reduce(function(Xt,Ct){return w(w([],Xt,!0),Ct.points.map(function(At){return k(k({},At),{x:At.x+Y[0],y:At.y+Y[1]})}),!0)},[]),q=q.slice(1,-1),b.controlPoints=q,(H==null?void 0:H.type)===L.NodeType.META){var gt=E.findIndex(function(Xt){return Xt.id===(H==null?void 0:H.id)});if(!E[gt]||!((h=E[gt].inEdges)===null||h===void 0)&&h.some(function(Xt){return Xt.source===V.id&&Xt.target===H.id}))return;($=E[gt].inEdges)===null||$===void 0||$.push({source:V.id,target:H.id,controlPoints:q})}if((V==null?void 0:V.type)===L.NodeType.META){var gt=E.findIndex(function(Ct){return Ct.id===(V==null?void 0:V.id)});if(!E[gt]||!((U=E[gt].outEdges)===null||U===void 0)&&U.some(function(Ct){return Ct.source===V.id&&Ct.target===H.id}))return;(W=E[gt].outEdges)===null||W===void 0||W.push({source:V.id,target:H.id,controlPoints:q})}}))},S.prototype.getType=function(){return"dagreCompound"},S.prototype.getDataByOrder=function(y){return y.every(function(g){return g.layoutOrder!==void 0})||y.forEach(function(g,A){g.layoutOrder=A}),y.sort(function(g,A){return g.layoutOrder-A.layoutOrder})},S}(T.Base);z.DagreCompoundLayout=p},934015:function(Ve,z,C){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(g){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(g[F]=A[F])}return g},x.apply(this,arguments)},k=this&&this.__createBinding||(Object.create?function(g,A,E,D){D===void 0&&(D=E);var F=Object.getOwnPropertyDescriptor(A,E);(!F||("get"in F?!A.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(g,D,F)}:function(g,A,E,D){D===void 0&&(D=E),g[D]=A[E]}),w=this&&this.__setModuleDefault||(Object.create?function(g,A){Object.defineProperty(g,"default",{enumerable:!0,value:A})}:function(g,A){g.default=A}),T=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var A={};if(g!=null)for(var E in g)E!=="default"&&Object.prototype.hasOwnProperty.call(g,E)&&k(A,g,E);return w(A,g),A},L=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0});var P=T(C(971497)),p=L(C(788221)),m=L(C(87064)),S=C(920171);function y(g,A){var E=g.nodes,D=g.edges,F=A.width,Y=A.height;if(!(E!=null&&E.length))return Promise.resolve();var b=[];E.forEach(function(tt){var rt=D.filter(function(it){return it.source===tt.id||it.target===tt.id});if(rt.length>1){var ft=x({},tt);delete ft.size,b.push(ft)}});var h=[];D.forEach(function(tt){var rt=b.find(function(it){return it.id===tt.source}),ft=b.find(function(it){return it.id===tt.target});rt&&ft&&h.push(tt)});var $=new S.DagreLayout({type:"dagre",ranksep:A.nodeMinGap,nodesep:A.nodeMinGap}),U=$.layout({nodes:b,edges:h}).nodes;E.forEach(function(tt){var rt=(U||[]).find(function(ft){return ft.id===tt.id});tt.x=(rt==null?void 0:rt.x)||F/2,tt.y=(rt==null?void 0:rt.y)||Y/2});var W=JSON.parse(JSON.stringify(E)),V=JSON.parse(JSON.stringify(D)),H=P.forceSimulation().nodes(W).force("link",P.forceLink(V).id(function(tt){return tt.id}).distance(function(tt){var rt=h.find(function(ft){return ft.source===tt.source&&ft.target===tt.target});return rt?30:20})).force("charge",P.forceManyBody()).force("center",P.forceCenter(F/2,Y/2)).force("x",P.forceX(F/2)).force("y",P.forceY(Y/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),q=new Promise(function(tt){H.on("end",function(){E.forEach(function(Ct){var At=W.find(function(Z){return Z.id===Ct.id});At&&(Ct.x=At.x,Ct.y=At.y)});var rt=Math.min.apply(Math,E.map(function(Ct){return Ct.x})),ft=Math.max.apply(Math,E.map(function(Ct){return Ct.x})),it=Math.min.apply(Math,E.map(function(Ct){return Ct.y})),bt=Math.max.apply(Math,E.map(function(Ct){return Ct.y})),gt=F/(ft-rt),Xt=Y/(bt-it);E.forEach(function(Ct){Ct.x!==void 0&&gt<1&&(Ct.x=(Ct.x-rt)*gt),Ct.y!==void 0&&Xt<1&&(Ct.y=(Ct.y-it)*Xt)}),E.forEach(function(Ct){Ct.sizeTemp=Ct.size,Ct.size=[10,10]}),(0,m.default)(E,D),E.forEach(function(Ct){Ct.size=Ct.sizeTemp||[],delete Ct.sizeTemp}),(0,p.default)({nodes:E,edges:D},A),tt()})});return q}z.default=y},788221:function(Ve,z,C){"use strict";var x=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(28611));function w(T,L){if(!T.nodes||T.nodes.length===0)return T;var P=L.width,p=L.height,m=L.nodeMinGap,S=1e4,y=1e4;T.nodes.forEach(function(V){var H=V.size[0]||50,q=V.size[1]||50;S=Math.min(H,S),y=Math.min(q,y)});var g=new k.default;g.init(P,p,{CELL_H:y,CELL_W:S}),T.nodes.forEach(function(V){var H=g.occupyNearest(V);H&&(H.node={id:V.id,size:V.size},V.x=H.x,V.y=H.y,V.dx=H.dx,V.dy=H.dy)});for(var A=0;A<T.nodes.length;A++){var E=T.nodes[A],D=g.findGridByNodeId(E.id);if(!D)throw new Error("can not find node cell");var F=D.column,Y=D.row;if(E.size[0]+m>S){for(var b=Math.ceil((E.size[0]+m)/S)-1,h=b,$=0;$<b;$++){var U=g.additionColumn.indexOf(F+$+1)>-1;if(U&&!g.cells[F+$+1][Y].node)h--;else break}g.insertColumn(F,h)}if(E.size[1]+m>y){for(var b=Math.ceil((E.size[1]+m)/y)-1,h=b,$=0;$<b;$++){var U=g.additionRow.indexOf(Y+$+1)>-1;if(U&&!g.cells[F][Y+$+1].node)h--;else break}g.insertRow(Y,h)}}for(var A=0;A<g.columnNum;A++)for(var W=function(H){var q=g.cells[A][H];if(q.node){var tt=T.nodes.find(function(rt){var ft;return rt.id===((ft=q==null?void 0:q.node)===null||ft===void 0?void 0:ft.id)});tt&&(tt.x=q.x+tt.size[0]/2,tt.y=q.y+tt.size[1]/2)}},$=0;$<g.rowNum;$++)W($)}z.default=w},28611:function(Ve,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(k){for(var w,T=1,L=arguments.length;T<L;T++){w=arguments[T];for(var P in w)Object.prototype.hasOwnProperty.call(w,P)&&(k[P]=w[P])}return k},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0});var x=function(){function k(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return k.prototype.init=function(w,T,L){this.cells=[],this.CELL_W=L.CELL_W||k.DEFAULT_CELL_W,this.CELL_H=L.CELL_H||k.DEFAULT_CELL_H,this.columnNum=Math.ceil(w/this.CELL_W),this.rowNum=Math.ceil(T/this.CELL_H),k.MIN_DIST=Math.pow(w,2)+Math.pow(T,2);for(var P=0;P<this.columnNum;P++){for(var p=[],m=0;m<this.rowNum;m++){var S={dx:P,dy:m,x:P*this.CELL_W,y:m*this.CELL_H,occupied:!1};p.push(S)}this.cells.push(p)}},k.prototype.findGridByNodeId=function(w){for(var T,L,P=0;P<this.columnNum;P++)for(var p=0;p<this.rowNum;p++)if(this.cells[P][p].node&&((L=(T=this.cells[P][p])===null||T===void 0?void 0:T.node)===null||L===void 0?void 0:L.id)===w)return{column:P,row:p};return null},k.prototype.sqdist=function(w,T){return Math.pow(w.x-T.x,2)+Math.pow(w.y-T.y,2)},k.prototype.occupyNearest=function(w){for(var T=k.MIN_DIST,L,P=null,p=0;p<this.columnNum;p++)for(var m=0;m<this.rowNum;m++)!this.cells[p][m].occupied&&(L=this.sqdist(w,this.cells[p][m]))<T&&(T=L,P=this.cells[p][m]);return P&&(P.occupied=!0),P},k.prototype.insertColumn=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++){this.cells[L+this.columnNum]=[];for(var P=0;P<this.rowNum;P++)this.cells[L+this.columnNum][P]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null}}for(var L=this.columnNum-1;L>w;L--)for(var P=0;P<this.rowNum;P++)this.cells[L+T][P]=C(C({},this.cells[L][P]),{x:(L+T)*this.CELL_W,y:P*this.CELL_H}),this.cells[L][P]={x:L*this.CELL_W,y:P*this.CELL_H,occupied:!0,node:null};for(var P=0;P<this.additionColumn.length;P++)this.additionColumn[P]>=w&&(this.additionColumn[P]+=T);for(var L=0;L<T;L++)this.additionColumn.push(w+L+1);this.columnNum+=T}},k.prototype.insertRow=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++)for(var P=0;P<this.columnNum;P++)this.cells[P][L+this.rowNum]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.columnNum;P++)for(var L=this.rowNum-1;L>w;L--)this.cells[P][L+T]=C(C({},this.cells[P][L]),{dx:P,dy:L+T,x:P*this.CELL_W,y:(L+T)*this.CELL_H}),this.cells[P][L]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var L=0;L<this.additionRow.length;L++)this.additionRow[L]>=w&&(this.additionRow[L]+=T);for(var P=0;P<T;P++)this.additionRow.push(w+P+1);this.rowNum+=T}},k.prototype.getNodes=function(){for(var w=[],T=0;T<this.columnNum;T++)for(var L=0;L<this.rowNum;L++)this.cells[T][L].node&&w.push(this.cells[T][L]);return w},k.MIN_DIST=50,k.DEFAULT_CELL_W=80,k.DEFAULT_CELL_H=80,k}();z.default=x},290441:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}(),k=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=void 0;var w=C(762329),T=k(C(934015)),L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.width=300,S.height=300,S.nodeMinGap=50,S.onLayoutEnd=function(){},m&&S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},p.prototype.execute=function(){var m=this,S=m.nodes,y=m.edges;return S==null||S.forEach(function(g){g.size||(g.size=[50,50])}),(0,T.default)({nodes:S,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){m.onLayoutEnd&&m.onLayoutEnd()})},p.prototype.getType=function(){return"er"},p}(w.Base);z.ERLayout=L},87064:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=1200,x=800,k=1e7,w=10,T=3.141592653589793,L=1.5707963267948966,P=T*.375,p=T*.625,m=new Map,S=10,y=10,g=.8,A=.1,E=.5;function D(W,V,H){var q=W.x-W.size[0]/2,tt=W.y-W.size[1]/2,rt=W.x+W.size[0]/2,ft=W.y+W.size[1]/2,it=V.x-V.size[0]/2,bt=V.y-V.size[1]/2,gt=V.x+V.size[0]/2,Xt=V.y+V.size[1]/2,Ct=W.x,At=W.y,Z=V.x,J=V.y,yt=Z-Ct,_t=Math.atan2(yt,J-At),nt=0,vt=0,It=0,Pt=0;_t>L?(vt=tt-Xt,nt=it-rt,It=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)),Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):0<_t&&_t<=L?(vt=bt-ft,nt=it-rt,vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):_t<-L?(vt=tt-Xt,nt=-(gt-q),vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):(vt=bt-ft,Math.abs(yt)>(rt-q)/2?nt=q-gt:nt=yt,vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt&&_t!==0?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2)));var St=parseFloat(_t.toFixed(2)),Dt=H;return H&&(Dt=P<St&&St<p),{distance:Math.abs(It<Pt?It:Pt),isHoriz:Dt}}function F(W,V){var H=m.get(W.id)||[],q=H.find(function(xe){return xe.source===V.id||xe.target===V.id}),tt=W.size[0]*W.size[1],rt=V.size[0]*V.size[1],ft=tt>rt?V:W,it=tt>rt?W:V,bt=ft.x-ft.size[0]/2,gt=ft.y-ft.size[1]/2,Xt=ft.x+ft.size[0]/2,Ct=ft.y+ft.size[1]/2,At=it.x-it.size[0]/2,Z=it.y-it.size[1]/2,J=it.x+it.size[0]/2,yt=it.y+it.size[1]/2,_t=ft.x,nt=ft.y,vt=it.x,It=it.y,Pt=Xt>=At&&J>=bt&&Ct>=Z&&yt>=gt,St=0,Dt=0;if(Pt){Dt=Math.sqrt(Math.pow(vt-_t,2)+Math.pow(It-nt,2));var Qt=bt>At?bt:At,ue=gt>Z?gt:Z,ie=Xt<J?Xt:J,Lt=Ct<yt?Ct:yt,ne=ie-Qt,ve=Lt-ue,Wt=ne*ve;Dt===0&&(Dt=1e-7),St=w*1/Dt*100+Wt,St*=k}else{var ae=!1,Ce=D(ft,it,ae);Dt=Ce.distance,ae=Ce.isHoriz,Dt<=w?Dt!==0?q?St+=w+k*1/Dt:St+=w+k*w/Dt:St+=k:(St+=Dt,q&&(St+=Dt*Dt))}return St}function Y(W){for(var V=0,H=0;H<W.length;H++){var q=W[H];(q.x<0||q.y<0||q.x>C||q.y>x)&&(V+=1e12);for(var tt=H+1;tt<W.length;tt++)V+=F(q,W[tt])}return V}function b(W,V,H,q){var tt=new Map;H.forEach(function(_t,nt){tt.set(_t.id,_t)});var rt=q.filter(function(_t){return _t.source===W.id||_t.target===W.id})||[],ft=[];rt.forEach(function(_t){var nt=_t.source===W.id?_t.target:_t.source,vt=tt.get(nt);vt&&ft.push(vt)});for(var it=!0,bt=0;bt<ft.length;bt++){var gt=ft[bt],Xt=Math.atan((W.y-gt.y)/(gt.x-W.y))*180,Ct=Math.atan((V.y-gt.y)/(gt.x-V.y))*180,At=Xt<30||Xt>150,Z=Ct<30||Ct>150,J=Xt>70&&Xt<110,yt=Ct>70&&Ct<110;if(At&&!Z||Xt*Ct<0){it=!1;break}else if(J&&!yt||Xt*Ct<0){it=!1;break}else if((gt.x-W.x)*(gt.x-V.x)<0){it=!1;break}else if((gt.y-W.y)*(gt.y-V.y)<0){it=!1;break}}return it}function h(W,V){for(var H=!1,q=1,tt=S*q,rt=y*q,ft=[tt,-tt,0,0],it=[0,0,rt,-rt],bt=0;bt<W.length;++bt)for(var gt=W[bt],Xt=$(gt,W),Ct=0;Ct<ft.length;Ct++){var At=b(gt,{x:gt.x+ft[Ct],y:gt.y+it[Ct]},W,V);if(At){gt.x+=ft[Ct],gt.y+=it[Ct];var Z=$(gt,W),J=Math.random();Z<Xt||J<g&&J>A?(Xt=Z,H=!0):(gt.x-=ft[Ct],gt.y-=it[Ct])}}return g>A&&(g*=E),H?Y(W):0}function $(W,V){var H=0;(W.x<0||W.y<0||W.x+W.size[0]+20>C||W.y+W.size[1]+20>x)&&(H+=1e12);for(var q=0;q<V.length;++q)W.id!==V[q].id&&(H+=F(W,V[q]));return H}function U(W,V){if(W.length===0)return{nodes:W,edges:V};W.forEach(function(gt){var Xt=V.filter(function(Ct){return Ct.source===gt.id||Ct.target===gt.id});m.set(gt,Xt)}),W.sort(function(gt,Xt){var Ct,At;return((Ct=m.get(gt.id))===null||Ct===void 0?void 0:Ct.length)-((At=m.get(Xt.id))===null||At===void 0?void 0:At.length)});for(var H=Y(W),q=20,tt=1,rt=0,ft=50,it=0;q>0&&(it++,!(it>=ft));){var bt=h(W,V);bt!==0&&(rt=bt),tt=rt-H,H=rt,tt===0?--q:q=20}return W.forEach(function(gt){gt.x=gt.x-gt.size[0]/2,gt.y=gt.y-gt.size[1]/2}),{nodes:W,edges:V}}z.default=U},589806:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(p,m,S,y){y===void 0&&(y=S);var g=Object.getOwnPropertyDescriptor(m,S);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(p,y,g)}:function(p,m,S,y){y===void 0&&(y=S),p[y]=m[S]}),k=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),w=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var S in p)S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)&&x(m,p,S);return k(m,p),m};Object.defineProperty(z,"__esModule",{value:!0});var T=w(C(971497)),L=C(449784);function P(){function p(Lt){return function(){return Lt}}var m=function(Lt){return Lt.cluster},S=p(1),y=p(-1),g=p(100),A=p(.1),E=[0,0],D=[],F={},Y=[],b=100,h=100,$={none:{x:0,y:0}},U=[],W,V="force",H=!0,q=.1;function tt(Lt){if(!H)return tt;W.tick(),Xt();for(var ne=0,ve=D.length,Wt=void 0,ae=Lt*q;ne<ve;++ne)Wt=D[ne],Wt.vx+=($[m(Wt)].x-Wt.x)*ae,Wt.vy+=($[m(Wt)].y-Wt.y)*ae}function rt(){D&&ft()}function ft(){if(!(!D||!D.length)){if(m(D[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Lt=it();W=T.forceSimulation(Lt.nodes).force("x",T.forceX(b).strength(.1)).force("y",T.forceY(h).strength(.1)).force("collide",T.forceCollide(function(ne){return ne.r}).iterations(4)).force("charge",T.forceManyBody().strength(y)).force("links",T.forceLink(Lt.nodes.length?Lt.links:[]).distance(g).strength(A)),U=W.nodes(),Xt()}}function it(){var Lt=[],ne=[],ve={},Wt=[],ae={},Ce=[];return ae=bt(D),Ce=gt(Y),Wt=Object.keys(ae),Wt.forEach(function(xe,Jt){var we=ae[xe];Lt.push({id:xe,size:we.count,r:Math.sqrt(we.sumforceNodeSize/Math.PI)}),ve[xe]=Jt}),Ce.forEach(function(xe){var Jt=(0,L.getEdgeTerminal)(xe,"source"),we=(0,L.getEdgeTerminal)(xe,"target"),Tt=ve[Jt],Pe=ve[we];Tt!==void 0&&Pe!==void 0&&ne.push({source:Tt,target:Pe,count:xe.count})}),{nodes:Lt,links:ne}}function bt(Lt){var ne={};return Lt.forEach(function(ve){var Wt=m(ve);ne[Wt]||(ne[Wt]={count:0,sumforceNodeSize:0})}),Lt.forEach(function(ve){var Wt=m(ve),ae=S(ve),Ce=ne[Wt];Ce.count=Ce.count+1,Ce.sumforceNodeSize=Ce.sumforceNodeSize+Math.PI*(ae*ae)*1.3,ne[Wt]=Ce}),ne}function gt(Lt){var ne={},ve=[];Lt.forEach(function(ae){var Ce=Ct(ae),xe=0;ne[Ce]!==void 0&&(xe=ne[Ce]),xe+=1,ne[Ce]=xe});var Wt=Object.entries(ne);return Wt.forEach(function(ae){var Ce=ae[0],xe=ae[1],Jt=Ce.split("~")[0],we=Ce.split("~")[1];Jt!==void 0&&we!==void 0&&ve.push({source:Jt,target:we,count:xe})}),ve}function Xt(){return $={none:{x:0,y:0}},U.forEach(function(Lt){$[Lt.id]={x:Lt.x-E[0],y:Lt.y-E[1]}}),$}function Ct(Lt){var ne=(0,L.getEdgeTerminal)(Lt,"source"),ve=(0,L.getEdgeTerminal)(Lt,"target"),Wt=m(F[ne]),ae=m(F[ve]);return Wt<=ae?"".concat(Wt,"~").concat(ae):"".concat(ae,"~").concat(Wt)}function At(Lt){F={},Lt.forEach(function(ne){F[ne.id]=ne})}function Z(Lt){return arguments.length?(V=Lt,rt(),tt):V}function J(Lt){return arguments.length?typeof Lt=="string"?(m=function(ne){return ne[Lt]},tt):(m=Lt,tt):m}function yt(Lt){return arguments.length?(H=Lt,tt):H}function _t(Lt){return arguments.length?(q=Lt,tt):q}function nt(Lt){return arguments.length?(b=Lt,tt):b}function vt(Lt){return arguments.length?(h=Lt,tt):h}function It(Lt){return arguments.length?(At(Lt||[]),D=Lt||[],tt):D}function Pt(Lt){return arguments.length?(Y=Lt||[],rt(),tt):Y}function St(Lt){return arguments.length?(typeof Lt=="function"?S=Lt:S=p(+Lt),rt(),tt):S}function Dt(Lt){return arguments.length?(typeof Lt=="function"?y=Lt:y=p(+Lt),rt(),tt):y}function Qt(Lt){return arguments.length?(typeof Lt=="function"?g=Lt:g=p(+Lt),rt(),tt):g}function ue(Lt){return arguments.length?(typeof Lt=="function"?A=Lt:A=p(+Lt),rt(),tt):A}function ie(Lt){return arguments.length?(E=Lt,tt):E}return tt.initialize=function(Lt){D=Lt,rt()},tt.template=Z,tt.groupBy=J,tt.enableGrouping=yt,tt.strength=_t,tt.centerX=nt,tt.centerY=vt,tt.nodes=It,tt.links=Pt,tt.forceNodeSize=St,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=Dt,tt.forceLinkDistance=Qt,tt.forceLinkStrength=ue,tt.offset=ie,tt.getFocis=Xt,tt}z.default=P},508810:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var D=function(F,Y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var $ in h)Object.prototype.hasOwnProperty.call(h,$)&&(b[$]=h[$])},D(F,Y)};return function(F,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");D(F,Y);function b(){this.constructor=F}F.prototype=Y===null?Object.create(Y):(b.prototype=Y.prototype,new b)}}(),k=this&&this.__createBinding||(Object.create?function(D,F,Y,b){b===void 0&&(b=Y);var h=Object.getOwnPropertyDescriptor(F,Y);(!h||("get"in h?!F.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return F[Y]}}),Object.defineProperty(D,b,h)}:function(D,F,Y,b){b===void 0&&(b=Y),D[b]=F[Y]}),w=this&&this.__setModuleDefault||(Object.create?function(D,F){Object.defineProperty(D,"default",{enumerable:!0,value:F})}:function(D,F){D.default=F}),T=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var F={};if(D!=null)for(var Y in D)Y!=="default"&&Object.prototype.hasOwnProperty.call(D,Y)&&k(F,D,Y);return w(F,D),F},L=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceLayout=void 0;var P=T(C(971497)),p=L(C(589806)),m=C(449784),S=C(762329),y=C(416470),g=function(D){x(F,D);function F(Y){var b=D.call(this)||this;return b.center=[0,0],b.nodeStrength=null,b.edgeStrength=null,b.preventOverlap=!1,b.clusterNodeStrength=null,b.clusterEdgeStrength=null,b.clusterEdgeDistance=null,b.clusterNodeSize=null,b.clusterFociStrength=null,b.linkDistance=50,b.alphaDecay=.028,b.alphaMin=.001,b.alpha=.3,b.collideStrength=1,b.workerEnabled=!1,b.tick=function(){},b.onLayoutEnd=function(){},b.ticking=void 0,Y&&b.updateCfg(Y),b}return F.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},F.prototype.init=function(Y){var b=this;b.nodes=Y.nodes||[];var h=Y.edges||[];b.edges=h.map(function($){var U={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys($).forEach(function(V){W.indexOf(V)>-1||(U[V]=$[V])}),U}),b.ticking=!1},F.prototype.execute=function(Y){var b=this,h=b.nodes,$=b.edges;if(!b.ticking){var U=b.forceSimulation,W=b.alphaMin,V=b.alphaDecay,H=b.alpha;if(U){if(Y){if(b.clustering&&b.clusterForce&&(b.clusterForce.nodes(h),b.clusterForce.links($)),U.nodes(h),$&&b.edgeForce)b.edgeForce.links($);else if($&&!b.edgeForce){var rt=P.forceLink().id(function(gt){return gt.id}).links($);b.edgeStrength&&rt.strength(b.edgeStrength),b.linkDistance&&rt.distance(b.linkDistance),b.edgeForce=rt,U.force("link",rt)}}b.preventOverlap&&b.overlapProcess(U),U.alpha(H).restart(),this.ticking=!0}else try{var q=P.forceManyBody();if(b.nodeStrength&&q.strength(b.nodeStrength),U=P.forceSimulation().nodes(h),b.clustering){var tt=(0,p.default)();tt.centerX(b.center[0]).centerY(b.center[1]).template("force").strength(b.clusterFociStrength),$&&tt.links($),h&&tt.nodes(h),tt.forceLinkDistance(b.clusterEdgeDistance).forceLinkStrength(b.clusterEdgeStrength).forceCharge(b.clusterNodeStrength).forceNodeSize(b.clusterNodeSize),b.clusterForce=tt,U.force("group",tt)}if(U.force("center",P.forceCenter(b.center[0],b.center[1])).force("charge",q).alpha(H).alphaDecay(V).alphaMin(W),b.preventOverlap&&b.overlapProcess(U),$){var rt=P.forceLink().id(function(bt){return bt.id}).links($);b.edgeStrength&&rt.strength(b.edgeStrength),b.linkDistance&&rt.distance(b.linkDistance),b.edgeForce=rt,U.force("link",rt)}if(b.workerEnabled&&!E()&&(b.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!b.workerEnabled)U.on("tick",function(){b.tick()}).on("end",function(){b.ticking=!1,b.onLayoutEnd&&b.onLayoutEnd()}),b.ticking=!0;else{U.stop();for(var ft=A(U),it=1;it<=ft;it++)U.tick(),postMessage({nodes:h,currentTick:it,totalTicks:ft,type:y.LAYOUT_MESSAGE.TICK},void 0);b.ticking=!1}b.forceSimulation=U,b.ticking=!0}catch(bt){b.ticking=!1,console.warn(bt)}}},F.prototype.overlapProcess=function(Y){var b=this,h=b.nodeSize,$=b.nodeSpacing,U,W,V=b.collideStrength;if((0,m.isNumber)($)?W=function(){return $}:(0,m.isFunction)($)?W=$:W=function(){return 0},!h)U=function(rt){if(rt.size){if((0,m.isArray)(rt.size)){var ft=rt.size[0]>rt.size[1]?rt.size[0]:rt.size[1];return ft/2+W(rt)}if((0,m.isObject)(rt.size)){var ft=rt.size.width>rt.size.height?rt.size.width:rt.size.height;return ft/2+W(rt)}return rt.size/2+W(rt)}return 10+W(rt)};else if((0,m.isFunction)(h))U=function(rt){var ft=h(rt);return ft+W(rt)};else if((0,m.isArray)(h)){var H=h[0]>h[1]?h[0]:h[1],q=H/2;U=function(rt){return q+W(rt)}}else if((0,m.isNumber)(h)){var tt=h/2;U=function(rt){return tt+W(rt)}}else U=function(){return 10};Y.force("collisionForce",P.forceCollide(U).strength(V))},F.prototype.updateCfg=function(Y){var b=this;b.ticking&&(b.forceSimulation.stop(),b.ticking=!1),b.forceSimulation=null,Object.assign(b,Y)},F.prototype.destroy=function(){var Y=this;Y.ticking&&(Y.forceSimulation.stop(),Y.ticking=!1),Y.nodes=null,Y.edges=null,Y.destroyed=!0},F}(S.Base);z.ForceLayout=g;function A(D){var F=D.alphaMin(),Y=D.alphaTarget(),b=D.alpha(),h=Math.log((F-Y)/(b-Y))/Math.log(1-D.alphaDecay()),$=Math.ceil(h);return $}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(508810),z)},191019:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.forceNBody=void 0;var x=C(971829),k=.81,w=.1;function T(m,S,y,g,A){var E=y/g,D=m.map(function(Y,b){var h=S[Y.id],$=h.data,U=h.x,W=h.y,V=h.size,H=$.layout.force.nodeStrength;return{x:U,y:W,size:V,index:b,vx:0,vy:0,weight:E*H}}),F=(0,x.quadtree)(D,function(Y){return Y.x},function(Y){return Y.y}).visitAfter(L);return D.forEach(function(Y){p(Y,F)}),D.map(function(Y,b){var h=S[m[b].id],$=h.data.layout.force.mass,U=$===void 0?1:$;A[2*b]=Y.vx/U,A[2*b+1]=Y.vy/U}),A}z.forceNBody=T;function L(m){var S=0,y=0,g=0;if(m.length){for(var A=0;A<4;A++){var E=m[A];E&&E.weight&&(S+=E.weight,y+=E.x*E.weight,g+=E.y*E.weight)}m.x=y/S,m.y=g/S,m.weight=S}else{var E=m;m.x=E.data.x,m.y=E.data.y,m.weight=E.data.weight}}var P=function(m,S,y,g,A,E){var D=E.x-m.x||w,F=E.y-m.y||w,Y=g-S,b=D*D+F*F,h=Math.sqrt(b)*b;if(Y*Y*k<b){var $=m.weight/h;return E.vx+=D*$,E.vy+=F*$,!0}if(m.length)return!1;if(m.data!==E){var $=m.data.weight/h;E.vx+=D*$,E.vy+=F*$}};function p(m,S){S.visit(function(y,g,A,E,D){return P(y,g,A,E,D,m)})}},306740:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.Force2Layout=void 0;var w=C(762329),T=C(449784),L=C(191019),P=function(m,S){var y;return m?(0,T.isNumber)(m)?y=function(g){return m}:y=m:y=function(g){return S||1},y},p=function(m){x(S,m);function S(y){var g=m.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:g.width/2,y:g.height/2}}};var A=y.getMass;return g.propsGetMass=A,g.updateCfg(y),g}return S.prototype.getCentripetalOptions=function(){var y=this,g=y.leafCluster,A=y.clustering,E=y.nodeClusterBy,D=y.nodes,F=y.nodeMap,Y=y.clusterNodeStrength,b=function(ft){return typeof Y=="function"?Y(ft):Y},h={},$;if(g){$=this.getSameTypeLeafMap()||{};var U=Array.from(new Set(D==null?void 0:D.map(function(ft){return ft[E]})))||[];h={single:100,leaf:function(ft,it,bt){var gt=$[ft.id]||{},Xt=gt.relativeLeafNodes,Ct=gt.sameTypeLeafNodes;return(Ct==null?void 0:Ct.length)===(Xt==null?void 0:Xt.length)||(U==null?void 0:U.length)===1?1:b(ft)},others:1,center:function(ft,it,bt){var gt,Xt=(((gt=ft.data)===null||gt===void 0?void 0:gt.layout)||{}).degree;if(!Xt)return{x:100,y:100};var Ct;if(Xt===1){var At=($[ft.id]||{}).sameTypeLeafNodes,Z=At===void 0?[]:At;Z.length===1?Ct=void 0:Z.length>1&&(Ct=(0,T.getAvgNodePosition)(Z))}else Ct=void 0;return{x:Ct==null?void 0:Ct.x,y:Ct==null?void 0:Ct.y}}}}if(A){$||($=this.getSameTypeLeafMap());var W=Array.from(new Set(D.map(function(ft,it){return ft[E]}))).filter(function(ft){return ft!==void 0}),V={};W.forEach(function(ft){var it=D.filter(function(bt){return bt[E]===ft}).map(function(bt){return F[bt.id]});V[ft]=(0,T.getAvgNodePosition)(it)}),h={single:function(ft){return b(ft)},leaf:function(ft){return b(ft)},others:function(ft){return b(ft)},center:function(ft,it,bt){var gt=V[ft[E]];return{x:gt==null?void 0:gt.x,y:gt==null?void 0:gt.y}}}}this.centripetalOptions=k(k({},this.centripetalOptions),h);var H=this.centripetalOptions,q=H.leaf,tt=H.single,rt=H.others;q&&typeof q!="function"&&(this.centripetalOptions.leaf=function(){return q}),tt&&typeof tt!="function"&&(this.centripetalOptions.single=function(){return tt}),rt&&typeof rt!="function"&&(this.centripetalOptions.others=function(){return rt})},S.prototype.updateCfg=function(y){y&&Object.assign(this,y)},S.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},S.prototype.execute=function(){var y=this;y.stop();var g=y.nodes,A=y.edges,E=y.defSpringLen;if(y.judgingDistance=0,!g||g.length===0){y.onLayoutEnd([]);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var D=y.center;if(g.length===1){g[0].x=D[0],g[0].y=D[1],y.onLayoutEnd([k({},g[0])]);return}y.degreesMap=(0,T.getDegreeMap)(g,A),y.propsGetMass?y.getMass=y.propsGetMass:y.getMass=function(W){var V=1;(0,T.isNumber)(W.mass)&&(V=W.mass);var H=y.degreesMap[W.id].all;return!H||H<5?V:H*5*V};var F=y.nodeSize,Y;if(y.preventOverlap){var b=y.nodeSpacing,h;(0,T.isNumber)(b)?h=function(){return b}:(0,T.isFunction)(b)?h=b:h=function(){return 0},F?(0,T.isArray)(F)?Y=function(W){return Math.max(F[0],F[1])+h(W)}:Y=function(W){return F+h(W)}:Y=function(W){return W.size?(0,T.isArray)(W.size)?Math.max(W.size[0],W.size[1])+h(W):(0,T.isObject)(W.size)?Math.max(W.size.width,W.size.height)+h(W):W.size+h(W):10+h(W)}}y.nodeSize=Y,y.linkDistance=P(y.linkDistance,1),y.nodeStrength=P(y.nodeStrength,1),y.edgeStrength=P(y.edgeStrength,1);var $={},U={};g.forEach(function(W,V){(0,T.isNumber)(W.x)||(W.x=Math.random()*y.width),(0,T.isNumber)(W.y)||(W.y=Math.random()*y.height);var H=y.degreesMap[W.id];$[W.id]=k(k({},W),{data:k(k({},W.data),{size:y.nodeSize(W)||30,layout:{inDegree:H.in,outDegree:H.out,degree:H.all,tDegree:H.in,sDegree:H.out,force:{mass:y.getMass(W),nodeStrength:y.nodeStrength(W,A)}}})}),U[W.id]=V}),y.nodeMap=$,y.nodeIdxMap=U,y.edgeInfos=[],A==null||A.forEach(function(W){var V=$[W.source],H=$[W.target];!V||!H?elf.edgeInfos.push({}):y.edgeInfos.push({edgeStrength:y.edgeStrength(W),linkDistance:E?E(k(k({},W),{source:V,target:H}),V,H):y.linkDistance(W,V,H)||1+(F(V)+F(V)||0)/2})}),this.getCentripetalOptions(),y.onLayoutEnd=y.onLayoutEnd||function(){},y.run()},S.prototype.run=function(){var y=this,g=y.maxIteration,A=y.nodes,E=y.edges,D=y.workerEnabled,F=y.minMovement,Y=y.animate,b=y.nodeMap,h=y.height;if(y.currentMinY=0,y.currentMaxY=h,!!A){var $=[];if(A.forEach(function(rt,ft){$[2*ft]=0,$[2*ft+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var U={};E.forEach(function(rt){var ft=rt.source,it=rt.target;U[ft]=U[ft]||[],U[ft].push(rt),U[it]=U[it]||[],U[it].push(rt)}),this.relatedEdges=U}var W=g,V=!Y;if(D||V){for(var H=0,q=0;(y.judgingDistance>F||q<1)&&q<W;q++)H=q,y.runOneStep(q,$);y.onLayoutEnd(Object.values(b))}else{if(typeof window=="undefined")return;var tt=0;this.timeInterval=window.setInterval(function(){A&&(y.runOneStep(tt,$),tt++,(tt>=W||y.judgingDistance<F)&&(y.onLayoutEnd(Object.values(b)),window.clearInterval(y.timeInterval)))},0)}}},S.prototype.runOneStep=function(y,g){var A,E=this,D=E.nodes,F=E.edges,Y=E.nodeMap,b=E.monitor,h=[];if(D!=null&&D.length){E.calRepulsive(h),F&&E.calAttractive(h),E.calGravity(h),E.attractToSide(h);var $=E.interval;if(E.updateVelocity(h,g,$),E.updatePosition(g,$),(A=E.tick)===null||A===void 0||A.call(E),b){var U=this.calTotalEnergy(h);b({energy:U,nodes:D,edges:F,iterations:y})}}},S.prototype.calTotalEnergy=function(y){var g=this,A=g.nodes,E=g.nodeMap;if(!(A!=null&&A.length))return 0;var D=0;return A.forEach(function(F,Y){var b=y[2*Y],h=y[2*Y+1],$=b*b+h*h,U=E[F.id].data.layout.force.mass,W=U===void 0?1:U;D+=W*$*.5}),D},S.prototype.calRepulsive=function(y){var g=this,A=g.nodes,E=g.nodeMap,D=g.factor,F=g.coulombDisScale,Y=g.nodeSize;(0,L.forceNBody)(A,E,D,F*F,y)},S.prototype.calAttractive=function(y){var g=this,A=g.edges,E=g.nodeMap,D=g.nodeIdxMap,F=g.edgeInfos,Y=g.nodeSize;A.forEach(function(b,h){var $=(0,T.getEdgeTerminal)(b,"source"),U=(0,T.getEdgeTerminal)(b,"target"),W=E[$],V=E[U];if(!(!W||!V)){var H=V.x-W.x,q=V.y-W.y;!H&&!q&&(H=Math.random()*.01,q=Math.random()*.01);var tt=Math.sqrt(H*H+q*q),rt=H/tt,ft=q/tt,it=F[h]||{},bt=it.linkDistance,gt=bt===void 0?200:bt,Xt=it.edgeStrength,Ct=Xt===void 0?200:Xt,At=gt-tt,Z=At*Ct,J=W.data.layout.force.mass||1,yt=V.data.layout.force.mass||1,_t=1/J,nt=1/yt,vt=rt*Z,It=ft*Z,Pt=2*D[$],St=2*D[U];y[Pt]-=vt*_t,y[Pt+1]-=It*_t,y[St]+=vt*nt,y[St+1]+=It*nt}})},S.prototype.calGravity=function(y){var g,A=this,E=A.nodes,D=A.edges,F=D===void 0?[]:D,Y=A.nodeMap,b=A.width,h=A.height,$=A.center,U=A.gravity,W=A.degreesMap,V=A.centripetalOptions;if(E)for(var H=E.length,q=0;q<H;q++){var tt=2*q,rt=Y[E[q].id],ft=rt.data.layout.force.mass,it=ft===void 0?1:ft,bt=0,gt=0,Xt=U,Ct=W[rt.id],At=Ct.in,Z=Ct.out,J=Ct.all,yt=(g=A.getCenter)===null||g===void 0?void 0:g.call(A,rt,J);if(yt){var _t=yt[0],nt=yt[1],vt=yt[2];bt=rt.x-_t,gt=rt.y-nt,Xt=vt}else bt=rt.x-$[0],gt=rt.y-$[1];if(Xt&&(y[tt]-=Xt*bt/it,y[tt+1]-=Xt*gt/it),V){var It=V.leaf,Pt=V.single,St=V.others,Dt=V.center,Qt=(Dt==null?void 0:Dt(rt,E,F,b,h))||{x:0,y:0,centerStrength:0},ue=Qt.x,ie=Qt.y,Lt=Qt.centerStrength;if(!(0,T.isNumber)(ue)||!(0,T.isNumber)(ie))continue;var ne=(rt.x-ue)/it,ve=(rt.y-ie)/it;if(Lt&&(y[tt]-=Lt*ne,y[tt+1]-=Lt*ve),J===0){var Wt=Pt(rt);if(!Wt)continue;y[tt]-=Wt*ne,y[tt+1]-=Wt*ve;continue}if(At===0||Z===0){var ae=It(rt,E,F);if(!ae)continue;y[tt]-=ae*ne,y[tt+1]-=ae*ve;continue}var Ce=St(rt);if(!Ce)continue;y[tt]-=Ce*ne,y[tt+1]-=Ce*ve}}},S.prototype.attractToSide=function(y){var g=this,A=g.defSideCoe,E=g.height,D=g.nodes,F=g.relatedEdges,Y=g.currentMinY,b=Y===void 0?0:Y,h=g.currentMaxY,$=h===void 0?this.height:h;!A||typeof A!="function"||!(D!=null&&D.length)||D.forEach(function(U,W){var V=A(U,F[U.id]||[]);if(V!==0){var H=V<0?b:$,q=Math.abs(V);y[2*W+1]-=q*(U.y-H)}})},S.prototype.updateVelocity=function(y,g,A){var E=this,D=E.nodes,F=E.damping,Y=E.maxSpeed;D!=null&&D.length&&D.forEach(function(b,h){var $=(g[2*h]+y[2*h]*A)*F||.01,U=(g[2*h+1]+y[2*h+1]*A)*F||.01,W=Math.sqrt($*$+U*U);if(W>Y){var V=Y/W;$=V*$,U=V*U}g[2*h]=$,g[2*h+1]=U})},S.prototype.updatePosition=function(y,g){var A=this,E=A.nodes,D=A.distanceThresholdMode,F=A.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var Y=0;D==="max"?A.judgingDistance=-1/0:D==="min"&&(A.judgingDistance=1/0);var b=1/0,h=-1/0;E.forEach(function($,U){var W=F[$.id];if((0,T.isNumber)($.fx)&&(0,T.isNumber)($.fy)){$.x=$.fx,$.y=$.fy,W.x=$.x,W.y=$.y;return}var V=y[2*U]*g,H=y[2*U+1]*g;$.x+=V,$.y+=H,W.x=$.x,W.y=$.y,$.y<b&&(b=$.y),$.y>h&&(h=$.y);var q=Math.sqrt(V*V+H*H);switch(D){case"max":A.judgingDistance<q&&(A.judgingDistance=q);break;case"min":A.judgingDistance>q&&(A.judgingDistance=q);break;default:Y=Y+q;break}}),this.currentMinY=b,this.currentMaxY=h,(!D||D==="mean")&&(A.judgingDistance=Y/E.length)},S.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},S.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},S.prototype.getType=function(){return"force2"},S.prototype.getSameTypeLeafMap=function(){var y=this,g=y.nodeClusterBy,A=y.nodes,E=y.edges,D=y.nodeMap,F=y.degreesMap;if(A!=null&&A.length){var Y={};return A.forEach(function(b,h){var $=F[b.id].all;$===1&&(Y[b.id]=(0,T.getCoreNodeAndRelativeLeafNodes)("leaf",b,E,g,F,D))}),Y}},S}(w.Base);z.Force2Layout=p},19712:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.id=k.id||0,this.rx=k.rx,this.ry=k.ry,this.fx=0,this.fy=0,this.mass=k.mass,this.degree=k.degree,this.g=k.g||0}return x.prototype.distanceTo=function(k){var w=this.rx-k.rx,T=this.ry-k.ry;return Math.hypot(w,T)},x.prototype.setPos=function(k,w){this.rx=k,this.ry=w},x.prototype.resetForce=function(){this.fx=0,this.fy=0},x.prototype.addForce=function(k){var w=k.rx-this.rx,T=k.ry-this.ry,L=Math.hypot(w,T);L=L<1e-4?1e-4:L;var P=this.g*(this.degree+1)*(k.degree+1)/L;this.fx+=P*w/L,this.fy+=P*T/L},x.prototype.in=function(k){return k.contains(this.rx,this.ry)},x.prototype.add=function(k){var w=this.mass+k.mass,T=(this.rx*this.mass+k.rx*k.mass)/w,L=(this.ry*this.mass+k.ry*k.mass)/w,P=this.degree+k.degree,p={rx:T,ry:L,mass:w,degree:P};return new x(p)},x}();z.default=C},148564:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var S=function(y,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(y,g);function A(){this.constructor=y}y.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceAtlas2Layout=void 0;var w=C(762329),T=C(449784),L=k(C(19712)),P=k(C(851638)),p=k(C(762732)),m=function(S){x(y,S);function y(g){var A=S.call(this)||this;return A.center=[0,0],A.width=300,A.height=300,A.nodes=[],A.edges=[],A.kr=5,A.kg=1,A.mode="normal",A.preventOverlap=!1,A.dissuadeHubs=!1,A.barnesHut=void 0,A.maxIteration=0,A.ks=.1,A.ksmax=10,A.tao=.1,A.onLayoutEnd=function(){},A.prune=void 0,A.updateCfg(g),A}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var g=this,A=g.nodes,E=g.onLayoutEnd,D=g.prune,F=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var Y=[],b=A.length,h=0;h<b;h+=1){var $=A[h],U=10,W=10;(0,T.isNumber)($.size)&&(U=$.size,W=$.size),(0,T.isArray)($.size)?(isNaN($.size[0])||(U=$.size[0]),isNaN($.size[1])||(W=$.size[1])):(0,T.isObject)($.size)&&(U=$.size.width,W=$.size.height),g.getWidth&&!isNaN(g.getWidth($))&&(W=g.getWidth($)),g.getHeight&&!isNaN(g.getHeight($))&&(U=g.getHeight($));var V=Math.max(U,W);Y.push(V)}g.barnesHut===void 0&&b>250&&(g.barnesHut=!0),g.prune===void 0&&b>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(F=250,b<=200&&b>100?F=1e3:b>200&&(F=1200),this.maxIteration=F):this.maxIteration===0&&D&&(F=100,b<=200&&b>100?F=500:b>200&&(F=950),this.maxIteration=F),g.kr||(g.kr=50,b>100&&b<=500?g.kr=20:b>500&&(g.kr=1)),g.kg||(g.kg=20,b>100&&b<=500?g.kg=10:b>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(Y),E()},y.prototype.updateNodesByForces=function(g){for(var A=this,E=A.edges,D=A.maxIteration,F=A.nodes,Y=E.filter(function(Ct){var At=(0,T.getEdgeTerminal)(Ct,"source"),Z=(0,T.getEdgeTerminal)(Ct,"target");return At!==Z}),b=F.length,h=Y.length,$=[],U={},W={},V=[],H=0;H<b;H+=1)U[F[H].id]=H,$[H]=0,(F[H].x===void 0||isNaN(F[H].x))&&(F[H].x=Math.random()*1e3),(F[H].y===void 0||isNaN(F[H].y))&&(F[H].y=Math.random()*1e3),V.push({x:F[H].x,y:F[H].y});for(var H=0;H<h;H+=1){for(var q=void 0,tt=void 0,rt=0,ft=0,it=0;it<b;it+=1){var bt=(0,T.getEdgeTerminal)(Y[H],"source"),gt=(0,T.getEdgeTerminal)(Y[H],"target");F[it].id===bt?(q=F[it],rt=it):F[it].id===gt&&(tt=F[it],ft=it),W[H]={sourceIdx:rt,targetIdx:ft}}q&&($[U[q.id]]+=1),tt&&($[U[tt.id]]+=1)}var Xt=D;if(F=this.iterate(Xt,U,W,h,$,g),A.prune){for(var it=0;it<h;it+=1)$[W[it].sourceIdx]<=1?(F[W[it].sourceIdx].x=F[W[it].targetIdx].x,F[W[it].sourceIdx].y=F[W[it].targetIdx].y):$[W[it].targetIdx]<=1&&(F[W[it].targetIdx].x=F[W[it].sourceIdx].x,F[W[it].targetIdx].y=F[W[it].sourceIdx].y);A.prune=!1,A.barnesHut=!1,Xt=100,F=this.iterate(Xt,U,W,h,$,g)}return F},y.prototype.iterate=function(g,A,E,D,F,Y){for(var b=this,h=b.nodes,$=b.kr,U=b.preventOverlap,W=b.barnesHut,V=h.length,H=0,q=100,tt=g,rt=50,ft=[],it=[],bt=[],gt=0;gt<V;gt+=1)if(ft[2*gt]=0,ft[2*gt+1]=0,W){var Xt={id:gt,rx:h[gt].x,ry:h[gt].y,mass:1,g:$,degree:F[gt]};bt[gt]=new L.default(Xt)}for(;tt>0;){for(var gt=0;gt<V;gt+=1)it[2*gt]=ft[2*gt],it[2*gt+1]=ft[2*gt+1],ft[2*gt]=0,ft[2*gt+1]=0;ft=this.getAttrForces(tt,rt,D,A,E,F,Y,ft),W&&(U&&tt>rt||!U)?ft=this.getOptRepGraForces(ft,bt,F):ft=this.getRepGraForces(tt,rt,ft,q,Y,F);var Ct=this.updatePos(ft,it,H,F);h=Ct.nodes,H=Ct.sg,tt--,b.tick&&b.tick()}return h},y.prototype.getAttrForces=function(g,A,E,D,F,Y,b,h){for(var $=this,U=$.nodes,W=$.preventOverlap,V=$.dissuadeHubs,H=$.mode,q=$.prune,tt=0;tt<E;tt+=1){var rt=U[F[tt].sourceIdx],ft=F[tt].sourceIdx,it=U[F[tt].targetIdx],bt=F[tt].targetIdx;if(!(q&&(Y[ft]<=1||Y[bt]<=1))){var gt=[it.x-rt.x,it.y-rt.y],Xt=Math.hypot(gt[0],gt[1]);Xt=Xt<1e-4?1e-4:Xt,gt[0]=gt[0]/Xt,gt[1]=gt[1]/Xt,W&&g<A&&(Xt=Xt-b[ft]-b[bt]);var Ct=Xt,At=Ct;H==="linlog"&&(Ct=Math.log(1+Xt),At=Ct),V&&(Ct=Xt/Y[ft],At=Xt/Y[bt]),W&&g<A&&Xt<=0?(Ct=0,At=0):W&&g<A&&Xt>0&&(Ct=Xt,At=Xt),h[2*D[rt.id]]+=Ct*gt[0],h[2*D[it.id]]-=At*gt[0],h[2*D[rt.id]+1]+=Ct*gt[1],h[2*D[it.id]+1]-=At*gt[1]}}return h},y.prototype.getRepGraForces=function(g,A,E,D,F,Y){for(var b=this,h=b.nodes,$=b.preventOverlap,U=b.kr,W=b.kg,V=b.center,H=b.prune,q=h.length,tt=0;tt<q;tt+=1){for(var rt=tt+1;rt<q;rt+=1)if(!(H&&(Y[tt]<=1||Y[rt]<=1))){var ft=[h[rt].x-h[tt].x,h[rt].y-h[tt].y],it=Math.hypot(ft[0],ft[1]);it=it<1e-4?1e-4:it,ft[0]=ft[0]/it,ft[1]=ft[1]/it,$&&g<A&&(it=it-F[tt]-F[rt]);var bt=U*(Y[tt]+1)*(Y[rt]+1)/it;$&&g<A&&it<0?bt=D*(Y[tt]+1)*(Y[rt]+1):$&&g<A&&it===0?bt=0:$&&g<A&&it>0&&(bt=U*(Y[tt]+1)*(Y[rt]+1)/it),E[2*tt]-=bt*ft[0],E[2*rt]+=bt*ft[0],E[2*tt+1]-=bt*ft[1],E[2*rt+1]+=bt*ft[1]}var gt=[h[tt].x-V[0],h[tt].y-V[1]],Xt=Math.hypot(gt[0],gt[1]);gt[0]=gt[0]/Xt,gt[1]=gt[1]/Xt;var Ct=W*(Y[tt]+1);E[2*tt]-=Ct*gt[0],E[2*tt+1]-=Ct*gt[1]}return E},y.prototype.getOptRepGraForces=function(g,A,E){for(var D=this,F=D.nodes,Y=D.kg,b=D.center,h=D.prune,$=F.length,U=9e10,W=-9e10,V=9e10,H=-9e10,q=0;q<$;q+=1)h&&E[q]<=1||(A[q].setPos(F[q].x,F[q].y),F[q].x>=W&&(W=F[q].x),F[q].x<=U&&(U=F[q].x),F[q].y>=H&&(H=F[q].y),F[q].y<=V&&(V=F[q].y));for(var tt=Math.max(W-U,H-V),rt={xmid:(W+U)/2,ymid:(H+V)/2,length:tt,massCenter:b,mass:$},ft=new P.default(rt),it=new p.default(ft),q=0;q<$;q+=1)h&&E[q]<=1||A[q].in(ft)&&it.insert(A[q]);for(var q=0;q<$;q+=1)if(!(h&&E[q]<=1)){A[q].resetForce(),it.updateForce(A[q]),g[2*q]-=A[q].fx,g[2*q+1]-=A[q].fy;var bt=[F[q].x-b[0],F[q].y-b[1]],gt=Math.hypot(bt[0],bt[1]);gt=gt<1e-4?1e-4:gt,bt[0]=bt[0]/gt,bt[1]=bt[1]/gt;var Xt=Y*(E[q]+1);g[2*q]-=Xt*bt[0],g[2*q+1]-=Xt*bt[1]}return g},y.prototype.updatePos=function(g,A,E,D){for(var F=this,Y=F.nodes,b=F.ks,h=F.tao,$=F.prune,U=F.ksmax,W=Y.length,V=[],H=[],q=0,tt=0,rt=0;rt<W;rt+=1)if(!($&&D[rt]<=1)){var ft=[g[2*rt]-A[2*rt],g[2*rt+1]-A[2*rt+1]],it=Math.hypot(ft[0],ft[1]),bt=[g[2*rt]+A[2*rt],g[2*rt+1]+A[2*rt+1]],gt=Math.hypot(bt[0],bt[1]);V[rt]=it,H[rt]=gt/2,q+=(D[rt]+1)*V[rt],tt+=(D[rt]+1)*H[rt]}var Xt=E;E=h*tt/q,Xt!==0&&(E=E>1.5*Xt?1.5*Xt:E);for(var rt=0;rt<W;rt+=1)if(!($&&D[rt]<=1)&&!((0,T.isNumber)(Y[rt].fx)&&(0,T.isNumber)(Y[rt].fy))){var Ct=b*E/(1+E*Math.sqrt(V[rt])),At=Math.hypot(g[2*rt],g[2*rt+1]);At=At<1e-4?1e-4:At;var Z=U/At;Ct=Ct>Z?Z:Ct;var J=Ct*g[2*rt],yt=Ct*g[2*rt+1];Y[rt].x+=J,Y[rt].y+=yt}return{nodes:Y,sg:E}},y}(w.Base);z.ForceAtlas2Layout=m},851638:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.xmid=k.xmid,this.ymid=k.ymid,this.length=k.length,this.massCenter=k.massCenter||[0,0],this.mass=k.mass||1}return x.prototype.getLength=function(){return this.length},x.prototype.contains=function(k,w){var T=this.length/2;return k<=this.xmid+T&&k>=this.xmid-T&&w<=this.ymid+T&&w>=this.ymid-T},x.prototype.NW=function(){var k=this.xmid-this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.NE=function(){var k=this.xmid+this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.SW=function(){var k=this.xmid-this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.SE=function(){var k=this.xmid+this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x}();z.default=C},762732:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,k!=null&&(this.quad=k)}return x.prototype.insert=function(k){if(this.body==null){this.body=k;return}this._isExternal()?(this.quad&&(this.NW=new x(this.quad.NW()),this.NE=new x(this.quad.NE()),this.SW=new x(this.quad.SW()),this.SE=new x(this.quad.SE())),this._putBody(this.body),this._putBody(k),this.body=this.body.add(k)):(this.body=this.body.add(k),this._putBody(k))},x.prototype._putBody=function(k){this.quad&&(k.in(this.quad.NW())&&this.NW?this.NW.insert(k):k.in(this.quad.NE())&&this.NE?this.NE.insert(k):k.in(this.quad.SW())&&this.SW?this.SW.insert(k):k.in(this.quad.SE())&&this.SE&&this.SE.insert(k))},x.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},x.prototype.updateForce=function(k){if(!(this.body==null||k===this.body))if(this._isExternal())k.addForce(this.body);else{var w=this.quad?this.quad.getLength():0,T=this.body.distanceTo(k);w/T<this.theta?k.addForce(this.body):(this.NW&&this.NW.updateForce(k),this.NE&&this.NE.updateForce(k),this.SW&&this.SW.updateForce(k),this.SE&&this.SE.updateForce(k))}},x}();z.default=C},880374:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanLayout=void 0;var k=C(762329),w=C(449784),T=800,L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=1e3,S.workerEnabled=!1,S.gravity=10,S.speed=5,S.clustering=!1,S.clusterGravity=10,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.onLayoutEnd=function(){},S.tick=function(){},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},p.prototype.execute=function(){var m=this,S,y,g=this,A=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!A||A.length===0){(S=g.onLayoutEnd)===null||S===void 0||S.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var E=g.center;if(A.length===1){A[0].x=E[0],A[0].y=E[1],(y=g.onLayoutEnd)===null||y===void 0||y.call(g);return}var D={},F={};return A.forEach(function(Y,b){(0,w.isNumber)(Y.x)||(Y.x=Math.random()*m.width),(0,w.isNumber)(Y.y)||(Y.y=Math.random()*m.height),D[Y.id]=Y,F[Y.id]=b}),g.nodeMap=D,g.nodeIdxMap=F,g.run()},p.prototype.run=function(){var m,S=this,y=S.nodes;if(y){var g=S.edges,A=S.maxIteration,E=S.workerEnabled,D=S.clustering,F=S.animate,Y={};if(D&&y.forEach(function($){Y[$.cluster]===void 0&&(Y[$.cluster]={name:$.cluster,cx:0,cy:0,count:0})}),E||!F){for(var b=0;b<A;b++)S.runOneStep(Y);(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var h=0;this.timeInterval=window.setInterval(function(){var $;S.runOneStep(Y),h++,h>=A&&(($=S.onLayoutEnd)===null||$===void 0||$.call(S),window.clearInterval(S.timeInterval))},0)}return{nodes:y,edges:g}}},p.prototype.runOneStep=function(m){var S,y=this,g=y.nodes;if(g){var A=y.edges,E=y.center,D=y.gravity,F=y.speed,Y=y.clustering,b=y.height*y.width,h=Math.sqrt(b)/10,$=b/(g.length+1),U=Math.sqrt($),W=[];if(g.forEach(function(q,tt){W[tt]={x:0,y:0}}),y.applyCalculate(g,A,W,U,$),Y){for(var V in m)m[V].cx=0,m[V].cy=0,m[V].count=0;g.forEach(function(q){var tt=m[q.cluster];(0,w.isNumber)(q.x)&&(tt.cx+=q.x),(0,w.isNumber)(q.y)&&(tt.cy+=q.y),tt.count++});for(var V in m)m[V].cx/=m[V].count,m[V].cy/=m[V].count;var H=y.clusterGravity||D;g.forEach(function(q,tt){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var rt=m[q.cluster],ft=Math.sqrt((q.x-rt.cx)*(q.x-rt.cx)+(q.y-rt.cy)*(q.y-rt.cy)),it=U*H;W[tt].x-=it*(q.x-rt.cx)/ft,W[tt].y-=it*(q.y-rt.cy)/ft}})}g.forEach(function(q,tt){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var rt=.01*U*D;W[tt].x-=rt*(q.x-E[0]),W[tt].y-=rt*(q.y-E[1])}}),g.forEach(function(q,tt){if((0,w.isNumber)(q.fx)&&(0,w.isNumber)(q.fy)){q.x=q.fx,q.y=q.fy;return}if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var rt=Math.sqrt(W[tt].x*W[tt].x+W[tt].y*W[tt].y);if(rt>0){var ft=Math.min(h*(F/T),rt);q.x+=W[tt].x/rt*ft,q.y+=W[tt].y/rt*ft}}}),(S=y.tick)===null||S===void 0||S.call(y)}},p.prototype.applyCalculate=function(m,S,y,g,A){var E=this;E.calRepulsive(m,y,A),S&&E.calAttractive(S,y,g)},p.prototype.calRepulsive=function(m,S,y){m.forEach(function(g,A){S[A]={x:0,y:0},m.forEach(function(E,D){if(A!==D&&!(!(0,w.isNumber)(g.x)||!(0,w.isNumber)(E.x)||!(0,w.isNumber)(g.y)||!(0,w.isNumber)(E.y))){var F=g.x-E.x,Y=g.y-E.y,b=F*F+Y*Y;if(b===0){b=1;var h=A>D?1:-1;F=.01*h,Y=.01*h}var $=y/b;S[A].x+=F*$,S[A].y+=Y*$}})})},p.prototype.calAttractive=function(m,S,y){var g=this;m.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target");if(!(!E||!D)){var F=g.nodeIdxMap[E],Y=g.nodeIdxMap[D];if(F!==Y){var b=g.nodeMap[E],h=g.nodeMap[D];if(!(!(0,w.isNumber)(h.x)||!(0,w.isNumber)(b.x)||!(0,w.isNumber)(h.y)||!(0,w.isNumber)(b.y))){var $=h.x-b.x,U=h.y-b.y,W=Math.sqrt($*$+U*U),V=W*W/y;S[Y].x-=$/W*V,S[Y].y-=U/W*V,S[F].x+=$/W*V,S[F].y+=U/W*V}}}})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"fruchterman"},p}(k.Base);z.FruchtermanLayout=L},113653:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GForceLayout=void 0;var k=C(762329),w=C(449784),T=function(P,p){var m;return P?(0,w.isNumber)(P)?m=function(S){return P}:m=P:m=function(S){return p||1},m},L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=500,S.workerEnabled=!1,S.edgeStrength=200,S.nodeStrength=1e3,S.coulombDisScale=.005,S.damping=.9,S.maxSpeed=1e3,S.minMovement=.5,S.interval=.02,S.factor=1,S.linkDistance=1,S.gravity=10,S.preventOverlap=!0,S.collideStrength=1,S.tick=function(){},S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var m,S,y=this,g=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!g||g.length===0){(m=y.onLayoutEnd)===null||m===void 0||m.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var A=y.center;if(g.length===1){g[0].x=A[0],g[0].y=A[1],(S=y.onLayoutEnd)===null||S===void 0||S.call(y);return}var E={},D={};g.forEach(function(U,W){(0,w.isNumber)(U.x)||(U.x=Math.random()*y.width),(0,w.isNumber)(U.y)||(U.y=Math.random()*y.height),E[U.id]=U,D[U.id]=W}),y.nodeMap=E,y.nodeIdxMap=D,y.linkDistance=T(y.linkDistance,1),y.nodeStrength=T(y.nodeStrength,1),y.edgeStrength=T(y.edgeStrength,1);var F=y.nodeSize,Y;if(y.preventOverlap){var b=y.nodeSpacing,h;(0,w.isNumber)(b)?h=function(){return b}:(0,w.isFunction)(b)?h=b:h=function(){return 0},F?(0,w.isArray)(F)?Y=function(U){return Math.max(F[0],F[1])+h(U)}:Y=function(U){return F+h(U)}:Y=function(U){return U.size?(0,w.isArray)(U.size)?Math.max(U.size[0],U.size[1])+h(U):(0,w.isObject)(U.size)?Math.max(U.size.width,U.size.height)+h(U):U.size+h(U):10+h(U)}}y.nodeSize=Y;var $=y.edges;y.degrees=(0,w.getDegree)(g.length,y.nodeIdxMap,$),y.getMass||(y.getMass=function(U){var W=U.mass||y.degrees[y.nodeIdxMap[U.id]].all||1;return W}),y.run()},p.prototype.run=function(){var m,S=this,y=S.maxIteration,g=S.nodes,A=S.workerEnabled,E=S.minMovement,D=S.animate;if(g)if(A||!D){for(var F=0;F<y;F++){var Y=S.runOneStep(F);if(S.reachMoveThreshold(g,Y,E))break}(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var b=0;this.timeInterval=window.setInterval(function(){var h,$;if(g){var U=S.runOneStep(b)||[];S.reachMoveThreshold(g,U,E)&&((h=S.onLayoutEnd)===null||h===void 0||h.call(S),window.clearInterval(S.timeInterval)),b++,b>=y&&(($=S.onLayoutEnd)===null||$===void 0||$.call(S),window.clearInterval(S.timeInterval))}},0)}},p.prototype.reachMoveThreshold=function(m,S,y){var g=0;return m.forEach(function(A,E){var D=A.x-S[E].x,F=A.y-S[E].y;g+=Math.sqrt(D*D+F*F)}),g/=m.length,g<y},p.prototype.runOneStep=function(m){var S,y=this,g=y.nodes,A=y.edges,E=[],D=[];if(g){g.forEach(function(b,h){E[2*h]=0,E[2*h+1]=0,D[2*h]=0,D[2*h+1]=0}),y.calRepulsive(E,g),A&&y.calAttractive(E,A),y.calGravity(E,g);var F=Math.max(.02,y.interval-m*.002);y.updateVelocity(E,D,F,g);var Y=[];return g.forEach(function(b){Y.push({x:b.x,y:b.y})}),y.updatePosition(D,F,g),(S=y.tick)===null||S===void 0||S.call(y),Y}},p.prototype.calRepulsive=function(m,S){var y=this,g=y.getMass,A=y.factor,E=y.coulombDisScale,D=y.preventOverlap,F=y.collideStrength,Y=F===void 0?1:F,b=y.nodeStrength,h=y.nodeSize;S.forEach(function($,U){var W=g?g($):1;S.forEach(function(V,H){if(!(U>=H)){var q=$.x-V.x,tt=$.y-V.y;q===0&&tt===0&&(q=Math.random()*.01,tt=Math.random()*.01);var rt=q*q+tt*tt,ft=Math.sqrt(rt),it=(ft+.1)*E,bt=q/ft,gt=tt/ft,Xt=(b($)+b(V))*.5*A/(it*it),Ct=g?g(V):1;if(m[2*U]+=bt*Xt,m[2*U+1]+=gt*Xt,m[2*H]-=bt*Xt,m[2*H+1]-=gt*Xt,D&&(h($)+h(V))/2>ft){var At=Y*(b($)+b(V))*.5/rt;m[2*U]+=bt*At/W,m[2*U+1]+=gt*At/W,m[2*H]-=bt*At/Ct,m[2*H+1]-=gt*At/Ct}}})})},p.prototype.calAttractive=function(m,S){var y=this,g=y.nodeMap,A=y.nodeIdxMap,E=y.linkDistance,D=y.edgeStrength,F=y.nodeSize,Y=y.getMass;S.forEach(function(b,h){var $=(0,w.getEdgeTerminal)(b,"source"),U=(0,w.getEdgeTerminal)(b,"target"),W=g[$],V=g[U],H=V.x-W.x,q=V.y-W.y;H===0&&q===0&&(H=Math.random()*.01,q=Math.random()*.01);var tt=Math.sqrt(H*H+q*q),rt=H/tt,ft=q/tt,it=E(b,W,V)||1+(F(W)+F(V)||0)/2,bt=it-tt,gt=bt*D(b),Xt=A[$],Ct=A[U],At=Y?Y(W):1,Z=Y?Y(V):1;m[2*Xt]-=rt*gt/At,m[2*Xt+1]-=ft*gt/At,m[2*Ct]+=rt*gt/Z,m[2*Ct+1]+=ft*gt/Z})},p.prototype.calGravity=function(m,S){for(var y=this,g=y.center,A=y.gravity,E=y.degrees,D=S.length,F=0;F<D;F++){var Y=S[F],b=Y.x-g[0],h=Y.y-g[1],$=A;if(y.getCenter){var U=y.getCenter(Y,E[F].all);U&&(0,w.isNumber)(U[0])&&(0,w.isNumber)(U[1])&&(0,w.isNumber)(U[2])&&(b=Y.x-U[0],h=Y.y-U[1],$=U[2])}$&&(m[2*F]-=$*b,m[2*F+1]-=$*h)}},p.prototype.updateVelocity=function(m,S,y,g){var A=this,E=y*A.damping;g.forEach(function(D,F){var Y=m[2*F]*E||.01,b=m[2*F+1]*E||.01,h=Math.sqrt(Y*Y+b*b);if(h>A.maxSpeed){var $=A.maxSpeed/h;Y=$*Y,b=$*b}S[2*F]=Y,S[2*F+1]=b})},p.prototype.updatePosition=function(m,S,y){y.forEach(function(g,A){if((0,w.isNumber)(g.fx)&&(0,w.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var E=m[2*A]*S,D=m[2*A+1]*S;g.x+=E,g.y+=D})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"gForce"},p}(k.Base);z.GForceLayout=L},687745:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var g=function(A,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&(D[Y]=F[Y])},g(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__awaiter||function(g,A,E,D){function F(Y){return Y instanceof E?Y:new E(function(b){b(Y)})}return new(E||(E=Promise))(function(Y,b){function h(W){try{U(D.next(W))}catch(V){b(V)}}function $(W){try{U(D.throw(W))}catch(V){b(V)}}function U(W){W.done?Y(W.value):F(W.value).then(h,$)}U((D=D.apply(g,A||[])).next())})},w=this&&this.__generator||function(g,A){var E={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},D,F,Y,b;return b={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function h(U){return function(W){return $([U,W])}}function $(U){if(D)throw new TypeError("Generator is already executing.");for(;b&&(b=0,U[0]&&(E=0)),E;)try{if(D=1,F&&(Y=U[0]&2?F.return:U[0]?F.throw||((Y=F.return)&&Y.call(F),0):F.next)&&!(Y=Y.call(F,U[1])).done)return Y;switch(F=0,Y&&(U=[U[0]&2,Y.value]),U[0]){case 0:case 1:Y=U;break;case 4:return E.label++,{value:U[1],done:!1};case 5:E.label++,F=U[1],U=[0];continue;case 7:U=E.ops.pop(),E.trys.pop();continue;default:if(Y=E.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(U[0]===6||U[0]===2)){E=0;continue}if(U[0]===3&&(!Y||U[1]>Y[0]&&U[1]<Y[3])){E.label=U[1];break}if(U[0]===6&&E.label<Y[1]){E.label=Y[1],Y=U;break}if(Y&&E.label<Y[2]){E.label=Y[2],E.ops.push(U);break}Y[2]&&E.ops.pop(),E.trys.pop();continue}U=A.call(g,E)}catch(W){U=[6,W],F=0}finally{D=Y=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(108574),S=C(416470),y=function(g){x(A,g);function A(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.gravity=10,D.speed=1,D.clustering=!1,D.clusterField="cluster",D.clusterGravity=10,D.workerEnabled=!1,D.nodes=[],D.edges=[],D.width=300,D.height=300,D.nodeMap={},D.nodeIdxMap={},D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return k(this,void 0,void 0,function(){var E,D,F,Y,b,h=this;return w(this,function($){switch($.label){case 0:return E=this,D=E.nodes,!D||D.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),F=E.center,D.length===1?(D[0].x=F[0],D[0].y=F[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(Y={},b={},D.forEach(function(U,W){(0,L.isNumber)(U.x)||(U.x=Math.random()*h.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*h.height),Y[U.id]=U,b[U.id]=W}),E.nodeMap=Y,E.nodeIdxMap=b,[4,E.run()]));case 1:return $.sent(),[2]}})})},A.prototype.executeWithWorker=function(E,D){return k(this,void 0,void 0,function(){var F,Y,b,h,$,U=this;return w(this,function(W){switch(W.label){case 0:return F=this,Y=F.nodes,b=F.center,!Y||Y.length===0?[2]:Y.length===1?(Y[0].x=b[0],Y[0].y=b[1],[2]):(h={},$={},Y.forEach(function(V,H){(0,L.isNumber)(V.x)||(V.x=Math.random()*U.width),(0,L.isNumber)(V.y)||(V.y=Math.random()*U.height),h[V.id]=V,$[V.id]=H}),F.nodeMap=h,F.nodeIdxMap=$,[4,F.run(E,D)]);case 1:return W.sent(),[2]}})})},A.prototype.run=function(E,D){return k(this,void 0,void 0,function(){var F,Y,b,h,$,U,W,V,H,q,tt,rt,ft,it,bt,gt,Xt,Ct,At,Z,J,yt,_t,nt,vt,It,Pt=this;return w(this,function(St){switch(St.label){case 0:for(F=this,Y=F.nodes,b=F.edges,h=F.maxIteration,$=F.center,U=F.height*F.width,W=Math.sqrt(U)/10,V=U/(Y.length+1),H=Math.sqrt(V),q=F.speed,tt=F.clustering,rt=(0,p.attributesToTextureData)([F.clusterField],Y),ft=rt.array,it=rt.count,Y.forEach(function(Dt,Qt){var ue=0,ie=0;(0,L.isNumber)(Dt.fx)&&(0,L.isNumber)(Dt.fy)&&(ue=Dt.fx||.001,ie=Dt.fy||.001),ft[4*Qt+1]=ue,ft[4*Qt+2]=ie}),bt=Y.length,gt=(0,p.buildTextureData)(Y,b),Xt=gt.maxEdgePerVetex,Ct=gt.array,At=F.workerEnabled,At?Z=P.World.create({canvas:E,engineOptions:{supportCompute:!0}}):Z=P.World.create({engineOptions:{supportCompute:!0}}),J=F.onLayoutEnd,yt=[],_t=0;_t<it;_t++)yt.push(0,0,0,0);return nt=Z.createKernel(m.fruchtermanBundle).setDispatch([bt,1,1]).setBinding({u_Data:Ct,u_K:H,u_K2:V,u_Gravity:F.gravity,u_ClusterGravity:F.clusterGravity||F.gravity||1,u_Speed:q,u_MaxDisplace:W,u_Clustering:tt?1:0,u_Center:$,u_AttributeArray:ft,u_ClusterCenters:yt,MAX_EDGE_PER_VERTEX:Xt,VERTEX_COUNT:bt}),tt&&(vt=Z.createKernel(m.clusterBundle).setDispatch([it,1,1]).setBinding({u_Data:Ct,u_NodeAttributes:ft,u_ClusterCenters:yt,VERTEX_COUNT:bt,CLUSTER_COUNT:it})),It=function(){return k(Pt,void 0,void 0,function(){var Dt,Qt;return w(this,function(ue){switch(ue.label){case 0:Dt=0,ue.label=1;case 1:return Dt<h?[4,nt.execute()]:[3,6];case 2:return ue.sent(),tt?(vt.setBinding({u_Data:nt}),[4,vt.execute()]):[3,4];case 3:ue.sent(),nt.setBinding({u_ClusterCenters:vt}),ue.label=4;case 4:nt.setBinding({u_MaxDisplace:W*=.99}),ue.label=5;case 5:return Dt++,[3,1];case 6:return[4,nt.getOutput()];case 7:return Qt=ue.sent(),E?D.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Qt}):Y.forEach(function(ie,Lt){var ne=Qt[4*Lt],ve=Qt[4*Lt+1];ie.x=ne,ie.y=ve}),J&&J(),[2]}})})},[4,It()];case 1:return St.sent(),[2]}})})},A.prototype.getType=function(){return"fruchterman-gpu"},A}(T.Base);z.FruchtermanGPULayout=y},108574:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.clusterBundle=z.clusterCode=z.fruchtermanBundle=z.fruchtermanCode=void 0,z.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,z.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,z.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var A=function(E,D){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,Y){F.__proto__=Y}||function(F,Y){for(var b in Y)Object.prototype.hasOwnProperty.call(Y,b)&&(F[b]=Y[b])},A(E,D)};return function(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");A(E,D);function F(){this.constructor=E}E.prototype=D===null?Object.create(D):(F.prototype=D.prototype,new F)}}(),k=this&&this.__awaiter||function(A,E,D,F){function Y(b){return b instanceof D?b:new D(function(h){h(b)})}return new(D||(D=Promise))(function(b,h){function $(V){try{W(F.next(V))}catch(H){h(H)}}function U(V){try{W(F.throw(V))}catch(H){h(H)}}function W(V){V.done?b(V.value):Y(V.value).then($,U)}W((F=F.apply(A,E||[])).next())})},w=this&&this.__generator||function(A,E){var D={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},F,Y,b,h;return h={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function $(W){return function(V){return U([W,V])}}function U(W){if(F)throw new TypeError("Generator is already executing.");for(;h&&(h=0,W[0]&&(D=0)),D;)try{if(F=1,Y&&(b=W[0]&2?Y.return:W[0]?Y.throw||((b=Y.return)&&b.call(Y),0):Y.next)&&!(b=b.call(Y,W[1])).done)return b;switch(Y=0,b&&(W=[W[0]&2,b.value]),W[0]){case 0:case 1:b=W;break;case 4:return D.label++,{value:W[1],done:!1};case 5:D.label++,Y=W[1],W=[0];continue;case 7:W=D.ops.pop(),D.trys.pop();continue;default:if(b=D.trys,!(b=b.length>0&&b[b.length-1])&&(W[0]===6||W[0]===2)){D=0;continue}if(W[0]===3&&(!b||W[1]>b[0]&&W[1]<b[3])){D.label=W[1];break}if(W[0]===6&&D.label<b[1]){D.label=b[1],b=W;break}if(b&&D.label<b[2]){D.label=b[2],D.ops.push(W);break}b[2]&&D.ops.pop(),D.trys.pop();continue}W=E.call(A,D)}catch(V){W=[6,V],Y=0}finally{F=b=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.GForceGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(280628),S=C(549762),y=C(416470),g=function(A){x(E,A);function E(D){var F=A.call(this)||this;return F.maxIteration=1e3,F.edgeStrength=200,F.nodeStrength=1e3,F.coulombDisScale=.005,F.damping=.9,F.maxSpeed=1e3,F.minMovement=.5,F.interval=.02,F.factor=1,F.linkDistance=1,F.gravity=10,F.workerEnabled=!1,F.nodes=[],F.edges=[],F.width=300,F.height=300,F.nodeMap={},F.nodeIdxMap={},F.updateCfg(D),F}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return k(this,void 0,void 0,function(){var D,F,Y,b,h;return w(this,function($){switch($.label){case 0:return D=this,F=D.nodes,!F||F.length===0?(D.onLayoutEnd&&D.onLayoutEnd(),[2]):(!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),D.center||(D.center=[D.width/2,D.height/2]),Y=D.center,F.length===1?(F[0].x=Y[0],F[0].y=Y[1],D.onLayoutEnd&&D.onLayoutEnd(),[2]):(b={},h={},F.forEach(function(U,W){(0,L.isNumber)(U.x)||(U.x=Math.random()*D.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*D.height),b[U.id]=U,h[U.id]=W}),D.nodeMap=b,D.nodeIdxMap=h,D.nodeStrength=(0,p.proccessToFunc)(D.nodeStrength,1),D.edgeStrength=(0,p.proccessToFunc)(D.edgeStrength,1),[4,D.run()]));case 1:return $.sent(),[2]}})})},E.prototype.executeWithWorker=function(D,F){var Y=this,b=Y.nodes,h=Y.center;if(!(!b||b.length===0)){if(b.length===1){b[0].x=h[0],b[0].y=h[1];return}var $={},U={};b.forEach(function(W,V){(0,L.isNumber)(W.x)||(W.x=Math.random()*Y.width),(0,L.isNumber)(W.y)||(W.y=Math.random()*Y.height),$[W.id]=W,U[W.id]=V}),Y.nodeMap=$,Y.nodeIdxMap=U,Y.nodeStrength=(0,p.proccessToFunc)(Y.nodeStrength,1),Y.edgeStrength=(0,p.proccessToFunc)(Y.edgeStrength,1),Y.run(D,F)}},E.prototype.run=function(D,F){return k(this,void 0,void 0,function(){var Y,b,h,$,U,W,V,H,q,tt,rt,ft,it,bt,gt,Xt,Ct,At,Z,J,yt,_t,nt,vt,It,Pt,St,Dt=this;return w(this,function(Qt){switch(Qt.label){case 0:for(Y=this,b=Y.nodes,h=Y.edges,$=Y.maxIteration,!Y.width&&typeof window!="undefined"&&(Y.width=window.innerWidth),!Y.height&&typeof window!="undefined"&&(Y.height=window.innerHeight),U=b.length,Y.linkDistance=(0,p.proccessToFunc)(Y.linkDistance),Y.edgeStrength=(0,p.proccessToFunc)(Y.edgeStrength),W=(0,p.buildTextureDataWithTwoEdgeAttr)(b,h,Y.linkDistance,Y.edgeStrength),V=W.maxEdgePerVetex,H=W.array,Y.degrees=(0,m.getDegree)(b.length,Y.nodeIdxMap,h).map(function(ue){return ue.all}),q=[],tt=[],rt=[],ft=[],it=[],bt=[],gt=[],Y.getMass||(Y.getMass=function(ue){return Y.degrees[Y.nodeIdxMap[ue.id]]||1}),Xt=Y.gravity,Ct=Y.center,b.forEach(function(ue,ie){q.push(Y.getMass(ue)),tt.push(Y.nodeStrength(ue)),Y.degrees[ie]||(Y.degrees[ie]=0);var Lt=[Ct[0],Ct[1],Xt];if(Y.getCenter){var ne=Y.getCenter(ue,Y.degrees[ie]);ne&&(0,L.isNumber)(ne[0])&&(0,L.isNumber)(ne[1])&&(0,L.isNumber)(ne[2])&&(Lt=ne)}rt.push(Lt[0]),ft.push(Lt[1]),it.push(Lt[2]),(0,L.isNumber)(ue.fx)&&(0,L.isNumber)(ue.fy)?(bt.push(ue.fx||.001),gt.push(ue.fy||.001)):(bt.push(0),gt.push(0))}),At=(0,p.arrayToTextureData)([q,Y.degrees,tt,bt]),Z=(0,p.arrayToTextureData)([rt,ft,it,gt]),J=Y.workerEnabled,J?yt=P.World.create({canvas:D,engineOptions:{supportCompute:!0}}):yt=P.World.create({engineOptions:{supportCompute:!0}}),_t=Y.onLayoutEnd,nt=[],H.forEach(function(ue){nt.push(ue)}),vt=0;vt<4;vt++)nt.push(0);return It=yt.createKernel(S.gForceBundle).setDispatch([U,1,1]).setBinding({u_Data:H,u_damping:Y.damping,u_maxSpeed:Y.maxSpeed,u_minMovement:Y.minMovement,u_coulombDisScale:Y.coulombDisScale,u_factor:Y.factor,u_NodeAttributeArray1:At,u_NodeAttributeArray2:Z,MAX_EDGE_PER_VERTEX:V,VERTEX_COUNT:U,u_AveMovement:nt,u_interval:Y.interval}),Pt=yt.createKernel(S.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:H,VERTEX_COUNT:U,u_AveMovement:[0,0,0,0]}),St=function(){return k(Dt,void 0,void 0,function(){var ue,ie,Lt;return w(this,function(ne){switch(ne.label){case 0:ue=0,ne.label=1;case 1:return ue<$?[4,It.execute()]:[3,5];case 2:return ne.sent(),Pt.setBinding({u_Data:It}),[4,Pt.execute()];case 3:ne.sent(),ie=Math.max(.02,Y.interval-ue*.002),It.setBinding({u_interval:ie,u_AveMovement:Pt}),ne.label=4;case 4:return ue++,[3,1];case 5:return[4,It.getOutput()];case 6:return Lt=ne.sent(),D?F.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Lt}):b.forEach(function(ve,Wt){var ae=Lt[4*Wt],Ce=Lt[4*Wt+1];ve.x=ae,ve.y=Ce}),_t&&_t(),[2]}})})},[4,St()];case 1:return Qt.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(T.Base);z.GForceGPULayout=g},549762:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.aveMovementBundle=z.aveMovementCode=z.gForceBundle=z.gForceCode=void 0,z.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,z.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,z.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GridLayout=void 0;var k=C(449784),w=C(762329),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.begin=[0,0],m.preventOverlap=!0,m.preventOverlapPadding=10,m.condense=!1,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.row=0,m.col=0,m.cellWidth=0,m.cellHeight=0,m.cellUsed={},m.id2manPos={},m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.edges,y=p.begin,g=m.length;if(g===0)return p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};if(g===1)return m[0].x=y[0],m[0].y=y[1],p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};var A=p.sortBy,E=p.width,D=p.height,F=p.condense,Y=p.preventOverlapPadding,b=p.preventOverlap,h=p.nodeSpacing,$=p.nodeSize,U=[];m.forEach(function(At){U.push(At)});var W={};if(U.forEach(function(At,Z){W[At.id]=Z}),(A==="degree"||!(0,k.isString)(A)||U[0][A]===void 0)&&(A="degree",(0,k.isNaN)(m[0].degree))){var V=(0,k.getDegree)(U.length,W,S);U.forEach(function(At,Z){At.degree=V[Z].all})}U.sort(function(At,Z){return Z[A]-At[A]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!D&&typeof window!="undefined"&&(D=window.innerHeight);var H=p.rows,q=p.cols!=null?p.cols:p.columns;if(p.cells=g,H!=null&&q!=null?(p.rows=H,p.cols=q):H!=null&&q==null?(p.rows=H,p.cols=Math.ceil(p.cells/p.rows)):H==null&&q!=null?(p.cols=q,p.rows=Math.ceil(p.cells/p.cols)):(p.splits=Math.sqrt(p.cells*p.height/p.width),p.rows=Math.round(p.splits),p.cols=Math.round(p.width/p.height*p.splits)),p.rows=Math.max(p.rows,1),p.cols=Math.max(p.cols,1),p.cols*p.rows>p.cells){var tt=p.small(),rt=p.large();(tt-1)*rt>=p.cells?p.small(tt-1):(rt-1)*tt>=p.cells&&p.large(rt-1)}else for(;p.cols*p.rows<p.cells;){var tt=p.small(),rt=p.large();(rt+1)*tt>=p.cells?p.large(rt+1):p.small(tt+1)}if(p.cellWidth=E/p.cols,p.cellHeight=D/p.rows,F&&(p.cellWidth=0,p.cellHeight=0),b||h){var ft=(0,k.getFuncByUnknownType)(10,h),it=(0,k.getFuncByUnknownType)(30,$,!1);U.forEach(function(At){(!At.x||!At.y)&&(At.x=0,At.y=0);var Z=it(At)||30,J,yt;(0,k.isArray)(Z)?(J=Z[0],yt=Z[1]):(J=Z,yt=Z);var _t=ft!==void 0?ft(At):Y,nt=J+_t,vt=yt+_t;p.cellWidth=Math.max(p.cellWidth,nt),p.cellHeight=Math.max(p.cellHeight,vt)})}p.cellUsed={},p.row=0,p.col=0,p.id2manPos={};for(var bt=0;bt<U.length;bt++){var gt=U[bt],Xt=void 0;if(p.position&&(Xt=p.position(gt)),Xt&&(Xt.row!==void 0||Xt.col!==void 0)){var Ct={row:Xt.row,col:Xt.col};if(Ct.col===void 0)for(Ct.col=0;p.used(Ct.row,Ct.col);)Ct.col++;else if(Ct.row===void 0)for(Ct.row=0;p.used(Ct.row,Ct.col);)Ct.row++;p.id2manPos[gt.id]=Ct,p.use(Ct.row,Ct.col)}p.getPos(gt)}return p.onLayoutEnd&&p.onLayoutEnd(),{edges:S,nodes:U}},P.prototype.small=function(p){var m=this,S,y=m.rows||5,g=m.cols||5;if(p==null)S=Math.min(y,g);else{var A=Math.min(y,g);A===m.rows?m.rows=p:m.cols=p}return S},P.prototype.large=function(p){var m=this,S,y=m.rows||5,g=m.cols||5;if(p==null)S=Math.max(y,g);else{var A=Math.max(y,g);A===m.rows?m.rows=p:m.cols=p}return S},P.prototype.used=function(p,m){var S=this;return S.cellUsed["c-".concat(p,"-").concat(m)]||!1},P.prototype.use=function(p,m){var S=this;S.cellUsed["c-".concat(p,"-").concat(m)]=!0},P.prototype.moveToNextCell=function(){var p=this,m=p.cols||5;p.col++,p.col>=m&&(p.col=0,p.row++)},P.prototype.getPos=function(p){var m=this,S=m.begin,y=m.cellWidth,g=m.cellHeight,A,E,D=m.id2manPos[p.id];if(D)A=D.col*y+y/2+S[0],E=D.row*g+g/2+S[1];else{for(;m.used(m.row,m.col);)m.moveToNextCell();A=m.col*y+y/2+S[0],E=m.row*g+g/2+S[1],m.use(m.row,m.col),m.moveToNextCell()}p.x=A,p.y=E},P.prototype.getType=function(){return"grid"},P}(w.Base);z.GridLayout=T},702584:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(V,H,q,tt){tt===void 0&&(tt=q);var rt=Object.getOwnPropertyDescriptor(H,q);(!rt||("get"in rt?!H.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return H[q]}}),Object.defineProperty(V,tt,rt)}:function(V,H,q,tt){tt===void 0&&(tt=q),V[tt]=H[q]}),k=this&&this.__exportStar||function(V,H){for(var q in V)q!=="default"&&!Object.prototype.hasOwnProperty.call(H,q)&&x(H,V,q)};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=z.ForceAtlas2Layout=z.ComboCombinedLayout=z.ComboForceLayout=z.GForceGPULayout=z.FruchtermanGPULayout=z.FruchtermanLayout=z.MDSLayout=z.ConcentricLayout=z.RadialLayout=z.DagreCompoundLayout=z.DagreLayout=z.CircularLayout=z.ForceLayout=z.Force2Layout=z.GForceLayout=z.RandomLayout=z.GridLayout=z.Layouts=z.Layout=void 0;var w=C(694414);Object.defineProperty(z,"GridLayout",{enumerable:!0,get:function(){return w.GridLayout}});var T=C(539711);Object.defineProperty(z,"RandomLayout",{enumerable:!0,get:function(){return T.RandomLayout}});var L=C(113653);Object.defineProperty(z,"GForceLayout",{enumerable:!0,get:function(){return L.GForceLayout}});var P=C(306740);Object.defineProperty(z,"Force2Layout",{enumerable:!0,get:function(){return P.Force2Layout}});var p=C(885717);Object.defineProperty(z,"ForceLayout",{enumerable:!0,get:function(){return p.ForceLayout}});var m=C(964885);Object.defineProperty(z,"CircularLayout",{enumerable:!0,get:function(){return m.CircularLayout}});var S=C(920171);Object.defineProperty(z,"DagreLayout",{enumerable:!0,get:function(){return S.DagreLayout}});var y=C(177057);Object.defineProperty(z,"DagreCompoundLayout",{enumerable:!0,get:function(){return y.DagreCompoundLayout}});var g=C(847944);Object.defineProperty(z,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var A=C(843281);Object.defineProperty(z,"ConcentricLayout",{enumerable:!0,get:function(){return A.ConcentricLayout}});var E=C(352899);Object.defineProperty(z,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var D=C(880374);Object.defineProperty(z,"FruchtermanLayout",{enumerable:!0,get:function(){return D.FruchtermanLayout}});var F=C(687745);Object.defineProperty(z,"FruchtermanGPULayout",{enumerable:!0,get:function(){return F.FruchtermanGPULayout}});var Y=C(785194);Object.defineProperty(z,"GForceGPULayout",{enumerable:!0,get:function(){return Y.GForceGPULayout}});var b=C(366590);Object.defineProperty(z,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var h=C(263861);Object.defineProperty(z,"ComboCombinedLayout",{enumerable:!0,get:function(){return h.ComboCombinedLayout}});var $=C(148564);Object.defineProperty(z,"ForceAtlas2Layout",{enumerable:!0,get:function(){return $.ForceAtlas2Layout}});var U=C(290441);Object.defineProperty(z,"ERLayout",{enumerable:!0,get:function(){return U.ERLayout}});var W=C(842875);Object.defineProperty(z,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(z,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),k(C(932867),z)},842875:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Layouts=z.Layout=void 0;var x=C(695326),k=C(694414),w=C(539711),T=C(306740),L=C(113653),P=C(885717),p=C(964885),m=C(920171),S=C(847944),y=C(843281),g=C(352899),A=C(880374),E=C(687745),D=C(785194),F=C(366590),Y=C(263861),b=C(148564),h=C(290441),$=C(177057),U=C(449784),W=function(){function V(H){var q=(0,x.getLayoutByName)(H.type);this.layoutInstance=new q(H)}return V.prototype.layout=function(H){return this.layoutInstance.layout(H)},V.prototype.updateCfg=function(H){this.layoutInstance.updateCfg(H)},V.prototype.init=function(H){this.correctLayers(H.nodes),this.layoutInstance.init(H)},V.prototype.correctLayers=function(H){if(H!=null&&H.length){var q=1/0,tt=[];if(H.forEach(function(ft){(0,U.isString)(ft.layer)&&(ft.layer=parseInt(ft.layer,10)),!(ft.layer===void 0||isNaN(ft.layer))&&(tt.push(ft),ft.layer<q&&(q=ft.layer))}),q<=0){var rt=Math.abs(q)+1;tt.forEach(function(ft){return ft.layer+=rt})}}},V.prototype.execute=function(){this.layoutInstance.execute()},V.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},V.prototype.destroy=function(){return this.layoutInstance.destroy()},V}();z.Layout=W,z.Layouts={force:P.ForceLayout,fruchterman:A.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:L.GForceLayout,force2:T.Force2Layout,dagre:m.DagreLayout,dagreCompound:$.DagreCompoundLayout,circular:p.CircularLayout,radial:S.RadialLayout,concentric:y.ConcentricLayout,grid:k.GridLayout,mds:g.MDSLayout,comboForce:F.ComboForceLayout,comboCombined:Y.ComboCombinedLayout,random:w.RandomLayout,"gForce-gpu":D.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:h.ERLayout}},352899:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.MDSLayout=void 0;var k=C(405237),w=C(449784),T=C(762329),L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.center=[0,0],S.linkDistance=50,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},p.prototype.execute=function(){var m=this,S=m.nodes,y=m.edges,g=y===void 0?[]:y,A=m.center;if(!S||S.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(S.length===1){S[0].x=A[0],S[0].y=A[1],m.onLayoutEnd&&m.onLayoutEnd();return}var E=m.linkDistance,D=(0,w.getAdjMatrix)({nodes:S,edges:g},!1),F=(0,w.floydWarshall)(D);m.handleInfinity(F);var Y=(0,w.scaleMatrix)(F,E);m.scaledDistances=Y;var b=m.runMDS();return m.positions=b,b.forEach(function(h,$){S[$].x=h[0]+A[0],S[$].y=h[1]+A[1]}),m.onLayoutEnd&&m.onLayoutEnd(),{nodes:S,edges:g}},p.prototype.runMDS=function(){var m=this,S=2,y=m.scaledDistances,g=k.Matrix.mul(k.Matrix.pow(y,2),-.5),A=g.mean("row"),E=g.mean("column"),D=g.mean();g.add(D).subRowVector(A).subColumnVector(E);var F=new k.SingularValueDecomposition(g),Y=k.Matrix.sqrt(F.diagonalMatrix).diagonal();return F.leftSingularVectors.toJSON().map(function(b){return k.Matrix.mul([b],[Y]).toJSON()[0].splice(0,S)})},p.prototype.handleInfinity=function(m){var S=-999999;m.forEach(function(y){y.forEach(function(g){g!==1/0&&S<g&&(S=g)})}),m.forEach(function(y,g){y.forEach(function(A,E){A===1/0&&(m[g][E]=S)})})},p.prototype.getType=function(){return"mds"},p}(T.Base);z.MDSLayout=L},847944:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(255974),z)},366082:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(405237),k=function(){function w(T){this.distances=T.distances,this.dimension=T.dimension||2,this.linkDistance=T.linkDistance}return w.prototype.layout=function(){var T=this,L=T.dimension,P=T.distances,p=T.linkDistance;try{var m=x.Matrix.mul(x.Matrix.pow(P,2),-.5),S=m.mean("row"),y=m.mean("column"),g=m.mean();m.add(g).subRowVector(S).subColumnVector(y);var A=new x.SingularValueDecomposition(m),E=x.Matrix.sqrt(A.diagonalMatrix).diagonal();return A.leftSingularVectors.toJSON().map(function(h){return x.Matrix.mul([h],[E]).toJSON()[0].splice(0,L)})}catch(h){for(var D=[],F=0;F<P.length;F++){var Y=Math.random()*p,b=Math.random()*p;D.push([Y,b])}return D}},w}();z.default=k},255974:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var g=function(A,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&(D[Y]=F[Y])},g(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0}),z.RadialLayout=void 0;var w=C(449784),T=C(762329),L=k(C(366082)),P=k(C(706290));function p(g){for(var A=g.length,E=g[0].length,D=[],F=0;F<A;F++){for(var Y=[],b=0;b<E;b++)g[F][b]!==0?Y.push(1/(g[F][b]*g[F][b])):Y.push(0);D.push(Y)}return D}function m(g,A){var E=-1;return g.forEach(function(D,F){D.id===A&&(E=F)}),E}function S(g,A){return Math.sqrt((g[0]-A[0])*(g[0]-A[0])+(g[1]-A[1])*(g[1]-A[1]))}var y=function(g){x(A,g);function A(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.focusNode=null,D.unitRadius=null,D.linkDistance=50,D.preventOverlap=!1,D.strictRadial=!0,D.maxPreventOverlapIteration=200,D.sortStrength=10,D.nodes=[],D.edges=[],D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},A.prototype.execute=function(){var E=this,D=E.nodes,F=E.edges||[];if(!D||D.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var Y=E.center;if(D.length===1){D[0].x=Y[0],D[0].y=Y[1],E.onLayoutEnd&&E.onLayoutEnd();return}var b=E.linkDistance,h=null;if((0,w.isString)(E.focusNode)){for(var $=!1,U=0;U<D.length;U++)D[U].id===E.focusNode&&(h=D[U],E.focusNode=h,$=!0,U=D.length);$||(h=null)}else h=E.focusNode;h||(h=D[0],E.focusNode=h);var W=m(D,h.id);W<0&&(W=0),E.focusIndex=W;var V=(0,w.getAdjMatrix)({nodes:D,edges:F},!1),H=(0,w.floydWarshall)(V),q=E.maxToFocus(H,W);E.handleInfinity(H,W,q+1),E.distances=H;var tt=H[W],rt=E.width||500,ft=E.height||500,it=rt-Y[0]>Y[0]?Y[0]:rt-Y[0],bt=ft-Y[1]>Y[1]?Y[1]:ft-Y[1];it===0&&(it=rt/2),bt===0&&(bt=ft/2);var gt=bt>it?it:bt,Xt=Math.max.apply(Math,tt),Ct=[];tt.forEach(function(ue,ie){E.unitRadius||(E.unitRadius=gt/Xt),Ct[ie]=ue*E.unitRadius}),E.radii=Ct;var At=E.eIdealDisMatrix();E.eIdealDistances=At;var Z=p(At);E.weights=Z;var J=new L.default({linkDistance:b,distances:At}),yt=J.layout();yt.forEach(function(ue){(0,w.isNaN)(ue[0])&&(ue[0]=Math.random()*b),(0,w.isNaN)(ue[1])&&(ue[1]=Math.random()*b)}),E.positions=yt,yt.forEach(function(ue,ie){D[ie].x=ue[0]+Y[0],D[ie].y=ue[1]+Y[1]}),yt.forEach(function(ue){ue[0]-=yt[W][0],ue[1]-=yt[W][1]}),E.run();var _t=E.preventOverlap,nt=E.nodeSize,vt,It=E.strictRadial;if(_t){var Pt=E.nodeSpacing,St;(0,w.isNumber)(Pt)?St=function(){return Pt}:(0,w.isFunction)(Pt)?St=Pt:St=function(){return 0},nt?(0,w.isArray)(nt)?vt=function(ue){var ie=nt[0]>nt[1]?nt[0]:nt[1];return ie+St(ue)}:vt=function(ue){return nt+St(ue)}:vt=function(ue){if(ue.size){if((0,w.isArray)(ue.size)){var ie=ue.size[0]>ue.size[1]?ue.size[0]:ue.size[1];return ie+St(ue)}if((0,w.isObject)(ue.size)){var ie=ue.size.width>ue.size.height?ue.size.width:ue.size.height;return ie+St(ue)}return ue.size+St(ue)}return 10+St(ue)};var Dt={nodes:D,nodeSizeFunc:vt,adjMatrix:V,positions:yt,radii:Ct,height:ft,width:rt,strictRadial:It,focusID:W,iterations:E.maxPreventOverlapIteration||200,k:yt.length/4.5},Qt=new P.default(Dt);yt=Qt.layout()}return yt.forEach(function(ue,ie){D[ie].x=ue[0]+Y[0],D[ie].y=ue[1]+Y[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:D,edges:F}},A.prototype.run=function(){for(var E=this,D=E.maxIteration,F=E.positions||[],Y=E.weights||[],b=E.eIdealDistances||[],h=E.radii||[],$=0;$<=D;$++){var U=$/D;E.oneIteration(U,F,h,b,Y)}},A.prototype.oneIteration=function(E,D,F,Y,b){var h=this,$=1-E,U=h.focusIndex;D.forEach(function(W,V){var H=S(W,[0,0]),q=H===0?0:1/H;if(V!==U){var tt=0,rt=0,ft=0;D.forEach(function(bt,gt){if(V!==gt){var Xt=S(W,bt),Ct=Xt===0?0:1/Xt,At=Y[gt][V];ft+=b[V][gt],tt+=b[V][gt]*(bt[0]+At*(W[0]-bt[0])*Ct),rt+=b[V][gt]*(bt[1]+At*(W[1]-bt[1])*Ct)}});var it=F[V]===0?0:1/F[V];ft*=$,ft+=E*it*it,tt*=$,tt+=E*it*W[0]*q,W[0]=tt/ft,rt*=$,rt+=E*it*W[1]*q,W[1]=rt/ft}})},A.prototype.eIdealDisMatrix=function(){var E=this,D=E.nodes;if(!D)return[];var F=E.distances,Y=E.linkDistance,b=E.radii||[],h=E.unitRadius||50,$=[];return F&&F.forEach(function(U,W){var V=[];U.forEach(function(H,q){if(W===q)V.push(0);else if(b[W]===b[q])if(E.sortBy==="data")V.push(H*(Math.abs(W-q)*E.sortStrength)/(b[W]/h));else if(E.sortBy){var tt=D[W][E.sortBy]||0,rt=D[q][E.sortBy]||0;(0,w.isString)(tt)&&(tt=tt.charCodeAt(0)),(0,w.isString)(rt)&&(rt=rt.charCodeAt(0)),V.push(H*(Math.abs(tt-rt)*E.sortStrength)/(b[W]/h))}else V.push(H*Y/(b[W]/h));else{var ft=(Y+h)/2;V.push(H*ft)}}),$.push(V)}),$},A.prototype.handleInfinity=function(E,D,F){for(var Y=E.length,b=0;b<Y;b++)if(E[D][b]===1/0){E[D][b]=F,E[b][D]=F;for(var h=0;h<Y;h++)E[b][h]!==1/0&&E[D][h]===1/0&&(E[D][h]=F+E[b][h],E[h][D]=F+E[b][h])}for(var b=0;b<Y;b++)if(b!==D){for(var h=0;h<Y;h++)if(E[b][h]===1/0){var $=Math.abs(E[D][b]-E[D][h]);$=$===0?1:$,E[b][h]=$}}},A.prototype.maxToFocus=function(E,D){for(var F=0,Y=0;Y<E[D].length;Y++)E[D][Y]!==1/0&&(F=E[D][Y]>F?E[D][Y]:F);return F},A.prototype.getType=function(){return"radial"},A}(T.Base);z.RadialLayout=y},706290:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=800,x=function(){function k(w){this.disp=[],this.positions=w.positions,this.adjMatrix=w.adjMatrix,this.focusID=w.focusID,this.radii=w.radii,this.iterations=w.iterations||10,this.height=w.height||10,this.width=w.width||10,this.speed=w.speed||100,this.gravity=w.gravity||10,this.nodeSizeFunc=w.nodeSizeFunc,this.k=w.k||5,this.strictRadial=w.strictRadial,this.nodes=w.nodes}return k.prototype.layout=function(){var w=this,T=w.positions,L=[],P=w.iterations,p=w.width/10;w.maxDisplace=p,w.disp=L;for(var m=0;m<P;m++)T.forEach(function(S,y){L[y]={x:0,y:0}}),w.getRepulsion(),w.updatePositions();return T},k.prototype.getRepulsion=function(){var w=this,T=w.positions,L=w.nodes,P=w.disp,p=w.k,m=w.radii||[];T.forEach(function(S,y){P[y]={x:0,y:0},T.forEach(function(g,A){if(y!==A&&m[y]===m[A]){var E=S[0]-g[0],D=S[1]-g[1],F=Math.sqrt(E*E+D*D);if(F===0){F=1;var Y=y>A?1:-1;E=.01*Y,D=.01*Y}if(F<w.nodeSizeFunc(L[y])/2+w.nodeSizeFunc(L[A])/2){var b=p*p/F;P[y].x+=E/F*b,P[y].y+=D/F*b}}})})},k.prototype.updatePositions=function(){var w=this,T=w.positions,L=w.disp,P=w.speed,p=w.strictRadial,m=w.focusID,S=w.maxDisplace||w.width/10;p&&L.forEach(function(g,A){var E=T[A][0]-T[m][0],D=T[A][1]-T[m][1],F=Math.sqrt(E*E+D*D),Y=D/F,b=-E/F,h=Math.sqrt(g.x*g.x+g.y*g.y),$=Math.acos((Y*g.x+b*g.y)/h);$>Math.PI/2&&($-=Math.PI/2,Y*=-1,b*=-1);var U=Math.cos($)*h;g.x=Y*U,g.y=b*U});var y=w.radii;T.forEach(function(g,A){if(A!==m){var E=Math.sqrt(L[A].x*L[A].x+L[A].y*L[A].y);if(E>0&&A!==m){var D=Math.min(S*(P/C),E);if(g[0]+=L[A].x/E*D,g[1]+=L[A].y/E*D,p){var F=g[0]-T[m][0],Y=g[1]-T[m][1],b=Math.sqrt(F*F+Y*Y);F=F/b*y[A],Y=Y/b*y[A],g[0]=T[m][0]+F,g[1]=T[m][1]+Y}}}})},k}();z.default=x},539711:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.RandomLayout=void 0;var k=C(762329),w=function(T){x(L,T);function L(P){var p=T.call(this)||this;return p.center=[0,0],p.width=300,p.height=300,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(P),p}return L.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},L.prototype.execute=function(){var P=this,p=P.nodes,m=.9,S=P.center;return!P.width&&typeof window!="undefined"&&(P.width=window.innerWidth),!P.height&&typeof window!="undefined"&&(P.height=window.innerHeight),p&&p.forEach(function(y){y.x=(Math.random()-.5)*m*P.width+S[0],y.y=(Math.random()-.5)*m*P.height+S[1]}),P.onLayoutEnd&&P.onLayoutEnd(),{nodes:p,edges:this.edges}},L.prototype.getType=function(){return"random"},L}(k.Base);z.RandomLayout=w},932867:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0})},695326:function(Ve,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var k=C(762329),w=C(449784),T=new Map,L=function(m,S){if(T.get(m)&&console.warn("The layout with the name ".concat(m," exists already, it will be overridden")),(0,w.isObject)(S)){var y=function(g){x(A,g);function A(E){var D=this,F;D=g.call(this)||this;var Y=D,b={},h=Object.assign({},Y.getDefaultCfg(),((F=S.getDefaultCfg)===null||F===void 0?void 0:F.call(S))||{});return Object.assign(b,h,S,E),Object.keys(b).forEach(function($){var U=b[$];Y[$]=U}),D}return A}(k.Base);T.set(m,y)}else T.set(m,S);return T.get(m)};z.registerLayout=L;var P=function(m){T.has(m)&&T.delete(m)};z.unRegisterLayout=P;var p=function(m){return T.has(m)?T.get(m):null};z.getLayoutByName=p},185087:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.isArray=void 0,z.isArray=Array.isArray},578732:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getFuncByUnknownType=z.getFunc=z.isFunction=void 0;var x=C(449784),k=C(330627),w=function(P){return typeof P=="function"};z.isFunction=w;var T=function(P,p,m){var S;return m?S=m:(0,k.isNumber)(P)?S=function(){return P}:S=function(){return p},S};z.getFunc=T;var L=function(P,p,m){return m===void 0&&(m=!0),!p&&p!==0?function(S){return S.size?(0,x.isArray)(S.size)?S.size[0]>S.size[1]?S.size[0]:S.size[1]:(0,x.isObject)(S.size)?S.size.width>S.size.height?S.size.width:S.size.height:S.size:P}:(0,z.isFunction)(p)?p:(0,k.isNumber)(p)?function(){return p}:(0,x.isArray)(p)?function(){if(m){var S=Math.max.apply(Math,p);return isNaN(S)?P:S}return p}:(0,x.isObject)(p)?function(){if(m){var S=Math.max(p.width,p.height);return isNaN(S)?P:S}return[p.width,p.height]}:function(){return P}};z.getFuncByUnknownType=L},248835:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.arrayToTextureData=z.attributesToTextureData=z.buildTextureDataWithTwoEdgeAttr=z.buildTextureData=z.proccessToFunc=void 0;var x=C(449784),k=C(280628),w=function(m,S){var y;return m?(0,x.isNumber)(m)?y=function(){return m}:y=m:y=function(){return S||1},y};z.proccessToFunc=w;var T=function(m,S){var y=[],g=[],A={},E=0;for(E=0;E<m.length;E++){var D=m[E];A[D.id]=E,y.push(D.x),y.push(D.y),y.push(0),y.push(0),g.push([])}for(E=0;E<S.length;E++){var F=S[E],Y=(0,k.getEdgeTerminal)(F,"source"),b=(0,k.getEdgeTerminal)(F,"target");!isNaN(A[Y])&&!isNaN(A[b])&&(g[A[Y]].push(A[b]),g[A[b]].push(A[Y]))}var h=0;for(E=0;E<m.length;E++){var $=y.length,U=g[E],W=U.length;y[E*4+2]=$,y[E*4+3]=W,h=Math.max(h,W);for(var V=0;V<W;++V){var H=U[V];y.push(+H)}}for(;y.length%4!==0;)y.push(0);return{maxEdgePerVetex:h,array:new Float32Array(y)}};z.buildTextureData=T;var L=function(m,S,y,g){var A=[],E=[],D={},F=0;for(F=0;F<m.length;F++){var Y=m[F];D[Y.id]=F,A.push(Y.x),A.push(Y.y),A.push(0),A.push(0),E.push([])}for(F=0;F<S.length;F++){var b=S[F],h=(0,k.getEdgeTerminal)(b,"source"),$=(0,k.getEdgeTerminal)(b,"target");E[D[h]].push(D[$]),E[D[h]].push(y(b)),E[D[h]].push(g(b)),E[D[h]].push(0),E[D[$]].push(D[h]),E[D[$]].push(y(b)),E[D[$]].push(g(b)),E[D[$]].push(0)}var U=0;for(F=0;F<m.length;F++){var W=A.length,V=E[F],H=V.length;A[F*4+2]=W+1048576*H/4,A[F*4+3]=0,U=Math.max(U,H/4);for(var q=0;q<H;++q){var tt=V[q];A.push(+tt)}}for(;A.length%4!==0;)A.push(0);return{maxEdgePerVetex:U,array:new Float32Array(A)}};z.buildTextureDataWithTwoEdgeAttr=L;var P=function(m,S){var y=[],g=m.length,A={};return S.forEach(function(E){m.forEach(function(D,F){if(A[E[D]]===void 0&&(A[E[D]]=Object.keys(A).length),y.push(A[E[D]]),F===g-1)for(;y.length%4!==0;)y.push(0)})}),{array:new Float32Array(y),count:Object.keys(A).length}};z.attributesToTextureData=P;var p=function(m){for(var S=[],y=m.length,g=m[0].length,A=function(D){m.forEach(function(F,Y){if(S.push(F[D]),Y===y-1)for(;S.length%4!==0;)S.push(0)})},E=0;E<g;E++)A(E);return new Float32Array(S)};z.arrayToTextureData=p},449784:function(Ve,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(708055),z),k(C(185087),z),k(C(330627),z),k(C(280628),z),k(C(898130),z),k(C(578732),z)},280628:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getCoreNodeAndRelativeLeafNodes=z.getAvgNodePosition=z.getLayoutBBox=z.traverseTreeUp=z.scaleMatrix=z.getAdjMatrix=z.floydWarshall=z.getDegreeMap=z.getDegree=z.getEdgeTerminal=void 0;var x=C(185087),k=C(330627),w=C(898130),T=function(h,$){var U=h[$];return(0,w.isObject)(U)?U.cell:U};z.getEdgeTerminal=T;var L=function(h,$,U){for(var W=[],V=0;V<h;V++)W[V]={in:0,out:0,all:0};return U&&U.forEach(function(H){var q=(0,z.getEdgeTerminal)(H,"source"),tt=(0,z.getEdgeTerminal)(H,"target");q&&W[$[q]]&&(W[$[q]].out+=1,W[$[q]].all+=1),tt&&W[$[tt]]&&(W[$[tt]].in+=1,W[$[tt]].all+=1)}),W};z.getDegree=L;var P=function(h,$){var U={};return h.forEach(function(W){U[W.id]={in:0,out:0,all:0}}),$&&$.forEach(function(W){var V=(0,z.getEdgeTerminal)(W,"source"),H=(0,z.getEdgeTerminal)(W,"target");V&&(U[V].out+=1,U[V].all+=1),H&&(U[H].in+=1,U[H].all+=1)}),U};z.getDegreeMap=P;var p=function(h){for(var $=[],U=h.length,W=0;W<U;W+=1){$[W]=[];for(var V=0;V<U;V+=1)W===V?$[W][V]=0:h[W][V]===0||!h[W][V]?$[W][V]=1/0:$[W][V]=h[W][V]}for(var H=0;H<U;H+=1)for(var W=0;W<U;W+=1)for(var V=0;V<U;V+=1)$[W][V]>$[W][H]+$[H][V]&&($[W][V]=$[W][H]+$[H][V]);return $};z.floydWarshall=p;var m=function(h,$){var U=h.nodes,W=h.edges,V=[],H={};if(!U)throw new Error("invalid nodes data!");return U&&U.forEach(function(q,tt){H[q.id]=tt;var rt=[];V.push(rt)}),W==null||W.forEach(function(q){var tt=(0,z.getEdgeTerminal)(q,"source"),rt=(0,z.getEdgeTerminal)(q,"target"),ft=H[tt],it=H[rt];ft===void 0||it===void 0||(V[ft][it]=1,$||(V[it][ft]=1))}),V};z.getAdjMatrix=m;var S=function(h,$){var U=[];return h.forEach(function(W){var V=[];W.forEach(function(H){V.push(H*$)}),U.push(V)}),U};z.scaleMatrix=S;var y=function(h,$){if(h&&h.children){for(var U=h.children.length-1;U>=0;U--)if(!y(h.children[U],$))return}return!!$(h)},g=function(h,$){typeof $=="function"&&y(h,$)};z.traverseTreeUp=g;var A=function(h){var $=1/0,U=1/0,W=-1/0,V=-1/0;return h.forEach(function(H){var q=H.size;(0,x.isArray)(q)?q.length===1&&(q=[q[0],q[0]]):(0,k.isNumber)(q)?q=[q,q]:(q===void 0||isNaN(q))&&(q=[30,30]);var tt=[q[0]/2,q[1]/2],rt=H.x-tt[0],ft=H.x+tt[0],it=H.y-tt[1],bt=H.y+tt[1];$>rt&&($=rt),U>it&&(U=it),W<ft&&(W=ft),V<bt&&(V=bt)}),{minX:$,minY:U,maxX:W,maxY:V}};z.getLayoutBBox=A;var E=function(h){var $={x:0,y:0};h.forEach(function(W){$.x+=W.x||0,$.y+=W.y||0});var U=h.length||1;return{x:$.x/U,y:$.y/U}};z.getAvgNodePosition=E;var D=function(h,$,U){var W,V;return h==="source"?((W=U==null?void 0:U.find(function(H){return H.target===$.id}))===null||W===void 0?void 0:W.source)||{}:((V=U==null?void 0:U.find(function(H){return H.source===$.id}))===null||V===void 0?void 0:V.target)||{}},F=function(h,$,U){var W=[];switch(h){case"source":W=U==null?void 0:U.filter(function(H){return H.source===$.id}).map(function(H){return H.target});break;case"target":W=U==null?void 0:U.filter(function(H){return H.target===$.id}).map(function(H){return H.source});break;case"both":W=U==null?void 0:U.filter(function(H){return H.source===$.id}).map(function(H){return H.target}).concat(U==null?void 0:U.filter(function(H){return H.target===$.id}).map(function(H){return H.source}));break;default:break}var V=new Set(W);return Array.from(V)},Y=function(h,$,U,W,V){var H=U[$]||"",q=(W==null?void 0:W.filter(function(tt){return tt[$]===H}))||[];return h==="leaf"&&(q=q.filter(function(tt){var rt,ft;return((rt=V[tt.id])===null||rt===void 0?void 0:rt.in)===0||((ft=V[tt.id])===null||ft===void 0?void 0:ft.out)===0})),q},b=function(h,$,U,W,V,H){var q=V[$.id],tt=q.in,rt=q.out,ft=$,it=[];tt===0?(ft=D("source",$,U),it=F("both",ft,U).map(function(gt){return H[gt]})):rt===0&&(ft=D("target",$,U),it=F("both",ft,U).map(function(gt){return H[gt]})),it=it.filter(function(gt){return V[gt.id]&&(V[gt.id].in===0||V[gt.id].out===0)});var bt=Y(h,W,$,it,V);return{coreNode:ft,relativeLeafNodes:it,sameTypeLeafNodes:bt}};z.getCoreNodeAndRelativeLeafNodes=b},330627:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.toNumber=z.isNaN=z.isNumber=void 0;var C=function(w){return typeof w=="number"};z.isNumber=C;var x=function(w){return Number.isNaN(Number(w))};z.isNaN=x;var k=function(w){var T=parseFloat(w);return(0,z.isNaN)(T)?w:T};z.toNumber=k},898130:function(Ve,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++){T=arguments[L];for(var p in T)Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p])}return w},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.clone=z.isObject=void 0;var x=function(w){return w!==null&&typeof w=="object"};z.isObject=x;var k=function(w){if(w===null)return w;if(w instanceof Date)return new Date(w.getTime());if(w instanceof Array){var T=[];return w.forEach(function(P){T.push(P)}),T.map(function(P){return(0,z.clone)(P)})}if(typeof w=="object"&&Object.keys(w).length){var L=C({},w);return Object.keys(L).forEach(function(P){L[P]=(0,z.clone)(L[P])}),L}return w};z.clone=k},708055:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.camelize=z.isString=void 0;var C=function(w){return typeof w=="string"};z.isString=C;var x=function(w){var T=Object.create(null);return function(L){var P=T[L];return P||(T[L]=w(L))}},k=/-(\w)/g;z.camelize=x(function(w){return w.replace(k,function(T,L){return L?L.toUpperCase():""})})},233446:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return ea},angleTo:function(){return q},arcToCubic:function(){return xe},assign:function(){return ur},augment:function(){return Xr},clamp:function(){return $a},clearAnimationFrame:function(){return ze},clone:function(){return Tn},clonePath:function(){return rt},contains:function(){return kt},debounce:function(){return Qr},deepMix:function(){return _a},difference:function(){return Q},direction:function(){return H},distanceSquareRoot:function(){return Tt},each:function(){return Le},endsWith:function(){return ao},equalizeSegments:function(){return Ht},every:function(){return Yt},extend:function(){return Oo},filter:function(){return dt},find:function(){return Dr},findIndex:function(){return jt},firstValue:function(){return Oe},fixedBase:function(){return Ui},flatten:function(){return Fe},flattenDeep:function(){return gr},forIn:function(){return hs},get:function(){return Nf},getDrawDirection:function(){return sn},getPathArea:function(){return hn},getPathBBox:function(){return qr},getPathBBoxTotalLength:function(){return xn},getPointAtLength:function(){return Wn},getRange:function(){return qn},getRotatedCurve:function(){return Mr},getTotalLength:function(){return gn},getType:function(){return vs},getWrapBehavior:function(){return Pn},gradient:function(){return y},group:function(){return en},groupBy:function(){return Nr},groupToMap:function(){return Sr},has:function(){return Os},hasKey:function(){return Ho},hasValue:function(){return ir},head:function(){return ro},identity:function(){return qc},includes:function(){return kt},indexOf:function(){return go},isArguments:function(){return Qs},isArray:function(){return Ft},isArrayLike:function(){return wt},isBoolean:function(){return Vs},isDate:function(){return Us},isDecimal:function(){return za},isElement:function(){return ge},isEmpty:function(){return No},isEqual:function(){return ci},isEqualWith:function(){return Bi},isError:function(){return ns},isEven:function(){return mi},isFinite:function(){return _u},isFunction:function(){return ot},isInteger:function(){return po},isMatch:function(){return Ze},isNegative:function(){return Ao},isNil:function(){return M},isNull:function(){return Uo},isNumber:function(){return La},isNumberEqual:function(){return os},isObject:function(){return Bt},isObjectLike:function(){return un},isOdd:function(){return qa},isPlainObject:function(){return lr},isPointInPolygon:function(){return Xu},isPointInStroke:function(){return jn},isPolygonsIntersect:function(){return Ws},isPositive:function(){return io},isPrototype:function(){return d},isRegExp:function(){return Et},isString:function(){return ga},isType:function(){return mt},isUndefined:function(){return re},keys:function(){return Xe},last:function(){return no},lowerCase:function(){return Ln},lowerFirst:function(){return Sa},map:function(){return Zs},mapValues:function(){return Tu},max:function(){return Jr},maxBy:function(){return Qa},memoize:function(){return ra},min:function(){return Gn},minBy:function(){return Pi},mix:function(){return ur},mod:function(){return qi},noop:function(){return mc},normalizePath:function(){return Wt},number2color:function(){return di},omit:function(){return Rf},parseRadius:function(){return oa},path2Absolute:function(){return ne},path2Curve:function(){return Or},path2String:function(){return it},pick:function(){return pc},pull:function(){return Ea},pullAt:function(){return ei},reduce:function(){return Gi},remove:function(){return eo},requestAnimationFrame:function(){return De},reverseCurve:function(){return Br},rgb2arr:function(){return x},set:function(){return hc},size:function(){return hu},some:function(){return Ge},sortBy:function(){return To},startsWith:function(){return vo},substitute:function(){return Io},throttle:function(){return kf},toArray:function(){return gc},toCSSGradient:function(){return F},toDegree:function(){return yo},toInteger:function(){return Es},toRGB:function(){return p},toRadian:function(){return ls},toString:function(){return dr},transform:function(){return V},union:function(){return ho},uniq:function(){return ni},uniqueId:function(){return lf},upperCase:function(){return zs},upperFirst:function(){return ji},values:function(){return ye},valuesOfKey:function(){return Po},vertical:function(){return tt},wrapBehavior:function(){return Zn}});function x(lt){return[parseInt(lt.substr(1,2),16),parseInt(lt.substr(3,2),16),parseInt(lt.substr(5,2),16)]}function k(lt){var Nt=Math.round(lt).toString(16);return Nt.length===1?"0"+Nt:Nt}function w(lt){return"#"+k(lt[0])+k(lt[1])+k(lt[2])}var T=/rgba?\(([\s.,0-9]+)\)/;function L(){var lt=document.createElement("i");return lt.title="Web Colour Picker",lt.style.display="none",document.body.appendChild(lt),lt}var P;function p(lt){if(lt[0]==="#"&&lt.length===7)return lt;P||(P=L()),P.style.color=lt;var Nt=document.defaultView.getComputedStyle(P,"").getPropertyValue("color"),Vt=T.exec(Nt),le=Vt[1].split(/\s*,\s*/).map(function(Ie){return Number(Ie)});return Nt=w(le),Nt}function m(lt,Nt,Vt,le){return lt[le]+(Nt[le]-lt[le])*Vt}function S(lt,Nt){var Vt=isNaN(Number(Nt))||Nt<0?0:Nt>1?1:Number(Nt),le=lt.length-1,Ie=Math.floor(le*Vt),nr=le*Vt-Ie,fr=lt[Ie],Gr=Ie===le?fr:lt[Ie+1];return w([m(fr,Gr,nr,0),m(fr,Gr,nr,1),m(fr,Gr,nr,2)])}function y(lt){var Nt=typeof lt=="string"?lt.split("-"):lt,Vt=Nt.map(function(le){return x(le.indexOf("#")===-1?p(le):le)});return function(le){return S(Vt,le)}}var g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,A=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function D(lt){return/^[r,R,L,l]{1}[\s]*\(/.test(lt)}function F(lt){if(D(lt)){var Nt,Vt=void 0;if(lt[0]==="l"){var le=g.exec(lt),Ie=+le[1]+90;Vt=le[2],Nt="linear-gradient("+Ie+"deg, "}else if(lt[0]==="r"){Nt="radial-gradient(";var le=A.exec(lt);Vt=le[4]}var nr=Vt.match(E);return nr.forEach(function(fr,Gr){var vn=fr.split(":");Nt+=vn[1]+" "+Number(vn[0])*100+"%",Gr!==nr.length-1&&(Nt+=", ")}),Nt+=")",Nt}return lt}var Y=C(935600),b=C(631437);function h(lt,Nt,Vt){var le=[0,0,0,0,0,0,0,0,0];return Y.fromTranslation(le,Vt),Y.multiply(lt,le,Nt)}function $(lt,Nt,Vt){var le=[0,0,0,0,0,0,0,0,0];return Y.fromRotation(le,Vt),Y.multiply(lt,le,Nt)}function U(lt,Nt,Vt){var le=[0,0,0,0,0,0,0,0,0];return Y.fromScaling(le,Vt),Y.multiply(lt,le,Nt)}function W(lt,Nt,Vt){return Y.multiply(lt,Vt,Nt)}function V(lt,Nt){for(var Vt=lt?[].concat(lt):[1,0,0,0,1,0,0,0,1],le=0,Ie=Nt.length;le<Ie;le++){var nr=Nt[le];switch(nr[0]){case"t":h(Vt,Vt,[nr[1],nr[2]]);break;case"s":U(Vt,Vt,[nr[1],nr[2]]);break;case"r":$(Vt,Vt,nr[1]);break;case"m":W(Vt,Vt,nr[1]);break;default:break}}return Vt}function H(lt,Nt){return lt[0]*Nt[1]-Nt[0]*lt[1]}function q(lt,Nt,Vt){var le=b.angle(lt,Nt),Ie=H(lt,Nt)>=0;return Vt?Ie?Math.PI*2-le:le:Ie?le:Math.PI*2-le}function tt(lt,Nt,Vt){return Vt?(lt[0]=Nt[1],lt[1]=-1*Nt[0]):(lt[0]=-1*Nt[1],lt[1]=Nt[0]),lt}function rt(lt){return lt.map(function(Nt){return Array.isArray(Nt)?[].concat(Nt):Nt})}function ft(lt,Nt){if(Nt==="off")return rt(lt);var Vt=typeof Nt=="number"&&Nt>=1?Math.pow(10,Nt):1;return lt.map(function(le){var Ie=le.slice(1).map(Number).map(function(nr){return Nt?Math.round(nr*Vt)/Vt:Math.round(nr)});return[le[0]].concat(Ie)})}function it(lt,Nt){return Nt===void 0&&(Nt="off"),ft(lt,Nt).map(function(Vt){return Vt[0]+Vt.slice(1).join(" ")}).join("")}var bt=C(197582),gt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Xt(lt,Nt,Vt){if(lt[Vt].length>7){lt[Vt].shift();for(var le=lt[Vt],Ie=Vt;le.length;)Nt[Vt]="A",lt.splice(Ie+=1,0,["C"].concat(le.splice(0,6)));lt.splice(Vt,1)}}var Ct={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function At(lt){return Array.isArray(lt)&&lt.every(function(Nt){var Vt=Nt[0].toLowerCase();return Ct[Vt]===Nt.length-1&&"achlmqstvz".includes(Vt)})}function Z(lt){return At(lt)&&lt.every(function(Nt){var Vt=Nt[0];return Vt===Vt.toUpperCase()})}function J(lt){return Z(lt)&&lt.every(function(Nt){var Vt=Nt[0];return"ACLMQZ".includes(Vt)})}function yt(lt){for(var Nt=lt.pathValue[lt.segmentStart],Vt=Nt.toLowerCase(),le=lt.data;le.length>=Ct[Vt]&&(Vt==="m"&&le.length>2?(lt.segments.push([Nt].concat(le.splice(0,2))),Vt="l",Nt=Nt==="m"?"l":"L"):lt.segments.push([Nt].concat(le.splice(0,Ct[Vt]))),!!Ct[Vt]););}function _t(lt){var Nt=lt.index,Vt=lt.pathValue,le=Vt.charCodeAt(Nt);if(le===48){lt.param=0,lt.index+=1;return}if(le===49){lt.param=1,lt.index+=1;return}lt.err='[path-util]: invalid Arc flag "'+Vt[Nt]+'", expecting 0 or 1 at index '+Nt}function nt(lt){return lt>=48&&lt<=57||lt===43||lt===45||lt===46}function vt(lt){return lt>=48&&lt<=57}function It(lt){var Nt=lt.max,Vt=lt.pathValue,le=lt.index,Ie=le,nr=!1,fr=!1,Gr=!1,vn=!1,mn;if(Ie>=Nt){lt.err="[path-util]: Invalid path value at index "+Ie+', "pathValue" is missing param';return}if(mn=Vt.charCodeAt(Ie),(mn===43||mn===45)&&(Ie+=1,mn=Vt.charCodeAt(Ie)),!vt(mn)&&mn!==46){lt.err="[path-util]: Invalid path value at index "+Ie+', "'+Vt[Ie]+'" is not a number';return}if(mn!==46){if(nr=mn===48,Ie+=1,mn=Vt.charCodeAt(Ie),nr&&Ie<Nt&&mn&&vt(mn)){lt.err="[path-util]: Invalid path value at index "+le+', "'+Vt[le]+'" illegal number';return}for(;Ie<Nt&&vt(Vt.charCodeAt(Ie));)Ie+=1,fr=!0;mn=Vt.charCodeAt(Ie)}if(mn===46){for(vn=!0,Ie+=1;vt(Vt.charCodeAt(Ie));)Ie+=1,Gr=!0;mn=Vt.charCodeAt(Ie)}if(mn===101||mn===69){if(vn&&!fr&&!Gr){lt.err="[path-util]: Invalid path value at index "+Ie+', "'+Vt[Ie]+'" invalid float exponent';return}if(Ie+=1,mn=Vt.charCodeAt(Ie),(mn===43||mn===45)&&(Ie+=1),Ie<Nt&&vt(Vt.charCodeAt(Ie)))for(;Ie<Nt&&vt(Vt.charCodeAt(Ie));)Ie+=1;else{lt.err="[path-util]: Invalid path value at index "+Ie+', "'+Vt[Ie]+'" invalid integer exponent';return}}lt.index=Ie,lt.param=+lt.pathValue.slice(le,Ie)}function Pt(lt){var Nt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return lt===10||lt===13||lt===8232||lt===8233||lt===32||lt===9||lt===11||lt===12||lt===160||lt>=5760&&Nt.includes(lt)}function St(lt){for(var Nt=lt.pathValue,Vt=lt.max;lt.index<Vt&&Pt(Nt.charCodeAt(lt.index));)lt.index+=1}function Dt(lt){switch(lt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Qt(lt){return(lt|32)===97}function ue(lt){var Nt=lt.max,Vt=lt.pathValue,le=lt.index,Ie=Vt.charCodeAt(le),nr=Ct[Vt[le].toLowerCase()];if(lt.segmentStart=le,!Dt(Ie)){lt.err='[path-util]: Invalid path value "'+Vt[le]+'" is not a path command';return}if(lt.index+=1,St(lt),lt.data=[],!nr){yt(lt);return}for(;;){for(var fr=nr;fr>0;fr-=1){if(Qt(Ie)&&(fr===3||fr===4)?_t(lt):It(lt),lt.err.length)return;lt.data.push(lt.param),St(lt),lt.index<Nt&&Vt.charCodeAt(lt.index)===44&&(lt.index+=1,St(lt))}if(lt.index>=lt.max||!nt(Vt.charCodeAt(lt.index)))break}yt(lt)}var ie=function(){function lt(Nt){this.pathValue=Nt,this.segments=[],this.max=Nt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return lt}();function Lt(lt){if(At(lt))return rt(lt);var Nt=new ie(lt);for(St(Nt);Nt.index<Nt.max&&!Nt.err.length;)ue(Nt);return Nt.err?Nt.err:Nt.segments}function ne(lt){if(Z(lt))return rt(lt);var Nt=Lt(lt),Vt=0,le=0,Ie=0,nr=0;return Nt.map(function(fr){var Gr=fr.slice(1).map(Number),vn=fr[0],mn=vn.toUpperCase();if(vn==="M")return Vt=Gr[0],le=Gr[1],Ie=Vt,nr=le,["M",Vt,le];var Hn;if(vn!==mn)switch(mn){case"A":Hn=[mn,Gr[0],Gr[1],Gr[2],Gr[3],Gr[4],Gr[5]+Vt,Gr[6]+le];break;case"V":Hn=[mn,Gr[0]+le];break;case"H":Hn=[mn,Gr[0]+Vt];break;default:{var aa=Gr.map(function(Oa,Ja){return Oa+(Ja%2?le:Vt)});Hn=[mn].concat(aa)}}else Hn=[mn].concat(Gr);var Kn=Hn.length;switch(mn){case"Z":Vt=Ie,le=nr;break;case"H":Vt=Hn[1];break;case"V":le=Hn[1];break;default:Vt=Hn[Kn-2],le=Hn[Kn-1],mn==="M"&&(Ie=Vt,nr=le)}return Hn})}function ve(lt,Nt){var Vt=lt[0],le=Nt.x1,Ie=Nt.y1,nr=Nt.x2,fr=Nt.y2,Gr=lt.slice(1).map(Number),vn=lt;if("TQ".includes(Vt)||(Nt.qx=null,Nt.qy=null),Vt==="H")vn=["L",lt[1],Ie];else if(Vt==="V")vn=["L",le,lt[1]];else if(Vt==="S"){var mn=le*2-nr,Hn=Ie*2-fr;Nt.x1=mn,Nt.y1=Hn,vn=["C",mn,Hn].concat(Gr)}else if(Vt==="T"){var aa=le*2-Nt.qx,Kn=Ie*2-Nt.qy;Nt.qx=aa,Nt.qy=Kn,vn=["Q",aa,Kn].concat(Gr)}else if(Vt==="Q"){var Oa=Gr[0],Ja=Gr[1];Nt.qx=Oa,Nt.qy=Ja}return vn}function Wt(lt){if(J(lt))return rt(lt);for(var Nt=ne(lt),Vt=(0,bt.__assign)({},gt),le=0;le<Nt.length;le+=1){Nt[le]=ve(Nt[le],Vt);var Ie=Nt[le],nr=Ie.length;Vt.x1=+Ie[nr-2],Vt.y1=+Ie[nr-1],Vt.x2=+Ie[nr-4]||Vt.x1,Vt.y2=+Ie[nr-3]||Vt.y1}return Nt}function ae(lt){return J(lt)&&lt.every(function(Nt){var Vt=Nt[0];return"MC".includes(Vt)})}function Ce(lt,Nt,Vt){var le=lt*Math.cos(Vt)-Nt*Math.sin(Vt),Ie=lt*Math.sin(Vt)+Nt*Math.cos(Vt);return{x:le,y:Ie}}function xe(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn,mn){var Hn=lt,aa=Nt,Kn=Vt,Oa=le,Ja=Gr,Na=vn,Ta=Math.PI*120/180,ka=Math.PI/180*(+Ie||0),ha=[],Ya,Ga,ma,ri,xi;if(mn)Ga=mn[0],ma=mn[1],ri=mn[2],xi=mn[3];else{Ya=Ce(Hn,aa,-ka),Hn=Ya.x,aa=Ya.y,Ya=Ce(Ja,Na,-ka),Ja=Ya.x,Na=Ya.y;var Vi=(Hn-Ja)/2,Ai=(aa-Na)/2,hi=Vi*Vi/(Kn*Kn)+Ai*Ai/(Oa*Oa);hi>1&&(hi=Math.sqrt(hi),Kn*=hi,Oa*=hi);var to=Kn*Kn,ko=Oa*Oa,so=(nr===fr?-1:1)*Math.sqrt(Math.abs((to*ko-to*Ai*Ai-ko*Vi*Vi)/(to*Ai*Ai+ko*Vi*Vi)));ri=so*Kn*Ai/Oa+(Hn+Ja)/2,xi=so*-Oa*Vi/Kn+(aa+Na)/2,Ga=Math.asin(((aa-xi)/Oa*Math.pow(10,9)>>0)/Math.pow(10,9)),ma=Math.asin(((Na-xi)/Oa*Math.pow(10,9)>>0)/Math.pow(10,9)),Ga=Hn<ri?Math.PI-Ga:Ga,ma=Ja<ri?Math.PI-ma:ma,Ga<0&&(Ga=Math.PI*2+Ga),ma<0&&(ma=Math.PI*2+ma),fr&&Ga>ma&&(Ga-=Math.PI*2),!fr&&ma>Ga&&(ma-=Math.PI*2)}var ks=ma-Ga;if(Math.abs(ks)>Ta){var Ou=ma,Ls=Ja,uu=Na;ma=Ga+Ta*(fr&&ma>Ga?1:-1),Ja=ri+Kn*Math.cos(ma),Na=xi+Oa*Math.sin(ma),ha=xe(Ja,Na,Kn,Oa,Ie,0,fr,Ls,uu,[ma,Ou,ri,xi])}ks=ma-Ga;var Ss=Math.cos(Ga),tu=Math.sin(Ga),Ff=Math.cos(ma),Qc=Math.sin(ma),ju=Math.tan(ks/4),vf=4/3*Kn*ju,Ec=4/3*Oa*ju,Vu=[Hn,aa],vu=[Hn+vf*tu,aa-Ec*Ss],zf=[Ja+vf*Qc,Na-Ec*Ff],Gf=[Ja,Na];if(vu[0]=2*Vu[0]-vu[0],vu[1]=2*Vu[1]-vu[1],mn)return vu.concat(zf,Gf,ha);ha=vu.concat(zf,Gf,ha);for(var wc=[],eu=0,ru=ha.length;eu<ru;eu+=1)wc[eu]=eu%2?Ce(ha[eu-1],ha[eu],ka).y:Ce(ha[eu],ha[eu+1],ka).x;return wc}function Jt(lt,Nt,Vt,le,Ie,nr){var fr=.3333333333333333,Gr=2/3;return[fr*lt+Gr*Vt,fr*Nt+Gr*le,fr*Ie+Gr*Vt,fr*nr+Gr*le,Ie,nr]}function we(lt,Nt,Vt){var le=lt[0],Ie=lt[1],nr=Nt[0],fr=Nt[1];return[le+(nr-le)*Vt,Ie+(fr-Ie)*Vt]}function Tt(lt,Nt){return Math.sqrt((lt[0]-Nt[0])*(lt[0]-Nt[0])+(lt[1]-Nt[1])*(lt[1]-Nt[1]))}function Pe(lt,Nt,Vt,le,Ie){var nr=Tt([lt,Nt],[Vt,le]),fr={x:0,y:0};if(typeof Ie=="number")if(Ie<=0)fr={x:lt,y:Nt};else if(Ie>=nr)fr={x:Vt,y:le};else{var Gr=we([lt,Nt],[Vt,le],Ie/nr),vn=Gr[0],mn=Gr[1];fr={x:vn,y:mn}}return{length:nr,point:fr,min:{x:Math.min(lt,Vt),y:Math.min(Nt,le)},max:{x:Math.max(lt,Vt),y:Math.max(Nt,le)}}}function _r(lt,Nt,Vt,le){var Ie=.5,nr=[lt,Nt],fr=[Vt,le],Gr=we(nr,fr,Ie),vn=we(fr,Gr,Ie),mn=we(Gr,vn,Ie),Hn=we(vn,mn,Ie),aa=we(mn,Hn,Ie),Kn=Pe(nr[0],nr[1],Gr[0],Gr[1],mn[0]).point,Oa=Pe(aa[0],aa[1],Hn[0],Hn[1],vn[0]).point;return[Kn.x,Kn.y,Oa.x,Oa.y,Vt,le]}function Ar(lt,Nt){var Vt=lt[0],le=lt.slice(1).map(Number),Ie=le[0],nr=le[1],fr,Gr=Nt.x1,vn=Nt.y1,mn=Nt.x,Hn=Nt.y;switch("TQ".includes(Vt)||(Nt.qx=null,Nt.qy=null),Vt){case"M":return Nt.x=Ie,Nt.y=nr,lt;case"A":return fr=[Gr,vn].concat(le),["C"].concat(xe(fr[0],fr[1],fr[2],fr[3],fr[4],fr[5],fr[6],fr[7],fr[8],fr[9]));case"Q":return Nt.qx=Ie,Nt.qy=nr,fr=[Gr,vn].concat(le),["C"].concat(Jt(fr[0],fr[1],fr[2],fr[3],fr[4],fr[5]));case"L":return["C"].concat(_r(Gr,vn,Ie,nr));case"Z":return Gr===mn&&vn===Hn?["C",Gr,vn,mn,Hn,mn,Hn]:["C"].concat(_r(Gr,vn,mn,Hn));default:}return lt}function Or(lt,Nt){if(Nt===void 0&&(Nt=!1),ae(lt)){var Vt=rt(lt);return Nt?[Vt,[]]:Vt}for(var le=Wt(lt),Ie=(0,bt.__assign)({},gt),nr=[],fr="",Gr=le.length,vn,mn,Hn=[],aa=0;aa<Gr;aa+=1){le[aa]&&(fr=le[aa][0]),nr[aa]=fr;var Kn=Ar(le[aa],Ie);le[aa]=Kn,Xt(le,nr,aa),Gr=le.length,fr==="Z"&&Hn.push(aa),vn=le[aa],mn=vn.length,Ie.x1=+vn[mn-2],Ie.y1=+vn[mn-1],Ie.x2=+vn[mn-4]||Ie.x1,Ie.y2=+vn[mn-3]||Ie.y1}return Nt?[le,Hn]:le}function Br(lt){var Nt=lt.slice(1).map(function(Vt,le,Ie){return le?Ie[le-1].slice(-2).concat(Vt.slice(1)):lt[0].slice(1).concat(Vt.slice(1))}).map(function(Vt){return Vt.map(function(le,Ie){return Vt[Vt.length-Ie-2*(1-Ie%2)]})}).reverse();return[["M"].concat(Nt[0].slice(0,2))].concat(Nt.map(function(Vt){return["C"].concat(Vt.slice(2))}))}function cn(lt,Nt){var Vt=lt.x,le=lt.y,Ie=Nt.x,nr=Nt.y,fr=Vt*Ie+le*nr,Gr=Math.sqrt((Math.pow(Vt,2)+Math.pow(le,2))*(Math.pow(Ie,2)+Math.pow(nr,2))),vn=Vt*nr-le*Ie<0?-1:1,mn=vn*Math.acos(fr/Gr);return mn}function an(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn,mn){var Hn=Math.abs,aa=Math.sin,Kn=Math.cos,Oa=Math.sqrt,Ja=Math.PI,Na=Hn(Vt),Ta=Hn(le),ka=(Ie%360+360)%360,ha=ka*(Ja/180);if(lt===Gr&&Nt===vn)return{x:lt,y:Nt};if(Na===0||Ta===0)return Pe(lt,Nt,Gr,vn,mn).point;var Ya=(lt-Gr)/2,Ga=(Nt-vn)/2,ma={x:Kn(ha)*Ya+aa(ha)*Ga,y:-aa(ha)*Ya+Kn(ha)*Ga},ri=Math.pow(ma.x,2)/Math.pow(Na,2)+Math.pow(ma.y,2)/Math.pow(Ta,2);ri>1&&(Na*=Oa(ri),Ta*=Oa(ri));var xi=Math.pow(Na,2)*Math.pow(Ta,2)-Math.pow(Na,2)*Math.pow(ma.y,2)-Math.pow(Ta,2)*Math.pow(ma.x,2),Vi=Math.pow(Na,2)*Math.pow(ma.y,2)+Math.pow(Ta,2)*Math.pow(ma.x,2),Ai=xi/Vi;Ai=Ai<0?0:Ai;var hi=(nr!==fr?1:-1)*Oa(Ai),to={x:hi*(Na*ma.y/Ta),y:hi*(-(Ta*ma.x)/Na)},ko={x:Kn(ha)*to.x-aa(ha)*to.y+(lt+Gr)/2,y:aa(ha)*to.x+Kn(ha)*to.y+(Nt+vn)/2},so={x:(ma.x-to.x)/Na,y:(ma.y-to.y)/Ta},ks=cn({x:1,y:0},so),Ou={x:(-ma.x-to.x)/Na,y:(-ma.y-to.y)/Ta},Ls=cn(so,Ou);!fr&&Ls>0?Ls-=2*Ja:fr&&Ls<0&&(Ls+=2*Ja),Ls%=2*Ja;var uu=ks+Ls*mn,Ss=Na*Kn(uu),tu=Ta*aa(uu),Ff={x:Kn(ha)*Ss-aa(ha)*tu+ko.x,y:aa(ha)*Ss+Kn(ha)*tu+ko.y};return Ff}function Dn(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn,mn,Hn){var aa,Kn=Hn.bbox,Oa=Kn===void 0?!0:Kn,Ja=Hn.length,Na=Ja===void 0?!0:Ja,Ta=Hn.sampleSize,ka=Ta===void 0?30:Ta,ha=typeof mn=="number",Ya=lt,Ga=Nt,ma=0,ri=[Ya,Ga,ma],xi=[Ya,Ga],Vi=0,Ai={x:0,y:0},hi=[{x:Ya,y:Ga}];ha&&mn<=0&&(Ai={x:Ya,y:Ga});for(var to=0;to<=ka;to+=1){if(Vi=to/ka,aa=an(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn,Vi),Ya=aa.x,Ga=aa.y,Oa&&hi.push({x:Ya,y:Ga}),Na&&(ma+=Tt(xi,[Ya,Ga])),xi=[Ya,Ga],ha&&ma>=mn&&mn>ri[2]){var ko=(ma-mn)/(ma-ri[2]);Ai={x:xi[0]*(1-ko)+ri[0]*ko,y:xi[1]*(1-ko)+ri[1]*ko}}ri=[Ya,Ga,ma]}return ha&&mn>=ma&&(Ai={x:Gr,y:vn}),{length:ma,point:Ai,min:{x:Math.min.apply(null,hi.map(function(so){return so.x})),y:Math.min.apply(null,hi.map(function(so){return so.y}))},max:{x:Math.max.apply(null,hi.map(function(so){return so.x})),y:Math.max.apply(null,hi.map(function(so){return so.y}))}}}function Un(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn){var mn=1-vn;return{x:Math.pow(mn,3)*lt+3*Math.pow(mn,2)*vn*Vt+3*mn*Math.pow(vn,2)*Ie+Math.pow(vn,3)*fr,y:Math.pow(mn,3)*Nt+3*Math.pow(mn,2)*vn*le+3*mn*Math.pow(vn,2)*nr+Math.pow(vn,3)*Gr}}function Xn(lt,Nt,Vt,le,Ie,nr,fr,Gr,vn,mn){var Hn,aa=mn.bbox,Kn=aa===void 0?!0:aa,Oa=mn.length,Ja=Oa===void 0?!0:Oa,Na=mn.sampleSize,Ta=Na===void 0?10:Na,ka=typeof vn=="number",ha=lt,Ya=Nt,Ga=0,ma=[ha,Ya,Ga],ri=[ha,Ya],xi=0,Vi={x:0,y:0},Ai=[{x:ha,y:Ya}];ka&&vn<=0&&(Vi={x:ha,y:Ya});for(var hi=0;hi<=Ta;hi+=1){if(xi=hi/Ta,Hn=Un(lt,Nt,Vt,le,Ie,nr,fr,Gr,xi),ha=Hn.x,Ya=Hn.y,Kn&&Ai.push({x:ha,y:Ya}),Ja&&(Ga+=Tt(ri,[ha,Ya])),ri=[ha,Ya],ka&&Ga>=vn&&vn>ma[2]){var to=(Ga-vn)/(Ga-ma[2]);Vi={x:ri[0]*(1-to)+ma[0]*to,y:ri[1]*(1-to)+ma[1]*to}}ma=[ha,Ya,Ga]}return ka&&vn>=Ga&&(Vi={x:fr,y:Gr}),{length:Ga,point:Vi,min:{x:Math.min.apply(null,Ai.map(function(ko){return ko.x})),y:Math.min.apply(null,Ai.map(function(ko){return ko.y}))},max:{x:Math.max.apply(null,Ai.map(function(ko){return ko.x})),y:Math.max.apply(null,Ai.map(function(ko){return ko.y}))}}}function xr(lt,Nt,Vt,le,Ie,nr,fr){var Gr=1-fr;return{x:Math.pow(Gr,2)*lt+2*Gr*fr*Vt+Math.pow(fr,2)*Ie,y:Math.pow(Gr,2)*Nt+2*Gr*fr*le+Math.pow(fr,2)*nr}}function $e(lt,Nt,Vt,le,Ie,nr,fr,Gr){var vn,mn=Gr.bbox,Hn=mn===void 0?!0:mn,aa=Gr.length,Kn=aa===void 0?!0:aa,Oa=Gr.sampleSize,Ja=Oa===void 0?10:Oa,Na=typeof fr=="number",Ta=lt,ka=Nt,ha=0,Ya=[Ta,ka,ha],Ga=[Ta,ka],ma=0,ri={x:0,y:0},xi=[{x:Ta,y:ka}];Na&&fr<=0&&(ri={x:Ta,y:ka});for(var Vi=0;Vi<=Ja;Vi+=1){if(ma=Vi/Ja,vn=xr(lt,Nt,Vt,le,Ie,nr,ma),Ta=vn.x,ka=vn.y,Hn&&xi.push({x:Ta,y:ka}),Kn&&(ha+=Tt(Ga,[Ta,ka])),Ga=[Ta,ka],Na&&ha>=fr&&fr>Ya[2]){var Ai=(ha-fr)/(ha-Ya[2]);ri={x:Ga[0]*(1-Ai)+Ya[0]*Ai,y:Ga[1]*(1-Ai)+Ya[1]*Ai}}Ya=[Ta,ka,ha]}return Na&&fr>=ha&&(ri={x:Ie,y:nr}),{length:ha,point:ri,min:{x:Math.min.apply(null,xi.map(function(hi){return hi.x})),y:Math.min.apply(null,xi.map(function(hi){return hi.y}))},max:{x:Math.max.apply(null,xi.map(function(hi){return hi.x})),y:Math.max.apply(null,xi.map(function(hi){return hi.y}))}}}function Tr(lt,Nt,Vt){for(var le,Ie,nr,fr,Gr,vn,mn=Wt(lt),Hn=typeof Nt=="number",aa,Kn=[],Oa,Ja=0,Na=0,Ta=0,ka=0,ha,Ya=[],Ga=[],ma=0,ri={x:0,y:0},xi=ri,Vi=ri,Ai=ri,hi=0,to=0,ko=mn.length;to<ko;to+=1)ha=mn[to],Oa=ha[0],aa=Oa==="M",Kn=aa?Kn:[Ja,Na].concat(ha.slice(1)),aa?(Ta=ha[1],ka=ha[2],ri={x:Ta,y:ka},xi=ri,ma=0,Hn&&Nt<.001&&(Ai=ri)):Oa==="L"?(le=Pe(Kn[0],Kn[1],Kn[2],Kn[3],(Nt||0)-hi),ma=le.length,ri=le.min,xi=le.max,Vi=le.point):Oa==="A"?(Ie=Dn(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],Kn[6],Kn[7],Kn[8],(Nt||0)-hi,Vt||{}),ma=Ie.length,ri=Ie.min,xi=Ie.max,Vi=Ie.point):Oa==="C"?(nr=Xn(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],Kn[6],Kn[7],(Nt||0)-hi,Vt||{}),ma=nr.length,ri=nr.min,xi=nr.max,Vi=nr.point):Oa==="Q"?(fr=$e(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],(Nt||0)-hi,Vt||{}),ma=fr.length,ri=fr.min,xi=fr.max,Vi=fr.point):Oa==="Z"&&(Kn=[Ja,Na,Ta,ka],Gr=Pe(Kn[0],Kn[1],Kn[2],Kn[3],(Nt||0)-hi),ma=Gr.length,ri=Gr.min,xi=Gr.max,Vi=Gr.point),Hn&&hi<Nt&&hi+ma>=Nt&&(Ai=Vi),Ga.push(xi),Ya.push(ri),hi+=ma,vn=Oa!=="Z"?ha.slice(-2):[Ta,ka],Ja=vn[0],Na=vn[1];return Hn&&Nt>=hi&&(Ai={x:Ja,y:Na}),{length:hi,point:Ai,min:{x:Math.min.apply(null,Ya.map(function(so){return so.x})),y:Math.min.apply(null,Ya.map(function(so){return so.y}))},max:{x:Math.max.apply(null,Ga.map(function(so){return so.x})),y:Math.max.apply(null,Ga.map(function(so){return so.y}))}}}function qr(lt,Nt){if(!lt)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Vt=Tr(lt,void 0,(0,bt.__assign)((0,bt.__assign)({},Nt),{length:!1})),le=Vt.min,Ie=le.x,nr=le.y,fr=Vt.max,Gr=fr.x,vn=fr.y,mn=Gr-Ie,Hn=vn-nr;return{width:mn,height:Hn,x:Ie,y:nr,x2:Gr,y2:vn,cx:Ie+mn/2,cy:nr+Hn/2,cz:Math.max(mn,Hn)+Math.min(mn,Hn)/2}}function gn(lt,Nt){return Tr(lt,void 0,(0,bt.__assign)((0,bt.__assign)({},Nt),{bbox:!1,length:!0})).length}function xn(lt,Nt){if(!lt)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Vt=Tr(lt,void 0,(0,bt.__assign)((0,bt.__assign)({},Nt),{bbox:!0,length:!0})),le=Vt.length,Ie=Vt.min,nr=Ie.x,fr=Ie.y,Gr=Vt.max,vn=Gr.x,mn=Gr.y,Hn=vn-nr,aa=mn-fr;return{length:le,width:Hn,height:aa,x:nr,y:fr,x2:vn,y2:mn,cx:nr+Hn/2,cy:fr+aa/2,cz:Math.max(Hn,aa)+Math.min(Hn,aa)/2}}function Rn(lt){var Nt=lt.length,Vt=Nt-1;return lt.map(function(le,Ie){return lt.map(function(nr,fr){var Gr=Ie+fr,vn;return fr===0||lt[Gr]&&lt[Gr][0]==="M"?(vn=lt[Gr],["M"].concat(vn.slice(-2))):(Gr>=Nt&&(Gr-=Vt),lt[Gr])})})}function Mr(lt,Nt){var Vt=lt.length-1,le=[],Ie=0,nr=0,fr=Rn(lt);return fr.forEach(function(Gr,vn){lt.slice(1).forEach(function(mn,Hn){nr+=Tt(lt[(vn+Hn)%Vt].slice(-2),Nt[Hn%Vt].slice(-2))}),le[vn]=nr,nr=0}),Ie=le.indexOf(Math.min.apply(null,le)),fr[Ie]}function dn(lt,Nt,Vt,le,Ie,nr,fr,Gr){return 3*((Gr-Nt)*(Vt+Ie)-(fr-lt)*(le+nr)+le*(lt-Ie)-Vt*(Nt-nr)+Gr*(Ie+lt/3)-fr*(nr+Nt/3))/20}function hn(lt){var Nt=0,Vt=0,le=0;return Or(lt).map(function(Ie){var nr;switch(Ie[0]){case"M":return Nt=Ie[1],Vt=Ie[2],0;default:var fr=Ie.slice(1),Gr=fr[0],vn=fr[1],mn=fr[2],Hn=fr[3],aa=fr[4],Kn=fr[5];return le=dn(Nt,Vt,Gr,vn,mn,Hn,aa,Kn),nr=Ie.slice(-2),Nt=nr[0],Vt=nr[1],le}}).reduce(function(Ie,nr){return Ie+nr},0)}function sn(lt){return hn(lt)>=0}function Wn(lt,Nt,Vt){return Tr(lt,Nt,(0,bt.__assign)((0,bt.__assign)({},Vt),{bbox:!1,length:!0})).point}function Mn(lt,Nt){var Vt=Lt(lt);if(typeof Vt=="string")throw TypeError(Vt);var le=Vt.slice(),Ie=gn(le),nr=le.length-1,fr=0,Gr=0,vn=Vt[0],mn=vn.slice(-2),Hn=mn[0],aa=mn[1],Kn={x:Hn,y:aa};if(nr<=0||!Nt||!Number.isFinite(Nt))return{segment:vn,index:0,length:Gr,point:Kn,lengthAtSegment:fr};if(Nt>=Ie)return le=Vt.slice(0,-1),fr=gn(le),Gr=Ie-fr,{segment:Vt[nr],index:nr,length:Gr,lengthAtSegment:fr};for(var Oa=[];nr>0;)vn=le[nr],le=le.slice(0,-1),fr=gn(le),Gr=Ie-fr,Ie=fr,Oa.push({segment:vn,index:nr,length:Gr,lengthAtSegment:fr}),nr-=1;return Oa.find(function(Ja){var Na=Ja.lengthAtSegment;return Na<=Nt})}function In(lt,Nt){for(var Vt=Lt(lt),le=Wt(Vt),Ie=gn(Vt),nr=function(ma){var ri=ma.x-Nt.x,xi=ma.y-Nt.y;return ri*ri+xi*xi},fr=8,Gr,vn=0,mn,Hn=0,aa=1/0,Kn=0;Kn<=Ie;Kn+=fr)Gr=Wn(le,Kn),vn=nr(Gr),vn<aa&&(mn=Gr,Hn=Kn,aa=vn);fr/=2;for(var Oa,Ja,Na=0,Ta=0,ka=0,ha=0;fr>.5;)Na=Hn-fr,Oa=Wn(le,Na),ka=nr(Oa),Ta=Hn+fr,Ja=Wn(le,Ta),ha=nr(Ja),Na>=0&&ka<aa?(mn=Oa,Hn=Na,aa=ka):Ta<=Ie&&ha<aa?(mn=Ja,Hn=Ta,aa=ha):fr/=2;var Ya=Mn(Vt,Hn),Ga=Math.sqrt(aa);return{closest:mn,distance:Ga,segment:Ya}}function jn(lt,Nt){var Vt=In(lt,Nt).distance;return Math.abs(Vt)<.001}function at(lt,Nt){Nt===void 0&&(Nt=.5);var Vt=lt.slice(0,2),le=lt.slice(2,4),Ie=lt.slice(4,6),nr=lt.slice(6,8),fr=we(Vt,le,Nt),Gr=we(le,Ie,Nt),vn=we(Ie,nr,Nt),mn=we(fr,Gr,Nt),Hn=we(Gr,vn,Nt),aa=we(mn,Hn,Nt);return[["C"].concat(fr,mn,aa),["C"].concat(Hn,vn,nr)]}function Je(lt){return lt.map(function(Nt,Vt,le){var Ie=Vt&&le[Vt-1].slice(-2).concat(Nt.slice(1)),nr=Vt?Xn(Ie[0],Ie[1],Ie[2],Ie[3],Ie[4],Ie[5],Ie[6],Ie[7],Ie[8],{bbox:!1}).length:0,fr;return Vt?fr=nr?at(Ie):[Nt,Nt]:fr=[Nt],{s:Nt,ss:fr,l:nr}})}function Ht(lt,Nt,Vt){var le=Je(lt),Ie=Je(Nt),nr=le.length,fr=Ie.length,Gr=le.filter(function(Ta){return Ta.l}).length,vn=Ie.filter(function(Ta){return Ta.l}).length,mn=le.filter(function(Ta){return Ta.l}).reduce(function(Ta,ka){var ha=ka.l;return Ta+ha},0)/Gr||0,Hn=Ie.filter(function(Ta){return Ta.l}).reduce(function(Ta,ka){var ha=ka.l;return Ta+ha},0)/vn||0,aa=Vt||Math.max(nr,fr),Kn=[mn,Hn],Oa=[aa-nr,aa-fr],Ja=0,Na=[le,Ie].map(function(Ta,ka){return Ta.l===aa?Ta.map(function(ha){return ha.s}):Ta.map(function(ha,Ya){return Ja=Ya&&Oa[ka]&&ha.l>=Kn[ka],Oa[ka]-=Ja?1:0,Ja?ha.ss:[ha.s]}).flat()});return Na[0].length===Na[1].length?Na:Ht(Na[0],Na[1],aa)}var te=function(lt){return lt!==null&&typeof lt!="function"&&isFinite(lt.length)},wt=te,Me=function(lt,Nt){return wt(lt)?lt.indexOf(Nt)>-1:!1},kt=Me,qt=function(lt,Nt){if(!wt(lt))return lt;for(var Vt=[],le=0;le<lt.length;le++){var Ie=lt[le];Nt(Ie,le)&&Vt.push(Ie)}return Vt},dt=qt,Ut=function(lt,Nt){return Nt===void 0&&(Nt=[]),dt(lt,function(Vt){return!kt(Nt,Vt)})},Q=Ut,ot=function(lt){return typeof lt=="function"},R=function(lt){return lt==null},M=R,O={}.toString,X=function(lt,Nt){return O.call(lt)==="[object "+Nt+"]"},mt=X,Ft=function(lt){return Array.isArray?Array.isArray(lt):mt(lt,"Array")},Bt=function(lt){var Nt=typeof lt;return lt!==null&&Nt==="object"||Nt==="function"};function ee(lt,Nt){if(lt){var Vt;if(Ft(lt))for(var le=0,Ie=lt.length;le<Ie&&(Vt=Nt(lt[le],le),Vt!==!1);le++);else if(Bt(lt)){for(var nr in lt)if(lt.hasOwnProperty(nr)&&(Vt=Nt(lt[nr],nr),Vt===!1))break}}}var Le=ee,me=Object.keys?function(lt){return Object.keys(lt)}:function(lt){var Nt=[];return Le(lt,function(Vt,le){ot(lt)&&le==="prototype"||Nt.push(le)}),Nt},Xe=me;function pr(lt,Nt){var Vt=Xe(Nt),le=Vt.length;if(M(lt))return!le;for(var Ie=0;Ie<le;Ie+=1){var nr=Vt[Ie];if(Nt[nr]!==lt[nr]||!(nr in lt))return!1}return!0}var Ze=pr,Pr=function(lt){return typeof lt=="object"&&lt!==null},un=Pr,Ke=function(lt){if(!un(lt)||!mt(lt,"Object"))return!1;if(Object.getPrototypeOf(lt)===null)return!0;for(var Nt=lt;Object.getPrototypeOf(Nt)!==null;)Nt=Object.getPrototypeOf(Nt);return Object.getPrototypeOf(lt)===Nt},lr=Ke;function Rr(lt,Nt){if(!Ft(lt))return null;var Vt;if(ot(Nt)&&(Vt=Nt),lr(Nt)&&(Vt=function(Ie){return Ze(Ie,Nt)}),Vt){for(var le=0;le<lt.length;le+=1)if(Vt(lt[le]))return lt[le]}return null}var Dr=Rr;function ce(lt,Nt,Vt){Vt===void 0&&(Vt=0);for(var le=Vt;le<lt.length;le++)if(Nt(lt[le],le))return le;return-1}var jt=ce,pe=function(lt,Nt){for(var Vt=null,le=0;le<lt.length;le++){var Ie=lt[le],nr=Ie[Nt];if(!M(nr)){Ft(nr)?Vt=nr[0]:Vt=nr;break}}return Vt},Oe=pe,Se=function(lt){if(!Ft(lt))return[];for(var Nt=[],Vt=0;Vt<lt.length;Vt++)Nt=Nt.concat(lt[Vt]);return Nt},Fe=Se,or=function(lt,Nt){if(Nt===void 0&&(Nt=[]),!Ft(lt))Nt.push(lt);else for(var Vt=0;Vt<lt.length;Vt+=1)or(lt[Vt],Nt);return Nt},gr=or,Jr=function(lt){if(Ft(lt))return lt.reduce(function(Nt,Vt){return Math.max(Nt,Vt)},lt[0])},Gn=function(lt){if(Ft(lt))return lt.reduce(function(Nt,Vt){return Math.min(Nt,Vt)},lt[0])},pn=function(lt){var Nt=lt.filter(function(fr){return!isNaN(fr)});if(!Nt.length)return{min:0,max:0};if(Ft(lt[0])){for(var Vt=[],le=0;le<lt.length;le++)Vt=Vt.concat(lt[le]);Nt=Vt}var Ie=Jr(Nt),nr=Gn(Nt);return{min:nr,max:Ie}},qn=pn,ln=Array.prototype,Vn=ln.splice,ca=ln.indexOf,ba=function(lt){for(var Nt=[],Vt=1;Vt<arguments.length;Vt++)Nt[Vt-1]=arguments[Vt];for(var le=0;le<Nt.length;le++)for(var Ie=Nt[le],nr=-1;(nr=ca.call(lt,Ie))>-1;)Vn.call(lt,nr,1);return lt},Ea=ba,Ni=Array.prototype.splice,ti=function(Nt,Vt){if(!wt(Nt))return[];for(var le=Nt?Vt.length:0,Ie=le-1;le--;){var nr=void 0,fr=Vt[le];(le===Ie||fr!==nr)&&(nr=fr,Ni.call(Nt,fr,1))}return Nt},ei=ti,wi=function(lt,Nt,Vt){if(!Ft(lt)&&!lr(lt))return lt;var le=Vt;return Le(lt,function(Ie,nr){le=Nt(le,Ie,nr)}),le},Gi=wi,Co=function(lt,Nt){var Vt=[];if(!wt(lt))return Vt;for(var le=-1,Ie=[],nr=lt.length;++le<nr;){var fr=lt[le];Nt(fr,le,lt)&&(Vt.push(fr),Ie.push(le))}return ei(lt,Ie),Vt},eo=Co,ga=function(lt){return mt(lt,"String")};function lo(lt,Nt){var Vt;if(ot(Nt))Vt=function(Ie,nr){return Nt(Ie)-Nt(nr)};else{var le=[];ga(Nt)?le.push(Nt):Ft(Nt)&&(le=Nt),Vt=function(Ie,nr){for(var fr=0;fr<le.length;fr+=1){var Gr=le[fr];if(Ie[Gr]>nr[Gr])return 1;if(Ie[Gr]<nr[Gr])return-1}return 0}}return lt.sort(Vt),lt}var To=lo;function ni(lt,Nt){Nt===void 0&&(Nt=new Map);var Vt=[];if(Array.isArray(lt))for(var le=0,Ie=lt.length;le<Ie;le++){var nr=lt[le];Nt.has(nr)||(Vt.push(nr),Nt.set(nr,!0))}return Vt}var Ri=function(){for(var lt=[],Nt=0;Nt<arguments.length;Nt++)lt[Nt]=arguments[Nt];return ni([].concat.apply([],lt))},ho=Ri,Po=function(lt,Nt){for(var Vt=[],le={},Ie=0;Ie<lt.length;Ie++){var nr=lt[Ie],fr=nr[Nt];if(!M(fr)){Ft(fr)||(fr=[fr]);for(var Gr=0;Gr<fr.length;Gr++){var vn=fr[Gr];le[vn]||(Vt.push(vn),le[vn]=!0)}}}return Vt};function ro(lt){if(wt(lt))return lt[0]}function no(lt){if(wt(lt)){var Nt=lt;return Nt[Nt.length-1]}}function es(lt,Nt){return Ft(lt)||ga(lt)?lt[0]===Nt:!1}var vo=es;function Si(lt,Nt){return Ft(lt)||ga(lt)?lt[lt.length-1]===Nt:!1}var ao=Si,Jo=function(lt,Nt){for(var Vt=0;Vt<lt.length;Vt++)if(!Nt(lt[Vt],Vt))return!1;return!0},Yt=Jo,de=function(lt,Nt){for(var Vt=0;Vt<lt.length;Vt++)if(Nt(lt[Vt],Vt))return!0;return!1},Ge=de,sr=Object.prototype.hasOwnProperty;function Lr(lt,Nt){if(!Nt||!Ft(lt))return{};for(var Vt={},le=ot(Nt)?Nt:function(Gr){return Gr[Nt]},Ie,nr=0;nr<lt.length;nr++){var fr=lt[nr];Ie=le(fr),sr.call(Vt,Ie)?Vt[Ie].push(fr):Vt[Ie]=[fr]}return Vt}var Nr=Lr;function Sr(lt,Nt){if(!Nt)return{0:lt};if(!ot(Nt)){var Vt=Ft(Nt)?Nt:Nt.replace(/\s+/g,"").split("*");Nt=function(le){for(var Ie="_",nr=0,fr=Vt.length;nr<fr;nr++)Ie+=le[Vt[nr]]&&le[Vt[nr]].toString();return Ie}}return Nr(lt,Nt)}var en=function(lt,Nt){if(!Nt)return[lt];var Vt=Sr(lt,Nt),le=[];for(var Ie in Vt)le.push(Vt[Ie]);return le};function fn(lt,Nt){return lt["_wrap_"+Nt]}var Pn=fn;function sa(lt,Nt){if(lt["_wrap_"+Nt])return lt["_wrap_"+Nt];var Vt=function(le){lt[Nt](le)};return lt["_wrap_"+Nt]=Vt,Vt}var Zn=sa,pa={};function ya(lt){var Nt=pa[lt];if(!Nt){for(var Vt=lt.toString(16),le=Vt.length;le<6;le++)Vt="0"+Vt;Nt="#"+Vt,pa[lt]=Nt}return Nt}var di=ya;function Ma(lt){var Nt=0,Vt=0,le=0,Ie=0;return Ft(lt)?lt.length===1?Nt=Vt=le=Ie=lt[0]:lt.length===2?(Nt=le=lt[0],Vt=Ie=lt[1]):lt.length===3?(Nt=lt[0],Vt=Ie=lt[1],le=lt[2]):(Nt=lt[0],Vt=lt[1],le=lt[2],Ie=lt[3]):Nt=Vt=le=Ie=lt,{r1:Nt,r2:Vt,r3:le,r4:Ie}}var oa=Ma,si=function(lt,Nt,Vt){return lt<Nt?Nt:lt>Vt?Vt:lt},$a=si,Fa=function(lt,Nt){var Vt=Nt.toString(),le=Vt.indexOf(".");if(le===-1)return Math.round(lt);var Ie=Vt.substr(le+1).length;return Ie>20&&(Ie=20),parseFloat(lt.toFixed(Ie))},Ui=Fa,fi=function(lt){return mt(lt,"Number")},La=fi,ja=function(lt){return La(lt)&&lt%1!==0},za=ja,yi=function(lt){return La(lt)&&lt%2===0},mi=yi,ki=Number.isInteger?Number.isInteger:function(lt){return La(lt)&&lt%1===0},po=ki,Wi=function(lt){return La(lt)&&lt<0},Ao=Wi,Vo=1e-5;function os(lt,Nt,Vt){return Vt===void 0&&(Vt=Vo),Math.abs(lt-Nt)<Vt}var $i=function(lt){return La(lt)&&lt%2!==0},qa=$i,Yi=function(lt){return La(lt)&&lt>0},io=Yi,Qa=function(lt,Nt){if(Ft(lt)){for(var Vt,le=-1/0,Ie=0;Ie<lt.length;Ie++){var nr=lt[Ie],fr=ot(Nt)?Nt(nr):nr[Nt];fr>le&&(Vt=nr,le=fr)}return Vt}},Pi=function(lt,Nt){if(Ft(lt)){for(var Vt,le=1/0,Ie=0;Ie<lt.length;Ie++){var nr=lt[Ie],fr=ot(Nt)?Nt(nr):nr[Nt];fr<le&&(Vt=nr,le=fr)}return Vt}},zo=function(lt,Nt){return(lt%Nt+Nt)%Nt},qi=zo,rs=180/Math.PI,Xi=function(lt){return rs*lt},yo=Xi,Es=parseInt,ds=Math.PI/180,oo=function(lt){return ds*lt},ls=oo,hs=Le,Os=function(lt,Nt){return lt.hasOwnProperty(Nt)},Ho=Os,$t=Object.values?function(lt){return Object.values(lt)}:function(lt){var Nt=[];return Le(lt,function(Vt,le){ot(lt)&&le==="prototype"||Nt.push(Vt)}),Nt},ye=$t,ir=function(lt,Nt){return kt(ye(lt),Nt)},dr=function(lt){return M(lt)?"":lt.toString()},Zr=function(lt){return dr(lt).toLowerCase()},Ln=Zr,Qn=function(lt){var Nt=dr(lt);return Nt.charAt(0).toLowerCase()+Nt.substring(1)},Sa=Qn;function Ci(lt,Nt){return!lt||!Nt?lt:lt.replace(/\\?\{([^{}]+)\}/g,function(Vt,le){return Vt.charAt(0)==="\\"?Vt.slice(1):Nt[le]===void 0?"":Nt[le]})}var Io=Ci,Go=function(lt){return dr(lt).toUpperCase()},zs=Go,Ds=function(lt){var Nt=dr(lt);return Nt.charAt(0).toUpperCase()+Nt.substring(1)},ji=Ds,xo={}.toString,Gs=function(lt){return xo.call(lt).replace(/^\[object /,"").replace(/]$/,"")},vs=Gs,qs=function(lt){return mt(lt,"Arguments")},Qs=qs,Js=function(lt){return mt(lt,"Boolean")},Vs=Js,Rs=function(lt){return mt(lt,"Date")},Us=Rs,ws=function(lt){return mt(lt,"Error")},ns=ws;function _u(lt){return La(lt)&&isFinite(lt)}var Cu=function(lt){return lt===null},Uo=Cu,bo=Object.prototype,ss=function(lt){var Nt=lt&&lt.constructor,Vt=typeof Nt=="function"&&Nt.prototype||bo;return lt===Vt},d=ss,G=function(lt){return mt(lt,"RegExp")},Et=G,Gt=function(lt){return lt===void 0},re=Gt,he=function(lt){return lt instanceof Element||lt instanceof HTMLDocument},ge=he;function De(lt){var Nt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Vt){return setTimeout(Vt,16)};return Nt(lt)}function ze(lt){var Nt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Nt(lt)}function He(lt,Nt){for(var Vt in Nt)Nt.hasOwnProperty(Vt)&&Vt!=="constructor"&&Nt[Vt]!==void 0&&(lt[Vt]=Nt[Vt])}function ur(lt,Nt,Vt,le){return Nt&&He(lt,Nt),Vt&&He(lt,Vt),le&&He(lt,le),lt}var Ur=function(){for(var lt=[],Nt=0;Nt<arguments.length;Nt++)lt[Nt]=arguments[Nt];for(var Vt=lt[0],le=1;le<lt.length;le++){var Ie=lt[le];ot(Ie)&&(Ie=Ie.prototype),ur(Vt.prototype,Ie)}},Xr=Ur,Wr=function(lt){if(typeof lt!="object"||lt===null)return lt;var Nt;if(Ft(lt)){Nt=[];for(var Vt=0,le=lt.length;Vt<le;Vt++)typeof lt[Vt]=="object"&&lt[Vt]!=null?Nt[Vt]=Wr(lt[Vt]):Nt[Vt]=lt[Vt]}else{Nt={};for(var Ie in lt)typeof lt[Ie]=="object"&&lt[Ie]!=null?Nt[Ie]=Wr(lt[Ie]):Nt[Ie]=lt[Ie]}return Nt},Tn=Wr;function On(lt,Nt,Vt){var le;return function(){var Ie=this,nr=arguments,fr=function(){le=null,Vt||lt.apply(Ie,nr)},Gr=Vt&&!le;clearTimeout(le),le=setTimeout(fr,Nt),Gr&&lt.apply(Ie,nr)}}var Qr=On,ra=function(lt,Nt){if(!ot(lt))throw new TypeError("Expected a function");var Vt=function(){for(var le=[],Ie=0;Ie<arguments.length;Ie++)le[Ie]=arguments[Ie];var nr=Nt?Nt.apply(this,le):le[0],fr=Vt.cache;if(fr.has(nr))return fr.get(nr);var Gr=lt.apply(this,le);return fr.set(nr,Gr),Gr};return Vt.cache=new Map,Vt},Ha=5;function Va(lt,Nt,Vt,le){Vt=Vt||0,le=le||Ha;for(var Ie in Nt)if(Nt.hasOwnProperty(Ie)){var nr=Nt[Ie];nr!==null&&lr(nr)?(lr(lt[Ie])||(lt[Ie]={}),Vt<le?Va(lt[Ie],nr,Vt+1,le):lt[Ie]=Nt[Ie]):Ft(nr)?(lt[Ie]=[],lt[Ie]=lt[Ie].concat(nr)):nr!==void 0&&(lt[Ie]=nr)}}var Ra=function(lt){for(var Nt=[],Vt=1;Vt<arguments.length;Vt++)Nt[Vt-1]=arguments[Vt];for(var le=0;le<Nt.length;le+=1)Va(lt,Nt[le]);return lt},_a=Ra,Pa=function(lt,Nt,Vt,le){ot(Nt)||(Vt=Nt,Nt=lt,lt=function(){});var Ie=Object.create?function(fr,Gr){return Object.create(fr,{constructor:{value:Gr}})}:function(fr,Gr){function vn(){}vn.prototype=fr;var mn=new vn;return mn.constructor=Gr,mn},nr=Ie(Nt.prototype,lt);return lt.prototype=ur(nr,lt.prototype),lt.superclass=Ie(Nt.prototype,Nt),ur(nr,Vt),ur(lt,le),lt},Oo=Pa,Eo=function(lt,Nt){if(!wt(lt))return-1;var Vt=Array.prototype.indexOf;if(Vt)return Vt.call(lt,Nt);for(var le=-1,Ie=0;Ie<lt.length;Ie++)if(lt[Ie]===Nt){le=Ie;break}return le},go=Eo,wo=Object.prototype.hasOwnProperty;function So(lt){if(M(lt))return!0;if(wt(lt))return!lt.length;var Nt=vs(lt);if(Nt==="Map"||Nt==="Set")return!lt.size;if(d(lt))return!Object.keys(lt).length;for(var Vt in lt)if(wo.call(lt,Vt))return!1;return!0}var No=So,Ro=function(lt,Nt){if(lt===Nt)return!0;if(!lt||!Nt||ga(lt)||ga(Nt))return!1;if(wt(lt)||wt(Nt)){if(lt.length!==Nt.length)return!1;for(var Vt=!0,le=0;le<lt.length&&(Vt=Ro(lt[le],Nt[le]),!!Vt);le++);return Vt}if(un(lt)||un(Nt)){var Ie=Object.keys(lt),nr=Object.keys(Nt);if(Ie.length!==nr.length)return!1;for(var Vt=!0,le=0;le<Ie.length&&(Vt=Ro(lt[Ie[le]],Nt[Ie[le]]),!!Vt);le++);return Vt}return!1},ci=Ro,Bi=function(lt,Nt,Vt){return ot(Vt)?!!Vt(lt,Nt):ci(lt,Nt)},Hs=function(lt,Nt){if(!wt(lt))return lt;for(var Vt=[],le=0;le<lt.length;le++){var Ie=lt[le];Vt.push(Nt(Ie,le))}return Vt},Zs=Hs,ps=function(lt){return lt},Tu=function(lt,Nt){Nt===void 0&&(Nt=ps);var Vt={};return Bt(lt)&&!M(lt)&&Object.keys(lt).forEach(function(le){Vt[le]=Nt(lt[le],le)}),Vt},Nf=function(lt,Nt,Vt){for(var le=0,Ie=ga(Nt)?Nt.split("."):Nt;lt&&le<Ie.length;)lt=lt[Ie[le++]];return lt===void 0||le<Ie.length?Vt:lt},hc=function(lt,Nt,Vt){var le=lt,Ie=ga(Nt)?Nt.split("."):Nt;return Ie.forEach(function(nr,fr){fr<Ie.length-1?(Bt(le[nr])||(le[nr]=La(Ie[fr+1])?[]:{}),le=le[nr]):le[nr]=Vt}),lt},vc=Object.prototype.hasOwnProperty,pc=function(lt,Nt){if(lt===null||!lr(lt))return{};var Vt={};return Le(Nt,function(le){vc.call(lt,le)&&(Vt[le]=lt[le])}),Vt},Rf=function(lt,Nt){return Gi(lt,function(Vt,le,Ie){return Nt.includes(Ie)||(Vt[Ie]=le),Vt},{})},kf=function(lt,Nt,Vt){var le,Ie,nr,fr,Gr=0;Vt||(Vt={});var vn=function(){Gr=Vt.leading===!1?0:Date.now(),le=null,fr=lt.apply(Ie,nr),le||(Ie=nr=null)},mn=function(){var Hn=Date.now();!Gr&&Vt.leading===!1&&(Gr=Hn);var aa=Nt-(Hn-Gr);return Ie=this,nr=arguments,aa<=0||aa>Nt?(le&&(clearTimeout(le),le=null),Gr=Hn,fr=lt.apply(Ie,nr),le||(Ie=nr=null)):!le&&Vt.trailing!==!1&&(le=setTimeout(vn,aa)),fr};return mn.cancel=function(){clearTimeout(le),Gr=0,le=Ie=nr=null},mn},gc=function(lt){return wt(lt)?Array.prototype.slice.call(lt):[]},du={},lf=function(lt){return lt=lt||"g",du[lt]?du[lt]+=1:du[lt]=1,lt+du[lt]},mc=function(){},qc=function(lt){return lt};function hu(lt){return M(lt)?0:wt(lt)?lt.length:Object.keys(lt).length}var yc=function(){function lt(){this.map={}}return lt.prototype.has=function(Nt){return this.map[Nt]!==void 0},lt.prototype.get=function(Nt,Vt){var le=this.map[Nt];return le===void 0?Vt:le},lt.prototype.set=function(Nt,Vt){this.map[Nt]=Vt},lt.prototype.clear=function(){this.map={}},lt.prototype.delete=function(Nt){delete this.map[Nt]},lt.prototype.size=function(){return Object.keys(this.map).length},lt}(),ea=yc,Au=1e-6;function ui(lt){return Math.abs(lt)<Au?0:lt<0?-1:1}function df(lt,Nt,Vt){return(Vt[0]-lt[0])*(Nt[1]-lt[1])===(Nt[0]-lt[0])*(Vt[1]-lt[1])&&Math.min(lt[0],Nt[0])<=Vt[0]&&Vt[0]<=Math.max(lt[0],Nt[0])&&Math.min(lt[1],Nt[1])<=Vt[1]&&Vt[1]<=Math.max(lt[1],Nt[1])}function Xu(lt,Nt,Vt){var le=!1,Ie=lt.length;if(Ie<=2)return!1;for(var nr=0;nr<Ie;nr++){var fr=lt[nr],Gr=lt[(nr+1)%Ie];if(df(fr,Gr,[Nt,Vt]))return!0;ui(fr[1]-Vt)>0!=ui(Gr[1]-Vt)>0&&ui(Nt-(Vt-fr[1])*(fr[0]-Gr[0])/(fr[1]-Gr[1])-fr[0])<0&&(le=!le)}return le}var su=function(lt,Nt,Vt){return lt>=Nt&&lt<=Vt};function Bf(lt,Nt,Vt,le){var Ie=.001,nr={x:Vt.x-lt.x,y:Vt.y-lt.y},fr={x:Nt.x-lt.x,y:Nt.y-lt.y},Gr={x:le.x-Vt.x,y:le.y-Vt.y},vn=fr.x*Gr.y-fr.y*Gr.x,mn=vn*vn,Hn=fr.x*fr.x+fr.y*fr.y,aa=Gr.x*Gr.x+Gr.y*Gr.y,Kn=null;if(mn>Ie*Hn*aa){var Oa=(nr.x*Gr.y-nr.y*Gr.x)/vn,Ja=(nr.x*fr.y-nr.y*fr.x)/vn;su(Oa,0,1)&&su(Ja,0,1)&&(Kn={x:lt.x+Oa*fr.x,y:lt.y+Oa*fr.y})}return Kn}function Iu(lt){for(var Nt=[],Vt=lt.length,le=0;le<Vt-1;le++){var Ie=lt[le],nr=lt[le+1];Nt.push({from:{x:Ie[0],y:Ie[1]},to:{x:nr[0],y:nr[1]}})}if(Nt.length>1){var fr=lt[0],Gr=lt[Vt-1];Nt.push({from:{x:Gr[0],y:Gr[1]},to:{x:fr[0],y:fr[1]}})}return Nt}function xc(lt,Nt){var Vt=!1;return lt.forEach(function(le){if(Bf(le.from,le.to,Nt.from,Nt.to))return Vt=!0,!1}),Vt}function hf(lt){var Nt=lt.map(function(le){return le[0]}),Vt=lt.map(function(le){return le[1]});return{minX:Math.min.apply(null,Nt),maxX:Math.max.apply(null,Nt),minY:Math.min.apply(null,Vt),maxY:Math.max.apply(null,Vt)}}function bc(lt,Nt){return!(Nt.minX>lt.maxX||Nt.maxX<lt.minX||Nt.minY>lt.maxY||Nt.maxY<lt.minY)}function Ws(lt,Nt){if(lt.length<2||Nt.length<2)return!1;var Vt=hf(lt),le=hf(Nt);if(!bc(Vt,le))return!1;var Ie=!1;if(Nt.forEach(function(vn){if(Xu(lt,vn[0],vn[1]))return Ie=!0,!1}),Ie||(lt.forEach(function(vn){if(Xu(Nt,vn[0],vn[1]))return Ie=!0,!1}),Ie))return!0;var nr=Iu(lt),fr=Iu(Nt),Gr=!1;return fr.forEach(function(vn){if(xc(nr,vn))return Gr=!0,!1}),Gr}},731278:function(Ve,z,C){"use strict";var x;x={value:!0};var k=C(858204);function w(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromTranslation(D,E),k.mat3.multiply(g,D,A)}x=w;function T(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromRotation(D,E),k.mat3.multiply(g,D,A)}x=T;function L(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromScaling(D,E),k.mat3.multiply(g,D,A)}x=L;function P(g,A,E){return k.mat3.multiply(g,E,A)}function p(g,A){for(var E=g?[].concat(g):[1,0,0,0,1,0,0,0,1],D=0,F=A.length;D<F;D++){var Y=A[D];switch(Y[0]){case"t":w(E,E,[Y[1],Y[2]]);break;case"s":L(E,E,[Y[1],Y[2]]);break;case"r":T(E,E,Y[1]);break;case"m":P(E,E,Y[1]);break;default:break}}return E}z.vs=p;function m(g,A){return g[0]*A[1]-A[0]*g[1]}x=m;function S(g,A,E){var D=k.vec2.angle(g,A),F=m(g,A)>=0;return E?F?Math.PI*2-D:D:F?D:Math.PI*2-D}x=S;function y(g,A,E){return E?(g[0]=A[1],g[1]=-1*A[0]):(g[0]=-1*A[1],g[1]=A[0]),g}x=y},413810:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return Ho},assign:function(){return en},augment:function(){return Pn},clamp:function(){return te},clearAnimationFrame:function(){return Nr},clone:function(){return Zn},contains:function(){return T},debounce:function(){return ya},deepMix:function(){return $a},difference:function(){return m},each:function(){return h},endsWith:function(){return Un},every:function(){return xr},extend:function(){return Ui},filter:function(){return P},find:function(){return it},findIndex:function(){return gt},firstValue:function(){return Ct},fixedBase:function(){return Me},flatten:function(){return Z},flattenDeep:function(){return yt},forIn:function(){return pe},get:function(){return $i},getEllipsisText:function(){return hs},getRange:function(){return It},getType:function(){return Gi},getWrapBehavior:function(){return hn},group:function(){return Mr},groupBy:function(){return xn},groupToMap:function(){return Rn},has:function(){return Oe},hasKey:function(){return Se},hasValue:function(){return gr},head:function(){return Or},identity:function(){return yo},includes:function(){return T},indexOf:function(){return La},isArguments:function(){return eo},isArray:function(){return F},isArrayLike:function(){return k},isBoolean:function(){return lo},isDate:function(){return ni},isDecimal:function(){return Ut},isElement:function(){return sr},isEmpty:function(){return yi},isEqual:function(){return ki},isEqualWith:function(){return po},isError:function(){return ho},isEven:function(){return ot},isFinite:function(){return Po},isFunction:function(){return A},isInteger:function(){return M},isMatch:function(){return V},isNegative:function(){return X},isNil:function(){return D},isNull:function(){return no},isNumber:function(){return qt},isNumberEqual:function(){return Ft},isObject:function(){return Y},isObjectLike:function(){return q},isOdd:function(){return ee},isPlainObject:function(){return rt},isPositive:function(){return me},isPrototype:function(){return Si},isRegExp:function(){return Jo},isString:function(){return xe},isType:function(){return g},isUndefined:function(){return de},keys:function(){return U},last:function(){return Br},lowerCase:function(){return pn},lowerFirst:function(){return ln},map:function(){return Ao},mapValues:function(){return os},max:function(){return _t},maxBy:function(){return Xe},measureTextWidth:function(){return ls},memoize:function(){return di},min:function(){return nt},minBy:function(){return pr},mix:function(){return en},mod:function(){return Pr},noop:function(){return Xi},number2color:function(){return jn},omit:function(){return Qa},parseRadius:function(){return Je},pick:function(){return io},pull:function(){return ue},pullAt:function(){return ne},reduce:function(){return Wt},remove:function(){return Ce},requestAnimationFrame:function(){return Lr},set:function(){return qa},size:function(){return Es},some:function(){return Tr},sortBy:function(){return we},startsWith:function(){return an},substitute:function(){return ca},throttle:function(){return Pi},toArray:function(){return zo},toDegree:function(){return lr},toInteger:function(){return Rr},toRadian:function(){return jt},toString:function(){return Jr},union:function(){return _r},uniq:function(){return Tt},uniqueId:function(){return rs},upperCase:function(){return Ea},upperFirst:function(){return ti},values:function(){return or},valuesOfKey:function(){return Ar},wrapBehavior:function(){return Wn}});var x=function($t){return $t!==null&&typeof $t!="function"&&isFinite($t.length)},k=x,w=function($t,ye){return k($t)?$t.indexOf(ye)>-1:!1},T=w,L=function($t,ye){if(!k($t))return $t;for(var ir=[],dr=0;dr<$t.length;dr++){var Zr=$t[dr];ye(Zr,dr)&&ir.push(Zr)}return ir},P=L,p=function($t,ye){return ye===void 0&&(ye=[]),P($t,function(ir){return!T(ye,ir)})},m=p,S={}.toString,y=function($t,ye){return S.call($t)==="[object "+ye+"]"},g=y,A=function($t){return g($t,"Function")},E=function($t){return $t==null},D=E,F=function($t){return Array.isArray?Array.isArray($t):g($t,"Array")},Y=function($t){var ye=typeof $t;return $t!==null&&ye==="object"||ye==="function"};function b($t,ye){if($t){var ir;if(F($t))for(var dr=0,Zr=$t.length;dr<Zr&&(ir=ye($t[dr],dr),ir!==!1);dr++);else if(Y($t)){for(var Ln in $t)if($t.hasOwnProperty(Ln)&&(ir=ye($t[Ln],Ln),ir===!1))break}}}var h=b,$=Object.keys?function($t){return Object.keys($t)}:function($t){var ye=[];return h($t,function(ir,dr){A($t)&&dr==="prototype"||ye.push(dr)}),ye},U=$;function W($t,ye){var ir=U(ye),dr=ir.length;if(D($t))return!dr;for(var Zr=0;Zr<dr;Zr+=1){var Ln=ir[Zr];if(ye[Ln]!==$t[Ln]||!(Ln in $t))return!1}return!0}var V=W,H=function($t){return typeof $t=="object"&&$t!==null},q=H,tt=function($t){if(!q($t)||!g($t,"Object"))return!1;if(Object.getPrototypeOf($t)===null)return!0;for(var ye=$t;Object.getPrototypeOf(ye)!==null;)ye=Object.getPrototypeOf(ye);return Object.getPrototypeOf($t)===ye},rt=tt;function ft($t,ye){if(!F($t))return null;var ir;if(A(ye)&&(ir=ye),rt(ye)&&(ir=function(Zr){return V(Zr,ye)}),ir){for(var dr=0;dr<$t.length;dr+=1)if(ir($t[dr]))return $t[dr]}return null}var it=ft;function bt($t,ye,ir){ir===void 0&&(ir=0);for(var dr=ir;dr<$t.length;dr++)if(ye($t[dr],dr))return dr;return-1}var gt=bt,Xt=function($t,ye){for(var ir=null,dr=0;dr<$t.length;dr++){var Zr=$t[dr],Ln=Zr[ye];if(!D(Ln)){F(Ln)?ir=Ln[0]:ir=Ln;break}}return ir},Ct=Xt,At=function($t){if(!F($t))return[];for(var ye=[],ir=0;ir<$t.length;ir++)ye=ye.concat($t[ir]);return ye},Z=At,J=function($t,ye){if(ye===void 0&&(ye=[]),!F($t))ye.push($t);else for(var ir=0;ir<$t.length;ir+=1)J($t[ir],ye);return ye},yt=J,_t=function($t){if(F($t))return $t.reduce(function(ye,ir){return Math.max(ye,ir)},$t[0])},nt=function($t){if(F($t))return $t.reduce(function(ye,ir){return Math.min(ye,ir)},$t[0])},vt=function($t){var ye=$t.filter(function(Qn){return!isNaN(Qn)});if(!ye.length)return{min:0,max:0};if(F($t[0])){for(var ir=[],dr=0;dr<$t.length;dr++)ir=ir.concat($t[dr]);ye=ir}var Zr=_t(ye),Ln=nt(ye);return{min:Ln,max:Zr}},It=vt,Pt=Array.prototype,St=Pt.splice,Dt=Pt.indexOf,Qt=function($t){for(var ye=[],ir=1;ir<arguments.length;ir++)ye[ir-1]=arguments[ir];for(var dr=0;dr<ye.length;dr++)for(var Zr=ye[dr],Ln=-1;(Ln=Dt.call($t,Zr))>-1;)St.call($t,Ln,1);return $t},ue=Qt,ie=Array.prototype.splice,Lt=function(ye,ir){if(!k(ye))return[];for(var dr=ye?ir.length:0,Zr=dr-1;dr--;){var Ln=void 0,Qn=ir[dr];(dr===Zr||Qn!==Ln)&&(Ln=Qn,ie.call(ye,Qn,1))}return ye},ne=Lt,ve=function($t,ye,ir){if(!F($t)&&!rt($t))return $t;var dr=ir;return h($t,function(Zr,Ln){dr=ye(dr,Zr,Ln)}),dr},Wt=ve,ae=function($t,ye){var ir=[];if(!k($t))return ir;for(var dr=-1,Zr=[],Ln=$t.length;++dr<Ln;){var Qn=$t[dr];ye(Qn,dr,$t)&&(ir.push(Qn),Zr.push(dr))}return ne($t,Zr),ir},Ce=ae,xe=function($t){return g($t,"String")};function Jt($t,ye){var ir;if(A(ye))ir=function(Zr,Ln){return ye(Zr)-ye(Ln)};else{var dr=[];xe(ye)?dr.push(ye):F(ye)&&(dr=ye),ir=function(Zr,Ln){for(var Qn=0;Qn<dr.length;Qn+=1){var Sa=dr[Qn];if(Zr[Sa]>Ln[Sa])return 1;if(Zr[Sa]<Ln[Sa])return-1}return 0}}return $t.sort(ir),$t}var we=Jt;function Tt($t,ye){ye===void 0&&(ye=new Map);var ir=[];if(Array.isArray($t))for(var dr=0,Zr=$t.length;dr<Zr;dr++){var Ln=$t[dr];ye.has(Ln)||(ir.push(Ln),ye.set(Ln,!0))}return ir}var Pe=function(){for(var $t=[],ye=0;ye<arguments.length;ye++)$t[ye]=arguments[ye];return Tt([].concat.apply([],$t))},_r=Pe,Ar=function($t,ye){for(var ir=[],dr={},Zr=0;Zr<$t.length;Zr++){var Ln=$t[Zr],Qn=Ln[ye];if(!D(Qn)){F(Qn)||(Qn=[Qn]);for(var Sa=0;Sa<Qn.length;Sa++){var Ci=Qn[Sa];dr[Ci]||(ir.push(Ci),dr[Ci]=!0)}}}return ir};function Or($t){if(k($t))return $t[0]}function Br($t){if(k($t)){var ye=$t;return ye[ye.length-1]}}function cn($t,ye){return F($t)||xe($t)?$t[0]===ye:!1}var an=cn;function Dn($t,ye){return F($t)||xe($t)?$t[$t.length-1]===ye:!1}var Un=Dn,Xn=function($t,ye){for(var ir=0;ir<$t.length;ir++)if(!ye($t[ir],ir))return!1;return!0},xr=Xn,$e=function($t,ye){for(var ir=0;ir<$t.length;ir++)if(ye($t[ir],ir))return!0;return!1},Tr=$e,qr=Object.prototype.hasOwnProperty;function gn($t,ye){if(!ye||!F($t))return{};for(var ir={},dr=A(ye)?ye:function(Sa){return Sa[ye]},Zr,Ln=0;Ln<$t.length;Ln++){var Qn=$t[Ln];Zr=dr(Qn),qr.call(ir,Zr)?ir[Zr].push(Qn):ir[Zr]=[Qn]}return ir}var xn=gn;function Rn($t,ye){if(!ye)return{0:$t};if(!A(ye)){var ir=F(ye)?ye:ye.replace(/\s+/g,"").split("*");ye=function(dr){for(var Zr="_",Ln=0,Qn=ir.length;Ln<Qn;Ln++)Zr+=dr[ir[Ln]]&&dr[ir[Ln]].toString();return Zr}}return xn($t,ye)}var Mr=function($t,ye){if(!ye)return[$t];var ir=Rn($t,ye),dr=[];for(var Zr in ir)dr.push(ir[Zr]);return dr};function dn($t,ye){return $t["_wrap_"+ye]}var hn=dn;function sn($t,ye){if($t["_wrap_"+ye])return $t["_wrap_"+ye];var ir=function(dr){$t[ye](dr)};return $t["_wrap_"+ye]=ir,ir}var Wn=sn,Mn={};function In($t){var ye=Mn[$t];if(!ye){for(var ir=$t.toString(16),dr=ir.length;dr<6;dr++)ir="0"+ir;ye="#"+ir,Mn[$t]=ye}return ye}var jn=In;function at($t){var ye=0,ir=0,dr=0,Zr=0;return F($t)?$t.length===1?ye=ir=dr=Zr=$t[0]:$t.length===2?(ye=dr=$t[0],ir=Zr=$t[1]):$t.length===3?(ye=$t[0],ir=Zr=$t[1],dr=$t[2]):(ye=$t[0],ir=$t[1],dr=$t[2],Zr=$t[3]):ye=ir=dr=Zr=$t,{r1:ye,r2:ir,r3:dr,r4:Zr}}var Je=at,Ht=function($t,ye,ir){return $t<ye?ye:$t>ir?ir:$t},te=Ht,wt=function($t,ye){var ir=ye.toString(),dr=ir.indexOf(".");if(dr===-1)return Math.round($t);var Zr=ir.substr(dr+1).length;return Zr>20&&(Zr=20),parseFloat($t.toFixed(Zr))},Me=wt,kt=function($t){return g($t,"Number")},qt=kt,dt=function($t){return qt($t)&&$t%1!==0},Ut=dt,Q=function($t){return qt($t)&&$t%2===0},ot=Q,R=Number.isInteger?Number.isInteger:function($t){return qt($t)&&$t%1===0},M=R,O=function($t){return qt($t)&&$t<0},X=O,mt=1e-5;function Ft($t,ye,ir){return ir===void 0&&(ir=mt),Math.abs($t-ye)<ir}var Bt=function($t){return qt($t)&&$t%2!==0},ee=Bt,Le=function($t){return qt($t)&&$t>0},me=Le,Xe=function($t,ye){if(F($t)){for(var ir,dr=-1/0,Zr=0;Zr<$t.length;Zr++){var Ln=$t[Zr],Qn=A(ye)?ye(Ln):Ln[ye];Qn>dr&&(ir=Ln,dr=Qn)}return ir}},pr=function($t,ye){if(F($t)){for(var ir,dr=1/0,Zr=0;Zr<$t.length;Zr++){var Ln=$t[Zr],Qn=A(ye)?ye(Ln):Ln[ye];Qn<dr&&(ir=Ln,dr=Qn)}return ir}},Ze=function($t,ye){return($t%ye+ye)%ye},Pr=Ze,un=180/Math.PI,Ke=function($t){return un*$t},lr=Ke,Rr=parseInt,Dr=Math.PI/180,ce=function($t){return Dr*$t},jt=ce,pe=h,Oe=function($t,ye){return $t.hasOwnProperty(ye)},Se=Oe,Fe=Object.values?function($t){return Object.values($t)}:function($t){var ye=[];return h($t,function(ir,dr){A($t)&&dr==="prototype"||ye.push(ir)}),ye},or=Fe,gr=function($t,ye){return T(or($t),ye)},Jr=function($t){return D($t)?"":$t.toString()},Gn=function($t){return Jr($t).toLowerCase()},pn=Gn,qn=function($t){var ye=Jr($t);return ye.charAt(0).toLowerCase()+ye.substring(1)},ln=qn;function Vn($t,ye){return!$t||!ye?$t:$t.replace(/\\?\{([^{}]+)\}/g,function(ir,dr){return ir.charAt(0)==="\\"?ir.slice(1):ye[dr]===void 0?"":ye[dr]})}var ca=Vn,ba=function($t){return Jr($t).toUpperCase()},Ea=ba,Ni=function($t){var ye=Jr($t);return ye.charAt(0).toUpperCase()+ye.substring(1)},ti=Ni,ei={}.toString,wi=function($t){return ei.call($t).replace(/^\[object /,"").replace(/]$/,"")},Gi=wi,Co=function($t){return g($t,"Arguments")},eo=Co,ga=function($t){return g($t,"Boolean")},lo=ga,To=function($t){return g($t,"Date")},ni=To,Ri=function($t){return g($t,"Error")},ho=Ri;function Po($t){return qt($t)&&isFinite($t)}var ro=function($t){return $t===null},no=ro,es=Object.prototype,vo=function($t){var ye=$t&&$t.constructor,ir=typeof ye=="function"&&ye.prototype||es;return $t===ir},Si=vo,ao=function($t){return g($t,"RegExp")},Jo=ao,Yt=function($t){return $t===void 0},de=Yt,Ge=function($t){return $t instanceof Element||$t instanceof HTMLDocument},sr=Ge;function Lr($t){var ye=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ir){return setTimeout(ir,16)};return ye($t)}function Nr($t){var ye=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ye($t)}function Sr($t,ye){for(var ir in ye)ye.hasOwnProperty(ir)&&ir!=="constructor"&&ye[ir]!==void 0&&($t[ir]=ye[ir])}function en($t,ye,ir,dr){return ye&&Sr($t,ye),ir&&Sr($t,ir),dr&&Sr($t,dr),$t}var fn=function(){for(var $t=[],ye=0;ye<arguments.length;ye++)$t[ye]=arguments[ye];for(var ir=$t[0],dr=1;dr<$t.length;dr++){var Zr=$t[dr];A(Zr)&&(Zr=Zr.prototype),en(ir.prototype,Zr)}},Pn=fn,sa=function($t){if(typeof $t!="object"||$t===null)return $t;var ye;if(F($t)){ye=[];for(var ir=0,dr=$t.length;ir<dr;ir++)typeof $t[ir]=="object"&&$t[ir]!=null?ye[ir]=sa($t[ir]):ye[ir]=$t[ir]}else{ye={};for(var Zr in $t)typeof $t[Zr]=="object"&&$t[Zr]!=null?ye[Zr]=sa($t[Zr]):ye[Zr]=$t[Zr]}return ye},Zn=sa;function pa($t,ye,ir){var dr;return function(){var Zr=this,Ln=arguments,Qn=function(){dr=null,ir||$t.apply(Zr,Ln)},Sa=ir&&!dr;clearTimeout(dr),dr=setTimeout(Qn,ye),Sa&&$t.apply(Zr,Ln)}}var ya=pa,di=function($t,ye){if(!A($t))throw new TypeError("Expected a function");var ir=function(){for(var dr=[],Zr=0;Zr<arguments.length;Zr++)dr[Zr]=arguments[Zr];var Ln=ye?ye.apply(this,dr):dr[0],Qn=ir.cache;if(Qn.has(Ln))return Qn.get(Ln);var Sa=$t.apply(this,dr);return Qn.set(Ln,Sa),Sa};return ir.cache=new Map,ir},Ma=5;function oa($t,ye,ir,dr){ir=ir||0,dr=dr||Ma;for(var Zr in ye)if(ye.hasOwnProperty(Zr)){var Ln=ye[Zr];Ln!==null&&rt(Ln)?(rt($t[Zr])||($t[Zr]={}),ir<dr?oa($t[Zr],Ln,ir+1,dr):$t[Zr]=ye[Zr]):F(Ln)?($t[Zr]=[],$t[Zr]=$t[Zr].concat(Ln)):Ln!==void 0&&($t[Zr]=Ln)}}var si=function($t){for(var ye=[],ir=1;ir<arguments.length;ir++)ye[ir-1]=arguments[ir];for(var dr=0;dr<ye.length;dr+=1)oa($t,ye[dr]);return $t},$a=si,Fa=function($t,ye,ir,dr){A(ye)||(ir=ye,ye=$t,$t=function(){});var Zr=Object.create?function(Qn,Sa){return Object.create(Qn,{constructor:{value:Sa}})}:function(Qn,Sa){function Ci(){}Ci.prototype=Qn;var Io=new Ci;return Io.constructor=Sa,Io},Ln=Zr(ye.prototype,$t);return $t.prototype=en(Ln,$t.prototype),$t.superclass=Zr(ye.prototype,ye),en(Ln,ir),en($t,dr),$t},Ui=Fa,fi=function($t,ye){if(!k($t))return-1;var ir=Array.prototype.indexOf;if(ir)return ir.call($t,ye);for(var dr=-1,Zr=0;Zr<$t.length;Zr++)if($t[Zr]===ye){dr=Zr;break}return dr},La=fi,ja=Object.prototype.hasOwnProperty;function za($t){if(D($t))return!0;if(k($t))return!$t.length;var ye=Gi($t);if(ye==="Map"||ye==="Set")return!$t.size;if(Si($t))return!Object.keys($t).length;for(var ir in $t)if(ja.call($t,ir))return!1;return!0}var yi=za,mi=function($t,ye){if($t===ye)return!0;if(!$t||!ye||xe($t)||xe(ye))return!1;if(k($t)||k(ye)){if($t.length!==ye.length)return!1;for(var ir=!0,dr=0;dr<$t.length&&(ir=mi($t[dr],ye[dr]),!!ir);dr++);return ir}if(q($t)||q(ye)){var Zr=Object.keys($t),Ln=Object.keys(ye);if(Zr.length!==Ln.length)return!1;for(var ir=!0,dr=0;dr<Zr.length&&(ir=mi($t[Zr[dr]],ye[Zr[dr]]),!!ir);dr++);return ir}return!1},ki=mi,po=function($t,ye,ir){return A(ir)?!!ir($t,ye):ki($t,ye)},Wi=function($t,ye){if(!k($t))return $t;for(var ir=[],dr=0;dr<$t.length;dr++){var Zr=$t[dr];ir.push(ye(Zr,dr))}return ir},Ao=Wi,Vo=function($t){return $t},os=function($t,ye){ye===void 0&&(ye=Vo);var ir={};return Y($t)&&!D($t)&&Object.keys($t).forEach(function(dr){ir[dr]=ye($t[dr],dr)}),ir},$i=function($t,ye,ir){for(var dr=0,Zr=xe(ye)?ye.split("."):ye;$t&&dr<Zr.length;)$t=$t[Zr[dr++]];return $t===void 0||dr<Zr.length?ir:$t},qa=function($t,ye,ir){var dr=$t,Zr=xe(ye)?ye.split("."):ye;return Zr.forEach(function(Ln,Qn){Qn<Zr.length-1?(Y(dr[Ln])||(dr[Ln]=qt(Zr[Qn+1])?[]:{}),dr=dr[Ln]):dr[Ln]=ir}),$t},Yi=Object.prototype.hasOwnProperty,io=function($t,ye){if($t===null||!rt($t))return{};var ir={};return h(ye,function(dr){Yi.call($t,dr)&&(ir[dr]=$t[dr])}),ir},Qa=function($t,ye){return Wt($t,function(ir,dr,Zr){return ye.includes(Zr)||(ir[Zr]=dr),ir},{})},Pi=function($t,ye,ir){var dr,Zr,Ln,Qn,Sa=0;ir||(ir={});var Ci=function(){Sa=ir.leading===!1?0:Date.now(),dr=null,Qn=$t.apply(Zr,Ln),dr||(Zr=Ln=null)},Io=function(){var Go=Date.now();!Sa&&ir.leading===!1&&(Sa=Go);var zs=ye-(Go-Sa);return Zr=this,Ln=arguments,zs<=0||zs>ye?(dr&&(clearTimeout(dr),dr=null),Sa=Go,Qn=$t.apply(Zr,Ln),dr||(Zr=Ln=null)):!dr&&ir.trailing!==!1&&(dr=setTimeout(Ci,zs)),Qn};return Io.cancel=function(){clearTimeout(dr),Sa=0,dr=Zr=Ln=null},Io},zo=function($t){return k($t)?Array.prototype.slice.call($t):[]},qi={},rs=function($t){return $t=$t||"g",qi[$t]?qi[$t]+=1:qi[$t]=1,$t+qi[$t]},Xi=function(){},yo=function($t){return $t};function Es($t){return D($t)?0:k($t)?$t.length:Object.keys($t).length}var ds=C(197582),oo,ls=di(function($t,ye){ye===void 0&&(ye={});var ir=ye.fontSize,dr=ye.fontFamily,Zr=ye.fontWeight,Ln=ye.fontStyle,Qn=ye.fontVariant;return oo||(oo=document.createElement("canvas").getContext("2d")),oo.font=[Ln,Qn,Zr,ir+"px",dr].join(" "),oo.measureText(xe($t)?$t:"").width},function($t,ye){return ye===void 0&&(ye={}),(0,ds.__spreadArrays)([$t],or(ye)).join("")}),hs=function($t,ye,ir,dr){dr===void 0&&(dr="...");var Zr=16,Ln=ls(dr,ir),Qn=xe($t)?$t:Jr($t),Sa=ye,Ci=[],Io,Go;if(ls($t,ir)<=ye)return $t;for(;Io=Qn.substr(0,Zr),Go=ls(Io,ir),!(Go+Ln>Sa&&Go>Sa);)if(Ci.push(Io),Sa-=Go,Qn=Qn.substr(Zr),!Qn)return Ci.join("");for(;Io=Qn.substr(0,1),Go=ls(Io,ir),!(Go+Ln>Sa);)if(Ci.push(Io),Sa-=Go,Qn=Qn.substr(1),!Qn)return Ci.join("");return""+Ci.join("")+dr},Os=function(){function $t(){this.map={}}return $t.prototype.has=function(ye){return this.map[ye]!==void 0},$t.prototype.get=function(ye,ir){var dr=this.map[ye];return dr===void 0?ir:dr},$t.prototype.set=function(ye,ir){this.map[ye]=ir},$t.prototype.clear=function(){this.map={}},$t.prototype.delete=function(ye){delete this.map[ye]},$t.prototype.size=function(){return Object.keys(this.map).length},$t}(),Ho=Os},960887:function(Ve,z,C){"use strict";C.d(z,{LB:function(){return ba},g4:function(){return Tr},we:function(){return sn},pE:function(){return ft},VK:function(){return It},Cj:function(){return wi},O1:function(){return ei},Zj:function(){return eo},VT:function(){return b},Dy:function(){return h}});var x=C(667294),k=C(973935),w=C(724285);const T={display:"none"};function L(Yt){let{id:de,value:Ge}=Yt;return x.createElement("div",{id:de,style:T},Ge)}const P={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function p(Yt){let{id:de,announcement:Ge}=Yt;return x.createElement("div",{id:de,style:P,role:"status","aria-live":"assertive","aria-atomic":!0},Ge)}function m(){const[Yt,de]=(0,x.useState)("");return{announce:(0,x.useCallback)(sr=>{sr!=null&&de(sr)},[]),announcement:Yt}}const S=(0,x.createContext)(null);function y(Yt){const de=(0,x.useContext)(S);(0,x.useEffect)(()=>{if(!de)throw new Error("useDndMonitor must be used within a children of <DndContext>");return de(Yt)},[Yt,de])}function g(){const[Yt]=(0,x.useState)(()=>new Set),de=(0,x.useCallback)(sr=>(Yt.add(sr),()=>Yt.delete(sr)),[Yt]);return[(0,x.useCallback)(sr=>{let{type:Lr,event:Nr}=sr;Yt.forEach(Sr=>{var en;return(en=Sr[Lr])==null?void 0:en.call(Sr,Nr)})},[Yt]),de]}const A={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},E={onDragStart(Yt){let{active:de}=Yt;return"Picked up draggable item "+de.id+"."},onDragOver(Yt){let{active:de,over:Ge}=Yt;return Ge?"Draggable item "+de.id+" was moved over droppable area "+Ge.id+".":"Draggable item "+de.id+" is no longer over a droppable area."},onDragEnd(Yt){let{active:de,over:Ge}=Yt;return Ge?"Draggable item "+de.id+" was dropped over droppable area "+Ge.id:"Draggable item "+de.id+" was dropped."},onDragCancel(Yt){let{active:de}=Yt;return"Dragging was cancelled. Draggable item "+de.id+" was dropped."}};function D(Yt){let{announcements:de=E,container:Ge,hiddenTextDescribedById:sr,screenReaderInstructions:Lr=A}=Yt;const{announce:Nr,announcement:Sr}=m(),en=(0,w.Ld)("DndLiveRegion"),[fn,Pn]=(0,x.useState)(!1);if((0,x.useEffect)(()=>{Pn(!0)},[]),y((0,x.useMemo)(()=>({onDragStart(Zn){let{active:pa}=Zn;Nr(de.onDragStart({active:pa}))},onDragMove(Zn){let{active:pa,over:ya}=Zn;de.onDragMove&&Nr(de.onDragMove({active:pa,over:ya}))},onDragOver(Zn){let{active:pa,over:ya}=Zn;Nr(de.onDragOver({active:pa,over:ya}))},onDragEnd(Zn){let{active:pa,over:ya}=Zn;Nr(de.onDragEnd({active:pa,over:ya}))},onDragCancel(Zn){let{active:pa,over:ya}=Zn;Nr(de.onDragCancel({active:pa,over:ya}))}}),[Nr,de])),!fn)return null;const sa=x.createElement(x.Fragment,null,x.createElement(L,{id:sr,value:Lr.draggable}),x.createElement(p,{id:en,announcement:Sr}));return Ge?(0,k.createPortal)(sa,Ge):sa}var F;(function(Yt){Yt.DragStart="dragStart",Yt.DragMove="dragMove",Yt.DragEnd="dragEnd",Yt.DragCancel="dragCancel",Yt.DragOver="dragOver",Yt.RegisterDroppable="registerDroppable",Yt.SetDroppableDisabled="setDroppableDisabled",Yt.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function Y(){}function b(Yt,de){return(0,x.useMemo)(()=>({sensor:Yt,options:de!=null?de:{}}),[Yt,de])}function h(){for(var Yt=arguments.length,de=new Array(Yt),Ge=0;Ge<Yt;Ge++)de[Ge]=arguments[Ge];return(0,x.useMemo)(()=>[...de].filter(sr=>sr!=null),[...de])}const $=Object.freeze({x:0,y:0});function U(Yt,de){return Math.sqrt(Math.pow(Yt.x-de.x,2)+Math.pow(Yt.y-de.y,2))}function W(Yt,de){const Ge=getEventCoordinates(Yt);if(!Ge)return"0 0";const sr={x:(Ge.x-de.left)/de.width*100,y:(Ge.y-de.top)/de.height*100};return sr.x+"% "+sr.y+"%"}function V(Yt,de){let{data:{value:Ge}}=Yt,{data:{value:sr}}=de;return Ge-sr}function H(Yt,de){let{data:{value:Ge}}=Yt,{data:{value:sr}}=de;return sr-Ge}function q(Yt){let{left:de,top:Ge,height:sr,width:Lr}=Yt;return[{x:de,y:Ge},{x:de+Lr,y:Ge},{x:de,y:Ge+sr},{x:de+Lr,y:Ge+sr}]}function tt(Yt,de){if(!Yt||Yt.length===0)return null;const[Ge]=Yt;return de?Ge[de]:Ge}function rt(Yt,de,Ge){return de===void 0&&(de=Yt.left),Ge===void 0&&(Ge=Yt.top),{x:de+Yt.width*.5,y:Ge+Yt.height*.5}}const ft=Yt=>{let{collisionRect:de,droppableRects:Ge,droppableContainers:sr}=Yt;const Lr=rt(de,de.left,de.top),Nr=[];for(const Sr of sr){const{id:en}=Sr,fn=Ge.get(en);if(fn){const Pn=U(rt(fn),Lr);Nr.push({id:en,data:{droppableContainer:Sr,value:Pn}})}}return Nr.sort(V)},it=Yt=>{let{collisionRect:de,droppableRects:Ge,droppableContainers:sr}=Yt;const Lr=q(de),Nr=[];for(const Sr of sr){const{id:en}=Sr,fn=Ge.get(en);if(fn){const Pn=q(fn),sa=Lr.reduce((pa,ya,di)=>pa+U(Pn[di],ya),0),Zn=Number((sa/4).toFixed(4));Nr.push({id:en,data:{droppableContainer:Sr,value:Zn}})}}return Nr.sort(V)};function bt(Yt,de){const Ge=Math.max(de.top,Yt.top),sr=Math.max(de.left,Yt.left),Lr=Math.min(de.left+de.width,Yt.left+Yt.width),Nr=Math.min(de.top+de.height,Yt.top+Yt.height),Sr=Lr-sr,en=Nr-Ge;if(sr<Lr&&Ge<Nr){const fn=de.width*de.height,Pn=Yt.width*Yt.height,sa=Sr*en,Zn=sa/(fn+Pn-sa);return Number(Zn.toFixed(4))}return 0}const gt=Yt=>{let{collisionRect:de,droppableRects:Ge,droppableContainers:sr}=Yt;const Lr=[];for(const Nr of sr){const{id:Sr}=Nr,en=Ge.get(Sr);if(en){const fn=bt(en,de);fn>0&&Lr.push({id:Sr,data:{droppableContainer:Nr,value:fn}})}}return Lr.sort(H)};function Xt(Yt,de){const{top:Ge,left:sr,bottom:Lr,right:Nr}=de;return Ge<=Yt.y&&Yt.y<=Lr&&sr<=Yt.x&&Yt.x<=Nr}const Ct=Yt=>{let{droppableContainers:de,droppableRects:Ge,pointerCoordinates:sr}=Yt;if(!sr)return[];const Lr=[];for(const Nr of de){const{id:Sr}=Nr,en=Ge.get(Sr);if(en&&Xt(sr,en)){const Pn=q(en).reduce((Zn,pa)=>Zn+U(sr,pa),0),sa=Number((Pn/4).toFixed(4));Lr.push({id:Sr,data:{droppableContainer:Nr,value:sa}})}}return Lr.sort(V)};function At(Yt,de,Ge){return mo(Da({},Yt),{scaleX:de&&Ge?de.width/Ge.width:1,scaleY:de&&Ge?de.height/Ge.height:1})}function Z(Yt,de){return Yt&&de?{x:Yt.left-de.left,y:Yt.top-de.top}:$}function J(Yt){return function(Ge){for(var sr=arguments.length,Lr=new Array(sr>1?sr-1:0),Nr=1;Nr<sr;Nr++)Lr[Nr-1]=arguments[Nr];return Lr.reduce((Sr,en)=>mo(Da({},Sr),{top:Sr.top+Yt*en.y,bottom:Sr.bottom+Yt*en.y,left:Sr.left+Yt*en.x,right:Sr.right+Yt*en.x}),Da({},Ge))}}const yt=J(1);function _t(Yt){if(Yt.startsWith("matrix3d(")){const de=Yt.slice(9,-1).split(/, /);return{x:+de[12],y:+de[13],scaleX:+de[0],scaleY:+de[5]}}else if(Yt.startsWith("matrix(")){const de=Yt.slice(7,-1).split(/, /);return{x:+de[4],y:+de[5],scaleX:+de[0],scaleY:+de[3]}}return null}function nt(Yt,de,Ge){const sr=_t(de);if(!sr)return Yt;const{scaleX:Lr,scaleY:Nr,x:Sr,y:en}=sr,fn=Yt.left-Sr-(1-Lr)*parseFloat(Ge),Pn=Yt.top-en-(1-Nr)*parseFloat(Ge.slice(Ge.indexOf(" ")+1)),sa=Lr?Yt.width/Lr:Yt.width,Zn=Nr?Yt.height/Nr:Yt.height;return{width:sa,height:Zn,top:Pn,right:fn+sa,bottom:Pn+Zn,left:fn}}const vt={ignoreTransform:!1};function It(Yt,de){de===void 0&&(de=vt);let Ge=Yt.getBoundingClientRect();if(de.ignoreTransform){const{transform:Pn,transformOrigin:sa}=(0,w.Jj)(Yt).getComputedStyle(Yt);Pn&&(Ge=nt(Ge,Pn,sa))}const{top:sr,left:Lr,width:Nr,height:Sr,bottom:en,right:fn}=Ge;return{top:sr,left:Lr,width:Nr,height:Sr,bottom:en,right:fn}}function Pt(Yt){return It(Yt,{ignoreTransform:!0})}function St(Yt){const de=Yt.innerWidth,Ge=Yt.innerHeight;return{top:0,left:0,right:de,bottom:Ge,width:de,height:Ge}}function Dt(Yt,de){return de===void 0&&(de=(0,w.Jj)(Yt).getComputedStyle(Yt)),de.position==="fixed"}function Qt(Yt,de){de===void 0&&(de=(0,w.Jj)(Yt).getComputedStyle(Yt));const Ge=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Lr=>{const Nr=de[Lr];return typeof Nr=="string"?Ge.test(Nr):!1})}function ue(Yt,de){const Ge=[];function sr(Lr){if(de!=null&&Ge.length>=de||!Lr)return Ge;if((0,w.qk)(Lr)&&Lr.scrollingElement!=null&&!Ge.includes(Lr.scrollingElement))return Ge.push(Lr.scrollingElement),Ge;if(!(0,w.Re)(Lr)||(0,w.vZ)(Lr)||Ge.includes(Lr))return Ge;const Nr=(0,w.Jj)(Yt).getComputedStyle(Lr);return Lr!==Yt&&Qt(Lr,Nr)&&Ge.push(Lr),Dt(Lr,Nr)?Ge:sr(Lr.parentNode)}return Yt?sr(Yt):Ge}function ie(Yt){const[de]=ue(Yt,1);return de!=null?de:null}function Lt(Yt){return!w.Nq||!Yt?null:(0,w.FJ)(Yt)?Yt:(0,w.UG)(Yt)?(0,w.qk)(Yt)||Yt===(0,w.r3)(Yt).scrollingElement?window:(0,w.Re)(Yt)?Yt:null:null}function ne(Yt){return(0,w.FJ)(Yt)?Yt.scrollX:Yt.scrollLeft}function ve(Yt){return(0,w.FJ)(Yt)?Yt.scrollY:Yt.scrollTop}function Wt(Yt){return{x:ne(Yt),y:ve(Yt)}}var ae;(function(Yt){Yt[Yt.Forward=1]="Forward",Yt[Yt.Backward=-1]="Backward"})(ae||(ae={}));function Ce(Yt){return!w.Nq||!Yt?!1:Yt===document.scrollingElement}function xe(Yt){const de={x:0,y:0},Ge=Ce(Yt)?{height:window.innerHeight,width:window.innerWidth}:{height:Yt.clientHeight,width:Yt.clientWidth},sr={x:Yt.scrollWidth-Ge.width,y:Yt.scrollHeight-Ge.height},Lr=Yt.scrollTop<=de.y,Nr=Yt.scrollLeft<=de.x,Sr=Yt.scrollTop>=sr.y,en=Yt.scrollLeft>=sr.x;return{isTop:Lr,isLeft:Nr,isBottom:Sr,isRight:en,maxScroll:sr,minScroll:de}}const Jt={x:.2,y:.2};function we(Yt,de,Ge,sr,Lr){let{top:Nr,left:Sr,right:en,bottom:fn}=Ge;sr===void 0&&(sr=10),Lr===void 0&&(Lr=Jt);const{isTop:Pn,isBottom:sa,isLeft:Zn,isRight:pa}=xe(Yt),ya={x:0,y:0},di={x:0,y:0},Ma={height:de.height*Lr.y,width:de.width*Lr.x};return!Pn&&Nr<=de.top+Ma.height?(ya.y=ae.Backward,di.y=sr*Math.abs((de.top+Ma.height-Nr)/Ma.height)):!sa&&fn>=de.bottom-Ma.height&&(ya.y=ae.Forward,di.y=sr*Math.abs((de.bottom-Ma.height-fn)/Ma.height)),!pa&&en>=de.right-Ma.width?(ya.x=ae.Forward,di.x=sr*Math.abs((de.right-Ma.width-en)/Ma.width)):!Zn&&Sr<=de.left+Ma.width&&(ya.x=ae.Backward,di.x=sr*Math.abs((de.left+Ma.width-Sr)/Ma.width)),{direction:ya,speed:di}}function Tt(Yt){if(Yt===document.scrollingElement){const{innerWidth:Nr,innerHeight:Sr}=window;return{top:0,left:0,right:Nr,bottom:Sr,width:Nr,height:Sr}}const{top:de,left:Ge,right:sr,bottom:Lr}=Yt.getBoundingClientRect();return{top:de,left:Ge,right:sr,bottom:Lr,width:Yt.clientWidth,height:Yt.clientHeight}}function Pe(Yt){return Yt.reduce((de,Ge)=>(0,w.IH)(de,Wt(Ge)),$)}function _r(Yt){return Yt.reduce((de,Ge)=>de+ne(Ge),0)}function Ar(Yt){return Yt.reduce((de,Ge)=>de+ve(Ge),0)}function Or(Yt,de){if(de===void 0&&(de=It),!Yt)return;const{top:Ge,left:sr,bottom:Lr,right:Nr}=de(Yt);ie(Yt)&&(Lr<=0||Nr<=0||Ge>=window.innerHeight||sr>=window.innerWidth)&&Yt.scrollIntoView({block:"center",inline:"center"})}const Br=[["x",["left","right"],_r],["y",["top","bottom"],Ar]];class cn{constructor(de,Ge){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const sr=ue(Ge),Lr=Pe(sr);this.rect=Da({},de),this.width=de.width,this.height=de.height;for(const[Nr,Sr,en]of Br)for(const fn of Sr)Object.defineProperty(this,fn,{get:()=>{const Pn=en(sr),sa=Lr[Nr]-Pn;return this.rect[fn]+sa},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class an{constructor(de){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Ge=>{var sr;return(sr=this.target)==null?void 0:sr.removeEventListener(...Ge)})},this.target=de}add(de,Ge,sr){var Lr;(Lr=this.target)==null||Lr.addEventListener(de,Ge,sr),this.listeners.push([de,Ge,sr])}}function Dn(Yt){const{EventTarget:de}=(0,w.Jj)(Yt);return Yt instanceof de?Yt:(0,w.r3)(Yt)}function Un(Yt,de){const Ge=Math.abs(Yt.x),sr=Math.abs(Yt.y);return typeof de=="number"?Math.sqrt(Ov(Ge,2)+Ov(sr,2))>de:"x"in de&&"y"in de?Ge>de.x&&sr>de.y:"x"in de?Ge>de.x:"y"in de?sr>de.y:!1}var Xn;(function(Yt){Yt.Click="click",Yt.DragStart="dragstart",Yt.Keydown="keydown",Yt.ContextMenu="contextmenu",Yt.Resize="resize",Yt.SelectionChange="selectionchange",Yt.VisibilityChange="visibilitychange"})(Xn||(Xn={}));function xr(Yt){Yt.preventDefault()}function $e(Yt){Yt.stopPropagation()}var Tr;(function(Yt){Yt.Space="Space",Yt.Down="ArrowDown",Yt.Right="ArrowRight",Yt.Left="ArrowLeft",Yt.Up="ArrowUp",Yt.Esc="Escape",Yt.Enter="Enter"})(Tr||(Tr={}));const qr={start:[Tr.Space,Tr.Enter],cancel:[Tr.Esc],end:[Tr.Space,Tr.Enter]},gn=(Yt,de)=>{let{currentCoordinates:Ge}=de;switch(Yt.code){case Tr.Right:return mo(Da({},Ge),{x:Ge.x+25});case Tr.Left:return mo(Da({},Ge),{x:Ge.x-25});case Tr.Down:return mo(Da({},Ge),{y:Ge.y+25});case Tr.Up:return mo(Da({},Ge),{y:Ge.y-25})}};class xn{constructor(de){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=de;const{event:{target:Ge}}=de;this.props=de,this.listeners=new an((0,w.r3)(Ge)),this.windowListeners=new an((0,w.Jj)(Ge)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xn.Resize,this.handleCancel),this.windowListeners.add(Xn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:de,onStart:Ge}=this.props,sr=de.node.current;sr&&Or(sr),Ge($)}handleKeyDown(de){if((0,w.vd)(de)){const{active:Ge,context:sr,options:Lr}=this.props,{keyboardCodes:Nr=qr,coordinateGetter:Sr=gn,scrollBehavior:en="smooth"}=Lr,{code:fn}=de;if(Nr.end.includes(fn)){this.handleEnd(de);return}if(Nr.cancel.includes(fn)){this.handleCancel(de);return}const{collisionRect:Pn}=sr.current,sa=Pn?{x:Pn.left,y:Pn.top}:$;this.referenceCoordinates||(this.referenceCoordinates=sa);const Zn=Sr(de,{active:Ge,context:sr.current,currentCoordinates:sa});if(Zn){const pa=(0,w.$X)(Zn,sa),ya={x:0,y:0},{scrollableAncestors:di}=sr.current;for(const Ma of di){const oa=de.code,{isTop:si,isRight:$a,isLeft:Fa,isBottom:Ui,maxScroll:fi,minScroll:La}=xe(Ma),ja=Tt(Ma),za={x:Math.min(oa===Tr.Right?ja.right-ja.width/2:ja.right,Math.max(oa===Tr.Right?ja.left:ja.left+ja.width/2,Zn.x)),y:Math.min(oa===Tr.Down?ja.bottom-ja.height/2:ja.bottom,Math.max(oa===Tr.Down?ja.top:ja.top+ja.height/2,Zn.y))},yi=oa===Tr.Right&&!$a||oa===Tr.Left&&!Fa,mi=oa===Tr.Down&&!Ui||oa===Tr.Up&&!si;if(yi&&za.x!==Zn.x){const ki=Ma.scrollLeft+pa.x,po=oa===Tr.Right&&ki<=fi.x||oa===Tr.Left&&ki>=La.x;if(po&&!pa.y){Ma.scrollTo({left:ki,behavior:en});return}po?ya.x=Ma.scrollLeft-ki:ya.x=oa===Tr.Right?Ma.scrollLeft-fi.x:Ma.scrollLeft-La.x,ya.x&&Ma.scrollBy({left:-ya.x,behavior:en});break}else if(mi&&za.y!==Zn.y){const ki=Ma.scrollTop+pa.y,po=oa===Tr.Down&&ki<=fi.y||oa===Tr.Up&&ki>=La.y;if(po&&!pa.x){Ma.scrollTo({top:ki,behavior:en});return}po?ya.y=Ma.scrollTop-ki:ya.y=oa===Tr.Down?Ma.scrollTop-fi.y:Ma.scrollTop-La.y,ya.y&&Ma.scrollBy({top:-ya.y,behavior:en});break}}this.handleMove(de,(0,w.IH)((0,w.$X)(Zn,this.referenceCoordinates),ya))}}}handleMove(de,Ge){const{onMove:sr}=this.props;de.preventDefault(),sr(Ge)}handleEnd(de){const{onEnd:Ge}=this.props;de.preventDefault(),this.detach(),Ge()}handleCancel(de){const{onCancel:Ge}=this.props;de.preventDefault(),this.detach(),Ge()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xn.activators=[{eventName:"onKeyDown",handler:(Yt,de,Ge)=>{let{keyboardCodes:sr=qr,onActivation:Lr}=de,{active:Nr}=Ge;const{code:Sr}=Yt.nativeEvent;if(sr.start.includes(Sr)){const en=Nr.activatorNode.current;return en&&Yt.target!==en?!1:(Yt.preventDefault(),Lr==null||Lr({event:Yt.nativeEvent}),!0)}return!1}}];function Rn(Yt){return!!(Yt&&"distance"in Yt)}function Mr(Yt){return!!(Yt&&"delay"in Yt)}class dn{constructor(de,Ge,sr){var Lr;sr===void 0&&(sr=Dn(de.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=de,this.events=Ge;const{event:Nr}=de,{target:Sr}=Nr;this.props=de,this.events=Ge,this.document=(0,w.r3)(Sr),this.documentListeners=new an(this.document),this.listeners=new an(sr),this.windowListeners=new an((0,w.Jj)(Sr)),this.initialCoordinates=(Lr=(0,w.DC)(Nr))!=null?Lr:$,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:de,props:{options:{activationConstraint:Ge}}}=this;if(this.listeners.add(de.move.name,this.handleMove,{passive:!1}),this.listeners.add(de.end.name,this.handleEnd),this.windowListeners.add(Xn.Resize,this.handleCancel),this.windowListeners.add(Xn.DragStart,xr),this.windowListeners.add(Xn.VisibilityChange,this.handleCancel),this.windowListeners.add(Xn.ContextMenu,xr),this.documentListeners.add(Xn.Keydown,this.handleKeydown),Ge){if(Rn(Ge))return;if(Mr(Ge)){this.timeoutId=setTimeout(this.handleStart,Ge.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:de}=this,{onStart:Ge}=this.props;de&&(this.activated=!0,this.documentListeners.add(Xn.Click,$e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xn.SelectionChange,this.removeTextSelection),Ge(de))}handleMove(de){var Ge;const{activated:sr,initialCoordinates:Lr,props:Nr}=this,{onMove:Sr,options:{activationConstraint:en}}=Nr;if(!Lr)return;const fn=(Ge=(0,w.DC)(de))!=null?Ge:$,Pn=(0,w.$X)(Lr,fn);if(!sr&&en){if(Mr(en))return Un(Pn,en.tolerance)?this.handleCancel():void 0;if(Rn(en))return en.tolerance!=null&&Un(Pn,en.tolerance)?this.handleCancel():Un(Pn,en.distance)?this.handleStart():void 0}de.cancelable&&de.preventDefault(),Sr(fn)}handleEnd(){const{onEnd:de}=this.props;this.detach(),de()}handleCancel(){const{onCancel:de}=this.props;this.detach(),de()}handleKeydown(de){de.code===Tr.Esc&&this.handleCancel()}removeTextSelection(){var de;(de=this.document.getSelection())==null||de.removeAllRanges()}}const hn={move:{name:"pointermove"},end:{name:"pointerup"}};class sn extends dn{constructor(de){const{event:Ge}=de,sr=(0,w.r3)(Ge.target);super(de,hn,sr)}}sn.activators=[{eventName:"onPointerDown",handler:(Yt,de)=>{let{nativeEvent:Ge}=Yt,{onActivation:sr}=de;return!Ge.isPrimary||Ge.button!==0?!1:(sr==null||sr({event:Ge}),!0)}}];const Wn={move:{name:"mousemove"},end:{name:"mouseup"}};var Mn;(function(Yt){Yt[Yt.RightClick=2]="RightClick"})(Mn||(Mn={}));class In extends dn{constructor(de){super(de,Wn,(0,w.r3)(de.event.target))}}In.activators=[{eventName:"onMouseDown",handler:(Yt,de)=>{let{nativeEvent:Ge}=Yt,{onActivation:sr}=de;return Ge.button===Mn.RightClick?!1:(sr==null||sr({event:Ge}),!0)}}];const jn={move:{name:"touchmove"},end:{name:"touchend"}};class at extends dn{constructor(de){super(de,jn)}static setup(){return window.addEventListener(jn.move.name,de,{capture:!1,passive:!1}),function(){window.removeEventListener(jn.move.name,de)};function de(){}}}at.activators=[{eventName:"onTouchStart",handler:(Yt,de)=>{let{nativeEvent:Ge}=Yt,{onActivation:sr}=de;const{touches:Lr}=Ge;return Lr.length>1?!1:(sr==null||sr({event:Ge}),!0)}}];var Je;(function(Yt){Yt[Yt.Pointer=0]="Pointer",Yt[Yt.DraggableRect=1]="DraggableRect"})(Je||(Je={}));var Ht;(function(Yt){Yt[Yt.TreeOrder=0]="TreeOrder",Yt[Yt.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ht||(Ht={}));function te(Yt){let{acceleration:de,activator:Ge=Je.Pointer,canScroll:sr,draggingRect:Lr,enabled:Nr,interval:Sr=5,order:en=Ht.TreeOrder,pointerCoordinates:fn,scrollableAncestors:Pn,scrollableAncestorRects:sa,delta:Zn,threshold:pa}=Yt;const ya=Me({delta:Zn,disabled:!Nr}),[di,Ma]=(0,w.Yz)(),oa=(0,x.useRef)({x:0,y:0}),si=(0,x.useRef)({x:0,y:0}),$a=(0,x.useMemo)(()=>{switch(Ge){case Je.Pointer:return fn?{top:fn.y,bottom:fn.y,left:fn.x,right:fn.x}:null;case Je.DraggableRect:return Lr}},[Ge,Lr,fn]),Fa=(0,x.useRef)(null),Ui=(0,x.useCallback)(()=>{const La=Fa.current;if(!La)return;const ja=oa.current.x*si.current.x,za=oa.current.y*si.current.y;La.scrollBy(ja,za)},[]),fi=(0,x.useMemo)(()=>en===Ht.TreeOrder?[...Pn].reverse():Pn,[en,Pn]);(0,x.useEffect)(()=>{if(!Nr||!Pn.length||!$a){Ma();return}for(const La of fi){if((sr==null?void 0:sr(La))===!1)continue;const ja=Pn.indexOf(La),za=sa[ja];if(!za)continue;const{direction:yi,speed:mi}=we(La,za,$a,de,pa);for(const ki of["x","y"])ya[ki][yi[ki]]||(mi[ki]=0,yi[ki]=0);if(mi.x>0||mi.y>0){Ma(),Fa.current=La,di(Ui,Sr),oa.current=mi,si.current=yi;return}}oa.current={x:0,y:0},si.current={x:0,y:0},Ma()},[de,Ui,sr,Ma,Nr,Sr,JSON.stringify($a),JSON.stringify(ya),di,Pn,fi,sa,JSON.stringify(pa)])}const wt={x:{[ae.Backward]:!1,[ae.Forward]:!1},y:{[ae.Backward]:!1,[ae.Forward]:!1}};function Me(Yt){let{delta:de,disabled:Ge}=Yt;const sr=(0,w.D9)(de);return(0,w.Gj)(Lr=>{if(Ge||!sr||!Lr)return wt;const Nr={x:Math.sign(de.x-sr.x),y:Math.sign(de.y-sr.y)};return{x:{[ae.Backward]:Lr.x[ae.Backward]||Nr.x===-1,[ae.Forward]:Lr.x[ae.Forward]||Nr.x===1},y:{[ae.Backward]:Lr.y[ae.Backward]||Nr.y===-1,[ae.Forward]:Lr.y[ae.Forward]||Nr.y===1}}},[Ge,de,sr])}function kt(Yt,de){const Ge=de!==null?Yt.get(de):void 0,sr=Ge?Ge.node.current:null;return(0,w.Gj)(Lr=>{var Nr;return de===null?null:(Nr=sr!=null?sr:Lr)!=null?Nr:null},[sr,de])}function qt(Yt,de){return(0,x.useMemo)(()=>Yt.reduce((Ge,sr)=>{const{sensor:Lr}=sr,Nr=Lr.activators.map(Sr=>({eventName:Sr.eventName,handler:de(Sr.handler,sr)}));return[...Ge,...Nr]},[]),[Yt,de])}var dt;(function(Yt){Yt[Yt.Always=0]="Always",Yt[Yt.BeforeDragging=1]="BeforeDragging",Yt[Yt.WhileDragging=2]="WhileDragging"})(dt||(dt={}));var Ut;(function(Yt){Yt.Optimized="optimized"})(Ut||(Ut={}));const Q=new Map;function ot(Yt,de){let{dragging:Ge,dependencies:sr,config:Lr}=de;const[Nr,Sr]=(0,x.useState)(null),{frequency:en,measure:fn,strategy:Pn}=Lr,sa=(0,x.useRef)(Yt),Zn=oa(),pa=(0,w.Ey)(Zn),ya=(0,x.useCallback)(function(si){si===void 0&&(si=[]),!pa.current&&Sr($a=>$a===null?si:$a.concat(si.filter(Fa=>!$a.includes(Fa))))},[pa]),di=(0,x.useRef)(null),Ma=(0,w.Gj)(si=>{if(Zn&&!Ge)return Q;if(!si||si===Q||sa.current!==Yt||Nr!=null){const $a=new Map;for(let Fa of Yt){if(!Fa)continue;if(Nr&&Nr.length>0&&!Nr.includes(Fa.id)&&Fa.rect.current){$a.set(Fa.id,Fa.rect.current);continue}const Ui=Fa.node.current,fi=Ui?new cn(fn(Ui),Ui):null;Fa.rect.current=fi,fi&&$a.set(Fa.id,fi)}return $a}return si},[Yt,Nr,Ge,Zn,fn]);return(0,x.useEffect)(()=>{sa.current=Yt},[Yt]),(0,x.useEffect)(()=>{Zn||ya()},[Ge,Zn]),(0,x.useEffect)(()=>{Nr&&Nr.length>0&&Sr(null)},[JSON.stringify(Nr)]),(0,x.useEffect)(()=>{Zn||typeof en!="number"||di.current!==null||(di.current=setTimeout(()=>{ya(),di.current=null},en))},[en,Zn,ya,...sr]),{droppableRects:Ma,measureDroppableContainers:ya,measuringScheduled:Nr!=null};function oa(){switch(Pn){case dt.Always:return!1;case dt.BeforeDragging:return Ge;default:return!Ge}}}function R(Yt,de){return(0,w.Gj)(Ge=>Yt?Ge||(typeof de=="function"?de(Yt):Yt):null,[de,Yt])}function M(Yt,de){return R(Yt,de)}function O(Yt){let{callback:de,disabled:Ge}=Yt;const sr=(0,w.zX)(de),Lr=(0,x.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Nr}=window;return new Nr(sr)},[sr,Ge]);return(0,x.useEffect)(()=>()=>Lr==null?void 0:Lr.disconnect(),[Lr]),Lr}function X(Yt){let{callback:de,disabled:Ge}=Yt;const sr=(0,w.zX)(de),Lr=(0,x.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Nr}=window;return new Nr(sr)},[Ge]);return(0,x.useEffect)(()=>()=>Lr==null?void 0:Lr.disconnect(),[Lr]),Lr}function mt(Yt){return new cn(It(Yt),Yt)}function Ft(Yt,de,Ge){de===void 0&&(de=mt);const[sr,Lr]=(0,x.useReducer)(en,null),Nr=O({callback(fn){if(Yt)for(const Pn of fn){const{type:sa,target:Zn}=Pn;if(sa==="childList"&&Zn instanceof HTMLElement&&Zn.contains(Yt)){Lr();break}}}}),Sr=X({callback:Lr});return(0,w.LI)(()=>{Lr(),Yt?(Sr==null||Sr.observe(Yt),Nr==null||Nr.observe(document.body,{childList:!0,subtree:!0})):(Sr==null||Sr.disconnect(),Nr==null||Nr.disconnect())},[Yt]),sr;function en(fn){if(!Yt)return null;if(Yt.isConnected===!1){var Pn;return(Pn=fn!=null?fn:Ge)!=null?Pn:null}const sa=de(Yt);return JSON.stringify(fn)===JSON.stringify(sa)?fn:sa}}function Bt(Yt){const de=R(Yt);return Z(Yt,de)}const ee=[];function Le(Yt){const de=(0,x.useRef)(Yt),Ge=(0,w.Gj)(sr=>Yt?sr&&sr!==ee&&Yt&&de.current&&Yt.parentNode===de.current.parentNode?sr:ue(Yt):ee,[Yt]);return(0,x.useEffect)(()=>{de.current=Yt},[Yt]),Ge}function me(Yt){const[de,Ge]=(0,x.useState)(null),sr=(0,x.useRef)(Yt),Lr=(0,x.useCallback)(Nr=>{const Sr=Lt(Nr.target);Sr&&Ge(en=>en?(en.set(Sr,Wt(Sr)),new Map(en)):null)},[]);return(0,x.useEffect)(()=>{const Nr=sr.current;if(Yt!==Nr){Sr(Nr);const en=Yt.map(fn=>{const Pn=Lt(fn);return Pn?(Pn.addEventListener("scroll",Lr,{passive:!0}),[Pn,Wt(Pn)]):null}).filter(fn=>fn!=null);Ge(en.length?new Map(en):null),sr.current=Yt}return()=>{Sr(Yt),Sr(Nr)};function Sr(en){en.forEach(fn=>{const Pn=Lt(fn);Pn==null||Pn.removeEventListener("scroll",Lr)})}},[Lr,Yt]),(0,x.useMemo)(()=>Yt.length?de?Array.from(de.values()).reduce((Nr,Sr)=>(0,w.IH)(Nr,Sr),$):Pe(Yt):$,[Yt,de])}function Xe(Yt,de){de===void 0&&(de=[]);const Ge=(0,x.useRef)(null);return(0,x.useEffect)(()=>{Ge.current=null},de),(0,x.useEffect)(()=>{const sr=Yt!==$;sr&&!Ge.current&&(Ge.current=Yt),!sr&&Ge.current&&(Ge.current=null)},[Yt]),Ge.current?(0,w.$X)(Yt,Ge.current):$}function pr(Yt){(0,x.useEffect)(()=>{if(!w.Nq)return;const de=Yt.map(Ge=>{let{sensor:sr}=Ge;return sr.setup==null?void 0:sr.setup()});return()=>{for(const Ge of de)Ge==null||Ge()}},Yt.map(de=>{let{sensor:Ge}=de;return Ge}))}function Ze(Yt,de){return(0,x.useMemo)(()=>Yt.reduce((Ge,sr)=>{let{eventName:Lr,handler:Nr}=sr;return Ge[Lr]=Sr=>{Nr(Sr,de)},Ge},{}),[Yt,de])}function Pr(Yt){return(0,x.useMemo)(()=>Yt?St(Yt):null,[Yt])}const un=[];function Ke(Yt,de){de===void 0&&(de=It);const[Ge]=Yt,sr=Pr(Ge?(0,w.Jj)(Ge):null),[Lr,Nr]=(0,x.useReducer)(en,un),Sr=X({callback:Nr});return Yt.length>0&&Lr===un&&Nr(),(0,w.LI)(()=>{Yt.length?Yt.forEach(fn=>Sr==null?void 0:Sr.observe(fn)):(Sr==null||Sr.disconnect(),Nr())},[Yt]),Lr;function en(){return Yt.length?Yt.map(fn=>Ce(fn)?sr:new cn(de(fn),fn)):un}}function lr(Yt){if(!Yt)return null;if(Yt.children.length>1)return Yt;const de=Yt.children[0];return(0,w.Re)(de)?de:Yt}function Rr(Yt){let{measure:de}=Yt;const[Ge,sr]=(0,x.useState)(null),Lr=(0,x.useCallback)(Pn=>{for(const{target:sa}of Pn)if((0,w.Re)(sa)){sr(Zn=>{const pa=de(sa);return Zn?mo(Da({},Zn),{width:pa.width,height:pa.height}):pa});break}},[de]),Nr=X({callback:Lr}),Sr=(0,x.useCallback)(Pn=>{const sa=lr(Pn);Nr==null||Nr.disconnect(),sa&&(Nr==null||Nr.observe(sa)),sr(sa?de(sa):null)},[de,Nr]),[en,fn]=(0,w.wm)(Sr);return(0,x.useMemo)(()=>({nodeRef:en,rect:Ge,setRef:fn}),[Ge,en,fn])}const Dr=[{sensor:sn,options:{}},{sensor:xn,options:{}}],ce={current:{}},jt={draggable:{measure:Pt},droppable:{measure:Pt,strategy:dt.WhileDragging,frequency:Ut.Optimized},dragOverlay:{measure:It}};class pe extends Map{get(de){var Ge;return de!=null&&(Ge=super.get(de))!=null?Ge:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(de=>{let{disabled:Ge}=de;return!Ge})}getNodeFor(de){var Ge,sr;return(Ge=(sr=this.get(de))==null?void 0:sr.node.current)!=null?Ge:void 0}}const Oe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new pe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Y},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jt,measureDroppableContainers:Y,windowRect:null,measuringScheduled:!1},Se={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Y,draggableNodes:new Map,over:null,measureDroppableContainers:Y},Fe=(0,x.createContext)(Se),or=(0,x.createContext)(Oe);function gr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new pe}}}function Jr(Yt,de){switch(de.type){case F.DragStart:return mo(Da({},Yt),{draggable:mo(Da({},Yt.draggable),{initialCoordinates:de.initialCoordinates,active:de.active})});case F.DragMove:return Yt.draggable.active?mo(Da({},Yt),{draggable:mo(Da({},Yt.draggable),{translate:{x:de.coordinates.x-Yt.draggable.initialCoordinates.x,y:de.coordinates.y-Yt.draggable.initialCoordinates.y}})}):Yt;case F.DragEnd:case F.DragCancel:return mo(Da({},Yt),{draggable:mo(Da({},Yt.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case F.RegisterDroppable:{const{element:Ge}=de,{id:sr}=Ge,Lr=new pe(Yt.droppable.containers);return Lr.set(sr,Ge),mo(Da({},Yt),{droppable:mo(Da({},Yt.droppable),{containers:Lr})})}case F.SetDroppableDisabled:{const{id:Ge,key:sr,disabled:Lr}=de,Nr=Yt.droppable.containers.get(Ge);if(!Nr||sr!==Nr.key)return Yt;const Sr=new pe(Yt.droppable.containers);return Sr.set(Ge,mo(Da({},Nr),{disabled:Lr})),mo(Da({},Yt),{droppable:mo(Da({},Yt.droppable),{containers:Sr})})}case F.UnregisterDroppable:{const{id:Ge,key:sr}=de,Lr=Yt.droppable.containers.get(Ge);if(!Lr||sr!==Lr.key)return Yt;const Nr=new pe(Yt.droppable.containers);return Nr.delete(Ge),mo(Da({},Yt),{droppable:mo(Da({},Yt.droppable),{containers:Nr})})}default:return Yt}}function Gn(Yt){let{disabled:de}=Yt;const{active:Ge,activatorEvent:sr,draggableNodes:Lr}=(0,x.useContext)(Fe),Nr=(0,w.D9)(sr),Sr=(0,w.D9)(Ge==null?void 0:Ge.id);return(0,x.useEffect)(()=>{if(!de&&!sr&&Nr&&Sr!=null){if(!(0,w.vd)(Nr)||document.activeElement===Nr.target)return;const en=Lr.get(Sr);if(!en)return;const{activatorNode:fn,node:Pn}=en;if(!fn.current&&!Pn.current)return;requestAnimationFrame(()=>{for(const sa of[fn.current,Pn.current]){if(!sa)continue;const Zn=(0,w.so)(sa);if(Zn){Zn.focus();break}}})}},[sr,de,Lr,Sr,Nr]),null}function pn(Yt,de){let Lr=de,{transform:Ge}=Lr,sr=Th(Lr,["transform"]);return Yt!=null&&Yt.length?Yt.reduce((Nr,Sr)=>Sr(Da({transform:Nr},sr)),Ge):Ge}function qn(Yt){return(0,x.useMemo)(()=>({draggable:Da(Da({},jt.draggable),Yt==null?void 0:Yt.draggable),droppable:Da(Da({},jt.droppable),Yt==null?void 0:Yt.droppable),dragOverlay:Da(Da({},jt.dragOverlay),Yt==null?void 0:Yt.dragOverlay)}),[Yt==null?void 0:Yt.draggable,Yt==null?void 0:Yt.droppable,Yt==null?void 0:Yt.dragOverlay])}function ln(Yt){let{activeNode:de,measure:Ge,initialRect:sr,config:Lr=!0}=Yt;const Nr=(0,x.useRef)(!1),{x:Sr,y:en}=typeof Lr=="boolean"?{x:Lr,y:Lr}:Lr;(0,w.LI)(()=>{if(!Sr&&!en||!de){Nr.current=!1;return}if(Nr.current||!sr)return;const Pn=de==null?void 0:de.node.current;if(!Pn||Pn.isConnected===!1)return;const sa=Ge(Pn),Zn=Z(sa,sr);if(Sr||(Zn.x=0),en||(Zn.y=0),Nr.current=!0,Math.abs(Zn.x)>0||Math.abs(Zn.y)>0){const pa=ie(Pn);pa&&pa.scrollBy({top:Zn.y,left:Zn.x})}},[de,Sr,en,sr,Ge])}const Vn=(0,x.createContext)(mo(Da({},$),{scaleX:1,scaleY:1}));var ca;(function(Yt){Yt[Yt.Uninitialized=0]="Uninitialized",Yt[Yt.Initializing=1]="Initializing",Yt[Yt.Initialized=2]="Initialized"})(ca||(ca={}));const ba=(0,x.memo)(function(de){var Ge,sr,Lr,Nr;let Cu=de,{id:Sr,accessibility:en,autoScroll:fn=!0,children:Pn,sensors:sa=Dr,collisionDetection:Zn=gt,measuring:pa,modifiers:ya}=Cu,di=Th(Cu,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const Ma=(0,x.useReducer)(Jr,void 0,gr),[oa,si]=Ma,[$a,Fa]=g(),[Ui,fi]=(0,x.useState)(ca.Uninitialized),La=Ui===ca.Initialized,{draggable:{active:ja,nodes:za,translate:yi},droppable:{containers:mi}}=oa,ki=ja?za.get(ja):null,po=(0,x.useRef)({initial:null,translated:null}),Wi=(0,x.useMemo)(()=>{var Uo;return ja!=null?{id:ja,data:(Uo=ki==null?void 0:ki.data)!=null?Uo:ce,rect:po}:null},[ja,ki]),Ao=(0,x.useRef)(null),[Vo,os]=(0,x.useState)(null),[$i,qa]=(0,x.useState)(null),Yi=(0,w.Ey)(di,Object.values(di)),io=(0,w.Ld)("DndDescribedBy",Sr),Qa=(0,x.useMemo)(()=>mi.getEnabled(),[mi]),Pi=qn(pa),{droppableRects:zo,measureDroppableContainers:qi,measuringScheduled:rs}=ot(Qa,{dragging:La,dependencies:[yi.x,yi.y],config:Pi.droppable}),Xi=kt(za,ja),yo=(0,x.useMemo)(()=>$i?(0,w.DC)($i):null,[$i]),Es=_u(),ds=M(Xi,Pi.draggable.measure);ln({activeNode:ja?za.get(ja):null,config:Es.layoutShiftCompensation,initialRect:ds,measure:Pi.draggable.measure});const oo=Ft(Xi,Pi.draggable.measure,ds),ls=Ft(Xi?Xi.parentElement:null),hs=(0,x.useRef)({activatorEvent:null,active:null,activeNode:Xi,collisionRect:null,collisions:null,droppableRects:zo,draggableNodes:za,draggingNode:null,draggingNodeRect:null,droppableContainers:mi,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Os=mi.getNodeFor((Ge=hs.current.over)==null?void 0:Ge.id),Ho=Rr({measure:Pi.dragOverlay.measure}),$t=(sr=Ho.nodeRef.current)!=null?sr:Xi,ye=La?(Lr=Ho.rect)!=null?Lr:oo:null,ir=!!(Ho.nodeRef.current&&Ho.rect),dr=Bt(ir?null:oo),Zr=Pr($t?(0,w.Jj)($t):null),Ln=Le(La?Os!=null?Os:Xi:null),Qn=Ke(Ln),Sa=pn(ya,{transform:{x:yi.x-dr.x,y:yi.y-dr.y,scaleX:1,scaleY:1},activatorEvent:$i,active:Wi,activeNodeRect:oo,containerNodeRect:ls,draggingNodeRect:ye,over:hs.current.over,overlayNodeRect:Ho.rect,scrollableAncestors:Ln,scrollableAncestorRects:Qn,windowRect:Zr}),Ci=yo?(0,w.IH)(yo,yi):null,Io=me(Ln),Go=Xe(Io),zs=Xe(Io,[oo]),Ds=(0,w.IH)(Sa,Go),ji=ye?yt(ye,Sa):null,xo=Wi&&ji?Zn({active:Wi,collisionRect:ji,droppableRects:zo,droppableContainers:Qa,pointerCoordinates:Ci}):null,Gs=tt(xo,"id"),[vs,qs]=(0,x.useState)(null),Qs=ir?Sa:(0,w.IH)(Sa,zs),Js=At(Qs,(Nr=vs==null?void 0:vs.rect)!=null?Nr:null,oo),Vs=(0,x.useCallback)((Uo,bo)=>{let{sensor:ss,options:d}=bo;if(Ao.current==null)return;const G=za.get(Ao.current);if(!G)return;const Et=Uo.nativeEvent,Gt=new ss({active:Ao.current,activeNode:G,event:Et,options:d,context:hs,onStart(he){const ge=Ao.current;if(ge==null)return;const De=za.get(ge);if(!De)return;const{onDragStart:ze}=Yi.current,He={active:{id:ge,data:De.data,rect:po}};(0,k.unstable_batchedUpdates)(()=>{ze==null||ze(He),fi(ca.Initializing),si({type:F.DragStart,initialCoordinates:he,active:ge}),$a({type:"onDragStart",event:He})})},onMove(he){si({type:F.DragMove,coordinates:he})},onEnd:re(F.DragEnd),onCancel:re(F.DragCancel)});(0,k.unstable_batchedUpdates)(()=>{os(Gt),qa(Uo.nativeEvent)});function re(he){return function(){return z0(this,null,function*(){const{active:De,collisions:ze,over:He,scrollAdjustedTranslate:ur}=hs.current;let Ur=null;if(De&&ur){const{cancelDrop:Xr}=Yi.current;Ur={activatorEvent:Et,active:De,collisions:ze,delta:ur,over:He},he===F.DragEnd&&typeof Xr=="function"&&(yield Promise.resolve(Xr(Ur)))&&(he=F.DragCancel)}Ao.current=null,(0,k.unstable_batchedUpdates)(()=>{si({type:he}),fi(ca.Uninitialized),qs(null),os(null),qa(null);const Xr=he===F.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const Wr=Yi.current[Xr];Wr==null||Wr(Ur),$a({type:Xr,event:Ur})}})})}}},[za]),Rs=(0,x.useCallback)((Uo,bo)=>(ss,d)=>{const G=ss.nativeEvent,Et=za.get(d);if(Ao.current!==null||!Et||G.dndKit||G.defaultPrevented)return;const Gt={active:Et};Uo(ss,bo.options,Gt)===!0&&(G.dndKit={capturedBy:bo.sensor},Ao.current=d,Vs(ss,bo))},[za,Vs]),Us=qt(sa,Rs);pr(sa),(0,w.LI)(()=>{oo&&Ui===ca.Initializing&&fi(ca.Initialized)},[oo,Ui]),(0,x.useEffect)(()=>{const{onDragMove:Uo}=Yi.current,{active:bo,activatorEvent:ss,collisions:d,over:G}=hs.current;if(!bo||!ss)return;const Et={active:bo,activatorEvent:ss,collisions:d,delta:{x:Ds.x,y:Ds.y},over:G};(0,k.unstable_batchedUpdates)(()=>{Uo==null||Uo(Et),$a({type:"onDragMove",event:Et})})},[Ds.x,Ds.y]),(0,x.useEffect)(()=>{const{active:Uo,activatorEvent:bo,collisions:ss,droppableContainers:d,scrollAdjustedTranslate:G}=hs.current;if(!Uo||Ao.current==null||!bo||!G)return;const{onDragOver:Et}=Yi.current,Gt=d.get(Gs),re=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,he={active:Uo,activatorEvent:bo,collisions:ss,delta:{x:G.x,y:G.y},over:re};(0,k.unstable_batchedUpdates)(()=>{qs(re),Et==null||Et(he),$a({type:"onDragOver",event:he})})},[Gs]),(0,w.LI)(()=>{hs.current={activatorEvent:$i,active:Wi,activeNode:Xi,collisionRect:ji,collisions:xo,droppableRects:zo,draggableNodes:za,draggingNode:$t,draggingNodeRect:ye,droppableContainers:mi,over:vs,scrollableAncestors:Ln,scrollAdjustedTranslate:Ds},po.current={initial:ye,translated:ji}},[Wi,Xi,xo,ji,za,$t,ye,zo,mi,vs,Ln,Ds]),te(mo(Da({},Es),{delta:yi,draggingRect:ji,pointerCoordinates:Ci,scrollableAncestors:Ln,scrollableAncestorRects:Qn}));const ws=(0,x.useMemo)(()=>({active:Wi,activeNode:Xi,activeNodeRect:oo,activatorEvent:$i,collisions:xo,containerNodeRect:ls,dragOverlay:Ho,draggableNodes:za,droppableContainers:mi,droppableRects:zo,over:vs,measureDroppableContainers:qi,scrollableAncestors:Ln,scrollableAncestorRects:Qn,measuringConfiguration:Pi,measuringScheduled:rs,windowRect:Zr}),[Wi,Xi,oo,$i,xo,ls,Ho,za,mi,zo,vs,qi,Ln,Qn,Pi,rs,Zr]),ns=(0,x.useMemo)(()=>({activatorEvent:$i,activators:Us,active:Wi,activeNodeRect:oo,ariaDescribedById:{draggable:io},dispatch:si,draggableNodes:za,over:vs,measureDroppableContainers:qi}),[$i,Us,Wi,oo,si,io,za,vs,qi]);return x.createElement(S.Provider,{value:Fa},x.createElement(Fe.Provider,{value:ns},x.createElement(or.Provider,{value:ws},x.createElement(Vn.Provider,{value:Js},Pn)),x.createElement(Gn,{disabled:(en==null?void 0:en.restoreFocus)===!1})),x.createElement(D,mo(Da({},en),{hiddenTextDescribedById:io})));function _u(){const Uo=(Vo==null?void 0:Vo.autoScrollEnabled)===!1,bo=typeof fn=="object"?fn.enabled===!1:fn===!1,ss=La&&!Uo&&!bo;return typeof fn=="object"?mo(Da({},fn),{enabled:ss}):{enabled:ss}}}),Ea=(0,x.createContext)(null),Ni="button",ti="Droppable";function ei(Yt){let{id:de,data:Ge,disabled:sr=!1,attributes:Lr}=Yt;const Nr=(0,w.Ld)(ti),{activators:Sr,activatorEvent:en,active:fn,activeNodeRect:Pn,ariaDescribedById:sa,draggableNodes:Zn,over:pa}=(0,x.useContext)(Fe),{role:ya=Ni,roleDescription:di="draggable",tabIndex:Ma=0}=Lr!=null?Lr:{},oa=(fn==null?void 0:fn.id)===de,si=(0,x.useContext)(oa?Vn:Ea),[$a,Fa]=(0,w.wm)(),[Ui,fi]=(0,w.wm)(),La=Ze(Sr,de),ja=(0,w.Ey)(Ge);(0,w.LI)(()=>(Zn.set(de,{id:de,key:Nr,node:$a,activatorNode:Ui,data:ja}),()=>{const yi=Zn.get(de);yi&&yi.key===Nr&&Zn.delete(de)}),[Zn,de]);const za=(0,x.useMemo)(()=>({role:ya,tabIndex:Ma,"aria-disabled":sr,"aria-pressed":oa&&ya===Ni?!0:void 0,"aria-roledescription":di,"aria-describedby":sa.draggable}),[sr,ya,Ma,oa,di,sa.draggable]);return{active:fn,activatorEvent:en,activeNodeRect:Pn,attributes:za,isDragging:oa,listeners:sr?void 0:La,node:$a,over:pa,setNodeRef:Fa,setActivatorNodeRef:fi,transform:si}}function wi(){return(0,x.useContext)(or)}const Gi="Droppable",Co={timeout:25};function eo(Yt){let{data:de,disabled:Ge=!1,id:sr,resizeObserverConfig:Lr}=Yt;const Nr=(0,w.Ld)(Gi),{active:Sr,dispatch:en,over:fn,measureDroppableContainers:Pn}=(0,x.useContext)(Fe),sa=(0,x.useRef)({disabled:Ge}),Zn=(0,x.useRef)(!1),pa=(0,x.useRef)(null),ya=(0,x.useRef)(null),{disabled:di,updateMeasurementsFor:Ma,timeout:oa}=Da(Da({},Co),Lr),si=(0,w.Ey)(Ma!=null?Ma:sr),$a=(0,x.useCallback)(()=>{if(!Zn.current){Zn.current=!0;return}ya.current!=null&&clearTimeout(ya.current),ya.current=setTimeout(()=>{Pn(Array.isArray(si.current)?si.current:[si.current]),ya.current=null},oa)},[oa]),Fa=X({callback:$a,disabled:di||!Sr}),Ui=(0,x.useCallback)((za,yi)=>{Fa&&(yi&&(Fa.unobserve(yi),Zn.current=!1),za&&Fa.observe(za))},[Fa]),[fi,La]=(0,w.wm)(Ui),ja=(0,w.Ey)(de);return(0,x.useEffect)(()=>{!Fa||!fi.current||(Fa.disconnect(),Zn.current=!1,Fa.observe(fi.current))},[fi,Fa]),(0,w.LI)(()=>(en({type:F.RegisterDroppable,element:{id:sr,key:Nr,disabled:Ge,node:fi,rect:pa,data:ja}}),()=>en({type:F.UnregisterDroppable,key:Nr,id:sr})),[sr]),(0,x.useEffect)(()=>{Ge!==sa.current.disabled&&(en({type:F.SetDroppableDisabled,id:sr,key:Nr,disabled:Ge}),sa.current.disabled=Ge)},[sr,Nr,Ge,en]),{active:Sr,rect:pa,isOver:(fn==null?void 0:fn.id)===sr,node:fi,over:fn,setNodeRef:La}}function ga(Yt){let{animation:de,children:Ge}=Yt;const[sr,Lr]=useState(null),[Nr,Sr]=useState(null),en=usePrevious(Ge);return!Ge&&!sr&&en&&Lr(en),useIsomorphicLayoutEffect(()=>{if(!Nr)return;const fn=sr==null?void 0:sr.key,Pn=sr==null?void 0:sr.props.id;if(fn==null||Pn==null){Lr(null);return}Promise.resolve(de(Pn,Nr)).then(()=>{Lr(null)})},[de,sr,Nr]),React.createElement(React.Fragment,null,Ge,sr?cloneElement(sr,{ref:Sr}):null)}const lo={x:0,y:0,scaleX:1,scaleY:1};function To(Yt){let{children:de}=Yt;return React.createElement(Fe.Provider,{value:Se},React.createElement(Vn.Provider,{value:lo},de))}const ni={position:"fixed",touchAction:"none"},Ri=Yt=>isKeyboardEvent(Yt)?"transform 250ms ease":void 0,ho=null,no={duration:250,easing:"ease",keyframes:Yt=>{let{transform:{initial:de,final:Ge}}=Yt;return[{transform:w.ux.Transform.toString(de)},{transform:w.ux.Transform.toString(Ge)}]},sideEffects:(Yt=>de=>{let{active:Ge,dragOverlay:sr}=de;const Lr={},{styles:Nr,className:Sr}=Yt;if(Nr!=null&&Nr.active)for(const[en,fn]of Object.entries(Nr.active))fn!==void 0&&(Lr[en]=Ge.node.style.getPropertyValue(en),Ge.node.style.setProperty(en,fn));if(Nr!=null&&Nr.dragOverlay)for(const[en,fn]of Object.entries(Nr.dragOverlay))fn!==void 0&&sr.node.style.setProperty(en,fn);return Sr!=null&&Sr.active&&Ge.node.classList.add(Sr.active),Sr!=null&&Sr.dragOverlay&&sr.node.classList.add(Sr.dragOverlay),function(){for(const[fn,Pn]of Object.entries(Lr))Ge.node.style.setProperty(fn,Pn);Sr!=null&&Sr.active&&Ge.node.classList.remove(Sr.active)}})({styles:{active:{opacity:"0"}}})};function es(Yt){let{config:de,draggableNodes:Ge,droppableContainers:sr,measuringConfiguration:Lr}=Yt;return useEvent((Nr,Sr)=>{if(de===null)return;const en=Ge.get(Nr);if(!en)return;const fn=en.node.current;if(!fn)return;const Pn=lr(Sr);if(!Pn)return;const{transform:sa}=getWindow(Sr).getComputedStyle(Sr),Zn=_t(sa);if(!Zn)return;const pa=typeof de=="function"?de:vo(de);return Or(fn,Lr.draggable.measure),pa({active:{id:Nr,data:en.data,node:fn,rect:Lr.draggable.measure(fn)},draggableNodes:Ge,dragOverlay:{node:Sr,rect:Lr.dragOverlay.measure(Pn)},droppableContainers:sr,measuringConfiguration:Lr,transform:Zn})})}function vo(Yt){const{duration:de,easing:Ge,sideEffects:sr,keyframes:Lr}=Da(Da({},no),Yt);return Nr=>{let $a=Nr,{active:Sr,dragOverlay:en,transform:fn}=$a,Pn=Th($a,["active","dragOverlay","transform"]);if(!de)return;const sa={x:en.rect.left-Sr.rect.left,y:en.rect.top-Sr.rect.top},Zn={scaleX:fn.scaleX!==1?Sr.rect.width*fn.scaleX/en.rect.width:1,scaleY:fn.scaleY!==1?Sr.rect.height*fn.scaleY/en.rect.height:1},pa=Da({x:fn.x-sa.x,y:fn.y-sa.y},Zn),ya=Lr(mo(Da({},Pn),{active:Sr,dragOverlay:en,transform:{initial:fn,final:pa}})),[di]=ya,Ma=ya[ya.length-1];if(JSON.stringify(di)===JSON.stringify(Ma))return;const oa=sr==null?void 0:sr(Da({active:Sr,dragOverlay:en},Pn)),si=en.node.animate(ya,{duration:de,easing:Ge,fill:"forwards"});return new Promise(Fa=>{si.onfinish=()=>{oa==null||oa(),Fa()}})}}let Si=0;function ao(Yt){return useMemo(()=>{if(Yt!=null)return Si++,Si},[Yt])}const Jo=null},332339:function(Ve,z,C){"use strict";C.d(z,{DL:function(){return p}});var x=C(724285);function k(y){return g=>{let{transform:A}=g;return mo(Da({},A),{x:Math.ceil(A.x/y)*y,y:Math.ceil(A.y/y)*y})}}const w=y=>{let{transform:g}=y;return mo(Da({},g),{y:0})};function T(y,g,A){const E=Da({},y);return g.top+y.y<=A.top?E.y=A.top-g.top:g.bottom+y.y>=A.top+A.height&&(E.y=A.top+A.height-g.bottom),g.left+y.x<=A.left?E.x=A.left-g.left:g.right+y.x>=A.left+A.width&&(E.x=A.left+A.width-g.right),E}const L=y=>{let{containerNodeRect:g,draggingNodeRect:A,transform:E}=y;return!A||!g?E:T(E,A,g)},P=y=>{let{draggingNodeRect:g,transform:A,scrollableAncestorRects:E}=y;const D=E[0];return!g||!D?A:T(A,g,D)},p=y=>{let{transform:g}=y;return mo(Da({},g),{x:0})},m=y=>{let{transform:g,draggingNodeRect:A,windowRect:E}=y;return!A||!E?g:T(g,A,E)},S=y=>{let{activatorEvent:g,draggingNodeRect:A,transform:E}=y;if(A&&g){const D=getEventCoordinates(g);if(!D)return E;const F=D.x-A.left,Y=D.y-A.top;return mo(Da({},E),{x:E.x+F-A.width/2,y:E.y+Y-A.height/2})}return E}},245587:function(Ve,z,C){"use strict";C.d(z,{Fo:function(){return U},PG:function(){return g},Rp:function(){return T},nB:function(){return it},qw:function(){return Y}});var x=C(667294),k=C(960887),w=C(724285);function T(J,yt,_t){const nt=J.slice();return nt.splice(_t<0?nt.length+_t:_t,0,nt.splice(yt,1)[0]),nt}function L(J,yt,_t){const nt=J.slice();return nt[yt]=J[_t],nt[_t]=J[yt],nt}function P(J,yt){return J.reduce((_t,nt,vt)=>{const It=yt.get(nt);return It&&(_t[vt]=It),_t},Array(J.length))}function p(J){return J!==null&&J>=0}function m(J,yt){if(J===yt)return!0;if(J.length!==yt.length)return!1;for(let _t=0;_t<J.length;_t++)if(J[_t]!==yt[_t])return!1;return!0}function S(J){return typeof J=="boolean"?{draggable:J,droppable:J}:J}const y={scaleX:1,scaleY:1},g=J=>{var yt;let{rects:_t,activeNodeRect:nt,activeIndex:vt,overIndex:It,index:Pt}=J;const St=(yt=_t[vt])!=null?yt:nt;if(!St)return null;const Dt=A(_t,Pt,vt);if(Pt===vt){const Qt=_t[It];return Qt?Da({x:vt<It?Qt.left+Qt.width-(St.left+St.width):Qt.left-St.left,y:0},y):null}return Pt>vt&&Pt<=It?Da({x:-St.width-Dt,y:0},y):Pt<vt&&Pt>=It?Da({x:St.width+Dt,y:0},y):Da({x:0,y:0},y)};function A(J,yt,_t){const nt=J[yt],vt=J[yt-1],It=J[yt+1];return!nt||!vt&&!It?0:_t<yt?vt?nt.left-(vt.left+vt.width):It.left-(nt.left+nt.width):It?It.left-(nt.left+nt.width):nt.left-(vt.left+vt.width)}const E=J=>{let{rects:yt,activeIndex:_t,overIndex:nt,index:vt}=J;const It=T(yt,nt,_t),Pt=yt[vt],St=It[vt];return!St||!Pt?null:{x:St.left-Pt.left,y:St.top-Pt.top,scaleX:St.width/Pt.width,scaleY:St.height/Pt.height}},D=J=>{let{activeIndex:yt,index:_t,rects:nt,overIndex:vt}=J,It,Pt;return _t===yt&&(It=nt[_t],Pt=nt[vt]),_t===vt&&(It=nt[_t],Pt=nt[yt]),!Pt||!It?null:{x:Pt.left-It.left,y:Pt.top-It.top,scaleX:Pt.width/It.width,scaleY:Pt.height/It.height}},F={scaleX:1,scaleY:1},Y=J=>{var yt;let{activeIndex:_t,activeNodeRect:nt,index:vt,rects:It,overIndex:Pt}=J;const St=(yt=It[_t])!=null?yt:nt;if(!St)return null;if(vt===_t){const Qt=It[Pt];return Qt?Da({x:0,y:_t<Pt?Qt.top+Qt.height-(St.top+St.height):Qt.top-St.top},F):null}const Dt=b(It,vt,_t);return vt>_t&&vt<=Pt?Da({x:0,y:-St.height-Dt},F):vt<_t&&vt>=Pt?Da({x:0,y:St.height+Dt},F):Da({x:0,y:0},F)};function b(J,yt,_t){const nt=J[yt],vt=J[yt-1],It=J[yt+1];return nt?_t<yt?vt?nt.top-(vt.top+vt.height):It?It.top-(nt.top+nt.height):0:It?It.top-(nt.top+nt.height):vt?nt.top-(vt.top+vt.height):0:0}const h="Sortable",$=x.createContext({activeIndex:-1,containerId:h,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:E,disabled:{draggable:!1,droppable:!1}});function U(J){let{children:yt,id:_t,items:nt,strategy:vt=E,disabled:It=!1}=J;const{active:Pt,dragOverlay:St,droppableRects:Dt,over:Qt,measureDroppableContainers:ue}=(0,k.Cj)(),ie=(0,w.Ld)(h,_t),Lt=St.rect!==null,ne=(0,x.useMemo)(()=>nt.map(Pe=>typeof Pe=="object"&&"id"in Pe?Pe.id:Pe),[nt]),ve=Pt!=null,Wt=Pt?ne.indexOf(Pt.id):-1,ae=Qt?ne.indexOf(Qt.id):-1,Ce=(0,x.useRef)(ne),xe=!m(ne,Ce.current),Jt=ae!==-1&&Wt===-1||xe,we=S(It);(0,w.LI)(()=>{xe&&ve&&ue(ne)},[xe,ne,ve,ue]),(0,x.useEffect)(()=>{Ce.current=ne},[ne]);const Tt=(0,x.useMemo)(()=>({activeIndex:Wt,containerId:ie,disabled:we,disableTransforms:Jt,items:ne,overIndex:ae,useDragOverlay:Lt,sortedRects:P(ne,Dt),strategy:vt}),[Wt,ie,we.draggable,we.droppable,Jt,ne,ae,Dt,Lt,vt]);return x.createElement($.Provider,{value:Tt},yt)}const W=J=>{let{id:yt,items:_t,activeIndex:nt,overIndex:vt}=J;return T(_t,nt,vt).indexOf(yt)},V=J=>{let{containerId:yt,isSorting:_t,wasDragging:nt,index:vt,items:It,newIndex:Pt,previousItems:St,previousContainerId:Dt,transition:Qt}=J;return!Qt||!nt||St!==It&&vt===Pt?!1:_t?!0:Pt!==vt&&yt===Dt},H={duration:200,easing:"ease"},q="transform",tt=w.ux.Transition.toString({property:q,duration:0,easing:"linear"}),rt={roleDescription:"sortable"};function ft(J){let{disabled:yt,index:_t,node:nt,rect:vt}=J;const[It,Pt]=(0,x.useState)(null),St=(0,x.useRef)(_t);return(0,w.LI)(()=>{if(!yt&&_t!==St.current&&nt.current){const Dt=vt.current;if(Dt){const Qt=(0,k.VK)(nt.current,{ignoreTransform:!0}),ue={x:Dt.left-Qt.left,y:Dt.top-Qt.top,scaleX:Dt.width/Qt.width,scaleY:Dt.height/Qt.height};(ue.x||ue.y)&&Pt(ue)}}_t!==St.current&&(St.current=_t)},[yt,_t,nt,vt]),(0,x.useEffect)(()=>{It&&Pt(null)},[It]),It}function it(J){let{animateLayoutChanges:yt=V,attributes:_t,disabled:nt,data:vt,getNewIndex:It=W,id:Pt,strategy:St,resizeObserverConfig:Dt,transition:Qt=H}=J;const{items:ue,containerId:ie,activeIndex:Lt,disabled:ne,disableTransforms:ve,sortedRects:Wt,overIndex:ae,useDragOverlay:Ce,strategy:xe}=(0,x.useContext)($),Jt=bt(nt,ne),we=ue.indexOf(Pt),Tt=(0,x.useMemo)(()=>Da({sortable:{containerId:ie,index:we,items:ue}},vt),[ie,vt,we,ue]),Pe=(0,x.useMemo)(()=>ue.slice(ue.indexOf(Pt)),[ue,Pt]),{rect:_r,node:Ar,isOver:Or,setNodeRef:Br}=(0,k.Zj)({id:Pt,data:Tt,disabled:Jt.droppable,resizeObserverConfig:Da({updateMeasurementsFor:Pe},Dt)}),{active:cn,activatorEvent:an,activeNodeRect:Dn,attributes:Un,setNodeRef:Xn,listeners:xr,isDragging:$e,over:Tr,setActivatorNodeRef:qr,transform:gn}=(0,k.O1)({id:Pt,data:Tt,attributes:Da(Da({},rt),_t),disabled:Jt.draggable}),xn=(0,w.HB)(Br,Xn),Rn=!!cn,Mr=Rn&&!ve&&p(Lt)&&p(ae),dn=!Ce&&$e,hn=dn&&Mr?gn:null,sn=St!=null?St:xe,Wn=Mr?hn!=null?hn:sn({rects:Wt,activeNodeRect:Dn,activeIndex:Lt,overIndex:ae,index:we}):null,Mn=p(Lt)&&p(ae)?It({id:Pt,items:ue,activeIndex:Lt,overIndex:ae}):we,In=cn==null?void 0:cn.id,jn=(0,x.useRef)({activeId:In,items:ue,newIndex:Mn,containerId:ie}),at=ue!==jn.current.items,Je=yt({active:cn,containerId:ie,isDragging:$e,isSorting:Rn,id:Pt,index:we,items:ue,newIndex:jn.current.newIndex,previousItems:jn.current.items,previousContainerId:jn.current.containerId,transition:Qt,wasDragging:jn.current.activeId!=null}),Ht=ft({disabled:!Je,index:we,node:Ar,rect:_r});return(0,x.useEffect)(()=>{Rn&&jn.current.newIndex!==Mn&&(jn.current.newIndex=Mn),ie!==jn.current.containerId&&(jn.current.containerId=ie),ue!==jn.current.items&&(jn.current.items=ue)},[Rn,Mn,ie,ue]),(0,x.useEffect)(()=>{if(In===jn.current.activeId)return;if(In&&!jn.current.activeId){jn.current.activeId=In;return}const wt=setTimeout(()=>{jn.current.activeId=In},50);return()=>clearTimeout(wt)},[In]),{active:cn,activeIndex:Lt,attributes:Un,data:Tt,rect:_r,index:we,newIndex:Mn,items:ue,isOver:Or,isSorting:Rn,isDragging:$e,listeners:xr,node:Ar,overIndex:ae,over:Tr,setNodeRef:xn,setActivatorNodeRef:qr,setDroppableNodeRef:Br,setDraggableNodeRef:Xn,transform:Ht!=null?Ht:Wn,transition:te()};function te(){if(Ht||at&&jn.current.newIndex===we)return tt;if(!(dn&&!(0,w.vd)(an)||!Qt)&&(Rn||Je))return w.ux.Transition.toString(mo(Da({},Qt),{property:q}))}}function bt(J,yt){var _t,nt;return typeof J=="boolean"?{draggable:J,droppable:!1}:{draggable:(_t=J==null?void 0:J.draggable)!=null?_t:yt.draggable,droppable:(nt=J==null?void 0:J.droppable)!=null?nt:yt.droppable}}function gt(J){if(!J)return!1;const yt=J.data.current;return!!(yt&&"sortable"in yt&&typeof yt.sortable=="object"&&"containerId"in yt.sortable&&"items"in yt.sortable&&"index"in yt.sortable)}const Xt=[k.g4.Down,k.g4.Right,k.g4.Up,k.g4.Left],Ct=(J,yt)=>{let{context:{active:_t,collisionRect:nt,droppableRects:vt,droppableContainers:It,over:Pt,scrollableAncestors:St}}=yt;if(Xt.includes(J.code)){if(J.preventDefault(),!_t||!nt)return;const Dt=[];It.getEnabled().forEach(ie=>{if(!ie||ie!=null&&ie.disabled)return;const Lt=vt.get(ie.id);if(Lt)switch(J.code){case KeyboardCode.Down:nt.top<Lt.top&&Dt.push(ie);break;case KeyboardCode.Up:nt.top>Lt.top&&Dt.push(ie);break;case KeyboardCode.Left:nt.left>Lt.left&&Dt.push(ie);break;case KeyboardCode.Right:nt.left<Lt.left&&Dt.push(ie);break}});const Qt=closestCorners({active:_t,collisionRect:nt,droppableRects:vt,droppableContainers:Dt,pointerCoordinates:null});let ue=getFirstCollision(Qt,"id");if(ue===(Pt==null?void 0:Pt.id)&&Qt.length>1&&(ue=Qt[1].id),ue!=null){const ie=It.get(_t.id),Lt=It.get(ue),ne=Lt?vt.get(Lt.id):null,ve=Lt==null?void 0:Lt.node.current;if(ve&&ne&&ie&&Lt){const ae=getScrollableAncestors(ve).some((Pe,_r)=>St[_r]!==Pe),Ce=At(ie,Lt),xe=Z(ie,Lt),Jt=ae||!Ce?{x:0,y:0}:{x:xe?nt.width-ne.width:0,y:xe?nt.height-ne.height:0},we={x:ne.left,y:ne.top};return Jt.x&&Jt.y?we:subtract(we,Jt)}}}};function At(J,yt){return!gt(J)||!gt(yt)?!1:J.data.current.sortable.containerId===yt.data.current.sortable.containerId}function Z(J,yt){return!gt(J)||!gt(yt)||!At(J,yt)?!1:J.data.current.sortable.index<yt.data.current.sortable.index}},724285:function(Ve,z,C){"use strict";C.d(z,{$X:function(){return V},D9:function(){return b},DC:function(){return rt},Ey:function(){return D},FJ:function(){return T},Gj:function(){return F},HB:function(){return k},IH:function(){return W},Jj:function(){return P},LI:function(){return g},Ld:function(){return $},Nq:function(){return w},Re:function(){return m},UG:function(){return L},Yz:function(){return E},qk:function(){return p},r3:function(){return y},so:function(){return bt},ux:function(){return ft},vZ:function(){return S},vd:function(){return q},wm:function(){return Y},zX:function(){return A}});var x=C(667294);function k(){for(var gt=arguments.length,Xt=new Array(gt),Ct=0;Ct<gt;Ct++)Xt[Ct]=arguments[Ct];return(0,x.useMemo)(()=>At=>{Xt.forEach(Z=>Z(At))},Xt)}const w=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function T(gt){const Xt=Object.prototype.toString.call(gt);return Xt==="[object Window]"||Xt==="[object global]"}function L(gt){return"nodeType"in gt}function P(gt){var Xt,Ct;return gt?T(gt)?gt:L(gt)&&(Xt=(Ct=gt.ownerDocument)==null?void 0:Ct.defaultView)!=null?Xt:window:window}function p(gt){const{Document:Xt}=P(gt);return gt instanceof Xt}function m(gt){return T(gt)?!1:gt instanceof P(gt).HTMLElement}function S(gt){return gt instanceof P(gt).SVGElement}function y(gt){return gt?T(gt)?gt.document:L(gt)?p(gt)?gt:m(gt)?gt.ownerDocument:document:document:document}const g=w?x.useLayoutEffect:x.useEffect;function A(gt){const Xt=(0,x.useRef)(gt);return g(()=>{Xt.current=gt}),(0,x.useCallback)(function(){for(var Ct=arguments.length,At=new Array(Ct),Z=0;Z<Ct;Z++)At[Z]=arguments[Z];return Xt.current==null?void 0:Xt.current(...At)},[])}function E(){const gt=(0,x.useRef)(null),Xt=(0,x.useCallback)((At,Z)=>{gt.current=setInterval(At,Z)},[]),Ct=(0,x.useCallback)(()=>{gt.current!==null&&(clearInterval(gt.current),gt.current=null)},[]);return[Xt,Ct]}function D(gt,Xt){Xt===void 0&&(Xt=[gt]);const Ct=(0,x.useRef)(gt);return g(()=>{Ct.current!==gt&&(Ct.current=gt)},Xt),Ct}function F(gt,Xt){const Ct=(0,x.useRef)();return(0,x.useMemo)(()=>{const At=gt(Ct.current);return Ct.current=At,At},[...Xt])}function Y(gt){const Xt=A(gt),Ct=(0,x.useRef)(null),At=(0,x.useCallback)(Z=>{Z!==Ct.current&&(Xt==null||Xt(Z,Ct.current)),Ct.current=Z},[]);return[Ct,At]}function b(gt){const Xt=(0,x.useRef)();return(0,x.useEffect)(()=>{Xt.current=gt},[gt]),Xt.current}let h={};function $(gt,Xt){return(0,x.useMemo)(()=>{if(Xt)return Xt;const Ct=h[gt]==null?0:h[gt]+1;return h[gt]=Ct,gt+"-"+Ct},[gt,Xt])}function U(gt){return function(Xt){for(var Ct=arguments.length,At=new Array(Ct>1?Ct-1:0),Z=1;Z<Ct;Z++)At[Z-1]=arguments[Z];return At.reduce((J,yt)=>{const _t=Object.entries(yt);for(const[nt,vt]of _t){const It=J[nt];It!=null&&(J[nt]=It+gt*vt)}return J},Da({},Xt))}}const W=U(1),V=U(-1);function H(gt){return"clientX"in gt&&"clientY"in gt}function q(gt){if(!gt)return!1;const{KeyboardEvent:Xt}=P(gt.target);return Xt&&gt instanceof Xt}function tt(gt){if(!gt)return!1;const{TouchEvent:Xt}=P(gt.target);return Xt&&gt instanceof Xt}function rt(gt){if(tt(gt)){if(gt.touches&&gt.touches.length){const{clientX:Xt,clientY:Ct}=gt.touches[0];return{x:Xt,y:Ct}}else if(gt.changedTouches&&gt.changedTouches.length){const{clientX:Xt,clientY:Ct}=gt.changedTouches[0];return{x:Xt,y:Ct}}}return H(gt)?{x:gt.clientX,y:gt.clientY}:null}const ft=Object.freeze({Translate:{toString(gt){if(!gt)return;const{x:Xt,y:Ct}=gt;return"translate3d("+(Xt?Math.round(Xt):0)+"px, "+(Ct?Math.round(Ct):0)+"px, 0)"}},Scale:{toString(gt){if(!gt)return;const{scaleX:Xt,scaleY:Ct}=gt;return"scaleX("+Xt+") scaleY("+Ct+")"}},Transform:{toString(gt){if(gt)return[ft.Translate.toString(gt),ft.Scale.toString(gt)].join(" ")}},Transition:{toString(gt){let{property:Xt,duration:Ct,easing:At}=gt;return Xt+" "+Ct+"ms "+At}}}),it="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bt(gt){return gt.matches(it)?gt:gt.querySelector(it)}},971497:function(Ve,z,C){"use strict";C.r(z),C.d(z,{forceCenter:function(){return x},forceCollide:function(){return p},forceLink:function(){return A},forceManyBody:function(){return gt},forceRadial:function(){return Xt},forceSimulation:function(){return bt},forceX:function(){return Ct},forceY:function(){return At}});function x(Z,J){var yt,_t=1;Z==null&&(Z=0),J==null&&(J=0);function nt(){var vt,It=yt.length,Pt,St=0,Dt=0;for(vt=0;vt<It;++vt)Pt=yt[vt],St+=Pt.x,Dt+=Pt.y;for(St=(St/It-Z)*_t,Dt=(Dt/It-J)*_t,vt=0;vt<It;++vt)Pt=yt[vt],Pt.x-=St,Pt.y-=Dt}return nt.initialize=function(vt){yt=vt},nt.x=function(vt){return arguments.length?(Z=+vt,nt):Z},nt.y=function(vt){return arguments.length?(J=+vt,nt):J},nt.strength=function(vt){return arguments.length?(_t=+vt,nt):_t},nt}var k=C(547148);function w(Z){return function(){return Z}}function T(Z){return(Z()-.5)*1e-6}function L(Z){return Z.x+Z.vx}function P(Z){return Z.y+Z.vy}function p(Z){var J,yt,_t,nt=1,vt=1;typeof Z!="function"&&(Z=w(Z==null?1:+Z));function It(){for(var Dt,Qt=J.length,ue,ie,Lt,ne,ve,Wt,ae=0;ae<vt;++ae)for(ue=(0,k.Z)(J,L,P).visitAfter(Pt),Dt=0;Dt<Qt;++Dt)ie=J[Dt],ve=yt[ie.index],Wt=ve*ve,Lt=ie.x+ie.vx,ne=ie.y+ie.vy,ue.visit(Ce);function Ce(xe,Jt,we,Tt,Pe){var _r=xe.data,Ar=xe.r,Or=ve+Ar;if(_r){if(_r.index>ie.index){var Br=Lt-_r.x-_r.vx,cn=ne-_r.y-_r.vy,an=Br*Br+cn*cn;an<Or*Or&&(Br===0&&(Br=T(_t),an+=Br*Br),cn===0&&(cn=T(_t),an+=cn*cn),an=(Or-(an=Math.sqrt(an)))/an*nt,ie.vx+=(Br*=an)*(Or=(Ar*=Ar)/(Wt+Ar)),ie.vy+=(cn*=an)*Or,_r.vx-=Br*(Or=1-Or),_r.vy-=cn*Or)}return}return Jt>Lt+Or||Tt<Lt-Or||we>ne+Or||Pe<ne-Or}}function Pt(Dt){if(Dt.data)return Dt.r=yt[Dt.data.index];for(var Qt=Dt.r=0;Qt<4;++Qt)Dt[Qt]&&Dt[Qt].r>Dt.r&&(Dt.r=Dt[Qt].r)}function St(){if(J){var Dt,Qt=J.length,ue;for(yt=new Array(Qt),Dt=0;Dt<Qt;++Dt)ue=J[Dt],yt[ue.index]=+Z(ue,Dt,J)}}return It.initialize=function(Dt,Qt){J=Dt,_t=Qt,St()},It.iterations=function(Dt){return arguments.length?(vt=+Dt,It):vt},It.strength=function(Dt){return arguments.length?(nt=+Dt,It):nt},It.radius=function(Dt){return arguments.length?(Z=typeof Dt=="function"?Dt:w(+Dt),St(),It):Z},It}var m=C(952677),S=C.n(m);function y(Z){return Z.index}function g(Z,J){var yt=Z.get(J);if(!yt)throw new Error("node not found: "+J);return yt}function A(Z){var J=y,yt=ue,_t,nt=w(30),vt,It,Pt,St,Dt,Qt=1;Z==null&&(Z=[]);function ue(Wt){return 1/Math.min(Pt[Wt.source.index],Pt[Wt.target.index])}function ie(Wt){for(var ae=0,Ce=Z.length;ae<Qt;++ae)for(var xe=0,Jt,we,Tt,Pe,_r,Ar,Or;xe<Ce;++xe)Jt=Z[xe],we=Jt.source,Tt=Jt.target,Pe=Tt.x+Tt.vx-we.x-we.vx||T(Dt),_r=Tt.y+Tt.vy-we.y-we.vy||T(Dt),Ar=Math.sqrt(Pe*Pe+_r*_r),Ar=(Ar-vt[xe])/Ar*Wt*_t[xe],Pe*=Ar,_r*=Ar,Tt.vx-=Pe*(Or=St[xe]),Tt.vy-=_r*Or,we.vx+=Pe*(Or=1-Or),we.vy+=_r*Or}function Lt(){if(It){var Wt,ae=It.length,Ce=Z.length,xe=new Map(It.map(function(we,Tt){return[J(we,Tt,It),we]})),Jt;for(Wt=0,Pt=new Array(ae);Wt<Ce;++Wt)Jt=Z[Wt],Jt.index=Wt,S()(Jt.source)!=="object"&&(Jt.source=g(xe,Jt.source)),S()(Jt.target)!=="object"&&(Jt.target=g(xe,Jt.target)),Pt[Jt.source.index]=(Pt[Jt.source.index]||0)+1,Pt[Jt.target.index]=(Pt[Jt.target.index]||0)+1;for(Wt=0,St=new Array(Ce);Wt<Ce;++Wt)Jt=Z[Wt],St[Wt]=Pt[Jt.source.index]/(Pt[Jt.source.index]+Pt[Jt.target.index]);_t=new Array(Ce),ne(),vt=new Array(Ce),ve()}}function ne(){if(It)for(var Wt=0,ae=Z.length;Wt<ae;++Wt)_t[Wt]=+yt(Z[Wt],Wt,Z)}function ve(){if(It)for(var Wt=0,ae=Z.length;Wt<ae;++Wt)vt[Wt]=+nt(Z[Wt],Wt,Z)}return ie.initialize=function(Wt,ae){It=Wt,Dt=ae,Lt()},ie.links=function(Wt){return arguments.length?(Z=Wt,Lt(),ie):Z},ie.id=function(Wt){return arguments.length?(J=Wt,ie):J},ie.iterations=function(Wt){return arguments.length?(Qt=+Wt,ie):Qt},ie.strength=function(Wt){return arguments.length?(yt=typeof Wt=="function"?Wt:w(+Wt),ne(),ie):yt},ie.distance=function(Wt){return arguments.length?(nt=typeof Wt=="function"?Wt:w(+Wt),ve(),ie):nt},ie}var E={value:function(){}};function D(){for(var Z=0,J=arguments.length,yt={},_t;Z<J;++Z){if(!(_t=arguments[Z]+"")||_t in yt||/[\s.]/.test(_t))throw new Error("illegal type: "+_t);yt[_t]=[]}return new F(yt)}function F(Z){this._=Z}function Y(Z,J){return Z.trim().split(/^|\s+/).map(function(yt){var _t="",nt=yt.indexOf(".");if(nt>=0&&(_t=yt.slice(nt+1),yt=yt.slice(0,nt)),yt&&!J.hasOwnProperty(yt))throw new Error("unknown type: "+yt);return{type:yt,name:_t}})}F.prototype=D.prototype={constructor:F,on:function(J,yt){var _t=this._,nt=Y(J+"",_t),vt,It=-1,Pt=nt.length;if(arguments.length<2){for(;++It<Pt;)if((vt=(J=nt[It]).type)&&(vt=b(_t[vt],J.name)))return vt;return}if(yt!=null&&typeof yt!="function")throw new Error("invalid callback: "+yt);for(;++It<Pt;)if(vt=(J=nt[It]).type)_t[vt]=h(_t[vt],J.name,yt);else if(yt==null)for(vt in _t)_t[vt]=h(_t[vt],J.name,null);return this},copy:function(){var J={},yt=this._;for(var _t in yt)J[_t]=yt[_t].slice();return new F(J)},call:function(J,yt){if((vt=arguments.length-2)>0)for(var _t=new Array(vt),nt=0,vt,It;nt<vt;++nt)_t[nt]=arguments[nt+2];if(!this._.hasOwnProperty(J))throw new Error("unknown type: "+J);for(It=this._[J],nt=0,vt=It.length;nt<vt;++nt)It[nt].value.apply(yt,_t)},apply:function(J,yt,_t){if(!this._.hasOwnProperty(J))throw new Error("unknown type: "+J);for(var nt=this._[J],vt=0,It=nt.length;vt<It;++vt)nt[vt].value.apply(yt,_t)}};function b(Z,J){for(var yt=0,_t=Z.length,nt;yt<_t;++yt)if((nt=Z[yt]).name===J)return nt.value}function h(Z,J,yt){for(var _t=0,nt=Z.length;_t<nt;++_t)if(Z[_t].name===J){Z[_t]=E,Z=Z.slice(0,_t).concat(Z.slice(_t+1));break}return yt!=null&&Z.push({name:J,value:yt}),Z}var $=D,U=C(235374),W=1664525,V=1013904223,H=4294967296;function q(){var Z=1;return function(){return(Z=(W*Z+V)%H)/H}}function tt(Z){return Z.x}function rt(Z){return Z.y}var ft=10,it=Math.PI*(3-Math.sqrt(5));function bt(Z){var J,yt=1,_t=.001,nt=1-Math.pow(_t,1/300),vt=0,It=.6,Pt=new Map,St=(0,U.HT)(ue),Dt=$("tick","end"),Qt=q();Z==null&&(Z=[]);function ue(){ie(),Dt.call("tick",J),yt<_t&&(St.stop(),Dt.call("end",J))}function ie(ve){var Wt,ae=Z.length,Ce;ve===void 0&&(ve=1);for(var xe=0;xe<ve;++xe)for(yt+=(vt-yt)*nt,Pt.forEach(function(Jt){Jt(yt)}),Wt=0;Wt<ae;++Wt)Ce=Z[Wt],Ce.fx==null?Ce.x+=Ce.vx*=It:(Ce.x=Ce.fx,Ce.vx=0),Ce.fy==null?Ce.y+=Ce.vy*=It:(Ce.y=Ce.fy,Ce.vy=0);return J}function Lt(){for(var ve=0,Wt=Z.length,ae;ve<Wt;++ve){if(ae=Z[ve],ae.index=ve,ae.fx!=null&&(ae.x=ae.fx),ae.fy!=null&&(ae.y=ae.fy),isNaN(ae.x)||isNaN(ae.y)){var Ce=ft*Math.sqrt(.5+ve),xe=ve*it;ae.x=Ce*Math.cos(xe),ae.y=Ce*Math.sin(xe)}(isNaN(ae.vx)||isNaN(ae.vy))&&(ae.vx=ae.vy=0)}}function ne(ve){return ve.initialize&&ve.initialize(Z,Qt),ve}return Lt(),J={tick:ie,restart:function(){return St.restart(ue),J},stop:function(){return St.stop(),J},nodes:function(Wt){return arguments.length?(Z=Wt,Lt(),Pt.forEach(ne),J):Z},alpha:function(Wt){return arguments.length?(yt=+Wt,J):yt},alphaMin:function(Wt){return arguments.length?(_t=+Wt,J):_t},alphaDecay:function(Wt){return arguments.length?(nt=+Wt,J):+nt},alphaTarget:function(Wt){return arguments.length?(vt=+Wt,J):vt},velocityDecay:function(Wt){return arguments.length?(It=1-Wt,J):1-It},randomSource:function(Wt){return arguments.length?(Qt=Wt,Pt.forEach(ne),J):Qt},force:function(Wt,ae){return arguments.length>1?(ae==null?Pt.delete(Wt):Pt.set(Wt,ne(ae)),J):Pt.get(Wt)},find:function(Wt,ae,Ce){var xe=0,Jt=Z.length,we,Tt,Pe,_r,Ar;for(Ce==null?Ce=1/0:Ce*=Ce,xe=0;xe<Jt;++xe)_r=Z[xe],we=Wt-_r.x,Tt=ae-_r.y,Pe=we*we+Tt*Tt,Pe<Ce&&(Ar=_r,Ce=Pe);return Ar},on:function(Wt,ae){return arguments.length>1?(Dt.on(Wt,ae),J):Dt.on(Wt)}}}function gt(){var Z,J,yt,_t,nt=w(-30),vt,It=1,Pt=1/0,St=.81;function Dt(Lt){var ne,ve=Z.length,Wt=(0,k.Z)(Z,tt,rt).visitAfter(ue);for(_t=Lt,ne=0;ne<ve;++ne)J=Z[ne],Wt.visit(ie)}function Qt(){if(Z){var Lt,ne=Z.length,ve;for(vt=new Array(ne),Lt=0;Lt<ne;++Lt)ve=Z[Lt],vt[ve.index]=+nt(ve,Lt,Z)}}function ue(Lt){var ne=0,ve,Wt,ae=0,Ce,xe,Jt;if(Lt.length){for(Ce=xe=Jt=0;Jt<4;++Jt)(ve=Lt[Jt])&&(Wt=Math.abs(ve.value))&&(ne+=ve.value,ae+=Wt,Ce+=Wt*ve.x,xe+=Wt*ve.y);Lt.x=Ce/ae,Lt.y=xe/ae}else{ve=Lt,ve.x=ve.data.x,ve.y=ve.data.y;do ne+=vt[ve.data.index];while(ve=ve.next)}Lt.value=ne}function ie(Lt,ne,ve,Wt){if(!Lt.value)return!0;var ae=Lt.x-J.x,Ce=Lt.y-J.y,xe=Wt-ne,Jt=ae*ae+Ce*Ce;if(xe*xe/St<Jt)return Jt<Pt&&(ae===0&&(ae=T(yt),Jt+=ae*ae),Ce===0&&(Ce=T(yt),Jt+=Ce*Ce),Jt<It&&(Jt=Math.sqrt(It*Jt)),J.vx+=ae*Lt.value*_t/Jt,J.vy+=Ce*Lt.value*_t/Jt),!0;if(Lt.length||Jt>=Pt)return;(Lt.data!==J||Lt.next)&&(ae===0&&(ae=T(yt),Jt+=ae*ae),Ce===0&&(Ce=T(yt),Jt+=Ce*Ce),Jt<It&&(Jt=Math.sqrt(It*Jt)));do Lt.data!==J&&(xe=vt[Lt.data.index]*_t/Jt,J.vx+=ae*xe,J.vy+=Ce*xe);while(Lt=Lt.next)}return Dt.initialize=function(Lt,ne){Z=Lt,yt=ne,Qt()},Dt.strength=function(Lt){return arguments.length?(nt=typeof Lt=="function"?Lt:w(+Lt),Qt(),Dt):nt},Dt.distanceMin=function(Lt){return arguments.length?(It=Lt*Lt,Dt):Math.sqrt(It)},Dt.distanceMax=function(Lt){return arguments.length?(Pt=Lt*Lt,Dt):Math.sqrt(Pt)},Dt.theta=function(Lt){return arguments.length?(St=Lt*Lt,Dt):Math.sqrt(St)},Dt}function Xt(Z,J,yt){var _t,nt=w(.1),vt,It;typeof Z!="function"&&(Z=w(+Z)),J==null&&(J=0),yt==null&&(yt=0);function Pt(Dt){for(var Qt=0,ue=_t.length;Qt<ue;++Qt){var ie=_t[Qt],Lt=ie.x-J||1e-6,ne=ie.y-yt||1e-6,ve=Math.sqrt(Lt*Lt+ne*ne),Wt=(It[Qt]-ve)*vt[Qt]*Dt/ve;ie.vx+=Lt*Wt,ie.vy+=ne*Wt}}function St(){if(_t){var Dt,Qt=_t.length;for(vt=new Array(Qt),It=new Array(Qt),Dt=0;Dt<Qt;++Dt)It[Dt]=+Z(_t[Dt],Dt,_t),vt[Dt]=isNaN(It[Dt])?0:+nt(_t[Dt],Dt,_t)}}return Pt.initialize=function(Dt){_t=Dt,St()},Pt.strength=function(Dt){return arguments.length?(nt=typeof Dt=="function"?Dt:w(+Dt),St(),Pt):nt},Pt.radius=function(Dt){return arguments.length?(Z=typeof Dt=="function"?Dt:w(+Dt),St(),Pt):Z},Pt.x=function(Dt){return arguments.length?(J=+Dt,Pt):J},Pt.y=function(Dt){return arguments.length?(yt=+Dt,Pt):yt},Pt}function Ct(Z){var J=w(.1),yt,_t,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function vt(Pt){for(var St=0,Dt=yt.length,Qt;St<Dt;++St)Qt=yt[St],Qt.vx+=(nt[St]-Qt.x)*_t[St]*Pt}function It(){if(yt){var Pt,St=yt.length;for(_t=new Array(St),nt=new Array(St),Pt=0;Pt<St;++Pt)_t[Pt]=isNaN(nt[Pt]=+Z(yt[Pt],Pt,yt))?0:+J(yt[Pt],Pt,yt)}}return vt.initialize=function(Pt){yt=Pt,It()},vt.strength=function(Pt){return arguments.length?(J=typeof Pt=="function"?Pt:w(+Pt),It(),vt):J},vt.x=function(Pt){return arguments.length?(Z=typeof Pt=="function"?Pt:w(+Pt),It(),vt):Z},vt}function At(Z){var J=w(.1),yt,_t,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function vt(Pt){for(var St=0,Dt=yt.length,Qt;St<Dt;++St)Qt=yt[St],Qt.vy+=(nt[St]-Qt.y)*_t[St]*Pt}function It(){if(yt){var Pt,St=yt.length;for(_t=new Array(St),nt=new Array(St),Pt=0;Pt<St;++Pt)_t[Pt]=isNaN(nt[Pt]=+Z(yt[Pt],Pt,yt))?0:+J(yt[Pt],Pt,yt)}}return vt.initialize=function(Pt){yt=Pt,It()},vt.strength=function(Pt){return arguments.length?(J=typeof Pt=="function"?Pt:w(+Pt),It(),vt):J},vt.y=function(Pt){return arguments.length?(Z=typeof Pt=="function"?Pt:w(+Pt),It(),vt):Z},vt}},405237:function(Ve,z,C){"use strict";C.r(z),C.d(z,{AbstractMatrix:function(){return Jt},CHO:function(){return dt},CholeskyDecomposition:function(){return dt},EVD:function(){return Ht},EigenvalueDecomposition:function(){return Ht},LU:function(){return gn},LuDecomposition:function(){return gn},Matrix:function(){return Pe},MatrixColumnSelectionView:function(){return Or},MatrixColumnView:function(){return Ar},MatrixFlipColumnView:function(){return Br},MatrixFlipRowView:function(){return cn},MatrixRowSelectionView:function(){return Dn},MatrixRowView:function(){return an},MatrixSelectionView:function(){return Un},MatrixSubView:function(){return Xn},MatrixTransposeView:function(){return xr},NIPALS:function(){return Ut},Nipals:function(){return Ut},QR:function(){return Rn},QrDecomposition:function(){return Rn},SVD:function(){return Mr},SingularValueDecomposition:function(){return Mr},WrapperMatrix1D:function(){return $e},WrapperMatrix2D:function(){return Tr},correlation:function(){return Je},covariance:function(){return at},default:function(){return Pe},determinant:function(){return sn},inverse:function(){return dn},linearDependencies:function(){return In},pseudoInverse:function(){return jn},solve:function(){return hn},wrap:function(){return qr}});var x=C(273408),k=C.n(x),w=C(731996),T=C.n(w),L=C(626037),P=C.n(L),p=C(952677),m=C.n(p),S=C(912444),y=C.n(S),g=C(272004),A=C.n(g);const E=Object.prototype.toString;function D(Q){const ot=E.call(Q);return ot.endsWith("Array]")&&!ot.includes("Big")}function F(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(Q))throw new TypeError("input must be an array");if(Q.length===0)throw new TypeError("input must not be empty");var R=ot.fromIndex,M=R===void 0?0:R,O=ot.toIndex,X=O===void 0?Q.length:O;if(M<0||M>=Q.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>Q.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=Q[M],Ft=M+1;Ft<X;Ft++)Q[Ft]>mt&&(mt=Q[Ft]);return mt}function Y(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(Q))throw new TypeError("input must be an array");if(Q.length===0)throw new TypeError("input must not be empty");var R=ot.fromIndex,M=R===void 0?0:R,O=ot.toIndex,X=O===void 0?Q.length:O;if(M<0||M>=Q.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>Q.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=Q[M],Ft=M+1;Ft<X;Ft++)Q[Ft]<mt&&(mt=Q[Ft]);return mt}function b(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(Q)){if(Q.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var R;if(ot.output!==void 0){if(!D(ot.output))throw new TypeError("output option must be an array if specified");R=ot.output}else R=new Array(Q.length);var M=Y(Q),O=F(Q);if(M===O)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var X=ot.min,mt=X===void 0?ot.autoMinMax?M:0:X,Ft=ot.max,Bt=Ft===void 0?ot.autoMinMax?O:1:Ft;if(mt>=Bt)throw new RangeError("min option must be smaller than max option");for(var ee=(Bt-mt)/(O-M),Le=0;Le<Q.length;Le++)R[Le]=(Q[Le]-M)*ee+mt;return R}var h=" ".repeat(2),$=" ".repeat(4);function U(){return W(this)}function W(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=ot.maxRows,M=R===void 0?15:R,O=ot.maxColumns,X=O===void 0?10:O,mt=ot.maxNumSize,Ft=mt===void 0?8:mt,Bt=ot.padMinus,ee=Bt===void 0?"auto":Bt;return"".concat(Q.constructor.name,` {
`).concat(h,`[
`).concat($).concat(V(Q,M,X,Ft,ee),`
`).concat(h,`]
`).concat(h,"rows: ").concat(Q.rows,`
`).concat(h,"columns: ").concat(Q.columns,`
}`)}function V(Q,ot,R,M,O){var X=Q.rows,mt=Q.columns,Ft=Math.min(X,ot),Bt=Math.min(mt,R),ee=[];if(O==="auto"){O=!1;t:for(var Le=0;Le<Ft;Le++)for(var me=0;me<Bt;me++)if(Q.get(Le,me)<0){O=!0;break t}}for(var Xe=0;Xe<Ft;Xe++){for(var pr=[],Ze=0;Ze<Bt;Ze++)pr.push(H(Q.get(Xe,Ze),M,O));ee.push("".concat(pr.join(" ")))}return Bt!==mt&&(ee[ee.length-1]+=" ... ".concat(mt-R," more columns")),Ft!==X&&ee.push("... ".concat(X-ot," more rows")),ee.join(`
`.concat($))}function H(Q,ot,R){return(Q>=0&&R?" ".concat(q(Q,ot-1)):q(Q,ot)).padEnd(ot)}function q(Q,ot){var R=Q.toString();if(R.length<=ot)return R;var M=Q.toFixed(ot);if(M.length>ot&&(M=Q.toFixed(Math.max(0,ot-(M.length-ot)))),M.length<=ot&&!M.startsWith("0.000")&&!M.startsWith("-0.000"))return M;var O=Q.toExponential(ot);return O.length>ot&&(O=Q.toExponential(Math.max(0,ot-(O.length-ot)))),O.slice(0)}function tt(Q,ot){Q.prototype.add=function(M){return typeof M=="number"?this.addS(M):this.addM(M)},Q.prototype.addS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)+M);return this},Q.prototype.addM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)+M.get(O,X));return this},Q.add=function(M,O){var X=new ot(M);return X.add(O)},Q.prototype.sub=function(M){return typeof M=="number"?this.subS(M):this.subM(M)},Q.prototype.subS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)-M);return this},Q.prototype.subM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)-M.get(O,X));return this},Q.sub=function(M,O){var X=new ot(M);return X.sub(O)},Q.prototype.subtract=Q.prototype.sub,Q.prototype.subtractS=Q.prototype.subS,Q.prototype.subtractM=Q.prototype.subM,Q.subtract=Q.sub,Q.prototype.mul=function(M){return typeof M=="number"?this.mulS(M):this.mulM(M)},Q.prototype.mulS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)*M);return this},Q.prototype.mulM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)*M.get(O,X));return this},Q.mul=function(M,O){var X=new ot(M);return X.mul(O)},Q.prototype.multiply=Q.prototype.mul,Q.prototype.multiplyS=Q.prototype.mulS,Q.prototype.multiplyM=Q.prototype.mulM,Q.multiply=Q.mul,Q.prototype.div=function(M){return typeof M=="number"?this.divS(M):this.divM(M)},Q.prototype.divS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)/M);return this},Q.prototype.divM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)/M.get(O,X));return this},Q.div=function(M,O){var X=new ot(M);return X.div(O)},Q.prototype.divide=Q.prototype.div,Q.prototype.divideS=Q.prototype.divS,Q.prototype.divideM=Q.prototype.divM,Q.divide=Q.div,Q.prototype.mod=function(M){return typeof M=="number"?this.modS(M):this.modM(M)},Q.prototype.modS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)%M);return this},Q.prototype.modM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)%M.get(O,X));return this},Q.mod=function(M,O){var X=new ot(M);return X.mod(O)},Q.prototype.modulus=Q.prototype.mod,Q.prototype.modulusS=Q.prototype.modS,Q.prototype.modulusM=Q.prototype.modM,Q.modulus=Q.mod,Q.prototype.and=function(M){return typeof M=="number"?this.andS(M):this.andM(M)},Q.prototype.andS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)&M);return this},Q.prototype.andM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)&M.get(O,X));return this},Q.and=function(M,O){var X=new ot(M);return X.and(O)},Q.prototype.or=function(M){return typeof M=="number"?this.orS(M):this.orM(M)},Q.prototype.orS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)|M);return this},Q.prototype.orM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)|M.get(O,X));return this},Q.or=function(M,O){var X=new ot(M);return X.or(O)},Q.prototype.xor=function(M){return typeof M=="number"?this.xorS(M):this.xorM(M)},Q.prototype.xorS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)^M);return this},Q.prototype.xorM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)^M.get(O,X));return this},Q.xor=function(M,O){var X=new ot(M);return X.xor(O)},Q.prototype.leftShift=function(M){return typeof M=="number"?this.leftShiftS(M):this.leftShiftM(M)},Q.prototype.leftShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)<<M);return this},Q.prototype.leftShiftM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)<<M.get(O,X));return this},Q.leftShift=function(M,O){var X=new ot(M);return X.leftShift(O)},Q.prototype.signPropagatingRightShift=function(M){return typeof M=="number"?this.signPropagatingRightShiftS(M):this.signPropagatingRightShiftM(M)},Q.prototype.signPropagatingRightShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>M);return this},Q.prototype.signPropagatingRightShiftM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>M.get(O,X));return this},Q.signPropagatingRightShift=function(M,O){var X=new ot(M);return X.signPropagatingRightShift(O)},Q.prototype.rightShift=function(M){return typeof M=="number"?this.rightShiftS(M):this.rightShiftM(M)},Q.prototype.rightShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>>M);return this},Q.prototype.rightShiftM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>>M.get(O,X));return this},Q.rightShift=function(M,O){var X=new ot(M);return X.rightShift(O)},Q.prototype.zeroFillRightShift=Q.prototype.rightShift,Q.prototype.zeroFillRightShiftS=Q.prototype.rightShiftS,Q.prototype.zeroFillRightShiftM=Q.prototype.rightShiftM,Q.zeroFillRightShift=Q.rightShift,Q.prototype.not=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,~this.get(M,O));return this},Q.not=function(M){var O=new ot(M);return O.not()},Q.prototype.abs=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.abs(this.get(M,O)));return this},Q.abs=function(M){var O=new ot(M);return O.abs()},Q.prototype.acos=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.acos(this.get(M,O)));return this},Q.acos=function(M){var O=new ot(M);return O.acos()},Q.prototype.acosh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.acosh(this.get(M,O)));return this},Q.acosh=function(M){var O=new ot(M);return O.acosh()},Q.prototype.asin=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.asin(this.get(M,O)));return this},Q.asin=function(M){var O=new ot(M);return O.asin()},Q.prototype.asinh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.asinh(this.get(M,O)));return this},Q.asinh=function(M){var O=new ot(M);return O.asinh()},Q.prototype.atan=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.atan(this.get(M,O)));return this},Q.atan=function(M){var O=new ot(M);return O.atan()},Q.prototype.atanh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.atanh(this.get(M,O)));return this},Q.atanh=function(M){var O=new ot(M);return O.atanh()},Q.prototype.cbrt=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cbrt(this.get(M,O)));return this},Q.cbrt=function(M){var O=new ot(M);return O.cbrt()},Q.prototype.ceil=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.ceil(this.get(M,O)));return this},Q.ceil=function(M){var O=new ot(M);return O.ceil()},Q.prototype.clz32=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.clz32(this.get(M,O)));return this},Q.clz32=function(M){var O=new ot(M);return O.clz32()},Q.prototype.cos=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cos(this.get(M,O)));return this},Q.cos=function(M){var O=new ot(M);return O.cos()},Q.prototype.cosh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cosh(this.get(M,O)));return this},Q.cosh=function(M){var O=new ot(M);return O.cosh()},Q.prototype.exp=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.exp(this.get(M,O)));return this},Q.exp=function(M){var O=new ot(M);return O.exp()},Q.prototype.expm1=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.expm1(this.get(M,O)));return this},Q.expm1=function(M){var O=new ot(M);return O.expm1()},Q.prototype.floor=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.floor(this.get(M,O)));return this},Q.floor=function(M){var O=new ot(M);return O.floor()},Q.prototype.fround=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.fround(this.get(M,O)));return this},Q.fround=function(M){var O=new ot(M);return O.fround()},Q.prototype.log=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log(this.get(M,O)));return this},Q.log=function(M){var O=new ot(M);return O.log()},Q.prototype.log1p=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log1p(this.get(M,O)));return this},Q.log1p=function(M){var O=new ot(M);return O.log1p()},Q.prototype.log10=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log10(this.get(M,O)));return this},Q.log10=function(M){var O=new ot(M);return O.log10()},Q.prototype.log2=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log2(this.get(M,O)));return this},Q.log2=function(M){var O=new ot(M);return O.log2()},Q.prototype.round=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.round(this.get(M,O)));return this},Q.round=function(M){var O=new ot(M);return O.round()},Q.prototype.sign=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sign(this.get(M,O)));return this},Q.sign=function(M){var O=new ot(M);return O.sign()},Q.prototype.sin=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sin(this.get(M,O)));return this},Q.sin=function(M){var O=new ot(M);return O.sin()},Q.prototype.sinh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sinh(this.get(M,O)));return this},Q.sinh=function(M){var O=new ot(M);return O.sinh()},Q.prototype.sqrt=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sqrt(this.get(M,O)));return this},Q.sqrt=function(M){var O=new ot(M);return O.sqrt()},Q.prototype.tan=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.tan(this.get(M,O)));return this},Q.tan=function(M){var O=new ot(M);return O.tan()},Q.prototype.tanh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.tanh(this.get(M,O)));return this},Q.tanh=function(M){var O=new ot(M);return O.tanh()},Q.prototype.trunc=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.trunc(this.get(M,O)));return this},Q.trunc=function(M){var O=new ot(M);return O.trunc()},Q.pow=function(M,O){var X=new ot(M);return X.pow(O)},Q.prototype.pow=function(M){return typeof M=="number"?this.powS(M):this.powM(M)},Q.prototype.powS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,Math.pow(this.get(O,X),M));return this},Q.prototype.powM=function(M){if(M=ot.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,Math.pow(this.get(O,X),M.get(O,X)));return this}}function rt(Q,ot,R){var M=R?Q.rows:Q.rows-1;if(ot<0||ot>M)throw new RangeError("Row index out of range")}function ft(Q,ot,R){var M=R?Q.columns:Q.columns-1;if(ot<0||ot>M)throw new RangeError("Column index out of range")}function it(Q,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==Q.columns)throw new RangeError("vector size must be the same as the number of columns");return ot}function bt(Q,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==Q.rows)throw new RangeError("vector size must be the same as the number of rows");return ot}function gt(Q,ot){if(!D(ot))throw new TypeError("row indices must be an array");for(var R=0;R<ot.length;R++)if(ot[R]<0||ot[R]>=Q.rows)throw new RangeError("row indices are out of range")}function Xt(Q,ot){if(!D(ot))throw new TypeError("column indices must be an array");for(var R=0;R<ot.length;R++)if(ot[R]<0||ot[R]>=Q.columns)throw new RangeError("column indices are out of range")}function Ct(Q,ot,R,M,O){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Z("startRow",ot),Z("endRow",R),Z("startColumn",M),Z("endColumn",O),ot>R||M>O||ot<0||ot>=Q.rows||R<0||R>=Q.rows||M<0||M>=Q.columns||O<0||O>=Q.columns)throw new RangeError("Submatrix indices are out of range")}function At(Q){for(var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],M=0;M<Q;M++)R.push(ot);return R}function Z(Q,ot){if(typeof ot!="number")throw new TypeError("".concat(Q," must be a number"))}function J(Q){if(Q.isEmpty())throw new Error("Empty matrix has no elements to index")}function yt(Q){for(var ot=At(Q.rows),R=0;R<Q.rows;++R)for(var M=0;M<Q.columns;++M)ot[R]+=Q.get(R,M);return ot}function _t(Q){for(var ot=At(Q.columns),R=0;R<Q.rows;++R)for(var M=0;M<Q.columns;++M)ot[M]+=Q.get(R,M);return ot}function nt(Q){for(var ot=0,R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)ot+=Q.get(R,M);return ot}function vt(Q){for(var ot=At(Q.rows,1),R=0;R<Q.rows;++R)for(var M=0;M<Q.columns;++M)ot[R]*=Q.get(R,M);return ot}function It(Q){for(var ot=At(Q.columns,1),R=0;R<Q.rows;++R)for(var M=0;M<Q.columns;++M)ot[M]*=Q.get(R,M);return ot}function Pt(Q){for(var ot=1,R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)ot*=Q.get(R,M);return ot}function St(Q,ot,R){for(var M=Q.rows,O=Q.columns,X=[],mt=0;mt<M;mt++){for(var Ft=0,Bt=0,ee=0,Le=0;Le<O;Le++)ee=Q.get(mt,Le)-R[mt],Ft+=ee,Bt+=ee*ee;ot?X.push((Bt-Ft*Ft/O)/(O-1)):X.push((Bt-Ft*Ft/O)/O)}return X}function Dt(Q,ot,R){for(var M=Q.rows,O=Q.columns,X=[],mt=0;mt<O;mt++){for(var Ft=0,Bt=0,ee=0,Le=0;Le<M;Le++)ee=Q.get(Le,mt)-R[mt],Ft+=ee,Bt+=ee*ee;ot?X.push((Bt-Ft*Ft/M)/(M-1)):X.push((Bt-Ft*Ft/M)/M)}return X}function Qt(Q,ot,R){for(var M=Q.rows,O=Q.columns,X=M*O,mt=0,Ft=0,Bt=0,ee=0;ee<M;ee++)for(var Le=0;Le<O;Le++)Bt=Q.get(ee,Le)-R,mt+=Bt,Ft+=Bt*Bt;return ot?(Ft-mt*mt/X)/(X-1):(Ft-mt*mt/X)/X}function ue(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)-ot[R])}function ie(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)-ot[M])}function Lt(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)-ot)}function ne(Q){for(var ot=[],R=0;R<Q.rows;R++){for(var M=0,O=0;O<Q.columns;O++)M+=Math.pow(Q.get(R,O),2)/(Q.columns-1);ot.push(Math.sqrt(M))}return ot}function ve(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)/ot[R])}function Wt(Q){for(var ot=[],R=0;R<Q.columns;R++){for(var M=0,O=0;O<Q.rows;O++)M+=Math.pow(Q.get(O,R),2)/(Q.rows-1);ot.push(Math.sqrt(M))}return ot}function ae(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)/ot[M])}function Ce(Q){for(var ot=Q.size-1,R=0,M=0;M<Q.columns;M++)for(var O=0;O<Q.rows;O++)R+=Math.pow(Q.get(O,M),2)/ot;return Math.sqrt(R)}function xe(Q,ot){for(var R=0;R<Q.rows;R++)for(var M=0;M<Q.columns;M++)Q.set(R,M,Q.get(R,M)/ot)}var Jt=function(){function Q(){y()(this,Q)}return A()(Q,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(R){if(typeof R!="function")throw new TypeError("callback must be a function");for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.call(this,M,O);return this}},{key:"to1DArray",value:function(){for(var R=[],M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.push(this.get(M,O));return R}},{key:"to2DArray",value:function(){for(var R=[],M=0;M<this.rows;M++){R.push([]);for(var O=0;O<this.columns;O++)R[M].push(this.get(M,O))}return R}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var M=0;M<=R;M++)if(this.get(R,M)!==this.get(M,R))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var R=0,M=0,O=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>O?(mt=!0,O=M):(X=!1,mt=!0);R++}return X}},{key:"isReducedEchelonForm",value:function(){for(var R=0,M=0,O=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>O?(mt=!0,O=M):(X=!1,mt=!0);for(var Ft=M+1;Ft<this.rows;Ft++)this.get(R,Ft)!==0&&(X=!1);R++}return X}},{key:"echelonForm",value:function(){for(var R=this.clone(),M=0,O=0;M<R.rows&&O<R.columns;){for(var X=M,mt=M;mt<R.rows;mt++)R.get(mt,O)>R.get(X,O)&&(X=mt);if(R.get(X,O)===0)O++;else{R.swapRows(M,X);for(var Ft=R.get(M,O),Bt=O;Bt<R.columns;Bt++)R.set(M,Bt,R.get(M,Bt)/Ft);for(var ee=M+1;ee<R.rows;ee++){var Le=R.get(ee,O)/R.get(M,O);R.set(ee,O,0);for(var me=O+1;me<R.columns;me++)R.set(ee,me,R.get(ee,me)-R.get(M,me)*Le)}M++,O++}}return R}},{key:"reducedEchelonForm",value:function(){for(var R=this.echelonForm(),M=R.columns,O=R.rows,X=O-1;X>=0;)if(R.maxRow(X)===0)X--;else{for(var mt=0,Ft=!1;mt<O&&Ft===!1;)R.get(X,mt)===1?Ft=!0:mt++;for(var Bt=0;Bt<X;Bt++)for(var ee=R.get(Bt,mt),Le=mt;Le<M;Le++){var me=R.get(Bt,Le)-ee*R.get(X,Le);R.set(Bt,Le,me)}X--}return R}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.rows,O=M===void 0?1:M,X=R.columns,mt=X===void 0?1:X;if(!Number.isInteger(O)||O<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(mt)||mt<=0)throw new TypeError("columns must be a positive integer");for(var Ft=new Pe(this.rows*O,this.columns*mt),Bt=0;Bt<O;Bt++)for(var ee=0;ee<mt;ee++)Ft.setSubMatrix(this,this.rows*Bt,this.columns*ee);return Ft}},{key:"fill",value:function(R){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,R);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(R){rt(this,R);for(var M=[],O=0;O<this.columns;O++)M.push(this.get(R,O));return M}},{key:"getRowVector",value:function(R){return Pe.rowVector(this.getRow(R))}},{key:"setRow",value:function(R,M){rt(this,R),M=it(this,M);for(var O=0;O<this.columns;O++)this.set(R,O,M[O]);return this}},{key:"swapRows",value:function(R,M){rt(this,R),rt(this,M);for(var O=0;O<this.columns;O++){var X=this.get(R,O);this.set(R,O,this.get(M,O)),this.set(M,O,X)}return this}},{key:"getColumn",value:function(R){ft(this,R);for(var M=[],O=0;O<this.rows;O++)M.push(this.get(O,R));return M}},{key:"getColumnVector",value:function(R){return Pe.columnVector(this.getColumn(R))}},{key:"setColumn",value:function(R,M){ft(this,R),M=bt(this,M);for(var O=0;O<this.rows;O++)this.set(O,R,M[O]);return this}},{key:"swapColumns",value:function(R,M){ft(this,R),ft(this,M);for(var O=0;O<this.rows;O++){var X=this.get(O,R);this.set(O,R,this.get(O,M)),this.set(O,M,X)}return this}},{key:"addRowVector",value:function(R){R=it(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)+R[O]);return this}},{key:"subRowVector",value:function(R){R=it(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)-R[O]);return this}},{key:"mulRowVector",value:function(R){R=it(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)*R[O]);return this}},{key:"divRowVector",value:function(R){R=it(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)/R[O]);return this}},{key:"addColumnVector",value:function(R){R=bt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)+R[M]);return this}},{key:"subColumnVector",value:function(R){R=bt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)-R[M]);return this}},{key:"mulColumnVector",value:function(R){R=bt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)*R[M]);return this}},{key:"divColumnVector",value:function(R){R=bt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)/R[M]);return this}},{key:"mulRow",value:function(R,M){rt(this,R);for(var O=0;O<this.columns;O++)this.set(R,O,this.get(R,O)*M);return this}},{key:"mulColumn",value:function(R,M){ft(this,R);for(var O=0;O<this.rows;O++)this.set(O,R,this.get(O,R)*M);return this}},{key:"max",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)>M[O]&&(M[O]=this.get(O,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Ft=0;Ft<this.rows;Ft++)for(var Bt=0;Bt<this.columns;Bt++)this.get(Ft,Bt)>mt[Bt]&&(mt[Bt]=this.get(Ft,Bt));return mt}case void 0:{for(var ee=this.get(0,0),Le=0;Le<this.rows;Le++)for(var me=0;me<this.columns;me++)this.get(Le,me)>ee&&(ee=this.get(Le,me));return ee}default:throw new Error("invalid option: ".concat(R))}}},{key:"maxIndex",value:function(){J(this);for(var R=this.get(0,0),M=[0,0],O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)>R&&(R=this.get(O,X),M[0]=O,M[1]=X);return M}},{key:"min",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.POSITIVE_INFINITY),O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)<M[O]&&(M[O]=this.get(O,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Ft=0;Ft<this.rows;Ft++)for(var Bt=0;Bt<this.columns;Bt++)this.get(Ft,Bt)<mt[Bt]&&(mt[Bt]=this.get(Ft,Bt));return mt}case void 0:{for(var ee=this.get(0,0),Le=0;Le<this.rows;Le++)for(var me=0;me<this.columns;me++)this.get(Le,me)<ee&&(ee=this.get(Le,me));return ee}default:throw new Error("invalid option: ".concat(R))}}},{key:"minIndex",value:function(){J(this);for(var R=this.get(0,0),M=[0,0],O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)<R&&(R=this.get(O,X),M[0]=O,M[1]=X);return M}},{key:"maxRow",value:function(R){if(rt(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),O=1;O<this.columns;O++)this.get(R,O)>M&&(M=this.get(R,O));return M}},{key:"maxRowIndex",value:function(R){rt(this,R),J(this);for(var M=this.get(R,0),O=[R,0],X=1;X<this.columns;X++)this.get(R,X)>M&&(M=this.get(R,X),O[1]=X);return O}},{key:"minRow",value:function(R){if(rt(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),O=1;O<this.columns;O++)this.get(R,O)<M&&(M=this.get(R,O));return M}},{key:"minRowIndex",value:function(R){rt(this,R),J(this);for(var M=this.get(R,0),O=[R,0],X=1;X<this.columns;X++)this.get(R,X)<M&&(M=this.get(R,X),O[1]=X);return O}},{key:"maxColumn",value:function(R){if(ft(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),O=1;O<this.rows;O++)this.get(O,R)>M&&(M=this.get(O,R));return M}},{key:"maxColumnIndex",value:function(R){ft(this,R),J(this);for(var M=this.get(0,R),O=[0,R],X=1;X<this.rows;X++)this.get(X,R)>M&&(M=this.get(X,R),O[0]=X);return O}},{key:"minColumn",value:function(R){if(ft(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),O=1;O<this.rows;O++)this.get(O,R)<M&&(M=this.get(O,R));return M}},{key:"minColumnIndex",value:function(R){ft(this,R),J(this);for(var M=this.get(0,R),O=[0,R],X=1;X<this.rows;X++)this.get(X,R)<M&&(M=this.get(X,R),O[0]=X);return O}},{key:"diag",value:function(){for(var R=Math.min(this.rows,this.columns),M=[],O=0;O<R;O++)M.push(this.get(O,O));return M}},{key:"norm",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",M=0;if(R==="max")return this.max();if(R==="frobenius"){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)M=M+this.get(O,X)*this.get(O,X);return Math.sqrt(M)}else throw new RangeError("unknown norm type: ".concat(R))}},{key:"cumulativeSum",value:function(){for(var R=0,M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R+=this.get(M,O),this.set(M,O,R);return this}},{key:"dot",value:function(R){Q.isMatrix(R)&&(R=R.to1DArray());var M=this.to1DArray();if(M.length!==R.length)throw new RangeError("vectors do not have the same size");for(var O=0,X=0;X<M.length;X++)O+=M[X]*R[X];return O}},{key:"mmul",value:function(R){R=Pe.checkMatrix(R);for(var M=this.rows,O=this.columns,X=R.columns,mt=new Pe(M,X),Ft=new Float64Array(O),Bt=0;Bt<X;Bt++){for(var ee=0;ee<O;ee++)Ft[ee]=R.get(ee,Bt);for(var Le=0;Le<M;Le++){for(var me=0,Xe=0;Xe<O;Xe++)me+=this.get(Le,Xe)*Ft[Xe];mt.set(Le,Bt,me)}}return mt}},{key:"strassen2x2",value:function(R){R=Pe.checkMatrix(R);var M=new Pe(2,2),O=this.get(0,0),X=R.get(0,0),mt=this.get(0,1),Ft=R.get(0,1),Bt=this.get(1,0),ee=R.get(1,0),Le=this.get(1,1),me=R.get(1,1),Xe=(O+Le)*(X+me),pr=(Bt+Le)*X,Ze=O*(Ft-me),Pr=Le*(ee-X),un=(O+mt)*me,Ke=(Bt-O)*(X+Ft),lr=(mt-Le)*(ee+me),Rr=Xe+Pr-un+lr,Dr=Ze+un,ce=pr+Pr,jt=Xe-pr+Ze+Ke;return M.set(0,0,Rr),M.set(0,1,Dr),M.set(1,0,ce),M.set(1,1,jt),M}},{key:"strassen3x3",value:function(R){R=Pe.checkMatrix(R);var M=new Pe(3,3),O=this.get(0,0),X=this.get(0,1),mt=this.get(0,2),Ft=this.get(1,0),Bt=this.get(1,1),ee=this.get(1,2),Le=this.get(2,0),me=this.get(2,1),Xe=this.get(2,2),pr=R.get(0,0),Ze=R.get(0,1),Pr=R.get(0,2),un=R.get(1,0),Ke=R.get(1,1),lr=R.get(1,2),Rr=R.get(2,0),Dr=R.get(2,1),ce=R.get(2,2),jt=(O+X+mt-Ft-Bt-me-Xe)*Ke,pe=(O-Ft)*(-Ze+Ke),Oe=Bt*(-pr+Ze+un-Ke-lr-Rr+ce),Se=(-O+Ft+Bt)*(pr-Ze+Ke),Fe=(Ft+Bt)*(-pr+Ze),or=O*pr,gr=(-O+Le+me)*(pr-Pr+lr),Jr=(-O+Le)*(Pr-lr),Gn=(Le+me)*(-pr+Pr),pn=(O+X+mt-Bt-ee-Le-me)*lr,qn=me*(-pr+Pr+un-Ke-lr-Rr+Dr),ln=(-mt+me+Xe)*(Ke+Rr-Dr),Vn=(mt-Xe)*(Ke-Dr),ca=mt*Rr,ba=(me+Xe)*(-Rr+Dr),Ea=(-mt+Bt+ee)*(lr+Rr-ce),Ni=(mt-ee)*(lr-ce),ti=(Bt+ee)*(-Rr+ce),ei=X*un,wi=ee*Dr,Gi=Ft*Pr,Co=Le*Ze,eo=Xe*ce,ga=or+ca+ei,lo=jt+Se+Fe+or+ln+ca+ba,To=or+gr+Gn+pn+ca+Ea+ti,ni=pe+Oe+Se+or+ca+Ea+Ni,Ri=pe+Se+Fe+or+wi,ho=ca+Ea+Ni+ti+Gi,Po=or+gr+Jr+qn+ln+Vn+ca,ro=ln+Vn+ca+ba+Co,no=or+gr+Jr+Gn+eo;return M.set(0,0,ga),M.set(0,1,lo),M.set(0,2,To),M.set(1,0,ni),M.set(1,1,Ri),M.set(1,2,ho),M.set(2,0,Po),M.set(2,1,ro),M.set(2,2,no),M}},{key:"mmulStrassen",value:function(R){R=Pe.checkMatrix(R);var M=this.clone(),O=M.rows,X=M.columns,mt=R.rows,Ft=R.columns;X!==mt&&console.warn("Multiplying ".concat(O," x ").concat(X," and ").concat(mt," x ").concat(Ft," matrix: dimensions do not match."));function Bt(Xe,pr,Ze){var Pr=Xe.rows,un=Xe.columns;if(Pr===pr&&un===Ze)return Xe;var Ke=Q.zeros(pr,Ze);return Ke=Ke.setSubMatrix(Xe,0,0),Ke}var ee=Math.max(O,mt),Le=Math.max(X,Ft);M=Bt(M,ee,Le),R=Bt(R,ee,Le);function me(Xe,pr,Ze,Pr){if(Ze<=512||Pr<=512)return Xe.mmul(pr);Ze%2===1&&Pr%2===1?(Xe=Bt(Xe,Ze+1,Pr+1),pr=Bt(pr,Ze+1,Pr+1)):Ze%2===1?(Xe=Bt(Xe,Ze+1,Pr),pr=Bt(pr,Ze+1,Pr)):Pr%2===1&&(Xe=Bt(Xe,Ze,Pr+1),pr=Bt(pr,Ze,Pr+1));var un=parseInt(Xe.rows/2,10),Ke=parseInt(Xe.columns/2,10),lr=Xe.subMatrix(0,un-1,0,Ke-1),Rr=pr.subMatrix(0,un-1,0,Ke-1),Dr=Xe.subMatrix(0,un-1,Ke,Xe.columns-1),ce=pr.subMatrix(0,un-1,Ke,pr.columns-1),jt=Xe.subMatrix(un,Xe.rows-1,0,Ke-1),pe=pr.subMatrix(un,pr.rows-1,0,Ke-1),Oe=Xe.subMatrix(un,Xe.rows-1,Ke,Xe.columns-1),Se=pr.subMatrix(un,pr.rows-1,Ke,pr.columns-1),Fe=me(Q.add(lr,Oe),Q.add(Rr,Se),un,Ke),or=me(Q.add(jt,Oe),Rr,un,Ke),gr=me(lr,Q.sub(ce,Se),un,Ke),Jr=me(Oe,Q.sub(pe,Rr),un,Ke),Gn=me(Q.add(lr,Dr),Se,un,Ke),pn=me(Q.sub(jt,lr),Q.add(Rr,ce),un,Ke),qn=me(Q.sub(Dr,Oe),Q.add(pe,Se),un,Ke),ln=Q.add(Fe,Jr);ln.sub(Gn),ln.add(qn);var Vn=Q.add(gr,Gn),ca=Q.add(or,Jr),ba=Q.sub(Fe,or);ba.add(gr),ba.add(pn);var Ea=Q.zeros(2*ln.rows,2*ln.columns);return Ea=Ea.setSubMatrix(ln,0,0),Ea=Ea.setSubMatrix(Vn,ln.rows,0),Ea=Ea.setSubMatrix(ca,0,ln.columns),Ea=Ea.setSubMatrix(ba,ln.rows,ln.columns),Ea.subMatrix(0,Ze-1,0,Pr-1)}return me(M,R,ee,Le)}},{key:"scaleRows",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,O=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(O))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(O>=mt)throw new RangeError("min must be smaller than max");for(var Ft=new Pe(this.rows,this.columns),Bt=0;Bt<this.rows;Bt++){var ee=this.getRow(Bt);ee.length>0&&b(ee,{min:O,max:mt,output:ee}),Ft.setRow(Bt,ee)}return Ft}},{key:"scaleColumns",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,O=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(O))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(O>=mt)throw new RangeError("min must be smaller than max");for(var Ft=new Pe(this.rows,this.columns),Bt=0;Bt<this.columns;Bt++){var ee=this.getColumn(Bt);ee.length&&b(ee,{min:O,max:mt,output:ee}),Ft.setColumn(Bt,ee)}return Ft}},{key:"flipRows",value:function(){for(var R=Math.ceil(this.columns/2),M=0;M<this.rows;M++)for(var O=0;O<R;O++){var X=this.get(M,O),mt=this.get(M,this.columns-1-O);this.set(M,O,mt),this.set(M,this.columns-1-O,X)}return this}},{key:"flipColumns",value:function(){for(var R=Math.ceil(this.rows/2),M=0;M<this.columns;M++)for(var O=0;O<R;O++){var X=this.get(O,M),mt=this.get(this.rows-1-O,M);this.set(O,M,mt),this.set(this.rows-1-O,M,X)}return this}},{key:"kroneckerProduct",value:function(R){R=Pe.checkMatrix(R);for(var M=this.rows,O=this.columns,X=R.rows,mt=R.columns,Ft=new Pe(M*X,O*mt),Bt=0;Bt<M;Bt++)for(var ee=0;ee<O;ee++)for(var Le=0;Le<X;Le++)for(var me=0;me<mt;me++)Ft.set(X*Bt+Le,mt*ee+me,this.get(Bt,ee)*R.get(Le,me));return Ft}},{key:"kroneckerSum",value:function(R){if(R=Pe.checkMatrix(R),!this.isSquare()||!R.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var M=this.rows,O=R.rows,X=this.kroneckerProduct(Pe.eye(O,O)),mt=Pe.eye(M,M).kroneckerProduct(R);return X.add(mt)}},{key:"transpose",value:function(){for(var R=new Pe(this.columns,this.rows),M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.set(O,M,this.get(M,O));return R}},{key:"sortRows",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.rows;M++)this.setRow(M,this.getRow(M).sort(R));return this}},{key:"sortColumns",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.columns;M++)this.setColumn(M,this.getColumn(M).sort(R));return this}},{key:"subMatrix",value:function(R,M,O,X){Ct(this,R,M,O,X);for(var mt=new Pe(M-R+1,X-O+1),Ft=R;Ft<=M;Ft++)for(var Bt=O;Bt<=X;Bt++)mt.set(Ft-R,Bt-O,this.get(Ft,Bt));return mt}},{key:"subMatrixRow",value:function(R,M,O){if(M===void 0&&(M=0),O===void 0&&(O=this.columns-1),M>O||M<0||M>=this.columns||O<0||O>=this.columns)throw new RangeError("Argument out of range");for(var X=new Pe(R.length,O-M+1),mt=0;mt<R.length;mt++)for(var Ft=M;Ft<=O;Ft++){if(R[mt]<0||R[mt]>=this.rows)throw new RangeError("Row index out of range: ".concat(R[mt]));X.set(mt,Ft-M,this.get(R[mt],Ft))}return X}},{key:"subMatrixColumn",value:function(R,M,O){if(M===void 0&&(M=0),O===void 0&&(O=this.rows-1),M>O||M<0||M>=this.rows||O<0||O>=this.rows)throw new RangeError("Argument out of range");for(var X=new Pe(O-M+1,R.length),mt=0;mt<R.length;mt++)for(var Ft=M;Ft<=O;Ft++){if(R[mt]<0||R[mt]>=this.columns)throw new RangeError("Column index out of range: ".concat(R[mt]));X.set(Ft-M,mt,this.get(Ft,R[mt]))}return X}},{key:"setSubMatrix",value:function(R,M,O){if(R=Pe.checkMatrix(R),R.isEmpty())return this;var X=M+R.rows-1,mt=O+R.columns-1;Ct(this,M,X,O,mt);for(var Ft=0;Ft<R.rows;Ft++)for(var Bt=0;Bt<R.columns;Bt++)this.set(M+Ft,O+Bt,R.get(Ft,Bt));return this}},{key:"selection",value:function(R,M){gt(this,R),Xt(this,M);for(var O=new Pe(R.length,M.length),X=0;X<R.length;X++)for(var mt=R[X],Ft=0;Ft<M.length;Ft++){var Bt=M[Ft];O.set(X,Ft,this.get(mt,Bt))}return O}},{key:"trace",value:function(){for(var R=Math.min(this.rows,this.columns),M=0,O=0;O<R;O++)M+=this.get(O,O);return M}},{key:"clone",value:function(){for(var R=new Pe(this.rows,this.columns),M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.set(M,O,this.get(M,O));return R}},{key:"sum",value:function(R){switch(R){case"row":return yt(this);case"column":return _t(this);case void 0:return nt(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"product",value:function(R){switch(R){case"row":return vt(this);case"column":return It(this);case void 0:return Pt(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"mean",value:function(R){var M=this.sum(R);switch(R){case"row":{for(var O=0;O<this.rows;O++)M[O]/=this.columns;return M}case"column":{for(var X=0;X<this.columns;X++)M[X]/=this.rows;return M}case void 0:return M/this.size;default:throw new Error("invalid option: ".concat(R))}}},{key:"variance",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M,X=O.unbiased,mt=X===void 0?!0:X,Ft=O.mean,Bt=Ft===void 0?this.mean(R):Ft;if(typeof mt!="boolean")throw new TypeError("unbiased must be a boolean");switch(R){case"row":{if(!D(Bt))throw new TypeError("mean must be an array");return St(this,mt,Bt)}case"column":{if(!D(Bt))throw new TypeError("mean must be an array");return Dt(this,mt,Bt)}case void 0:{if(typeof Bt!="number")throw new TypeError("mean must be a number");return Qt(this,mt,Bt)}default:throw new Error("invalid option: ".concat(R))}}},{key:"standardDeviation",value:function(R,M){m()(R)==="object"&&(M=R,R=void 0);var O=this.variance(R,M);if(R===void 0)return Math.sqrt(O);for(var X=0;X<O.length;X++)O[X]=Math.sqrt(O[X]);return O}},{key:"center",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M,X=O.center,mt=X===void 0?this.mean(R):X;switch(R){case"row":{if(!D(mt))throw new TypeError("center must be an array");return ue(this,mt),this}case"column":{if(!D(mt))throw new TypeError("center must be an array");return ie(this,mt),this}case void 0:{if(typeof mt!="number")throw new TypeError("center must be a number");return Lt(this,mt),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"scale",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M.scale;switch(R){case"row":{if(O===void 0)O=ne(this);else if(!D(O))throw new TypeError("scale must be an array");return ve(this,O),this}case"column":{if(O===void 0)O=Wt(this);else if(!D(O))throw new TypeError("scale must be an array");return ae(this,O),this}case void 0:{if(O===void 0)O=Ce(this);else if(typeof O!="number")throw new TypeError("scale must be a number");return xe(this,O),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"toString",value:function(R){return W(this,R)}}],[{key:"from1DArray",value:function(R,M,O){var X=R*M;if(X!==O.length)throw new RangeError("data length does not match given dimensions");for(var mt=new Pe(R,M),Ft=0;Ft<R;Ft++)for(var Bt=0;Bt<M;Bt++)mt.set(Ft,Bt,O[Ft*M+Bt]);return mt}},{key:"rowVector",value:function(R){for(var M=new Pe(1,R.length),O=0;O<R.length;O++)M.set(0,O,R[O]);return M}},{key:"columnVector",value:function(R){for(var M=new Pe(R.length,1),O=0;O<R.length;O++)M.set(O,0,R[O]);return M}},{key:"zeros",value:function(R,M){return new Pe(R,M)}},{key:"ones",value:function(R,M){return new Pe(R,M).fill(1)}},{key:"rand",value:function(R,M){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(O)!=="object")throw new TypeError("options must be an object");for(var X=O.random,mt=X===void 0?Math.random:X,Ft=new Pe(R,M),Bt=0;Bt<R;Bt++)for(var ee=0;ee<M;ee++)Ft.set(Bt,ee,mt());return Ft}},{key:"randInt",value:function(R,M){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(O)!=="object")throw new TypeError("options must be an object");var X=O.min,mt=X===void 0?0:X,Ft=O.max,Bt=Ft===void 0?1e3:Ft,ee=O.random,Le=ee===void 0?Math.random:ee;if(!Number.isInteger(mt))throw new TypeError("min must be an integer");if(!Number.isInteger(Bt))throw new TypeError("max must be an integer");if(mt>=Bt)throw new RangeError("min must be smaller than max");for(var me=Bt-mt,Xe=new Pe(R,M),pr=0;pr<R;pr++)for(var Ze=0;Ze<M;Ze++){var Pr=mt+Math.round(Le()*me);Xe.set(pr,Ze,Pr)}return Xe}},{key:"eye",value:function(R,M,O){M===void 0&&(M=R),O===void 0&&(O=1);for(var X=Math.min(R,M),mt=this.zeros(R,M),Ft=0;Ft<X;Ft++)mt.set(Ft,Ft,O);return mt}},{key:"diag",value:function(R,M,O){var X=R.length;M===void 0&&(M=X),O===void 0&&(O=M);for(var mt=Math.min(X,M,O),Ft=this.zeros(M,O),Bt=0;Bt<mt;Bt++)Ft.set(Bt,Bt,R[Bt]);return Ft}},{key:"min",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var O=R.rows,X=R.columns,mt=new Pe(O,X),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)mt.set(Ft,Bt,Math.min(R.get(Ft,Bt),M.get(Ft,Bt)));return mt}},{key:"max",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var O=R.rows,X=R.columns,mt=new this(O,X),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)mt.set(Ft,Bt,Math.max(R.get(Ft,Bt),M.get(Ft,Bt)));return mt}},{key:"checkMatrix",value:function(R){return Q.isMatrix(R)?R:new Pe(R)}},{key:"isMatrix",value:function(R){return R!=null&&R.klass==="Matrix"}}]),Q}();Jt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=U);function we(Q,ot){return Q-ot}function Tt(Q){return Q.every(function(ot){return typeof ot=="number"})}Jt.random=Jt.rand,Jt.randomInt=Jt.randInt,Jt.diagonal=Jt.diag,Jt.prototype.diagonal=Jt.prototype.diag,Jt.identity=Jt.eye,Jt.prototype.negate=Jt.prototype.neg,Jt.prototype.tensorProduct=Jt.prototype.kroneckerProduct;var Pe=function(Q){T()(R,Q);var ot=P()(R);function R(M,O){var X;if(y()(this,R),X=ot.call(this),R.isMatrix(M))return k()(X,M.clone());if(Number.isInteger(M)&&M>=0)if(X.data=[],Number.isInteger(O)&&O>=0)for(var mt=0;mt<M;mt++)X.data.push(new Float64Array(O));else throw new TypeError("nColumns must be a positive integer");else if(D(M)){var Ft=M;if(M=Ft.length,O=M?Ft[0].length:0,typeof O!="number")throw new TypeError("Data must be a 2D array with at least one element");X.data=[];for(var Bt=0;Bt<M;Bt++){if(Ft[Bt].length!==O)throw new RangeError("Inconsistent array dimensions");if(!Tt(Ft[Bt]))throw new TypeError("Input data contains non-numeric values");X.data.push(Float64Array.from(Ft[Bt]))}}else throw new TypeError("First argument must be a positive number or an array");return X.rows=M,X.columns=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.data[O][X]=mt,this}},{key:"get",value:function(O,X){return this.data[O][X]}},{key:"removeRow",value:function(O){return rt(this,O),this.data.splice(O,1),this.rows-=1,this}},{key:"addRow",value:function(O,X){return X===void 0&&(X=O,O=this.rows),rt(this,O,!0),X=Float64Array.from(it(this,X)),this.data.splice(O,0,X),this.rows+=1,this}},{key:"removeColumn",value:function(O){ft(this,O);for(var X=0;X<this.rows;X++){for(var mt=new Float64Array(this.columns-1),Ft=0;Ft<O;Ft++)mt[Ft]=this.data[X][Ft];for(var Bt=O+1;Bt<this.columns;Bt++)mt[Bt-1]=this.data[X][Bt];this.data[X]=mt}return this.columns-=1,this}},{key:"addColumn",value:function(O,X){typeof X=="undefined"&&(X=O,O=this.columns),ft(this,O,!0),X=bt(this,X);for(var mt=0;mt<this.rows;mt++){for(var Ft=new Float64Array(this.columns+1),Bt=0;Bt<O;Bt++)Ft[Bt]=this.data[mt][Bt];for(Ft[Bt++]=X[mt];Bt<this.columns+1;Bt++)Ft[Bt]=this.data[mt][Bt-1];this.data[mt]=Ft}return this.columns+=1,this}}]),R}(Jt);tt(Jt,Pe);var _r=function(Q){T()(R,Q);var ot=P()(R);function R(M,O,X){var mt;return y()(this,R),mt=ot.call(this),mt.matrix=M,mt.rows=O,mt.columns=X,mt}return A()(R)}(Jt),Ar=function(Q){T()(R,Q);var ot=P()(R);function R(M,O){var X;return y()(this,R),ft(M,O),X=ot.call(this,M,M.rows,1),X.column=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.column,mt),this}},{key:"get",value:function(O){return this.matrix.get(O,this.column)}}]),R}(_r),Or=function(Q){T()(R,Q);var ot=P()(R);function R(M,O){var X;return y()(this,R),Xt(M,O),X=ot.call(this,M,M.rows,O.length),X.columnIndices=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.columnIndices[X],mt),this}},{key:"get",value:function(O,X){return this.matrix.get(O,this.columnIndices[X])}}]),R}(_r),Br=function(Q){T()(R,Q);var ot=P()(R);function R(M){return y()(this,R),ot.call(this,M,M.rows,M.columns)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.columns-X-1,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(O,this.columns-X-1)}}]),R}(_r),cn=function(Q){T()(R,Q);var ot=P()(R);function R(M){return y()(this,R),ot.call(this,M,M.rows,M.columns)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rows-O-1,X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rows-O-1,X)}}]),R}(_r),an=function(Q){T()(R,Q);var ot=P()(R);function R(M,O){var X;return y()(this,R),rt(M,O),X=ot.call(this,M,1,M.columns),X.row=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.row,X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.row,X)}}]),R}(_r),Dn=function(Q){T()(R,Q);var ot=P()(R);function R(M,O){var X;return y()(this,R),gt(M,O),X=ot.call(this,M,O.length,M.columns),X.rowIndices=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rowIndices[O],X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rowIndices[O],X)}}]),R}(_r),Un=function(Q){T()(R,Q);var ot=P()(R);function R(M,O,X){var mt;return y()(this,R),gt(M,O),Xt(M,X),mt=ot.call(this,M,O.length,X.length),mt.rowIndices=O,mt.columnIndices=X,mt}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rowIndices[O],this.columnIndices[X],mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rowIndices[O],this.columnIndices[X])}}]),R}(_r),Xn=function(Q){T()(R,Q);var ot=P()(R);function R(M,O,X,mt,Ft){var Bt;return y()(this,R),Ct(M,O,X,mt,Ft),Bt=ot.call(this,M,X-O+1,Ft-mt+1),Bt.startRow=O,Bt.startColumn=mt,Bt}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.startRow+O,this.startColumn+X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.startRow+O,this.startColumn+X)}}]),R}(_r),xr=function(Q){T()(R,Q);var ot=P()(R);function R(M){return y()(this,R),ot.call(this,M,M.columns,M.rows)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(X,O,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(X,O)}}]),R}(_r),$e=function(Q){T()(R,Q);var ot=P()(R);function R(M){var O,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,R);var mt=X.rows,Ft=mt===void 0?1:mt;if(M.length%Ft!==0)throw new Error("the data length is not divisible by the number of rows");return O=ot.call(this),O.rows=Ft,O.columns=M.length/Ft,O.data=M,O}return A()(R,[{key:"set",value:function(O,X,mt){var Ft=this._calculateIndex(O,X);return this.data[Ft]=mt,this}},{key:"get",value:function(O,X){var mt=this._calculateIndex(O,X);return this.data[mt]}},{key:"_calculateIndex",value:function(O,X){return O*this.columns+X}}]),R}(Jt),Tr=function(Q){T()(R,Q);var ot=P()(R);function R(M){var O;return y()(this,R),O=ot.call(this),O.data=M,O.rows=M.length,O.columns=M[0].length,O}return A()(R,[{key:"set",value:function(O,X,mt){return this.data[O][X]=mt,this}},{key:"get",value:function(O,X){return this.data[O][X]}}]),R}(Jt);function qr(Q,ot){if(D(Q))return Q[0]&&D(Q[0])?new Tr(Q):new $e(Q,ot);throw new Error("the argument is not an array")}var gn=function(){function Q(ot){y()(this,Q),ot=Tr.checkMatrix(ot);var R=ot.clone(),M=R.rows,O=R.columns,X=new Float64Array(M),mt=1,Ft,Bt,ee,Le,me,Xe,pr,Ze,Pr;for(Ft=0;Ft<M;Ft++)X[Ft]=Ft;for(Ze=new Float64Array(M),Bt=0;Bt<O;Bt++){for(Ft=0;Ft<M;Ft++)Ze[Ft]=R.get(Ft,Bt);for(Ft=0;Ft<M;Ft++){for(Pr=Math.min(Ft,Bt),me=0,ee=0;ee<Pr;ee++)me+=R.get(Ft,ee)*Ze[ee];Ze[Ft]-=me,R.set(Ft,Bt,Ze[Ft])}for(Le=Bt,Ft=Bt+1;Ft<M;Ft++)Math.abs(Ze[Ft])>Math.abs(Ze[Le])&&(Le=Ft);if(Le!==Bt){for(ee=0;ee<O;ee++)Xe=R.get(Le,ee),R.set(Le,ee,R.get(Bt,ee)),R.set(Bt,ee,Xe);pr=X[Le],X[Le]=X[Bt],X[Bt]=pr,mt=-mt}if(Bt<M&&R.get(Bt,Bt)!==0)for(Ft=Bt+1;Ft<M;Ft++)R.set(Ft,Bt,R.get(Ft,Bt)/R.get(Bt,Bt))}this.LU=R,this.pivotVector=X,this.pivotSign=mt}return A()(Q,[{key:"isSingular",value:function(){for(var R=this.LU,M=R.columns,O=0;O<M;O++)if(R.get(O,O)===0)return!0;return!1}},{key:"solve",value:function(R){R=Pe.checkMatrix(R);var M=this.LU,O=M.rows;if(O!==R.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var X=R.columns,mt=R.subMatrixRow(this.pivotVector,0,X-1),Ft=M.columns,Bt,ee,Le;for(Le=0;Le<Ft;Le++)for(Bt=Le+1;Bt<Ft;Bt++)for(ee=0;ee<X;ee++)mt.set(Bt,ee,mt.get(Bt,ee)-mt.get(Le,ee)*M.get(Bt,Le));for(Le=Ft-1;Le>=0;Le--){for(ee=0;ee<X;ee++)mt.set(Le,ee,mt.get(Le,ee)/M.get(Le,Le));for(Bt=0;Bt<Le;Bt++)for(ee=0;ee<X;ee++)mt.set(Bt,ee,mt.get(Bt,ee)-mt.get(Le,ee)*M.get(Bt,Le))}return mt}},{key:"determinant",get:function(){var R=this.LU;if(!R.isSquare())throw new Error("Matrix must be square");for(var M=this.pivotSign,O=R.columns,X=0;X<O;X++)M*=R.get(X,X);return M}},{key:"lowerTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,O=R.columns,X=new Pe(M,O),mt=0;mt<M;mt++)for(var Ft=0;Ft<O;Ft++)mt>Ft?X.set(mt,Ft,R.get(mt,Ft)):mt===Ft?X.set(mt,Ft,1):X.set(mt,Ft,0);return X}},{key:"upperTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,O=R.columns,X=new Pe(M,O),mt=0;mt<M;mt++)for(var Ft=0;Ft<O;Ft++)mt<=Ft?X.set(mt,Ft,R.get(mt,Ft)):X.set(mt,Ft,0);return X}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),Q}();function xn(Q,ot){var R=0;return Math.abs(Q)>Math.abs(ot)?(R=ot/Q,Math.abs(Q)*Math.sqrt(1+R*R)):ot!==0?(R=Q/ot,Math.abs(ot)*Math.sqrt(1+R*R)):0}var Rn=function(){function Q(ot){y()(this,Q),ot=Tr.checkMatrix(ot);var R=ot.clone(),M=ot.rows,O=ot.columns,X=new Float64Array(O),mt,Ft,Bt,ee;for(Bt=0;Bt<O;Bt++){var Le=0;for(mt=Bt;mt<M;mt++)Le=xn(Le,R.get(mt,Bt));if(Le!==0){for(R.get(Bt,Bt)<0&&(Le=-Le),mt=Bt;mt<M;mt++)R.set(mt,Bt,R.get(mt,Bt)/Le);for(R.set(Bt,Bt,R.get(Bt,Bt)+1),Ft=Bt+1;Ft<O;Ft++){for(ee=0,mt=Bt;mt<M;mt++)ee+=R.get(mt,Bt)*R.get(mt,Ft);for(ee=-ee/R.get(Bt,Bt),mt=Bt;mt<M;mt++)R.set(mt,Ft,R.get(mt,Ft)+ee*R.get(mt,Bt))}}X[Bt]=-Le}this.QR=R,this.Rdiag=X}return A()(Q,[{key:"solve",value:function(R){R=Pe.checkMatrix(R);var M=this.QR,O=M.rows;if(R.rows!==O)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var X=R.columns,mt=R.clone(),Ft=M.columns,Bt,ee,Le,me;for(Le=0;Le<Ft;Le++)for(ee=0;ee<X;ee++){for(me=0,Bt=Le;Bt<O;Bt++)me+=M.get(Bt,Le)*mt.get(Bt,ee);for(me=-me/M.get(Le,Le),Bt=Le;Bt<O;Bt++)mt.set(Bt,ee,mt.get(Bt,ee)+me*M.get(Bt,Le))}for(Le=Ft-1;Le>=0;Le--){for(ee=0;ee<X;ee++)mt.set(Le,ee,mt.get(Le,ee)/this.Rdiag[Le]);for(Bt=0;Bt<Le;Bt++)for(ee=0;ee<X;ee++)mt.set(Bt,ee,mt.get(Bt,ee)-mt.get(Le,ee)*M.get(Bt,Le))}return mt.subMatrix(0,Ft-1,0,X-1)}},{key:"isFullRank",value:function(){for(var R=this.QR.columns,M=0;M<R;M++)if(this.Rdiag[M]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var R=this.QR,M=R.columns,O=new Pe(M,M),X,mt;for(X=0;X<M;X++)for(mt=0;mt<M;mt++)X<mt?O.set(X,mt,R.get(X,mt)):X===mt?O.set(X,mt,this.Rdiag[X]):O.set(X,mt,0);return O}},{key:"orthogonalMatrix",get:function(){var R=this.QR,M=R.rows,O=R.columns,X=new Pe(M,O),mt,Ft,Bt,ee;for(Bt=O-1;Bt>=0;Bt--){for(mt=0;mt<M;mt++)X.set(mt,Bt,0);for(X.set(Bt,Bt,1),Ft=Bt;Ft<O;Ft++)if(R.get(Bt,Bt)!==0){for(ee=0,mt=Bt;mt<M;mt++)ee+=R.get(mt,Bt)*X.get(mt,Ft);for(ee=-ee/R.get(Bt,Bt),mt=Bt;mt<M;mt++)X.set(mt,Ft,X.get(mt,Ft)+ee*R.get(mt,Bt))}}return X}}]),Q}(),Mr=function(){function Q(ot){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(this,Q),ot=Tr.checkMatrix(ot),ot.isEmpty())throw new Error("Matrix must be non-empty");var M=ot.rows,O=ot.columns,X=R.computeLeftSingularVectors,mt=X===void 0?!0:X,Ft=R.computeRightSingularVectors,Bt=Ft===void 0?!0:Ft,ee=R.autoTranspose,Le=ee===void 0?!1:ee,me=!!mt,Xe=!!Bt,pr=!1,Ze;if(M<O)if(!Le)Ze=ot.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Ze=ot.transpose(),M=Ze.rows,O=Ze.columns,pr=!0;var Pr=me;me=Xe,Xe=Pr}else Ze=ot.clone();for(var un=Math.min(M,O),Ke=Math.min(M+1,O),lr=new Float64Array(Ke),Rr=new Pe(M,un),Dr=new Pe(O,O),ce=new Float64Array(O),jt=new Float64Array(M),pe=new Float64Array(Ke),Oe=0;Oe<Ke;Oe++)pe[Oe]=Oe;for(var Se=Math.min(M-1,O),Fe=Math.max(0,Math.min(O-2,M)),or=Math.max(Se,Fe),gr=0;gr<or;gr++){if(gr<Se){lr[gr]=0;for(var Jr=gr;Jr<M;Jr++)lr[gr]=xn(lr[gr],Ze.get(Jr,gr));if(lr[gr]!==0){Ze.get(gr,gr)<0&&(lr[gr]=-lr[gr]);for(var Gn=gr;Gn<M;Gn++)Ze.set(Gn,gr,Ze.get(Gn,gr)/lr[gr]);Ze.set(gr,gr,Ze.get(gr,gr)+1)}lr[gr]=-lr[gr]}for(var pn=gr+1;pn<O;pn++){if(gr<Se&&lr[gr]!==0){for(var qn=0,ln=gr;ln<M;ln++)qn+=Ze.get(ln,gr)*Ze.get(ln,pn);qn=-qn/Ze.get(gr,gr);for(var Vn=gr;Vn<M;Vn++)Ze.set(Vn,pn,Ze.get(Vn,pn)+qn*Ze.get(Vn,gr))}ce[pn]=Ze.get(gr,pn)}if(me&&gr<Se)for(var ca=gr;ca<M;ca++)Rr.set(ca,gr,Ze.get(ca,gr));if(gr<Fe){ce[gr]=0;for(var ba=gr+1;ba<O;ba++)ce[gr]=xn(ce[gr],ce[ba]);if(ce[gr]!==0){ce[gr+1]<0&&(ce[gr]=0-ce[gr]);for(var Ea=gr+1;Ea<O;Ea++)ce[Ea]/=ce[gr];ce[gr+1]+=1}if(ce[gr]=-ce[gr],gr+1<M&&ce[gr]!==0){for(var Ni=gr+1;Ni<M;Ni++)jt[Ni]=0;for(var ti=gr+1;ti<M;ti++)for(var ei=gr+1;ei<O;ei++)jt[ti]+=ce[ei]*Ze.get(ti,ei);for(var wi=gr+1;wi<O;wi++)for(var Gi=-ce[wi]/ce[gr+1],Co=gr+1;Co<M;Co++)Ze.set(Co,wi,Ze.get(Co,wi)+Gi*jt[Co])}if(Xe)for(var eo=gr+1;eo<O;eo++)Dr.set(eo,gr,ce[eo])}}var ga=Math.min(O,M+1);if(Se<O&&(lr[Se]=Ze.get(Se,Se)),M<ga&&(lr[ga-1]=0),Fe+1<ga&&(ce[Fe]=Ze.get(Fe,ga-1)),ce[ga-1]=0,me){for(var lo=Se;lo<un;lo++){for(var To=0;To<M;To++)Rr.set(To,lo,0);Rr.set(lo,lo,1)}for(var ni=Se-1;ni>=0;ni--)if(lr[ni]!==0){for(var Ri=ni+1;Ri<un;Ri++){for(var ho=0,Po=ni;Po<M;Po++)ho+=Rr.get(Po,ni)*Rr.get(Po,Ri);ho=-ho/Rr.get(ni,ni);for(var ro=ni;ro<M;ro++)Rr.set(ro,Ri,Rr.get(ro,Ri)+ho*Rr.get(ro,ni))}for(var no=ni;no<M;no++)Rr.set(no,ni,-Rr.get(no,ni));Rr.set(ni,ni,1+Rr.get(ni,ni));for(var es=0;es<ni-1;es++)Rr.set(es,ni,0)}else{for(var vo=0;vo<M;vo++)Rr.set(vo,ni,0);Rr.set(ni,ni,1)}}if(Xe)for(var Si=O-1;Si>=0;Si--){if(Si<Fe&&ce[Si]!==0)for(var ao=Si+1;ao<O;ao++){for(var Jo=0,Yt=Si+1;Yt<O;Yt++)Jo+=Dr.get(Yt,Si)*Dr.get(Yt,ao);Jo=-Jo/Dr.get(Si+1,Si);for(var de=Si+1;de<O;de++)Dr.set(de,ao,Dr.get(de,ao)+Jo*Dr.get(de,Si))}for(var Ge=0;Ge<O;Ge++)Dr.set(Ge,Si,0);Dr.set(Si,Si,1)}for(var sr=ga-1,Lr=0,Nr=Number.EPSILON;ga>0;){var Sr=void 0,en=void 0;for(Sr=ga-2;Sr>=-1&&Sr!==-1;Sr--){var fn=Number.MIN_VALUE+Nr*Math.abs(lr[Sr]+Math.abs(lr[Sr+1]));if(Math.abs(ce[Sr])<=fn||Number.isNaN(ce[Sr])){ce[Sr]=0;break}}if(Sr===ga-2)en=4;else{var Pn=void 0;for(Pn=ga-1;Pn>=Sr&&Pn!==Sr;Pn--){var sa=(Pn!==ga?Math.abs(ce[Pn]):0)+(Pn!==Sr+1?Math.abs(ce[Pn-1]):0);if(Math.abs(lr[Pn])<=Nr*sa){lr[Pn]=0;break}}Pn===Sr?en=3:Pn===ga-1?en=1:(en=2,Sr=Pn)}switch(Sr++,en){case 1:{var Zn=ce[ga-2];ce[ga-2]=0;for(var pa=ga-2;pa>=Sr;pa--){var ya=xn(lr[pa],Zn),di=lr[pa]/ya,Ma=Zn/ya;if(lr[pa]=ya,pa!==Sr&&(Zn=-Ma*ce[pa-1],ce[pa-1]=di*ce[pa-1]),Xe)for(var oa=0;oa<O;oa++)ya=di*Dr.get(oa,pa)+Ma*Dr.get(oa,ga-1),Dr.set(oa,ga-1,-Ma*Dr.get(oa,pa)+di*Dr.get(oa,ga-1)),Dr.set(oa,pa,ya)}break}case 2:{var si=ce[Sr-1];ce[Sr-1]=0;for(var $a=Sr;$a<ga;$a++){var Fa=xn(lr[$a],si),Ui=lr[$a]/Fa,fi=si/Fa;if(lr[$a]=Fa,si=-fi*ce[$a],ce[$a]=Ui*ce[$a],me)for(var La=0;La<M;La++)Fa=Ui*Rr.get(La,$a)+fi*Rr.get(La,Sr-1),Rr.set(La,Sr-1,-fi*Rr.get(La,$a)+Ui*Rr.get(La,Sr-1)),Rr.set(La,$a,Fa)}break}case 3:{var ja=Math.max(Math.abs(lr[ga-1]),Math.abs(lr[ga-2]),Math.abs(ce[ga-2]),Math.abs(lr[Sr]),Math.abs(ce[Sr])),za=lr[ga-1]/ja,yi=lr[ga-2]/ja,mi=ce[ga-2]/ja,ki=lr[Sr]/ja,po=ce[Sr]/ja,Wi=((yi+za)*(yi-za)+mi*mi)/2,Ao=za*mi*(za*mi),Vo=0;(Wi!==0||Ao!==0)&&(Wi<0?Vo=0-Math.sqrt(Wi*Wi+Ao):Vo=Math.sqrt(Wi*Wi+Ao),Vo=Ao/(Wi+Vo));for(var os=(ki+za)*(ki-za)+Vo,$i=ki*po,qa=Sr;qa<ga-1;qa++){var Yi=xn(os,$i);Yi===0&&(Yi=Number.MIN_VALUE);var io=os/Yi,Qa=$i/Yi;if(qa!==Sr&&(ce[qa-1]=Yi),os=io*lr[qa]+Qa*ce[qa],ce[qa]=io*ce[qa]-Qa*lr[qa],$i=Qa*lr[qa+1],lr[qa+1]=io*lr[qa+1],Xe)for(var Pi=0;Pi<O;Pi++)Yi=io*Dr.get(Pi,qa)+Qa*Dr.get(Pi,qa+1),Dr.set(Pi,qa+1,-Qa*Dr.get(Pi,qa)+io*Dr.get(Pi,qa+1)),Dr.set(Pi,qa,Yi);if(Yi=xn(os,$i),Yi===0&&(Yi=Number.MIN_VALUE),io=os/Yi,Qa=$i/Yi,lr[qa]=Yi,os=io*ce[qa]+Qa*lr[qa+1],lr[qa+1]=-Qa*ce[qa]+io*lr[qa+1],$i=Qa*ce[qa+1],ce[qa+1]=io*ce[qa+1],me&&qa<M-1)for(var zo=0;zo<M;zo++)Yi=io*Rr.get(zo,qa)+Qa*Rr.get(zo,qa+1),Rr.set(zo,qa+1,-Qa*Rr.get(zo,qa)+io*Rr.get(zo,qa+1)),Rr.set(zo,qa,Yi)}ce[ga-2]=os,Lr=Lr+1;break}case 4:{if(lr[Sr]<=0&&(lr[Sr]=lr[Sr]<0?-lr[Sr]:0,Xe))for(var qi=0;qi<=sr;qi++)Dr.set(qi,Sr,-Dr.get(qi,Sr));for(;Sr<sr&&!(lr[Sr]>=lr[Sr+1]);){var rs=lr[Sr];if(lr[Sr]=lr[Sr+1],lr[Sr+1]=rs,Xe&&Sr<O-1)for(var Xi=0;Xi<O;Xi++)rs=Dr.get(Xi,Sr+1),Dr.set(Xi,Sr+1,Dr.get(Xi,Sr)),Dr.set(Xi,Sr,rs);if(me&&Sr<M-1)for(var yo=0;yo<M;yo++)rs=Rr.get(yo,Sr+1),Rr.set(yo,Sr+1,Rr.get(yo,Sr)),Rr.set(yo,Sr,rs);Sr++}Lr=0,ga--;break}}}if(pr){var Es=Dr;Dr=Rr,Rr=Es}this.m=M,this.n=O,this.s=lr,this.U=Rr,this.V=Dr}return A()(Q,[{key:"solve",value:function(R){for(var M=R,O=this.threshold,X=this.s.length,mt=Pe.zeros(X,X),Ft=0;Ft<X;Ft++)Math.abs(this.s[Ft])<=O?mt.set(Ft,Ft,0):mt.set(Ft,Ft,1/this.s[Ft]);for(var Bt=this.U,ee=this.rightSingularVectors,Le=ee.mmul(mt),me=ee.rows,Xe=Bt.rows,pr=Pe.zeros(me,Xe),Ze=0;Ze<me;Ze++)for(var Pr=0;Pr<Xe;Pr++){for(var un=0,Ke=0;Ke<X;Ke++)un+=Le.get(Ze,Ke)*Bt.get(Pr,Ke);pr.set(Ze,Pr,un)}return pr.mmul(M)}},{key:"solveForDiagonal",value:function(R){return this.solve(Pe.diag(R))}},{key:"inverse",value:function(){for(var R=this.V,M=this.threshold,O=R.rows,X=R.columns,mt=new Pe(O,this.s.length),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)Math.abs(this.s[Bt])>M&&mt.set(Ft,Bt,R.get(Ft,Bt)/this.s[Bt]);for(var ee=this.U,Le=ee.rows,me=ee.columns,Xe=new Pe(O,Le),pr=0;pr<O;pr++)for(var Ze=0;Ze<Le;Ze++){for(var Pr=0,un=0;un<me;un++)Pr+=mt.get(pr,un)*ee.get(Ze,un);Xe.set(pr,Ze,Pr)}return Xe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var R=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,M=0,O=this.s,X=0,mt=O.length;X<mt;X++)O[X]>R&&M++;return M}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Pe.diag(this.s)}}]),Q}();function dn(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Q=Tr.checkMatrix(Q),ot?new Mr(Q).inverse():hn(Q,Pe.eye(Q.rows))}function hn(Q,ot){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Q=Tr.checkMatrix(Q),ot=Tr.checkMatrix(ot),R?new Mr(Q).solve(ot):Q.isSquare()?new gn(Q).solve(ot):new Rn(Q).solve(ot)}function sn(Q){if(Q=Pe.checkMatrix(Q),Q.isSquare()){if(Q.columns===0)return 1;var ot,R,M,O;if(Q.columns===2)return ot=Q.get(0,0),R=Q.get(0,1),M=Q.get(1,0),O=Q.get(1,1),ot*O-R*M;if(Q.columns===3){var X,mt,Ft;return X=new Un(Q,[1,2],[1,2]),mt=new Un(Q,[1,2],[0,2]),Ft=new Un(Q,[1,2],[0,1]),ot=Q.get(0,0),R=Q.get(0,1),M=Q.get(0,2),ot*sn(X)-R*sn(mt)+M*sn(Ft)}else return new gn(Q).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Wn(Q,ot){for(var R=[],M=0;M<Q;M++)M!==ot&&R.push(M);return R}function Mn(Q,ot,R){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(Q>O)return new Array(ot.rows+1).fill(0);for(var X=ot.addRow(R,[0]),mt=0;mt<X.rows;mt++)Math.abs(X.get(mt,0))<M&&X.set(mt,0,0);return X.to1DArray()}function In(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=ot.thresholdValue,M=R===void 0?1e-9:R,O=ot.thresholdError,X=O===void 0?1e-9:O;Q=Pe.checkMatrix(Q);for(var mt=Q.rows,Ft=new Pe(mt,mt),Bt=0;Bt<mt;Bt++){var ee=Pe.columnVector(Q.getRow(Bt)),Le=Q.subMatrixRow(Wn(mt,Bt)).transpose(),me=new Mr(Le),Xe=me.solve(ee),pr=Pe.sub(ee,Le.mmul(Xe)).abs().max();Ft.setRow(Bt,Mn(pr,Xe,Bt,M,X))}return Ft}function jn(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(Q=Pe.checkMatrix(Q),Q.isEmpty())return Q.transpose();for(var R=new Mr(Q,{autoTranspose:!0}),M=R.leftSingularVectors,O=R.rightSingularVectors,X=R.diagonal,mt=0;mt<X.length;mt++)Math.abs(X[mt])>ot?X[mt]=1/X[mt]:X[mt]=0;return O.mmul(Pe.diag(X).mmul(M.transpose()))}function at(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q=new Pe(Q);var M=!1;if(m()(ot)==="object"&&!Pe.isMatrix(ot)&&!D(ot)?(R=ot,ot=Q,M=!0):ot=new Pe(ot),Q.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var O=R,X=O.center,mt=X===void 0?!0:X;mt&&(Q=Q.center("column"),M||(ot=ot.center("column")));for(var Ft=Q.transpose().mmul(ot),Bt=0;Bt<Ft.rows;Bt++)for(var ee=0;ee<Ft.columns;ee++)Ft.set(Bt,ee,Ft.get(Bt,ee)*(1/(Q.rows-1)));return Ft}function Je(Q){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q=new Pe(Q);var M=!1;if(m()(ot)==="object"&&!Pe.isMatrix(ot)&&!D(ot)?(R=ot,ot=Q,M=!0):ot=new Pe(ot),Q.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var O=R,X=O.center,mt=X===void 0?!0:X,Ft=O.scale,Bt=Ft===void 0?!0:Ft;mt&&(Q.center("column"),M||ot.center("column")),Bt&&(Q.scale("column"),M||ot.scale("column"));for(var ee=Q.standardDeviation("column",{unbiased:!0}),Le=M?ee:ot.standardDeviation("column",{unbiased:!0}),me=Q.transpose().mmul(ot),Xe=0;Xe<me.rows;Xe++)for(var pr=0;pr<me.columns;pr++)me.set(Xe,pr,me.get(Xe,pr)*(1/(ee[Xe]*Le[pr]))*(1/(Q.rows-1)));return me}var Ht=function(){function Q(ot){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,Q);var M=R.assumeSymmetric,O=M===void 0?!1:M;if(ot=Tr.checkMatrix(ot),!ot.isSquare())throw new Error("Matrix is not a square matrix");if(ot.isEmpty())throw new Error("Matrix must be non-empty");var X=ot.columns,mt=new Pe(X,X),Ft=new Float64Array(X),Bt=new Float64Array(X),ee=ot,Le,me,Xe=!1;if(O?Xe=!0:Xe=ot.isSymmetric(),Xe){for(Le=0;Le<X;Le++)for(me=0;me<X;me++)mt.set(Le,me,ee.get(Le,me));te(X,Bt,Ft,mt),wt(X,Bt,Ft,mt)}else{var pr=new Pe(X,X),Ze=new Float64Array(X);for(me=0;me<X;me++)for(Le=0;Le<X;Le++)pr.set(Le,me,ee.get(Le,me));Me(X,pr,Ze,mt),kt(X,Bt,Ft,mt,pr)}this.n=X,this.e=Bt,this.d=Ft,this.V=mt}return A()(Q,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var R=this.n,M=this.e,O=this.d,X=new Pe(R,R),mt,Ft;for(mt=0;mt<R;mt++){for(Ft=0;Ft<R;Ft++)X.set(mt,Ft,0);X.set(mt,mt,O[mt]),M[mt]>0?X.set(mt,mt+1,M[mt]):M[mt]<0&&X.set(mt,mt-1,M[mt])}return X}}]),Q}();function te(Q,ot,R,M){var O,X,mt,Ft,Bt,ee,Le,me;for(Bt=0;Bt<Q;Bt++)R[Bt]=M.get(Q-1,Bt);for(Ft=Q-1;Ft>0;Ft--){for(me=0,mt=0,ee=0;ee<Ft;ee++)me=me+Math.abs(R[ee]);if(me===0)for(ot[Ft]=R[Ft-1],Bt=0;Bt<Ft;Bt++)R[Bt]=M.get(Ft-1,Bt),M.set(Ft,Bt,0),M.set(Bt,Ft,0);else{for(ee=0;ee<Ft;ee++)R[ee]/=me,mt+=R[ee]*R[ee];for(O=R[Ft-1],X=Math.sqrt(mt),O>0&&(X=-X),ot[Ft]=me*X,mt=mt-O*X,R[Ft-1]=O-X,Bt=0;Bt<Ft;Bt++)ot[Bt]=0;for(Bt=0;Bt<Ft;Bt++){for(O=R[Bt],M.set(Bt,Ft,O),X=ot[Bt]+M.get(Bt,Bt)*O,ee=Bt+1;ee<=Ft-1;ee++)X+=M.get(ee,Bt)*R[ee],ot[ee]+=M.get(ee,Bt)*O;ot[Bt]=X}for(O=0,Bt=0;Bt<Ft;Bt++)ot[Bt]/=mt,O+=ot[Bt]*R[Bt];for(Le=O/(mt+mt),Bt=0;Bt<Ft;Bt++)ot[Bt]-=Le*R[Bt];for(Bt=0;Bt<Ft;Bt++){for(O=R[Bt],X=ot[Bt],ee=Bt;ee<=Ft-1;ee++)M.set(ee,Bt,M.get(ee,Bt)-(O*ot[ee]+X*R[ee]));R[Bt]=M.get(Ft-1,Bt),M.set(Ft,Bt,0)}}R[Ft]=mt}for(Ft=0;Ft<Q-1;Ft++){if(M.set(Q-1,Ft,M.get(Ft,Ft)),M.set(Ft,Ft,1),mt=R[Ft+1],mt!==0){for(ee=0;ee<=Ft;ee++)R[ee]=M.get(ee,Ft+1)/mt;for(Bt=0;Bt<=Ft;Bt++){for(X=0,ee=0;ee<=Ft;ee++)X+=M.get(ee,Ft+1)*M.get(ee,Bt);for(ee=0;ee<=Ft;ee++)M.set(ee,Bt,M.get(ee,Bt)-X*R[ee])}}for(ee=0;ee<=Ft;ee++)M.set(ee,Ft+1,0)}for(Bt=0;Bt<Q;Bt++)R[Bt]=M.get(Q-1,Bt),M.set(Q-1,Bt,0);M.set(Q-1,Q-1,1),ot[0]=0}function wt(Q,ot,R,M){var O,X,mt,Ft,Bt,ee,Le,me,Xe,pr,Ze,Pr,un,Ke,lr,Rr,Dr;for(mt=1;mt<Q;mt++)ot[mt-1]=ot[mt];ot[Q-1]=0;var ce=0,jt=0,pe=Number.EPSILON;for(ee=0;ee<Q;ee++){for(jt=Math.max(jt,Math.abs(R[ee])+Math.abs(ot[ee])),Le=ee;Le<Q&&!(Math.abs(ot[Le])<=pe*jt);)Le++;if(Le>ee){Dr=0;do{for(Dr=Dr+1,O=R[ee],me=(R[ee+1]-O)/(2*ot[ee]),Xe=xn(me,1),me<0&&(Xe=-Xe),R[ee]=ot[ee]/(me+Xe),R[ee+1]=ot[ee]*(me+Xe),pr=R[ee+1],X=O-R[ee],mt=ee+2;mt<Q;mt++)R[mt]-=X;for(ce=ce+X,me=R[Le],Ze=1,Pr=Ze,un=Ze,Ke=ot[ee+1],lr=0,Rr=0,mt=Le-1;mt>=ee;mt--)for(un=Pr,Pr=Ze,Rr=lr,O=Ze*ot[mt],X=Ze*me,Xe=xn(me,ot[mt]),ot[mt+1]=lr*Xe,lr=ot[mt]/Xe,Ze=me/Xe,me=Ze*R[mt]-lr*O,R[mt+1]=X+lr*(Ze*O+lr*R[mt]),Bt=0;Bt<Q;Bt++)X=M.get(Bt,mt+1),M.set(Bt,mt+1,lr*M.get(Bt,mt)+Ze*X),M.set(Bt,mt,Ze*M.get(Bt,mt)-lr*X);me=-lr*Rr*un*Ke*ot[ee]/pr,ot[ee]=lr*me,R[ee]=Ze*me}while(Math.abs(ot[ee])>pe*jt)}R[ee]=R[ee]+ce,ot[ee]=0}for(mt=0;mt<Q-1;mt++){for(Bt=mt,me=R[mt],Ft=mt+1;Ft<Q;Ft++)R[Ft]<me&&(Bt=Ft,me=R[Ft]);if(Bt!==mt)for(R[Bt]=R[mt],R[mt]=me,Ft=0;Ft<Q;Ft++)me=M.get(Ft,mt),M.set(Ft,mt,M.get(Ft,Bt)),M.set(Ft,Bt,me)}}function Me(Q,ot,R,M){var O=0,X=Q-1,mt,Ft,Bt,ee,Le,me,Xe;for(me=O+1;me<=X-1;me++){for(Xe=0,ee=me;ee<=X;ee++)Xe=Xe+Math.abs(ot.get(ee,me-1));if(Xe!==0){for(Bt=0,ee=X;ee>=me;ee--)R[ee]=ot.get(ee,me-1)/Xe,Bt+=R[ee]*R[ee];for(Ft=Math.sqrt(Bt),R[me]>0&&(Ft=-Ft),Bt=Bt-R[me]*Ft,R[me]=R[me]-Ft,Le=me;Le<Q;Le++){for(mt=0,ee=X;ee>=me;ee--)mt+=R[ee]*ot.get(ee,Le);for(mt=mt/Bt,ee=me;ee<=X;ee++)ot.set(ee,Le,ot.get(ee,Le)-mt*R[ee])}for(ee=0;ee<=X;ee++){for(mt=0,Le=X;Le>=me;Le--)mt+=R[Le]*ot.get(ee,Le);for(mt=mt/Bt,Le=me;Le<=X;Le++)ot.set(ee,Le,ot.get(ee,Le)-mt*R[Le])}R[me]=Xe*R[me],ot.set(me,me-1,Xe*Ft)}}for(ee=0;ee<Q;ee++)for(Le=0;Le<Q;Le++)M.set(ee,Le,ee===Le?1:0);for(me=X-1;me>=O+1;me--)if(ot.get(me,me-1)!==0){for(ee=me+1;ee<=X;ee++)R[ee]=ot.get(ee,me-1);for(Le=me;Le<=X;Le++){for(Ft=0,ee=me;ee<=X;ee++)Ft+=R[ee]*M.get(ee,Le);for(Ft=Ft/R[me]/ot.get(me,me-1),ee=me;ee<=X;ee++)M.set(ee,Le,M.get(ee,Le)+Ft*R[ee])}}}function kt(Q,ot,R,M,O){var X=Q-1,mt=0,Ft=Q-1,Bt=Number.EPSILON,ee=0,Le=0,me=0,Xe=0,pr=0,Ze=0,Pr=0,un=0,Ke,lr,Rr,Dr,ce,jt,pe,Oe,Se,Fe,or,gr,Jr,Gn,pn;for(Ke=0;Ke<Q;Ke++)for((Ke<mt||Ke>Ft)&&(R[Ke]=O.get(Ke,Ke),ot[Ke]=0),lr=Math.max(Ke-1,0);lr<Q;lr++)Le=Le+Math.abs(O.get(Ke,lr));for(;X>=mt;){for(Dr=X;Dr>mt&&(Ze=Math.abs(O.get(Dr-1,Dr-1))+Math.abs(O.get(Dr,Dr)),Ze===0&&(Ze=Le),!(Math.abs(O.get(Dr,Dr-1))<Bt*Ze));)Dr--;if(Dr===X)O.set(X,X,O.get(X,X)+ee),R[X]=O.get(X,X),ot[X]=0,X--,un=0;else if(Dr===X-1){if(pe=O.get(X,X-1)*O.get(X-1,X),me=(O.get(X-1,X-1)-O.get(X,X))/2,Xe=me*me+pe,Pr=Math.sqrt(Math.abs(Xe)),O.set(X,X,O.get(X,X)+ee),O.set(X-1,X-1,O.get(X-1,X-1)+ee),Oe=O.get(X,X),Xe>=0){for(Pr=me>=0?me+Pr:me-Pr,R[X-1]=Oe+Pr,R[X]=R[X-1],Pr!==0&&(R[X]=Oe-pe/Pr),ot[X-1]=0,ot[X]=0,Oe=O.get(X,X-1),Ze=Math.abs(Oe)+Math.abs(Pr),me=Oe/Ze,Xe=Pr/Ze,pr=Math.sqrt(me*me+Xe*Xe),me=me/pr,Xe=Xe/pr,lr=X-1;lr<Q;lr++)Pr=O.get(X-1,lr),O.set(X-1,lr,Xe*Pr+me*O.get(X,lr)),O.set(X,lr,Xe*O.get(X,lr)-me*Pr);for(Ke=0;Ke<=X;Ke++)Pr=O.get(Ke,X-1),O.set(Ke,X-1,Xe*Pr+me*O.get(Ke,X)),O.set(Ke,X,Xe*O.get(Ke,X)-me*Pr);for(Ke=mt;Ke<=Ft;Ke++)Pr=M.get(Ke,X-1),M.set(Ke,X-1,Xe*Pr+me*M.get(Ke,X)),M.set(Ke,X,Xe*M.get(Ke,X)-me*Pr)}else R[X-1]=Oe+me,R[X]=Oe+me,ot[X-1]=Pr,ot[X]=-Pr;X=X-2,un=0}else{if(Oe=O.get(X,X),Se=0,pe=0,Dr<X&&(Se=O.get(X-1,X-1),pe=O.get(X,X-1)*O.get(X-1,X)),un===10){for(ee+=Oe,Ke=mt;Ke<=X;Ke++)O.set(Ke,Ke,O.get(Ke,Ke)-Oe);Ze=Math.abs(O.get(X,X-1))+Math.abs(O.get(X-1,X-2)),Oe=Se=.75*Ze,pe=-.4375*Ze*Ze}if(un===30&&(Ze=(Se-Oe)/2,Ze=Ze*Ze+pe,Ze>0)){for(Ze=Math.sqrt(Ze),Se<Oe&&(Ze=-Ze),Ze=Oe-pe/((Se-Oe)/2+Ze),Ke=mt;Ke<=X;Ke++)O.set(Ke,Ke,O.get(Ke,Ke)-Ze);ee+=Ze,Oe=Se=pe=.964}for(un=un+1,ce=X-2;ce>=Dr&&(Pr=O.get(ce,ce),pr=Oe-Pr,Ze=Se-Pr,me=(pr*Ze-pe)/O.get(ce+1,ce)+O.get(ce,ce+1),Xe=O.get(ce+1,ce+1)-Pr-pr-Ze,pr=O.get(ce+2,ce+1),Ze=Math.abs(me)+Math.abs(Xe)+Math.abs(pr),me=me/Ze,Xe=Xe/Ze,pr=pr/Ze,!(ce===Dr||Math.abs(O.get(ce,ce-1))*(Math.abs(Xe)+Math.abs(pr))<Bt*(Math.abs(me)*(Math.abs(O.get(ce-1,ce-1))+Math.abs(Pr)+Math.abs(O.get(ce+1,ce+1))))));)ce--;for(Ke=ce+2;Ke<=X;Ke++)O.set(Ke,Ke-2,0),Ke>ce+2&&O.set(Ke,Ke-3,0);for(Rr=ce;Rr<=X-1&&(Gn=Rr!==X-1,Rr!==ce&&(me=O.get(Rr,Rr-1),Xe=O.get(Rr+1,Rr-1),pr=Gn?O.get(Rr+2,Rr-1):0,Oe=Math.abs(me)+Math.abs(Xe)+Math.abs(pr),Oe!==0&&(me=me/Oe,Xe=Xe/Oe,pr=pr/Oe)),Oe!==0);Rr++)if(Ze=Math.sqrt(me*me+Xe*Xe+pr*pr),me<0&&(Ze=-Ze),Ze!==0){for(Rr!==ce?O.set(Rr,Rr-1,-Ze*Oe):Dr!==ce&&O.set(Rr,Rr-1,-O.get(Rr,Rr-1)),me=me+Ze,Oe=me/Ze,Se=Xe/Ze,Pr=pr/Ze,Xe=Xe/me,pr=pr/me,lr=Rr;lr<Q;lr++)me=O.get(Rr,lr)+Xe*O.get(Rr+1,lr),Gn&&(me=me+pr*O.get(Rr+2,lr),O.set(Rr+2,lr,O.get(Rr+2,lr)-me*Pr)),O.set(Rr,lr,O.get(Rr,lr)-me*Oe),O.set(Rr+1,lr,O.get(Rr+1,lr)-me*Se);for(Ke=0;Ke<=Math.min(X,Rr+3);Ke++)me=Oe*O.get(Ke,Rr)+Se*O.get(Ke,Rr+1),Gn&&(me=me+Pr*O.get(Ke,Rr+2),O.set(Ke,Rr+2,O.get(Ke,Rr+2)-me*pr)),O.set(Ke,Rr,O.get(Ke,Rr)-me),O.set(Ke,Rr+1,O.get(Ke,Rr+1)-me*Xe);for(Ke=mt;Ke<=Ft;Ke++)me=Oe*M.get(Ke,Rr)+Se*M.get(Ke,Rr+1),Gn&&(me=me+Pr*M.get(Ke,Rr+2),M.set(Ke,Rr+2,M.get(Ke,Rr+2)-me*pr)),M.set(Ke,Rr,M.get(Ke,Rr)-me),M.set(Ke,Rr+1,M.get(Ke,Rr+1)-me*Xe)}}}if(Le!==0){for(X=Q-1;X>=0;X--)if(me=R[X],Xe=ot[X],Xe===0)for(Dr=X,O.set(X,X,1),Ke=X-1;Ke>=0;Ke--){for(pe=O.get(Ke,Ke)-me,pr=0,lr=Dr;lr<=X;lr++)pr=pr+O.get(Ke,lr)*O.get(lr,X);if(ot[Ke]<0)Pr=pe,Ze=pr;else if(Dr=Ke,ot[Ke]===0?O.set(Ke,X,pe!==0?-pr/pe:-pr/(Bt*Le)):(Oe=O.get(Ke,Ke+1),Se=O.get(Ke+1,Ke),Xe=(R[Ke]-me)*(R[Ke]-me)+ot[Ke]*ot[Ke],jt=(Oe*Ze-Pr*pr)/Xe,O.set(Ke,X,jt),O.set(Ke+1,X,Math.abs(Oe)>Math.abs(Pr)?(-pr-pe*jt)/Oe:(-Ze-Se*jt)/Pr)),jt=Math.abs(O.get(Ke,X)),Bt*jt*jt>1)for(lr=Ke;lr<=X;lr++)O.set(lr,X,O.get(lr,X)/jt)}else if(Xe<0)for(Dr=X-1,Math.abs(O.get(X,X-1))>Math.abs(O.get(X-1,X))?(O.set(X-1,X-1,Xe/O.get(X,X-1)),O.set(X-1,X,-(O.get(X,X)-me)/O.get(X,X-1))):(pn=qt(0,-O.get(X-1,X),O.get(X-1,X-1)-me,Xe),O.set(X-1,X-1,pn[0]),O.set(X-1,X,pn[1])),O.set(X,X-1,0),O.set(X,X,1),Ke=X-2;Ke>=0;Ke--){for(Fe=0,or=0,lr=Dr;lr<=X;lr++)Fe=Fe+O.get(Ke,lr)*O.get(lr,X-1),or=or+O.get(Ke,lr)*O.get(lr,X);if(pe=O.get(Ke,Ke)-me,ot[Ke]<0)Pr=pe,pr=Fe,Ze=or;else if(Dr=Ke,ot[Ke]===0?(pn=qt(-Fe,-or,pe,Xe),O.set(Ke,X-1,pn[0]),O.set(Ke,X,pn[1])):(Oe=O.get(Ke,Ke+1),Se=O.get(Ke+1,Ke),gr=(R[Ke]-me)*(R[Ke]-me)+ot[Ke]*ot[Ke]-Xe*Xe,Jr=(R[Ke]-me)*2*Xe,gr===0&&Jr===0&&(gr=Bt*Le*(Math.abs(pe)+Math.abs(Xe)+Math.abs(Oe)+Math.abs(Se)+Math.abs(Pr))),pn=qt(Oe*pr-Pr*Fe+Xe*or,Oe*Ze-Pr*or-Xe*Fe,gr,Jr),O.set(Ke,X-1,pn[0]),O.set(Ke,X,pn[1]),Math.abs(Oe)>Math.abs(Pr)+Math.abs(Xe)?(O.set(Ke+1,X-1,(-Fe-pe*O.get(Ke,X-1)+Xe*O.get(Ke,X))/Oe),O.set(Ke+1,X,(-or-pe*O.get(Ke,X)-Xe*O.get(Ke,X-1))/Oe)):(pn=qt(-pr-Se*O.get(Ke,X-1),-Ze-Se*O.get(Ke,X),Pr,Xe),O.set(Ke+1,X-1,pn[0]),O.set(Ke+1,X,pn[1]))),jt=Math.max(Math.abs(O.get(Ke,X-1)),Math.abs(O.get(Ke,X))),Bt*jt*jt>1)for(lr=Ke;lr<=X;lr++)O.set(lr,X-1,O.get(lr,X-1)/jt),O.set(lr,X,O.get(lr,X)/jt)}for(Ke=0;Ke<Q;Ke++)if(Ke<mt||Ke>Ft)for(lr=Ke;lr<Q;lr++)M.set(Ke,lr,O.get(Ke,lr));for(lr=Q-1;lr>=mt;lr--)for(Ke=mt;Ke<=Ft;Ke++){for(Pr=0,Rr=mt;Rr<=Math.min(lr,Ft);Rr++)Pr=Pr+M.get(Ke,Rr)*O.get(Rr,lr);M.set(Ke,lr,Pr)}}}function qt(Q,ot,R,M){var O,X;return Math.abs(R)>Math.abs(M)?(O=M/R,X=R+O*M,[(Q+O*ot)/X,(ot-O*Q)/X]):(O=R/M,X=M+O*R,[(O*Q+ot)/X,(O*ot-Q)/X])}var dt=function(){function Q(ot){if(y()(this,Q),ot=Tr.checkMatrix(ot),!ot.isSymmetric())throw new Error("Matrix is not symmetric");var R=ot,M=R.rows,O=new Pe(M,M),X=!0,mt,Ft,Bt;for(Ft=0;Ft<M;Ft++){var ee=0;for(Bt=0;Bt<Ft;Bt++){var Le=0;for(mt=0;mt<Bt;mt++)Le+=O.get(Bt,mt)*O.get(Ft,mt);Le=(R.get(Ft,Bt)-Le)/O.get(Bt,Bt),O.set(Ft,Bt,Le),ee=ee+Le*Le}for(ee=R.get(Ft,Ft)-ee,X&=ee>0,O.set(Ft,Ft,Math.sqrt(Math.max(ee,0))),Bt=Ft+1;Bt<M;Bt++)O.set(Ft,Bt,0)}this.L=O,this.positiveDefinite=!!X}return A()(Q,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(R){R=Tr.checkMatrix(R);var M=this.L,O=M.rows;if(R.rows!==O)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var X=R.columns,mt=R.clone(),Ft,Bt,ee;for(ee=0;ee<O;ee++)for(Bt=0;Bt<X;Bt++){for(Ft=0;Ft<ee;Ft++)mt.set(ee,Bt,mt.get(ee,Bt)-mt.get(Ft,Bt)*M.get(ee,Ft));mt.set(ee,Bt,mt.get(ee,Bt)/M.get(ee,ee))}for(ee=O-1;ee>=0;ee--)for(Bt=0;Bt<X;Bt++){for(Ft=ee+1;Ft<O;Ft++)mt.set(ee,Bt,mt.get(ee,Bt)-mt.get(Ft,Bt)*M.get(Ft,ee));mt.set(ee,Bt,mt.get(ee,Bt)/M.get(ee,ee))}return mt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),Q}(),Ut=A()(function Q(ot){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,Q),ot=Tr.checkMatrix(ot);var M=R.Y,O=R.scaleScores,X=O===void 0?!1:O,mt=R.maxIterations,Ft=mt===void 0?1e3:mt,Bt=R.terminationCriteria,ee=Bt===void 0?1e-10:Bt,Le;if(M){if(D(M)&&typeof M[0]=="number"?M=Pe.columnVector(M):M=Tr.checkMatrix(M),M.rows!==ot.rows)throw new Error("Y should have the same number of rows as X");Le=M.getColumnVector(0)}else Le=ot.getColumnVector(0);for(var me=1,Xe,pr,Ze,Pr,un=0;un<Ft&&me>ee;un++)Ze=ot.transpose().mmul(Le).div(Le.transpose().mmul(Le).get(0,0)),Ze=Ze.div(Ze.norm()),Xe=ot.mmul(Ze).div(Ze.transpose().mmul(Ze).get(0,0)),un>0&&(me=Xe.clone().sub(Pr).pow(2).sum()),Pr=Xe.clone(),M?(pr=M.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0)),pr=pr.div(pr.norm()),Le=M.mmul(pr).div(pr.transpose().mmul(pr).get(0,0))):Le=Xe;if(M){var Ke=ot.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0));Ke=Ke.div(Ke.norm());var lr=ot.clone().sub(Xe.clone().mmul(Ke.transpose())),Rr=Le.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0)),Dr=M.clone().sub(Xe.clone().mulS(Rr.get(0,0)).mmul(pr.transpose()));this.t=Xe,this.p=Ke.transpose(),this.w=Ze.transpose(),this.q=pr,this.u=Le,this.s=Xe.transpose().mmul(Xe),this.xResidual=lr,this.yResidual=Dr,this.betas=Rr}else this.w=Ze.transpose(),this.s=Xe.transpose().mmul(Xe).sqrt(),X?this.t=Xe.clone().div(this.s.get(0,0)):this.t=Xe,this.xResidual=ot.sub(Xe.mmul(Ze.transpose()))})},988824:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return Me}});var x=C(197582),k=C(785893),w=C(667294),T=C(513669),L=C(98651),P=C(82538);const p=(kt,qt)=>{const dt=A(kt),Ut=A(qt),Q=dt.pop(),ot=Ut.pop(),R=b(dt,Ut);return R!==0?R:Q&&ot?b(Q.split("."),ot.split(".")):Q||ot?Q?-1:1:0},m=kt=>typeof kt=="string"&&/^[v\d]/.test(kt)&&g.test(kt),S=(kt,qt,dt)=>{U(dt);const Ut=p(kt,qt);return h[dt].includes(Ut)},y=(kt,qt)=>{if(qt.includes("||"))return qt.split("||").some(Xe=>y(kt,Xe));if(qt.includes(" "))return qt.trim().replace(/\s{2,}/g," ").split(" ").every(Xe=>y(kt,Xe));const dt=qt.match(/^([<>=~^]+)/),Ut=dt?dt[1]:"=";if(Ut!=="^"&&Ut!=="~")return S(kt,qt,Ut);const[Q,ot,R,,M]=A(kt),[O,X,mt,,Ft]=A(qt),Bt=[Q,ot,R],ee=[O,X!=null?X:"x",mt!=null?mt:"x"];if(Ft&&(!M||b(Bt,ee)!==0||b(M.split("."),Ft.split("."))===-1))return!1;const Le=ee.findIndex(Xe=>Xe!=="0")+1,me=Ut==="~"?2:Le>1?Le:1;return!(b(Bt.slice(0,me),ee.slice(0,me))!==0||b(Bt.slice(me),ee.slice(me))===-1)},g=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,A=kt=>{if(typeof kt!="string")throw new TypeError("Invalid argument expected string");const qt=kt.match(g);if(!qt)throw new Error(`Invalid argument not valid semver ('${kt}' received)`);return qt.shift(),qt},E=kt=>kt==="*"||kt==="x"||kt==="X",D=kt=>{const qt=parseInt(kt,10);return isNaN(qt)?kt:qt},F=(kt,qt)=>typeof kt!=typeof qt?[String(kt),String(qt)]:[kt,qt],Y=(kt,qt)=>{if(E(kt)||E(qt))return 0;const[dt,Ut]=F(D(kt),D(qt));return dt>Ut?1:dt<Ut?-1:0},b=(kt,qt)=>{for(let dt=0;dt<Math.max(kt.length,qt.length);dt++){const Ut=Y(kt[dt]||"0",qt[dt]||"0");if(Ut!==0)return Ut}return 0},h={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},$=Object.keys(h),U=kt=>{if(typeof kt!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof kt}`);if($.indexOf(kt)===-1)throw new Error(`Invalid operator, expected one of ${$.join("|")}`)};var W=function(kt,qt){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Ut){dt.__proto__=Ut}||function(dt,Ut){for(var Q in Ut)Object.prototype.hasOwnProperty.call(Ut,Q)&&(dt[Q]=Ut[Q])},W(kt,qt)};function V(kt,qt){W(kt,qt);function dt(){this.constructor=kt}kt.prototype=qt===null?Object.create(qt):(dt.prototype=qt.prototype,new dt)}var H=function(){return H=Object.assign||function(qt){for(var dt,Ut=1,Q=arguments.length;Ut<Q;Ut++){dt=arguments[Ut];for(var ot in dt)Object.prototype.hasOwnProperty.call(dt,ot)&&(qt[ot]=dt[ot])}return qt},H.apply(this,arguments)};function q(kt,qt){var dt={};for(var Ut in kt)Object.prototype.hasOwnProperty.call(kt,Ut)&&qt.indexOf(Ut)<0&&(dt[Ut]=kt[Ut]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,Ut=Object.getOwnPropertySymbols(kt);Q<Ut.length;Q++)qt.indexOf(Ut[Q])<0&&Object.prototype.propertyIsEnumerable.call(kt,Ut[Q])&&(dt[Ut[Q]]=kt[Ut[Q]]);return dt}function tt(kt,qt,dt,Ut){var Q=arguments.length,ot=Q<3?qt:Ut===null?Ut=Object.getOwnPropertyDescriptor(qt,dt):Ut,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(kt,qt,dt,Ut);else for(var M=kt.length-1;M>=0;M--)(R=kt[M])&&(ot=(Q<3?R(ot):Q>3?R(qt,dt,ot):R(qt,dt))||ot);return Q>3&&ot&&Object.defineProperty(qt,dt,ot),ot}function rt(kt,qt){return function(dt,Ut){qt(dt,Ut,kt)}}function ft(kt,qt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(kt,qt)}function it(kt,qt,dt,Ut){function Q(ot){return ot instanceof dt?ot:new dt(function(R){R(ot)})}return new(dt||(dt=Promise))(function(ot,R){function M(mt){try{X(Ut.next(mt))}catch(Ft){R(Ft)}}function O(mt){try{X(Ut.throw(mt))}catch(Ft){R(Ft)}}function X(mt){mt.done?ot(mt.value):Q(mt.value).then(M,O)}X((Ut=Ut.apply(kt,qt||[])).next())})}function bt(kt,qt){var dt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},Ut,Q,ot,R;return R={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function M(X){return function(mt){return O([X,mt])}}function O(X){if(Ut)throw new TypeError("Generator is already executing.");for(;dt;)try{if(Ut=1,Q&&(ot=X[0]&2?Q.return:X[0]?Q.throw||((ot=Q.return)&&ot.call(Q),0):Q.next)&&!(ot=ot.call(Q,X[1])).done)return ot;switch(Q=0,ot&&(X=[X[0]&2,ot.value]),X[0]){case 0:case 1:ot=X;break;case 4:return dt.label++,{value:X[1],done:!1};case 5:dt.label++,Q=X[1],X=[0];continue;case 7:X=dt.ops.pop(),dt.trys.pop();continue;default:if(ot=dt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(X[0]===6||X[0]===2)){dt=0;continue}if(X[0]===3&&(!ot||X[1]>ot[0]&&X[1]<ot[3])){dt.label=X[1];break}if(X[0]===6&&dt.label<ot[1]){dt.label=ot[1],ot=X;break}if(ot&&dt.label<ot[2]){dt.label=ot[2],dt.ops.push(X);break}ot[2]&&dt.ops.pop(),dt.trys.pop();continue}X=qt.call(kt,dt)}catch(mt){X=[6,mt],Q=0}finally{Ut=ot=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}}var gt=Object.create?function(kt,qt,dt,Ut){Ut===void 0&&(Ut=dt),Object.defineProperty(kt,Ut,{enumerable:!0,get:function(){return qt[dt]}})}:function(kt,qt,dt,Ut){Ut===void 0&&(Ut=dt),kt[Ut]=qt[dt]};function Xt(kt,qt){for(var dt in kt)dt!=="default"&&!Object.prototype.hasOwnProperty.call(qt,dt)&&gt(qt,kt,dt)}function Ct(kt){var qt=typeof Symbol=="function"&&Symbol.iterator,dt=qt&&kt[qt],Ut=0;if(dt)return dt.call(kt);if(kt&&typeof kt.length=="number")return{next:function(){return kt&&Ut>=kt.length&&(kt=void 0),{value:kt&&kt[Ut++],done:!kt}}};throw new TypeError(qt?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(kt,qt){var dt=typeof Symbol=="function"&&kt[Symbol.iterator];if(!dt)return kt;var Ut=dt.call(kt),Q,ot=[],R;try{for(;(qt===void 0||qt-- >0)&&!(Q=Ut.next()).done;)ot.push(Q.value)}catch(M){R={error:M}}finally{try{Q&&!Q.done&&(dt=Ut.return)&&dt.call(Ut)}finally{if(R)throw R.error}}return ot}function Z(){for(var kt=[],qt=0;qt<arguments.length;qt++)kt=kt.concat(At(arguments[qt]));return kt}function J(){for(var kt=0,qt=0,dt=arguments.length;qt<dt;qt++)kt+=arguments[qt].length;for(var Ut=Array(kt),Q=0,qt=0;qt<dt;qt++)for(var ot=arguments[qt],R=0,M=ot.length;R<M;R++,Q++)Ut[Q]=ot[R];return Ut}function yt(kt){return this instanceof yt?(this.v=kt,this):new yt(kt)}function _t(kt,qt,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut=dt.apply(kt,qt||[]),Q,ot=[];return Q={},R("next"),R("throw"),R("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function R(Bt){Ut[Bt]&&(Q[Bt]=function(ee){return new Promise(function(Le,me){ot.push([Bt,ee,Le,me])>1||M(Bt,ee)})})}function M(Bt,ee){try{O(Ut[Bt](ee))}catch(Le){Ft(ot[0][3],Le)}}function O(Bt){Bt.value instanceof yt?Promise.resolve(Bt.value.v).then(X,mt):Ft(ot[0][2],Bt)}function X(Bt){M("next",Bt)}function mt(Bt){M("throw",Bt)}function Ft(Bt,ee){Bt(ee),ot.shift(),ot.length&&M(ot[0][0],ot[0][1])}}function nt(kt){var qt,dt;return qt={},Ut("next"),Ut("throw",function(Q){throw Q}),Ut("return"),qt[Symbol.iterator]=function(){return this},qt;function Ut(Q,ot){qt[Q]=kt[Q]?function(R){return(dt=!dt)?{value:yt(kt[Q](R)),done:Q==="return"}:ot?ot(R):R}:ot}}function vt(kt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qt=kt[Symbol.asyncIterator],dt;return qt?qt.call(kt):(kt=typeof Ct=="function"?Ct(kt):kt[Symbol.iterator](),dt={},Ut("next"),Ut("throw"),Ut("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function Ut(ot){dt[ot]=kt[ot]&&function(R){return new Promise(function(M,O){R=kt[ot](R),Q(M,O,R.done,R.value)})}}function Q(ot,R,M,O){Promise.resolve(O).then(function(X){ot({value:X,done:M})},R)}}function It(kt,qt){return Object.defineProperty?Object.defineProperty(kt,"raw",{value:qt}):kt.raw=qt,kt}var Pt=Object.create?function(kt,qt){Object.defineProperty(kt,"default",{enumerable:!0,value:qt})}:function(kt,qt){kt.default=qt};function St(kt){if(kt&&kt.__esModule)return kt;var qt={};if(kt!=null)for(var dt in kt)dt!=="default"&&Object.prototype.hasOwnProperty.call(kt,dt)&&gt(qt,kt,dt);return Pt(qt,kt),qt}function Dt(kt){return kt&&kt.__esModule?kt:{default:kt}}function Qt(kt,qt){if(!qt.has(kt))throw new TypeError("attempted to get private field on non-instance");return qt.get(kt)}function ue(kt,qt,dt){if(!qt.has(kt))throw new TypeError("attempted to set private field on non-instance");return qt.set(kt,dt),dt}var ie=C(252796),Lt=C.n(ie);function ne(kt,qt,dt,Ut,Q,ot){ot===void 0&&(ot=0);var R=cn(kt,qt,ot),M=R.width,O=R.height,X=Math.min(M,dt),mt=Math.min(O,Ut);return X>mt*Q?{width:mt*Q,height:mt}:{width:X,height:X/Q}}function ve(kt){return kt.width>kt.height?kt.width/kt.naturalWidth:kt.height/kt.naturalHeight}function Wt(kt,qt,dt,Ut,Q){Q===void 0&&(Q=0);var ot=cn(qt.width,qt.height,Q),R=ot.width,M=ot.height;return{x:ae(kt.x,R,dt.width,Ut),y:ae(kt.y,M,dt.height,Ut)}}function ae(kt,qt,dt,Ut){var Q=qt*Ut/2-dt/2;return an(kt,-Q,Q)}function Ce(kt,qt){return Math.sqrt(Math.pow(kt.y-qt.y,2)+Math.pow(kt.x-qt.x,2))}function xe(kt,qt){return Math.atan2(qt.y-kt.y,qt.x-kt.x)*180/Math.PI}function Jt(kt,qt,dt,Ut,Q,ot,R){ot===void 0&&(ot=0),R===void 0&&(R=!0);var M=R?we:Tt,O=cn(qt.width,qt.height,ot),X=cn(qt.naturalWidth,qt.naturalHeight,ot),mt={x:M(100,((O.width-dt.width/Q)/2-kt.x/Q)/O.width*100),y:M(100,((O.height-dt.height/Q)/2-kt.y/Q)/O.height*100),width:M(100,dt.width/O.width*100/Q),height:M(100,dt.height/O.height*100/Q)},Ft=Math.round(M(X.width,mt.width*X.width/100)),Bt=Math.round(M(X.height,mt.height*X.height/100)),ee=X.width>=X.height*Ut,Le=ee?{width:Math.round(Bt*Ut),height:Bt}:{width:Ft,height:Math.round(Ft/Ut)},me=H(H({},Le),{x:Math.round(M(X.width-Le.width,mt.x*X.width/100)),y:Math.round(M(X.height-Le.height,mt.y*X.height/100))});return{croppedAreaPercentages:mt,croppedAreaPixels:me}}function we(kt,qt){return Math.min(kt,Math.max(0,qt))}function Tt(kt,qt){return qt}function Pe(kt,qt,dt,Ut,Q,ot){var R=cn(qt.width,qt.height,dt),M=an(Ut.width/R.width*(100/kt.width),Q,ot),O={x:M*R.width/2-Ut.width/2-R.width*M*(kt.x/100),y:M*R.height/2-Ut.height/2-R.height*M*(kt.y/100)};return{crop:O,zoom:M}}function _r(kt,qt,dt){var Ut=ve(qt);return dt.height>dt.width?dt.height/(kt.height*Ut):dt.width/(kt.width*Ut)}function Ar(kt,qt,dt,Ut,Q,ot){dt===void 0&&(dt=0);var R=cn(qt.naturalWidth,qt.naturalHeight,dt),M=an(_r(kt,qt,Ut),Q,ot),O=Ut.height>Ut.width?Ut.height/kt.height:Ut.width/kt.width,X={x:((R.width-kt.width)/2-kt.x)*O,y:((R.height-kt.height)/2-kt.y)*O};return{crop:X,zoom:M}}function Or(kt,qt){return{x:(qt.x+kt.x)/2,y:(qt.y+kt.y)/2}}function Br(kt){return kt*Math.PI/180}function cn(kt,qt,dt){var Ut=Br(dt);return{width:Math.abs(Math.cos(Ut)*kt)+Math.abs(Math.sin(Ut)*qt),height:Math.abs(Math.sin(Ut)*kt)+Math.abs(Math.cos(Ut)*qt)}}function an(kt,qt,dt){return Math.min(Math.max(kt,qt),dt)}function Dn(){for(var kt=[],qt=0;qt<arguments.length;qt++)kt[qt]=arguments[qt];return kt.filter(function(dt){return typeof dt=="string"&&dt.length>0}).join(" ").trim()}var Un=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Xn=1,xr=3,$e=function(kt){V(qt,kt);function qt(){var dt=kt!==null&&kt.apply(this,arguments)||this;return dt.imageRef=w.createRef(),dt.videoRef=w.createRef(),dt.containerRef=null,dt.styleRef=null,dt.containerRect=null,dt.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},dt.dragStartPosition={x:0,y:0},dt.dragStartCrop={x:0,y:0},dt.gestureZoomStart=0,dt.gestureRotationStart=0,dt.isTouching=!1,dt.lastPinchDistance=0,dt.lastPinchRotation=0,dt.rafDragTimeout=null,dt.rafPinchTimeout=null,dt.wheelTimer=null,dt.currentDoc=typeof document!="undefined"?document:null,dt.currentWindow=typeof window!="undefined"?window:null,dt.resizeObserver=null,dt.state={cropSize:null,hasWheelJustStarted:!1},dt.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!dt.containerRef)){var Ut=!0;dt.resizeObserver=new window.ResizeObserver(function(Q){if(Ut){Ut=!1;return}dt.computeSizes()}),dt.resizeObserver.observe(dt.containerRef)}},dt.preventZoomSafari=function(Ut){return Ut.preventDefault()},dt.cleanEvents=function(){dt.currentDoc&&(dt.currentDoc.removeEventListener("mousemove",dt.onMouseMove),dt.currentDoc.removeEventListener("mouseup",dt.onDragStopped),dt.currentDoc.removeEventListener("touchmove",dt.onTouchMove),dt.currentDoc.removeEventListener("touchend",dt.onDragStopped),dt.currentDoc.removeEventListener("gesturemove",dt.onGestureMove),dt.currentDoc.removeEventListener("gestureend",dt.onGestureEnd))},dt.clearScrollEvent=function(){dt.containerRef&&dt.containerRef.removeEventListener("wheel",dt.onWheel),dt.wheelTimer&&clearTimeout(dt.wheelTimer)},dt.onMediaLoad=function(){var Ut=dt.computeSizes();Ut&&(dt.emitCropData(),dt.setInitialCrop(Ut)),dt.props.onMediaLoaded&&dt.props.onMediaLoaded(dt.mediaSize)},dt.setInitialCrop=function(Ut){if(dt.props.initialCroppedAreaPercentages){var Q=Pe(dt.props.initialCroppedAreaPercentages,dt.mediaSize,dt.props.rotation,Ut,dt.props.minZoom,dt.props.maxZoom),ot=Q.crop,R=Q.zoom;dt.props.onCropChange(ot),dt.props.onZoomChange&&dt.props.onZoomChange(R)}else if(dt.props.initialCroppedAreaPixels){var M=Ar(dt.props.initialCroppedAreaPixels,dt.mediaSize,dt.props.rotation,Ut,dt.props.minZoom,dt.props.maxZoom),ot=M.crop,R=M.zoom;dt.props.onCropChange(ot),dt.props.onZoomChange&&dt.props.onZoomChange(R)}},dt.computeSizes=function(){var Ut,Q,ot,R,M,O,X=dt.imageRef.current||dt.videoRef.current;if(X&&dt.containerRef){dt.containerRect=dt.containerRef.getBoundingClientRect();var mt=dt.containerRect.width/dt.containerRect.height,Ft=((Ut=dt.imageRef.current)===null||Ut===void 0?void 0:Ut.naturalWidth)||((Q=dt.videoRef.current)===null||Q===void 0?void 0:Q.videoWidth)||0,Bt=((ot=dt.imageRef.current)===null||ot===void 0?void 0:ot.naturalHeight)||((R=dt.videoRef.current)===null||R===void 0?void 0:R.videoHeight)||0,ee=X.offsetWidth<Ft||X.offsetHeight<Bt,Le=Ft/Bt,me=void 0;if(ee)switch(dt.props.objectFit){default:case"contain":me=mt>Le?{width:dt.containerRect.height*Le,height:dt.containerRect.height}:{width:dt.containerRect.width,height:dt.containerRect.width/Le};break;case"horizontal-cover":me={width:dt.containerRect.width,height:dt.containerRect.width/Le};break;case"vertical-cover":me={width:dt.containerRect.height*Le,height:dt.containerRect.height};break;case"auto-cover":me=Ft>Bt?{width:dt.containerRect.width,height:dt.containerRect.width/Le}:{width:dt.containerRect.height*Le,height:dt.containerRect.height};break}else me={width:X.offsetWidth,height:X.offsetHeight};dt.mediaSize=H(H({},me),{naturalWidth:Ft,naturalHeight:Bt}),dt.props.setMediaSize&&dt.props.setMediaSize(dt.mediaSize);var Xe=dt.props.cropSize?dt.props.cropSize:ne(dt.mediaSize.width,dt.mediaSize.height,dt.containerRect.width,dt.containerRect.height,dt.props.aspect,dt.props.rotation);return(((M=dt.state.cropSize)===null||M===void 0?void 0:M.height)!==Xe.height||((O=dt.state.cropSize)===null||O===void 0?void 0:O.width)!==Xe.width)&&dt.props.onCropSizeChange&&dt.props.onCropSizeChange(Xe),dt.setState({cropSize:Xe},dt.recomputeCropPosition),dt.props.setCropSize&&dt.props.setCropSize(Xe),Xe}},dt.onMouseDown=function(Ut){dt.currentDoc&&(Ut.preventDefault(),dt.currentDoc.addEventListener("mousemove",dt.onMouseMove),dt.currentDoc.addEventListener("mouseup",dt.onDragStopped),dt.onDragStart(qt.getMousePoint(Ut)))},dt.onMouseMove=function(Ut){return dt.onDrag(qt.getMousePoint(Ut))},dt.onTouchStart=function(Ut){dt.currentDoc&&(dt.isTouching=!0,!(dt.props.onTouchRequest&&!dt.props.onTouchRequest(Ut))&&(dt.currentDoc.addEventListener("touchmove",dt.onTouchMove,{passive:!1}),dt.currentDoc.addEventListener("touchend",dt.onDragStopped),Ut.touches.length===2?dt.onPinchStart(Ut):Ut.touches.length===1&&dt.onDragStart(qt.getTouchPoint(Ut.touches[0]))))},dt.onTouchMove=function(Ut){Ut.preventDefault(),Ut.touches.length===2?dt.onPinchMove(Ut):Ut.touches.length===1&&dt.onDrag(qt.getTouchPoint(Ut.touches[0]))},dt.onGestureStart=function(Ut){dt.currentDoc&&(Ut.preventDefault(),dt.currentDoc.addEventListener("gesturechange",dt.onGestureMove),dt.currentDoc.addEventListener("gestureend",dt.onGestureEnd),dt.gestureZoomStart=dt.props.zoom,dt.gestureRotationStart=dt.props.rotation)},dt.onGestureMove=function(Ut){if(Ut.preventDefault(),!dt.isTouching){var Q=qt.getMousePoint(Ut),ot=dt.gestureZoomStart-1+Ut.scale;if(dt.setNewZoom(ot,Q,{shouldUpdatePosition:!0}),dt.props.onRotationChange){var R=dt.gestureRotationStart+Ut.rotation;dt.props.onRotationChange(R)}}},dt.onGestureEnd=function(Ut){dt.cleanEvents()},dt.onDragStart=function(Ut){var Q,ot,R=Ut.x,M=Ut.y;dt.dragStartPosition={x:R,y:M},dt.dragStartCrop=H({},dt.props.crop),(ot=(Q=dt.props).onInteractionStart)===null||ot===void 0||ot.call(Q)},dt.onDrag=function(Ut){var Q=Ut.x,ot=Ut.y;dt.currentWindow&&(dt.rafDragTimeout&&dt.currentWindow.cancelAnimationFrame(dt.rafDragTimeout),dt.rafDragTimeout=dt.currentWindow.requestAnimationFrame(function(){if(dt.state.cropSize&&!(Q===void 0||ot===void 0)){var R=Q-dt.dragStartPosition.x,M=ot-dt.dragStartPosition.y,O={x:dt.dragStartCrop.x+R,y:dt.dragStartCrop.y+M},X=dt.props.restrictPosition?Wt(O,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):O;dt.props.onCropChange(X)}}))},dt.onDragStopped=function(){var Ut,Q;dt.isTouching=!1,dt.cleanEvents(),dt.emitCropData(),(Q=(Ut=dt.props).onInteractionEnd)===null||Q===void 0||Q.call(Ut)},dt.onWheel=function(Ut){if(dt.currentWindow&&!(dt.props.onWheelRequest&&!dt.props.onWheelRequest(Ut))){Ut.preventDefault();var Q=qt.getMousePoint(Ut),ot=Lt()(Ut).pixelY,R=dt.props.zoom-ot*dt.props.zoomSpeed/200;dt.setNewZoom(R,Q,{shouldUpdatePosition:!0}),dt.state.hasWheelJustStarted||dt.setState({hasWheelJustStarted:!0},function(){var M,O;return(O=(M=dt.props).onInteractionStart)===null||O===void 0?void 0:O.call(M)}),dt.wheelTimer&&clearTimeout(dt.wheelTimer),dt.wheelTimer=dt.currentWindow.setTimeout(function(){return dt.setState({hasWheelJustStarted:!1},function(){var M,O;return(O=(M=dt.props).onInteractionEnd)===null||O===void 0?void 0:O.call(M)})},250)}},dt.getPointOnContainer=function(Ut){var Q=Ut.x,ot=Ut.y;if(!dt.containerRect)throw new Error("The Cropper is not mounted");return{x:dt.containerRect.width/2-(Q-dt.containerRect.left),y:dt.containerRect.height/2-(ot-dt.containerRect.top)}},dt.getPointOnMedia=function(Ut){var Q=Ut.x,ot=Ut.y,R=dt.props,M=R.crop,O=R.zoom;return{x:(Q+M.x)/O,y:(ot+M.y)/O}},dt.setNewZoom=function(Ut,Q,ot){var R=ot===void 0?{}:ot,M=R.shouldUpdatePosition,O=M===void 0?!0:M;if(!(!dt.state.cropSize||!dt.props.onZoomChange)){var X=an(Ut,dt.props.minZoom,dt.props.maxZoom);if(O){var mt=dt.getPointOnContainer(Q),Ft=dt.getPointOnMedia(mt),Bt={x:Ft.x*X-mt.x,y:Ft.y*X-mt.y},ee=dt.props.restrictPosition?Wt(Bt,dt.mediaSize,dt.state.cropSize,X,dt.props.rotation):Bt;dt.props.onCropChange(ee)}dt.props.onZoomChange(X)}},dt.getCropData=function(){if(!dt.state.cropSize)return null;var Ut=dt.props.restrictPosition?Wt(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;return Jt(Ut,dt.mediaSize,dt.state.cropSize,dt.getAspect(),dt.props.zoom,dt.props.rotation,dt.props.restrictPosition)},dt.emitCropData=function(){var Ut=dt.getCropData();if(Ut){var Q=Ut.croppedAreaPercentages,ot=Ut.croppedAreaPixels;dt.props.onCropComplete&&dt.props.onCropComplete(Q,ot),dt.props.onCropAreaChange&&dt.props.onCropAreaChange(Q,ot)}},dt.emitCropAreaChange=function(){var Ut=dt.getCropData();if(Ut){var Q=Ut.croppedAreaPercentages,ot=Ut.croppedAreaPixels;dt.props.onCropAreaChange&&dt.props.onCropAreaChange(Q,ot)}},dt.recomputeCropPosition=function(){if(dt.state.cropSize){var Ut=dt.props.restrictPosition?Wt(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;dt.props.onCropChange(Ut),dt.emitCropData()}},dt}return qt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Un,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},qt.prototype.componentWillUnmount=function(){var dt,Ut;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(dt=this.resizeObserver)===null||dt===void 0||dt.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((Ut=this.styleRef.parentNode)===null||Ut===void 0||Ut.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},qt.prototype.componentDidUpdate=function(dt){var Ut,Q,ot,R,M,O,X,mt,Ft;dt.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):dt.aspect!==this.props.aspect?this.computeSizes():dt.zoom!==this.props.zoom?this.recomputeCropPosition():((Ut=dt.cropSize)===null||Ut===void 0?void 0:Ut.height)!==((Q=this.props.cropSize)===null||Q===void 0?void 0:Q.height)||((ot=dt.cropSize)===null||ot===void 0?void 0:ot.width)!==((R=this.props.cropSize)===null||R===void 0?void 0:R.width)?this.computeSizes():(((M=dt.crop)===null||M===void 0?void 0:M.x)!==((O=this.props.crop)===null||O===void 0?void 0:O.x)||((X=dt.crop)===null||X===void 0?void 0:X.y)!==((mt=this.props.crop)===null||mt===void 0?void 0:mt.y))&&this.emitCropAreaChange(),dt.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),dt.video!==this.props.video&&((Ft=this.videoRef.current)===null||Ft===void 0||Ft.load())},qt.prototype.getAspect=function(){var dt=this.props,Ut=dt.cropSize,Q=dt.aspect;return Ut?Ut.width/Ut.height:Q},qt.prototype.onPinchStart=function(dt){var Ut=qt.getTouchPoint(dt.touches[0]),Q=qt.getTouchPoint(dt.touches[1]);this.lastPinchDistance=Ce(Ut,Q),this.lastPinchRotation=xe(Ut,Q),this.onDragStart(Or(Ut,Q))},qt.prototype.onPinchMove=function(dt){var Ut=this;if(!(!this.currentDoc||!this.currentWindow)){var Q=qt.getTouchPoint(dt.touches[0]),ot=qt.getTouchPoint(dt.touches[1]),R=Or(Q,ot);this.onDrag(R),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var M=Ce(Q,ot),O=Ut.props.zoom*(M/Ut.lastPinchDistance);Ut.setNewZoom(O,R,{shouldUpdatePosition:!1}),Ut.lastPinchDistance=M;var X=xe(Q,ot),mt=Ut.props.rotation+(X-Ut.lastPinchRotation);Ut.props.onRotationChange&&Ut.props.onRotationChange(mt),Ut.lastPinchRotation=X})}},qt.prototype.render=function(){var dt=this,Ut=this.props,Q=Ut.image,ot=Ut.video,R=Ut.mediaProps,M=Ut.transform,O=Ut.crop,X=O.x,mt=O.y,Ft=Ut.rotation,Bt=Ut.zoom,ee=Ut.cropShape,Le=Ut.showGrid,me=Ut.style,Xe=me.containerStyle,pr=me.cropAreaStyle,Ze=me.mediaStyle,Pr=Ut.classes,un=Pr.containerClassName,Ke=Pr.cropAreaClassName,lr=Pr.mediaClassName,Rr=Ut.objectFit;return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ce){return dt.containerRef=ce},"data-testid":"container",style:Xe,className:Dn("reactEasyCrop_Container",un)},Q?w.createElement("img",H({alt:"",className:Dn("reactEasyCrop_Image",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Rr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),lr)},R,{src:Q,ref:this.imageRef,style:H(H({},Ze),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Ft,"deg) scale(").concat(Bt,")")}),onLoad:this.onMediaLoad})):ot&&w.createElement("video",H({autoPlay:!0,loop:!0,muted:!0,className:Dn("reactEasyCrop_Video",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Rr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),lr)},R,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:H(H({},Ze),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Ft,"deg) scale(").concat(Bt,")")}),controls:!1}),(Array.isArray(ot)?ot:[{src:ot}]).map(function(Dr){return w.createElement("source",H({key:Dr.src},Dr))})),this.state.cropSize&&w.createElement("div",{style:H(H({},pr),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Dn("reactEasyCrop_CropArea",ee==="round"&&"reactEasyCrop_CropAreaRound",Le&&"reactEasyCrop_CropAreaGrid",Ke)}))},qt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:xr,minZoom:Xn,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},qt.getMousePoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},qt.getTouchPoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},qt}(w.Component),Tr=C(905303),qr=C(591607);const gn="img-crop",xn=1,Rn=.1,Mr=0,dn=-180,hn=180,sn=1,Wn=.5,Mn=2,In=.01,jn=(0,w.forwardRef)((kt,qt)=>{const{cropperRef:dt,zoomSlider:Ut,rotationSlider:Q,aspectSlider:ot,showReset:R,resetBtnText:M,modalImage:O,aspect:X,minZoom:mt,maxZoom:Ft,cropShape:Bt,showGrid:ee,cropperProps:Le}=kt,[me,Xe]=(0,w.useState)(xn),[pr,Ze]=(0,w.useState)(Mr),[Pr,un]=(0,w.useState)(X),Ke=me!==xn||pr!==Mr||Pr!==X,lr=()=>{Xe(xn),Ze(Mr),un(X)},[Rr,Dr]=(0,w.useState)({x:0,y:0}),ce=(0,w.useRef)({width:0,height:0,x:0,y:0}),jt=(0,w.useCallback)((Fe,or)=>{ce.current=or},[]);(0,w.useImperativeHandle)(qt,()=>({rotation:pr,cropPixelsRef:ce,onReset:lr}));const pe="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",Oe="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",Se="[flex:1]";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)($e,Object.assign({},Le,{ref:dt,image:O,crop:Rr,zoom:me,rotation:pr,aspect:Pr,minZoom:mt,maxZoom:Ft,zoomWithScroll:Ut,cropShape:Bt,showGrid:ee,onCropChange:Dr,onZoomChange:Xe,onRotationChange:Ze,onCropComplete:jt,classes:{containerClassName:`${gn}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${gn}-media`}})),Ut&&(0,k.jsxs)("section",Object.assign({className:`${gn}-control ${gn}-control-zoom ${pe}`},{children:[(0,k.jsx)("button",Object.assign({className:Oe,onClick:()=>Xe(me-Rn),disabled:me-Rn<mt},{children:"\uFF0D"})),(0,k.jsx)(qr.Z,{className:Se,min:mt,max:Ft,step:Rn,value:me,onChange:Xe}),(0,k.jsx)("button",Object.assign({className:Oe,onClick:()=>Xe(me+Rn),disabled:me+Rn>Ft},{children:"\uFF0B"}))]})),Q&&(0,k.jsxs)("section",Object.assign({className:`${gn}-control ${gn}-control-rotation ${pe}`},{children:[(0,k.jsx)("button",Object.assign({className:`${Oe} [font-size:16px]`,onClick:()=>Ze(pr-sn),disabled:pr===dn},{children:"\u21BA"})),(0,k.jsx)(qr.Z,{className:Se,min:dn,max:hn,step:sn,value:pr,onChange:Ze}),(0,k.jsx)("button",Object.assign({className:`${Oe} [font-size:16px]`,onClick:()=>Ze(pr+sn),disabled:pr===hn},{children:"\u21BB"}))]})),ot&&(0,k.jsxs)("section",Object.assign({className:`${gn}-control ${gn}-control-aspect ${pe}`},{children:[(0,k.jsx)("button",Object.assign({className:Oe,onClick:()=>un(Pr-In),disabled:Pr-In<Wn},{children:"\u2195\uFE0F"})),(0,k.jsx)(qr.Z,{className:Se,min:Wn,max:Mn,step:In,value:Pr,onChange:un}),(0,k.jsx)("button",Object.assign({className:Oe,onClick:()=>un(Pr+In),disabled:Pr+In>Mn},{children:"\u2194\uFE0F"}))]})),R&&(Ut||Q||ot)&&(0,k.jsx)(Tr.ZP,Object.assign({className:"[bottom:20px] [position:absolute]",style:Ke?{}:{opacity:.3,pointerEvents:"none"},onClick:lr},{children:M}))]})});var at=(0,w.memo)(jn);function Je(kt,qt){qt===void 0&&(qt={});var dt=qt.insertAt;if(!(!kt||typeof document=="undefined")){var Ut=document.head||document.getElementsByTagName("head")[0],Q=document.createElement("style");Q.type="text/css",dt==="top"&&Ut.firstChild?Ut.insertBefore(Q,Ut.firstChild):Ut.appendChild(Q),Q.styleSheet?Q.styleSheet.cssText=kt:Q.appendChild(document.createTextNode(kt))}}var Ht=".container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.grid{display:grid}.\\!\\[position\\:relative\\]{position:relative!important}.\\[align-items\\:center\\]{align-items:center}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.\\[bottom\\:20px\\]{bottom:20px}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[display\\:flex\\]{display:flex}.\\[flex\\:1\\]{flex:1}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[justify-content\\:center\\]{justify-content:center}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[position\\:absolute\\]{position:absolute}.\\[width\\:100\\%\\]{width:100%}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.disabled\\:\\[cursor\\:default\\]:disabled{cursor:default}.disabled\\:\\[opacity\\:20\\%\\]:disabled{opacity:20%}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]~section:first-of-type{margin-top:16px}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]~section:last-of-type{margin-bottom:16px}";Je(Ht);const te=p(T.version,"4.23.0")===-1?"visible":"open",wt=(kt,qt,dt)=>qt in kt?(console.error(`\`${qt}\` is deprecated, please use \`${dt}\` instead`),kt[qt]):kt[dt],Me=(0,w.forwardRef)((kt,qt)=>{const{quality:dt=.4,fillColor:Ut="white",zoomSlider:Q=!0,rotationSlider:ot=!1,aspectSlider:R=!1,showReset:M=!1,resetText:O,aspect:X=1,minZoom:mt=1,maxZoom:Ft=3,cropShape:Bt="rect",showGrid:ee=!1,cropperProps:Le,modalClassName:me,modalTitle:Xe,modalWidth:pr,modalOk:Ze,modalCancel:Pr,onModalOk:un,onModalCancel:Ke,modalProps:lr,beforeCrop:Rr,children:Dr}=kt,ce=wt(kt,"zoom","zoomSlider")||!0,jt=wt(kt,"rotate","rotationSlider")||!1,pe=wt(kt,"shape","cropShape")||"rect",Oe=wt(kt,"grid","showGrid")||!1;"onUploadFail"in kt&&console.error("`onUploadFail` is removed, because the only way it is called, is when the file is rejected by beforeUpload"),wt(kt,"modalMaskTransitionName","modalProps.maskTransitionName"),wt(kt,"modalTransitionName","modalProps.transitionName");const Se=(0,w.useRef)({});Se.current.onModalOk=un,Se.current.onModalCancel=Ke,Se.current.beforeCrop=Rr;const Fe=(0,w.useRef)(null),or=(0,w.useCallback)(ti=>{var ei;const wi=document.createElement("canvas"),Gi=wi.getContext("2d"),eo=(((ei=ti==null?void 0:ti.getRootNode)===null||ei===void 0?void 0:ei.call(ti))||document).querySelector(`.${gn}-media`),{width:ga,height:lo,x:To,y:ni}=Fe.current.cropPixelsRef.current;if(jt&&Fe.current.rotation!==Mr){const{naturalWidth:Ri,naturalHeight:ho}=eo,Po=Fe.current.rotation*(Math.PI/180),ro=Math.abs(Math.sin(Po)),no=Math.abs(Math.cos(Po)),es=Ri*no+ho*ro,vo=ho*no+Ri*ro;wi.width=es,wi.height=vo,Gi.fillStyle=Ut,Gi.fillRect(0,0,es,vo);const Si=es/2,ao=vo/2;Gi.translate(Si,ao),Gi.rotate(Po),Gi.translate(-Si,-ao);const Jo=(es-Ri)/2,Yt=(vo-ho)/2;Gi.drawImage(eo,0,0,Ri,ho,Jo,Yt,Ri,ho);const de=Gi.getImageData(0,0,es,vo);wi.width=ga,wi.height=lo,Gi.putImageData(de,-To,-ni)}else wi.width=ga,wi.height=lo,Gi.fillStyle=Ut,Gi.fillRect(0,0,ga,lo),Gi.drawImage(eo,To,ni,ga,lo,0,0,ga,lo);return wi},[Ut,jt]),[gr,Jr]=(0,w.useState)(""),Gn=(0,w.useRef)(),pn=(0,w.useRef)(),qn=(0,w.useMemo)(()=>{const ti=Array.isArray(Dr)?Dr[0]:Dr,ei=ti.props,{beforeUpload:wi,accept:Gi}=ei,Co=(0,x.__rest)(ei,["beforeUpload","accept"]),eo=(ga,lo)=>new Promise(To=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){if(typeof Se.current.beforeCrop=="function")try{const Ri=yield Se.current.beforeCrop(ga,lo);if(Ri!==!0)return To(Ri)}catch(Ri){return To(Ri)}const ni=new FileReader;ni.addEventListener("load",()=>{typeof ni.result=="string"&&Jr(ni.result)}),ni.readAsDataURL(ga),Gn.current=()=>{var Ri,ho;Jr(""),Fe.current.onReset(),To(P.Z.LIST_IGNORE),(ho=(Ri=Se.current).onModalCancel)===null||ho===void 0||ho.call(Ri)},pn.current=Ri=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){Jr(""),Fe.current.onReset();const ho=or(Ri.target),{type:Po,name:ro,uid:no}=ga;ho.toBlob(es=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){var vo,Si,ao,Jo,Yt,de;const Ge=new File([es],ro,{type:Po});if(Object.assign(Ge,{uid:no}),typeof wi!="function"){To(Ge),(Si=(vo=Se.current).onModalOk)===null||Si===void 0||Si.call(vo,Ge);return}try{const sr=yield wi(Ge,[Ge]),Lr=sr===!0?Ge:sr;To(Lr),(Jo=(ao=Se.current).onModalOk)===null||Jo===void 0||Jo.call(ao,Lr)}catch(sr){To(sr),(de=(Yt=Se.current).onModalOk)===null||de===void 0||de.call(Yt,sr)}}),Po,dt)})}));return Object.assign(Object.assign({},ti),{props:Object.assign(Object.assign({},Co),{accept:Gi||"image/*",beforeUpload:eo})})},[Dr,or,dt]),ln=(0,w.useMemo)(()=>{const ti={};return pr!==void 0&&(ti.width=pr),Ze!==void 0&&(ti.okText=Ze),Pr!==void 0&&(ti.cancelText=Pr),ti},[Pr,Ze,pr]),Vn=`${gn}-modal${me?` ${me}`:""}`,ba=(typeof window=="undefined"?"":window.navigator.language)==="zh-CN",Ea=Xe||(ba?"\u7F16\u8F91\u56FE\u7247":"Edit image"),Ni=O||(ba?"\u91CD\u7F6E":"Reset");return(0,k.jsxs)(k.Fragment,{children:[qn,gr&&(0,k.jsx)(L.Z,Object.assign({},lr,ln,{[te]:!0},{title:Ea,onCancel:Gn.current,onOk:pn.current,wrapClassName:Vn,maskClosable:!1,destroyOnClose:!0},{children:(0,k.jsx)(at,{ref:Fe,cropperRef:qt,zoomSlider:ce,rotationSlider:jt,aspectSlider:R,showReset:M,resetBtnText:Ni,modalImage:gr,aspect:X,minZoom:mt,maxZoom:Ft,cropShape:pe,showGrid:Oe,cropperProps:Le})}))]})})},386010:function(Ve,z,C){"use strict";C.r(z),C.d(z,{clsx:function(){return k}});function x(w){var T,L,P="";if(typeof w=="string"||typeof w=="number")P+=w;else if(typeof w=="object")if(Array.isArray(w))for(T=0;T<w.length;T++)w[T]&&(L=x(w[T]))&&(P&&(P+=" "),P+=L);else for(T in w)w[T]&&(P&&(P+=" "),P+=T);return P}function k(){for(var w,T,L=0,P="";L<arguments.length;)(w=arguments[L++])&&(T=x(w))&&(P&&(P+=" "),P+=T);return P}z.default=k},308273:function(Ve,z,C){"use strict";C.r(z),C.d(z,{CountUp:function(){return k}});var x=function(){return x=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++)for(var p in T=arguments[L])Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p]);return w},x.apply(this,arguments)},k=function(){function w(T,L,P){var p=this;this.endVal=L,this.options=P,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(m){p.startTime||(p.startTime=m);var S=m-p.startTime;p.remaining=p.duration-S,p.useEasing?p.countDown?p.frameVal=p.startVal-p.easingFn(S,0,p.startVal-p.endVal,p.duration):p.frameVal=p.easingFn(S,p.startVal,p.endVal-p.startVal,p.duration):p.frameVal=p.startVal+(p.endVal-p.startVal)*(S/p.duration);var y=p.countDown?p.frameVal<p.endVal:p.frameVal>p.endVal;p.frameVal=y?p.endVal:p.frameVal,p.frameVal=Number(p.frameVal.toFixed(p.options.decimalPlaces)),p.printValue(p.frameVal),S<p.duration?p.rAF=requestAnimationFrame(p.count):p.finalEndVal!==null?p.update(p.finalEndVal):p.options.onCompleteCallback&&p.options.onCompleteCallback()},this.formatNumber=function(m){var S,y,g,A,E=m<0?"-":"";S=Math.abs(m).toFixed(p.options.decimalPlaces);var D=(S+="").split(".");if(y=D[0],g=D.length>1?p.options.decimal+D[1]:"",p.options.useGrouping){A="";for(var F=3,Y=0,b=0,h=y.length;b<h;++b)p.options.useIndianSeparators&&b===4&&(F=2,Y=1),b!==0&&Y%F==0&&(A=p.options.separator+A),Y++,A=y[h-b-1]+A;y=A}return p.options.numerals&&p.options.numerals.length&&(y=y.replace(/[0-9]/g,function($){return p.options.numerals[+$]}),g=g.replace(/[0-9]/g,function($){return p.options.numerals[+$]})),E+p.options.prefix+y+g+p.options.suffix},this.easeOutExpo=function(m,S,y,g){return y*(1-Math.pow(2,-10*m/g))*1024/1023+S},this.options=x(x({},this.defaults),P),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(L),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof T=="string"?document.getElementById(T):T,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,T):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return p.handleScroll(p)}),window.onscroll=function(){window.onScrollFns.forEach(function(m){return m()})},this.handleScroll(this)))}return w.prototype.handleScroll=function(T){if(T&&window&&!T.once){var L=window.innerHeight+window.scrollY,P=T.el.getBoundingClientRect(),p=P.top+window.pageYOffset,m=P.top+P.height+window.pageYOffset;m<L&&m>window.scrollY&&T.paused?(T.paused=!1,setTimeout(function(){return T.start()},T.options.scrollSpyDelay),T.options.scrollSpyOnce&&(T.once=!0)):(window.scrollY>m||p>L)&&!T.paused&&T.reset()}},w.prototype.determineDirectionAndSmartEasing=function(){var T=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>T;var L=T-this.startVal;if(Math.abs(L)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=T;var P=this.countDown?1:-1;this.endVal=T+P*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=T,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},w.prototype.start=function(T){this.error||(T&&(this.options.onCompleteCallback=T),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},w.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},w.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},w.prototype.update=function(T){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(T),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},w.prototype.printValue=function(T){var L;if(this.el){var P=this.formattingFn(T);!((L=this.options.plugin)===null||L===void 0)&&L.render?this.options.plugin.render(this.el,P):this.el.tagName==="INPUT"?this.el.value=P:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=P:this.el.innerHTML=P}},w.prototype.ensureNumber=function(T){return typeof T=="number"&&!isNaN(T)},w.prototype.validateValue=function(T){var L=Number(T);return this.ensureNumber(L)?L:(this.error="[CountUp] invalid start or end value: ".concat(T),null)},w.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},w}()},971829:function(Ve,z,C){"use strict";C.r(z),C.d(z,{quadtree:function(){return x.Z}});var x=C(547148)},547148:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return $}});function x(H){const q=+this._x.call(null,H),tt=+this._y.call(null,H);return k(this.cover(q,tt),q,tt,H)}function k(H,q,tt,rt){if(isNaN(q)||isNaN(tt))return H;var ft,it=H._root,bt={data:rt},gt=H._x0,Xt=H._y0,Ct=H._x1,At=H._y1,Z,J,yt,_t,nt,vt,It,Pt;if(!it)return H._root=bt,H;for(;it.length;)if((nt=q>=(Z=(gt+Ct)/2))?gt=Z:Ct=Z,(vt=tt>=(J=(Xt+At)/2))?Xt=J:At=J,ft=it,!(it=it[It=vt<<1|nt]))return ft[It]=bt,H;if(yt=+H._x.call(null,it.data),_t=+H._y.call(null,it.data),q===yt&&tt===_t)return bt.next=it,ft?ft[It]=bt:H._root=bt,H;do ft=ft?ft[It]=new Array(4):H._root=new Array(4),(nt=q>=(Z=(gt+Ct)/2))?gt=Z:Ct=Z,(vt=tt>=(J=(Xt+At)/2))?Xt=J:At=J;while((It=vt<<1|nt)===(Pt=(_t>=J)<<1|yt>=Z));return ft[Pt]=it,ft[It]=bt,H}function w(H){var q,tt,rt=H.length,ft,it,bt=new Array(rt),gt=new Array(rt),Xt=1/0,Ct=1/0,At=-1/0,Z=-1/0;for(tt=0;tt<rt;++tt)isNaN(ft=+this._x.call(null,q=H[tt]))||isNaN(it=+this._y.call(null,q))||(bt[tt]=ft,gt[tt]=it,ft<Xt&&(Xt=ft),ft>At&&(At=ft),it<Ct&&(Ct=it),it>Z&&(Z=it));if(Xt>At||Ct>Z)return this;for(this.cover(Xt,Ct).cover(At,Z),tt=0;tt<rt;++tt)k(this,bt[tt],gt[tt],H[tt]);return this}function T(H,q){if(isNaN(H=+H)||isNaN(q=+q))return this;var tt=this._x0,rt=this._y0,ft=this._x1,it=this._y1;if(isNaN(tt))ft=(tt=Math.floor(H))+1,it=(rt=Math.floor(q))+1;else{for(var bt=ft-tt||1,gt=this._root,Xt,Ct;tt>H||H>=ft||rt>q||q>=it;)switch(Ct=(q<rt)<<1|H<tt,Xt=new Array(4),Xt[Ct]=gt,gt=Xt,bt*=2,Ct){case 0:ft=tt+bt,it=rt+bt;break;case 1:tt=ft-bt,it=rt+bt;break;case 2:ft=tt+bt,rt=it-bt;break;case 3:tt=ft-bt,rt=it-bt;break}this._root&&this._root.length&&(this._root=gt)}return this._x0=tt,this._y0=rt,this._x1=ft,this._y1=it,this}function L(){var H=[];return this.visit(function(q){if(!q.length)do H.push(q.data);while(q=q.next)}),H}function P(H){return arguments.length?this.cover(+H[0][0],+H[0][1]).cover(+H[1][0],+H[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(H,q,tt,rt,ft){this.node=H,this.x0=q,this.y0=tt,this.x1=rt,this.y1=ft}function m(H,q,tt){var rt,ft=this._x0,it=this._y0,bt,gt,Xt,Ct,At=this._x1,Z=this._y1,J=[],yt=this._root,_t,nt;for(yt&&J.push(new p(yt,ft,it,At,Z)),tt==null?tt=1/0:(ft=H-tt,it=q-tt,At=H+tt,Z=q+tt,tt*=tt);_t=J.pop();)if(!(!(yt=_t.node)||(bt=_t.x0)>At||(gt=_t.y0)>Z||(Xt=_t.x1)<ft||(Ct=_t.y1)<it))if(yt.length){var vt=(bt+Xt)/2,It=(gt+Ct)/2;J.push(new p(yt[3],vt,It,Xt,Ct),new p(yt[2],bt,It,vt,Ct),new p(yt[1],vt,gt,Xt,It),new p(yt[0],bt,gt,vt,It)),(nt=(q>=It)<<1|H>=vt)&&(_t=J[J.length-1],J[J.length-1]=J[J.length-1-nt],J[J.length-1-nt]=_t)}else{var Pt=H-+this._x.call(null,yt.data),St=q-+this._y.call(null,yt.data),Dt=Pt*Pt+St*St;if(Dt<tt){var Qt=Math.sqrt(tt=Dt);ft=H-Qt,it=q-Qt,At=H+Qt,Z=q+Qt,rt=yt.data}}return rt}function S(H){if(isNaN(At=+this._x.call(null,H))||isNaN(Z=+this._y.call(null,H)))return this;var q,tt=this._root,rt,ft,it,bt=this._x0,gt=this._y0,Xt=this._x1,Ct=this._y1,At,Z,J,yt,_t,nt,vt,It;if(!tt)return this;if(tt.length)for(;;){if((_t=At>=(J=(bt+Xt)/2))?bt=J:Xt=J,(nt=Z>=(yt=(gt+Ct)/2))?gt=yt:Ct=yt,q=tt,!(tt=tt[vt=nt<<1|_t]))return this;if(!tt.length)break;(q[vt+1&3]||q[vt+2&3]||q[vt+3&3])&&(rt=q,It=vt)}for(;tt.data!==H;)if(ft=tt,!(tt=tt.next))return this;return(it=tt.next)&&delete tt.next,ft?(it?ft.next=it:delete ft.next,this):q?(it?q[vt]=it:delete q[vt],(tt=q[0]||q[1]||q[2]||q[3])&&tt===(q[3]||q[2]||q[1]||q[0])&&!tt.length&&(rt?rt[It]=tt:this._root=tt),this):(this._root=it,this)}function y(H){for(var q=0,tt=H.length;q<tt;++q)this.remove(H[q]);return this}function g(){return this._root}function A(){var H=0;return this.visit(function(q){if(!q.length)do++H;while(q=q.next)}),H}function E(H){var q=[],tt,rt=this._root,ft,it,bt,gt,Xt;for(rt&&q.push(new p(rt,this._x0,this._y0,this._x1,this._y1));tt=q.pop();)if(!H(rt=tt.node,it=tt.x0,bt=tt.y0,gt=tt.x1,Xt=tt.y1)&&rt.length){var Ct=(it+gt)/2,At=(bt+Xt)/2;(ft=rt[3])&&q.push(new p(ft,Ct,At,gt,Xt)),(ft=rt[2])&&q.push(new p(ft,it,At,Ct,Xt)),(ft=rt[1])&&q.push(new p(ft,Ct,bt,gt,At)),(ft=rt[0])&&q.push(new p(ft,it,bt,Ct,At))}return this}function D(H){var q=[],tt=[],rt;for(this._root&&q.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));rt=q.pop();){var ft=rt.node;if(ft.length){var it,bt=rt.x0,gt=rt.y0,Xt=rt.x1,Ct=rt.y1,At=(bt+Xt)/2,Z=(gt+Ct)/2;(it=ft[0])&&q.push(new p(it,bt,gt,At,Z)),(it=ft[1])&&q.push(new p(it,At,gt,Xt,Z)),(it=ft[2])&&q.push(new p(it,bt,Z,At,Ct)),(it=ft[3])&&q.push(new p(it,At,Z,Xt,Ct))}tt.push(rt)}for(;rt=tt.pop();)H(rt.node,rt.x0,rt.y0,rt.x1,rt.y1);return this}function F(H){return H[0]}function Y(H){return arguments.length?(this._x=H,this):this._x}function b(H){return H[1]}function h(H){return arguments.length?(this._y=H,this):this._y}function $(H,q,tt){var rt=new U(q==null?F:q,tt==null?b:tt,NaN,NaN,NaN,NaN);return H==null?rt:rt.addAll(H)}function U(H,q,tt,rt,ft,it){this._x=H,this._y=q,this._x0=tt,this._y0=rt,this._x1=ft,this._y1=it,this._root=void 0}function W(H){for(var q={data:H.data},tt=q;H=H.next;)tt=tt.next={data:H.data};return q}var V=$.prototype=U.prototype;V.copy=function(){var H=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),q=this._root,tt,rt;if(!q)return H;if(!q.length)return H._root=W(q),H;for(tt=[{source:q,target:H._root=new Array(4)}];q=tt.pop();)for(var ft=0;ft<4;++ft)(rt=q.source[ft])&&(rt.length?tt.push({source:rt,target:q.target[ft]=new Array(4)}):q.target[ft]=W(rt));return H},V.add=x,V.addAll=w,V.cover=T,V.data=L,V.extent=P,V.find=m,V.remove=S,V.removeAll=y,V.root=g,V.size=A,V.visit=E,V.visitAfter=D,V.x=Y,V.y=h},235374:function(Ve,z,C){"use strict";C.d(z,{HT:function(){return F}});var x=0,k=0,w=0,T=1e3,L,P,p=0,m=0,S=0,y=typeof performance=="object"&&performance.now?performance:Date,g=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(W){setTimeout(W,17)};function A(){return m||(g(E),m=y.now()+S)}function E(){m=0}function D(){this._call=this._time=this._next=null}D.prototype=F.prototype={constructor:D,restart:function(W,V,H){if(typeof W!="function")throw new TypeError("callback is not a function");H=(H==null?A():+H)+(V==null?0:+V),!this._next&&P!==this&&(P?P._next=this:L=this,P=this),this._call=W,this._time=H,U()},stop:function(){this._call&&(this._call=null,this._time=1/0,U())}};function F(W,V,H){var q=new D;return q.restart(W,V,H),q}function Y(){A(),++x;for(var W=L,V;W;)(V=m-W._time)>=0&&W._call.call(null,V),W=W._next;--x}function b(){m=(p=y.now())+S,x=k=0;try{Y()}finally{x=0,$(),m=0}}function h(){var W=y.now(),V=W-p;V>T&&(S-=V,p=W)}function $(){for(var W,V=L,H,q=1/0;V;)V._call?(q>V._time&&(q=V._time),W=V,V=V._next):(H=V._next,V._next=null,V=W?W._next=H:L=H);P=W,U(q)}function U(W){if(!x){k&&(k=clearTimeout(k));var V=W-m;V>24?(W<1/0&&(k=setTimeout(b,W-y.now()-S)),w&&(w=clearInterval(w))):(w||(p=y.now(),w=setInterval(h,T)),x=1,g(b))}}},631969:function(Ve,z,C){"use strict";C.r(z),C.d(z,{BRIDGE_GRAPH_NAME:function(){return L},GraphType:function(){return m},HierarchyNodeType:function(){return S},InclusionType:function(){return p},LAYOUT_CONFIG:function(){return x},NodeType:function(){return P},ROOT_NAME:function(){return T},buildGraph:function(){return jr},flatGraph:function(){return bn},getEdges:function(){return _n},mergeConfig:function(){return k}});const x={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function k(v={},N=x){var K,st,ht,xt;const Ot=JSON.parse(JSON.stringify(N)),zt=((K=v==null?void 0:v.graph)===null||K===void 0?void 0:K.meta)||{},Kt=((st=v==null?void 0:v.subScene)===null||st===void 0?void 0:st.meta)||{},fe=((ht=v==null?void 0:v.nodeSize)===null||ht===void 0?void 0:ht.meta)||{},Te=((xt=v==null?void 0:v.nodeSize)===null||xt===void 0?void 0:xt.node)||{},be=Ot.nodeSize.bridge;return{graph:{meta:Object.assign(Ot.graph.meta,zt)},subScene:{meta:Object.assign(Ot.subScene.meta,Kt)},nodeSize:{meta:Object.assign(Ot.nodeSize.meta,fe),node:Object.assign(Ot.nodeSize.node,Te),bridge:be}}}function w(v){return`\u25EC${v}\u25EC`}const T=w("ROOT"),L=w("BRIDGE_GRAPH");var P,p,m,S;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(P||(P={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(p||(p={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(m||(m={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(S||(S={}));var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof C.g!="undefined"?C.g:typeof self!="undefined"?self:{};function g(v,N){return v(N={exports:{}},N.exports),N.exports}var A=function(){this.__data__=[],this.size=0},E=function(v,N){return v===N||v!=v&&N!=N},D=function(v,N){for(var K=v.length;K--;)if(E(v[K][0],N))return K;return-1},F=Array.prototype.splice,Y=function(v){var N=this.__data__,K=D(N,v);return!(K<0)&&(K==N.length-1?N.pop():F.call(N,K,1),--this.size,!0)},b=function(v){var N=this.__data__,K=D(N,v);return K<0?void 0:N[K][1]},h=function(v){return D(this.__data__,v)>-1},$=function(v,N){var K=this.__data__,st=D(K,v);return st<0?(++this.size,K.push([v,N])):K[st][1]=N,this};function U(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}U.prototype.clear=A,U.prototype.delete=Y,U.prototype.get=b,U.prototype.has=h,U.prototype.set=$;var W=U,V=function(){this.__data__=new W,this.size=0},H=function(v){var N=this.__data__,K=N.delete(v);return this.size=N.size,K},q=function(v){return this.__data__.get(v)},tt=function(v){return this.__data__.has(v)},rt=typeof y=="object"&&y&&y.Object===Object&&y,ft=typeof self=="object"&&self&&self.Object===Object&&self,it=rt||ft||Function("return this")(),bt=it.Symbol,gt=Object.prototype,Xt=gt.hasOwnProperty,Ct=gt.toString,At=bt?bt.toStringTag:void 0,Z=function(v){var N=Xt.call(v,At),K=v[At];try{v[At]=void 0;var st=!0}catch(xt){}var ht=Ct.call(v);return st&&(N?v[At]=K:delete v[At]),ht},J=Object.prototype.toString,yt=function(v){return J.call(v)},_t=bt?bt.toStringTag:void 0,nt=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":_t&&_t in Object(v)?Z(v):yt(v)},vt=function(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")},It,Pt=function(v){if(!vt(v))return!1;var N=nt(v);return N=="[object Function]"||N=="[object GeneratorFunction]"||N=="[object AsyncFunction]"||N=="[object Proxy]"},St=it["__core-js_shared__"],Dt=(It=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"",Qt=function(v){return!!Dt&&Dt in v},ue=Function.prototype.toString,ie=function(v){if(v!=null){try{return ue.call(v)}catch(N){}try{return v+""}catch(N){}}return""},Lt=/^\[object .+?Constructor\]$/,ne=Function.prototype,ve=Object.prototype,Wt=ne.toString,ae=ve.hasOwnProperty,Ce=RegExp("^"+Wt.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=function(v){return!(!vt(v)||Qt(v))&&(Pt(v)?Ce:Lt).test(ie(v))},Jt=function(v,N){return v==null?void 0:v[N]},we=function(v,N){var K=Jt(v,N);return xe(K)?K:void 0},Tt=we(it,"Map"),Pe=we(Object,"create"),_r=function(){this.__data__=Pe?Pe(null):{},this.size=0},Ar=function(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N},Or=Object.prototype.hasOwnProperty,Br=function(v){var N=this.__data__;if(Pe){var K=N[v];return K==="__lodash_hash_undefined__"?void 0:K}return Or.call(N,v)?N[v]:void 0},cn=Object.prototype.hasOwnProperty,an=function(v){var N=this.__data__;return Pe?N[v]!==void 0:cn.call(N,v)},Dn=function(v,N){var K=this.__data__;return this.size+=this.has(v)?0:1,K[v]=Pe&&N===void 0?"__lodash_hash_undefined__":N,this};function Un(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}Un.prototype.clear=_r,Un.prototype.delete=Ar,Un.prototype.get=Br,Un.prototype.has=an,Un.prototype.set=Dn;var Xn=Un,xr=function(){this.size=0,this.__data__={hash:new Xn,map:new(Tt||W),string:new Xn}},$e=function(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null},Tr=function(v,N){var K=v.__data__;return $e(N)?K[typeof N=="string"?"string":"hash"]:K.map},qr=function(v){var N=Tr(this,v).delete(v);return this.size-=N?1:0,N},gn=function(v){return Tr(this,v).get(v)},xn=function(v){return Tr(this,v).has(v)},Rn=function(v,N){var K=Tr(this,v),st=K.size;return K.set(v,N),this.size+=K.size==st?0:1,this};function Mr(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}Mr.prototype.clear=xr,Mr.prototype.delete=qr,Mr.prototype.get=gn,Mr.prototype.has=xn,Mr.prototype.set=Rn;var dn=Mr,hn=function(v,N){var K=this.__data__;if(K instanceof W){var st=K.__data__;if(!Tt||st.length<199)return st.push([v,N]),this.size=++K.size,this;K=this.__data__=new dn(st)}return K.set(v,N),this.size=K.size,this};function sn(v){var N=this.__data__=new W(v);this.size=N.size}sn.prototype.clear=V,sn.prototype.delete=H,sn.prototype.get=q,sn.prototype.has=tt,sn.prototype.set=hn;var Wn=sn,Mn=function(v,N){for(var K=-1,st=v==null?0:v.length;++K<st&&N(v[K],K,v)!==!1;);return v},In=function(){try{var v=we(Object,"defineProperty");return v({},"",{}),v}catch(N){}}(),jn=function(v,N,K){N=="__proto__"&&In?In(v,N,{configurable:!0,enumerable:!0,value:K,writable:!0}):v[N]=K},at=Object.prototype.hasOwnProperty,Je=function(v,N,K){var st=v[N];at.call(v,N)&&E(st,K)&&(K!==void 0||N in v)||jn(v,N,K)},Ht=function(v,N,K,st){var ht=!K;K||(K={});for(var xt=-1,Ot=N.length;++xt<Ot;){var zt=N[xt],Kt=st?st(K[zt],v[zt],zt,K,v):void 0;Kt===void 0&&(Kt=v[zt]),ht?jn(K,zt,Kt):Je(K,zt,Kt)}return K},te=function(v,N){for(var K=-1,st=Array(v);++K<v;)st[K]=N(K);return st},wt=function(v){return v!=null&&typeof v=="object"},Me=function(v){return wt(v)&&nt(v)=="[object Arguments]"},kt=Object.prototype,qt=kt.hasOwnProperty,dt=kt.propertyIsEnumerable,Ut=Me(function(){return arguments}())?Me:function(v){return wt(v)&&qt.call(v,"callee")&&!dt.call(v,"callee")},Q=Array.isArray,ot=function(){return!1},R=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K?it.Buffer:void 0,xt=(ht?ht.isBuffer:void 0)||ot;v.exports=xt}),M=/^(?:0|[1-9]\d*)$/,O=function(v,N){var K=typeof v;return!!(N=N==null?9007199254740991:N)&&(K=="number"||K!="symbol"&&M.test(v))&&v>-1&&v%1==0&&v<N},X=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var Ft=function(v){return wt(v)&&X(v.length)&&!!mt[nt(v)]},Bt=function(v){return function(N){return v(N)}},ee=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K&&rt.process,xt=function(){try{var Ot=st&&st.require&&st.require("util").types;return Ot||ht&&ht.binding&&ht.binding("util")}catch(zt){}}();v.exports=xt}),Le=ee&&ee.isTypedArray,me=Le?Bt(Le):Ft,Xe=Object.prototype.hasOwnProperty,pr=function(v,N){var K=Q(v),st=!K&&Ut(v),ht=!K&&!st&&R(v),xt=!K&&!st&&!ht&&me(v),Ot=K||st||ht||xt,zt=Ot?te(v.length,String):[],Kt=zt.length;for(var fe in v)!N&&!Xe.call(v,fe)||Ot&&(fe=="length"||ht&&(fe=="offset"||fe=="parent")||xt&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||O(fe,Kt))||zt.push(fe);return zt},Ze=Object.prototype,Pr=function(v){var N=v&&v.constructor;return v===(typeof N=="function"&&N.prototype||Ze)},un=function(v,N){return function(K){return v(N(K))}},Ke=un(Object.keys,Object),lr=Object.prototype.hasOwnProperty,Rr=function(v){if(!Pr(v))return Ke(v);var N=[];for(var K in Object(v))lr.call(v,K)&&K!="constructor"&&N.push(K);return N},Dr=function(v){return v!=null&&X(v.length)&&!Pt(v)},ce=function(v){return Dr(v)?pr(v):Rr(v)},jt=function(v,N){return v&&Ht(N,ce(N),v)},pe=function(v){var N=[];if(v!=null)for(var K in Object(v))N.push(K);return N},Oe=Object.prototype.hasOwnProperty,Se=function(v){if(!vt(v))return pe(v);var N=Pr(v),K=[];for(var st in v)(st!="constructor"||!N&&Oe.call(v,st))&&K.push(st);return K},Fe=function(v){return Dr(v)?pr(v,!0):Se(v)},or=function(v,N){return v&&Ht(N,Fe(N),v)},gr=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K?it.Buffer:void 0,xt=ht?ht.allocUnsafe:void 0;v.exports=function(Ot,zt){if(zt)return Ot.slice();var Kt=Ot.length,fe=xt?xt(Kt):new Ot.constructor(Kt);return Ot.copy(fe),fe}}),Jr=function(v,N){var K=-1,st=v.length;for(N||(N=Array(st));++K<st;)N[K]=v[K];return N},Gn=function(v,N){for(var K=-1,st=v==null?0:v.length,ht=0,xt=[];++K<st;){var Ot=v[K];N(Ot,K,v)&&(xt[ht++]=Ot)}return xt},pn=function(){return[]},qn=Object.prototype.propertyIsEnumerable,ln=Object.getOwnPropertySymbols,Vn=ln?function(v){return v==null?[]:(v=Object(v),Gn(ln(v),function(N){return qn.call(v,N)}))}:pn,ca=function(v,N){return Ht(v,Vn(v),N)},ba=function(v,N){for(var K=-1,st=N.length,ht=v.length;++K<st;)v[ht+K]=N[K];return v},Ea=un(Object.getPrototypeOf,Object),Ni=Object.getOwnPropertySymbols?function(v){for(var N=[];v;)ba(N,Vn(v)),v=Ea(v);return N}:pn,ti=function(v,N){return Ht(v,Ni(v),N)},ei=function(v,N,K){var st=N(v);return Q(v)?st:ba(st,K(v))},wi=function(v){return ei(v,ce,Vn)},Gi=function(v){return ei(v,Fe,Ni)},Co=we(it,"DataView"),eo=we(it,"Promise"),ga=we(it,"Set"),lo=we(it,"WeakMap"),To=ie(Co),ni=ie(Tt),Ri=ie(eo),ho=ie(ga),Po=ie(lo),ro=nt;(Co&&ro(new Co(new ArrayBuffer(1)))!="[object DataView]"||Tt&&ro(new Tt)!="[object Map]"||eo&&ro(eo.resolve())!="[object Promise]"||ga&&ro(new ga)!="[object Set]"||lo&&ro(new lo)!="[object WeakMap]")&&(ro=function(v){var N=nt(v),K=N=="[object Object]"?v.constructor:void 0,st=K?ie(K):"";if(st)switch(st){case To:return"[object DataView]";case ni:return"[object Map]";case Ri:return"[object Promise]";case ho:return"[object Set]";case Po:return"[object WeakMap]"}return N});var no=ro,es=Object.prototype.hasOwnProperty,vo=function(v){var N=v.length,K=new v.constructor(N);return N&&typeof v[0]=="string"&&es.call(v,"index")&&(K.index=v.index,K.input=v.input),K},Si=it.Uint8Array,ao=function(v){var N=new v.constructor(v.byteLength);return new Si(N).set(new Si(v)),N},Jo=function(v,N){var K=N?ao(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.byteLength)},Yt=/\w*$/,de=function(v){var N=new v.constructor(v.source,Yt.exec(v));return N.lastIndex=v.lastIndex,N},Ge=bt?bt.prototype:void 0,sr=Ge?Ge.valueOf:void 0,Lr=function(v){return sr?Object(sr.call(v)):{}},Nr=function(v,N){var K=N?ao(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.length)},Sr=function(v,N,K){var st=v.constructor;switch(N){case"[object ArrayBuffer]":return ao(v);case"[object Boolean]":case"[object Date]":return new st(+v);case"[object DataView]":return Jo(v,K);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Nr(v,K);case"[object Map]":return new st;case"[object Number]":case"[object String]":return new st(v);case"[object RegExp]":return de(v);case"[object Set]":return new st;case"[object Symbol]":return Lr(v)}},en=Object.create,fn=function(){function v(){}return function(N){if(!vt(N))return{};if(en)return en(N);v.prototype=N;var K=new v;return v.prototype=void 0,K}}(),Pn=function(v){return typeof v.constructor!="function"||Pr(v)?{}:fn(Ea(v))},sa=function(v){return wt(v)&&no(v)=="[object Map]"},Zn=ee&&ee.isMap,pa=Zn?Bt(Zn):sa,ya=function(v){return wt(v)&&no(v)=="[object Set]"},di=ee&&ee.isSet,Ma=di?Bt(di):ya,oa={};oa["[object Arguments]"]=oa["[object Array]"]=oa["[object ArrayBuffer]"]=oa["[object DataView]"]=oa["[object Boolean]"]=oa["[object Date]"]=oa["[object Float32Array]"]=oa["[object Float64Array]"]=oa["[object Int8Array]"]=oa["[object Int16Array]"]=oa["[object Int32Array]"]=oa["[object Map]"]=oa["[object Number]"]=oa["[object Object]"]=oa["[object RegExp]"]=oa["[object Set]"]=oa["[object String]"]=oa["[object Symbol]"]=oa["[object Uint8Array]"]=oa["[object Uint8ClampedArray]"]=oa["[object Uint16Array]"]=oa["[object Uint32Array]"]=!0,oa["[object Error]"]=oa["[object Function]"]=oa["[object WeakMap]"]=!1;var si=function v(N,K,st,ht,xt,Ot){var zt,Kt=1&K,fe=2&K,Te=4&K;if(st&&(zt=xt?st(N,ht,xt,Ot):st(N)),zt!==void 0)return zt;if(!vt(N))return N;var be=Q(N);if(be){if(zt=vo(N),!Kt)return Jr(N,zt)}else{var We=no(N),cr=We=="[object Function]"||We=="[object GeneratorFunction]";if(R(N))return gr(N,Kt);if(We=="[object Object]"||We=="[object Arguments]"||cr&&!xt){if(zt=fe||cr?{}:Pn(N),!Kt)return fe?ti(N,or(zt,N)):ca(N,jt(zt,N))}else{if(!oa[We])return xt?N:{};zt=Sr(N,We,Kt)}}Ot||(Ot=new Wn);var Vr=Ot.get(N);if(Vr)return Vr;Ot.set(N,zt),Ma(N)?N.forEach(function(wr){zt.add(v(wr,K,st,wr,N,Ot))}):pa(N)&&N.forEach(function(wr,Er){zt.set(Er,v(wr,K,st,Er,N,Ot))});var mr=be?void 0:(Te?fe?Gi:wi:fe?Fe:ce)(N);return Mn(mr||N,function(wr,Er){mr&&(wr=N[Er=wr]),Je(zt,Er,v(wr,K,st,Er,N,Ot))}),zt},$a=function(v){return si(v,4)},Fa=function(v){return function(){return v}},Ui=function(v){return function(N,K,st){for(var ht=-1,xt=Object(N),Ot=st(N),zt=Ot.length;zt--;){var Kt=Ot[v?zt:++ht];if(K(xt[Kt],Kt,xt)===!1)break}return N}}(),fi=function(v,N){return v&&Ui(v,N,ce)},La=function(v,N){return function(K,st){if(K==null)return K;if(!Dr(K))return v(K,st);for(var ht=K.length,xt=N?ht:-1,Ot=Object(K);(N?xt--:++xt<ht)&&st(Ot[xt],xt,Ot)!==!1;);return K}}(fi),ja=function(v){return v},za=function(v){return typeof v=="function"?v:ja},yi=function(v,N){return(Q(v)?Mn:La)(v,za(N))},mi=yi,ki=function(v,N){var K=[];return La(v,function(st,ht,xt){N(st,ht,xt)&&K.push(st)}),K},po=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Wi=function(v){return this.__data__.has(v)};function Ao(v){var N=-1,K=v==null?0:v.length;for(this.__data__=new dn;++N<K;)this.add(v[N])}Ao.prototype.add=Ao.prototype.push=po,Ao.prototype.has=Wi;var Vo=Ao,os=function(v,N){for(var K=-1,st=v==null?0:v.length;++K<st;)if(N(v[K],K,v))return!0;return!1},$i=function(v,N){return v.has(N)},qa=function(v,N,K,st,ht,xt){var Ot=1&K,zt=v.length,Kt=N.length;if(zt!=Kt&&!(Ot&&Kt>zt))return!1;var fe=xt.get(v),Te=xt.get(N);if(fe&&Te)return fe==N&&Te==v;var be=-1,We=!0,cr=2&K?new Vo:void 0;for(xt.set(v,N),xt.set(N,v);++be<zt;){var Vr=v[be],mr=N[be];if(st)var wr=Ot?st(mr,Vr,be,N,v,xt):st(Vr,mr,be,v,N,xt);if(wr!==void 0){if(wr)continue;We=!1;break}if(cr){if(!os(N,function(Er,Sn){if(!$i(cr,Sn)&&(Vr===Er||ht(Vr,Er,K,st,xt)))return cr.push(Sn)})){We=!1;break}}else if(Vr!==mr&&!ht(Vr,mr,K,st,xt)){We=!1;break}}return xt.delete(v),xt.delete(N),We},Yi=function(v){var N=-1,K=Array(v.size);return v.forEach(function(st,ht){K[++N]=[ht,st]}),K},io=function(v){var N=-1,K=Array(v.size);return v.forEach(function(st){K[++N]=st}),K},Qa=bt?bt.prototype:void 0,Pi=Qa?Qa.valueOf:void 0,zo=function(v,N,K,st,ht,xt,Ot){switch(K){case"[object DataView]":if(v.byteLength!=N.byteLength||v.byteOffset!=N.byteOffset)return!1;v=v.buffer,N=N.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=N.byteLength||!xt(new Si(v),new Si(N)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+v,+N);case"[object Error]":return v.name==N.name&&v.message==N.message;case"[object RegExp]":case"[object String]":return v==N+"";case"[object Map]":var zt=Yi;case"[object Set]":var Kt=1&st;if(zt||(zt=io),v.size!=N.size&&!Kt)return!1;var fe=Ot.get(v);if(fe)return fe==N;st|=2,Ot.set(v,N);var Te=qa(zt(v),zt(N),st,ht,xt,Ot);return Ot.delete(v),Te;case"[object Symbol]":if(Pi)return Pi.call(v)==Pi.call(N)}return!1},qi=Object.prototype.hasOwnProperty,rs=function(v,N,K,st,ht,xt){var Ot=1&K,zt=wi(v),Kt=zt.length;if(Kt!=wi(N).length&&!Ot)return!1;for(var fe=Kt;fe--;){var Te=zt[fe];if(!(Ot?Te in N:qi.call(N,Te)))return!1}var be=xt.get(v),We=xt.get(N);if(be&&We)return be==N&&We==v;var cr=!0;xt.set(v,N),xt.set(N,v);for(var Vr=Ot;++fe<Kt;){var mr=v[Te=zt[fe]],wr=N[Te];if(st)var Er=Ot?st(wr,mr,Te,N,v,xt):st(mr,wr,Te,v,N,xt);if(!(Er===void 0?mr===wr||ht(mr,wr,K,st,xt):Er)){cr=!1;break}Vr||(Vr=Te=="constructor")}if(cr&&!Vr){var Sn=v.constructor,Yn=N.constructor;Sn==Yn||!("constructor"in v)||!("constructor"in N)||typeof Sn=="function"&&Sn instanceof Sn&&typeof Yn=="function"&&Yn instanceof Yn||(cr=!1)}return xt.delete(v),xt.delete(N),cr},Xi=Object.prototype.hasOwnProperty,yo=function(v,N,K,st,ht,xt){var Ot=Q(v),zt=Q(N),Kt=Ot?"[object Array]":no(v),fe=zt?"[object Array]":no(N),Te=(Kt=Kt=="[object Arguments]"?"[object Object]":Kt)=="[object Object]",be=(fe=fe=="[object Arguments]"?"[object Object]":fe)=="[object Object]",We=Kt==fe;if(We&&R(v)){if(!R(N))return!1;Ot=!0,Te=!1}if(We&&!Te)return xt||(xt=new Wn),Ot||me(v)?qa(v,N,K,st,ht,xt):zo(v,N,Kt,K,st,ht,xt);if(!(1&K)){var cr=Te&&Xi.call(v,"__wrapped__"),Vr=be&&Xi.call(N,"__wrapped__");if(cr||Vr){var mr=cr?v.value():v,wr=Vr?N.value():N;return xt||(xt=new Wn),ht(mr,wr,K,st,xt)}}return!!We&&(xt||(xt=new Wn),rs(v,N,K,st,ht,xt))},Es=function v(N,K,st,ht,xt){return N===K||(N==null||K==null||!wt(N)&&!wt(K)?N!=N&&K!=K:yo(N,K,st,ht,v,xt))},ds=function(v,N,K,st){var ht=K.length,xt=ht,Ot=!st;if(v==null)return!xt;for(v=Object(v);ht--;){var zt=K[ht];if(Ot&&zt[2]?zt[1]!==v[zt[0]]:!(zt[0]in v))return!1}for(;++ht<xt;){var Kt=(zt=K[ht])[0],fe=v[Kt],Te=zt[1];if(Ot&&zt[2]){if(fe===void 0&&!(Kt in v))return!1}else{var be=new Wn;if(st)var We=st(fe,Te,Kt,v,N,be);if(!(We===void 0?Es(Te,fe,3,st,be):We))return!1}}return!0},oo=function(v){return v==v&&!vt(v)},ls=function(v){for(var N=ce(v),K=N.length;K--;){var st=N[K],ht=v[st];N[K]=[st,ht,oo(ht)]}return N},hs=function(v,N){return function(K){return K!=null&&K[v]===N&&(N!==void 0||v in Object(K))}},Os=function(v){var N=ls(v);return N.length==1&&N[0][2]?hs(N[0][0],N[0][1]):function(K){return K===v||ds(K,v,N)}},Ho=function(v){return typeof v=="symbol"||wt(v)&&nt(v)=="[object Symbol]"},$t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ye=/^\w*$/,ir=function(v,N){if(Q(v))return!1;var K=typeof v;return!(K!="number"&&K!="symbol"&&K!="boolean"&&v!=null&&!Ho(v))||ye.test(v)||!$t.test(v)||N!=null&&v in Object(N)};function dr(v,N){if(typeof v!="function"||N!=null&&typeof N!="function")throw new TypeError("Expected a function");var K=function(){var st=arguments,ht=N?N.apply(this,st):st[0],xt=K.cache;if(xt.has(ht))return xt.get(ht);var Ot=v.apply(this,st);return K.cache=xt.set(ht,Ot)||xt,Ot};return K.cache=new(dr.Cache||dn),K}dr.Cache=dn;var Zr=dr,Ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/\\(\\)?/g,Sa=function(v){var N=Zr(v,function(st){return K.size===500&&K.clear(),st}),K=N.cache;return N}(function(v){var N=[];return v.charCodeAt(0)===46&&N.push(""),v.replace(Ln,function(K,st,ht,xt){N.push(ht?xt.replace(Qn,"$1"):st||K)}),N}),Ci=function(v,N){for(var K=-1,st=v==null?0:v.length,ht=Array(st);++K<st;)ht[K]=N(v[K],K,v);return ht},Io=bt?bt.prototype:void 0,Go=Io?Io.toString:void 0,zs=function v(N){if(typeof N=="string")return N;if(Q(N))return Ci(N,v)+"";if(Ho(N))return Go?Go.call(N):"";var K=N+"";return K=="0"&&1/N==-1/0?"-0":K},Ds=function(v){return v==null?"":zs(v)},ji=function(v,N){return Q(v)?v:ir(v,N)?[v]:Sa(Ds(v))},xo=function(v){if(typeof v=="string"||Ho(v))return v;var N=v+"";return N=="0"&&1/v==-1/0?"-0":N},Gs=function(v,N){for(var K=0,st=(N=ji(N,v)).length;v!=null&&K<st;)v=v[xo(N[K++])];return K&&K==st?v:void 0},vs=function(v,N,K){var st=v==null?void 0:Gs(v,N);return st===void 0?K:st},qs=function(v,N){return v!=null&&N in Object(v)},Qs=function(v,N,K){for(var st=-1,ht=(N=ji(N,v)).length,xt=!1;++st<ht;){var Ot=xo(N[st]);if(!(xt=v!=null&&K(v,Ot)))break;v=v[Ot]}return xt||++st!=ht?xt:!!(ht=v==null?0:v.length)&&X(ht)&&O(Ot,ht)&&(Q(v)||Ut(v))},Js=function(v,N){return v!=null&&Qs(v,N,qs)},Vs=function(v,N){return ir(v)&&oo(N)?hs(xo(v),N):function(K){var st=vs(K,v);return st===void 0&&st===N?Js(K,v):Es(N,st,3)}},Rs=function(v){return function(N){return N==null?void 0:N[v]}},Us=function(v){return function(N){return Gs(N,v)}},ws=function(v){return ir(v)?Rs(xo(v)):Us(v)},ns=function(v){return typeof v=="function"?v:v==null?ja:typeof v=="object"?Q(v)?Vs(v[0],v[1]):Os(v):ws(v)},_u=function(v,N){return(Q(v)?Gn:ki)(v,ns(N))},Cu=Object.prototype.hasOwnProperty,Uo=function(v,N){return v!=null&&Cu.call(v,N)},bo=function(v,N){return v!=null&&Qs(v,N,Uo)},ss=Object.prototype.hasOwnProperty,d=function(v){if(v==null)return!0;if(Dr(v)&&(Q(v)||typeof v=="string"||typeof v.splice=="function"||R(v)||me(v)||Ut(v)))return!v.length;var N=no(v);if(N=="[object Map]"||N=="[object Set]")return!v.size;if(Pr(v))return!Rr(v).length;for(var K in v)if(ss.call(v,K))return!1;return!0},G=function(v){return v===void 0},Et=function(v,N){var K=-1,st=Dr(v)?Array(v.length):[];return La(v,function(ht,xt,Ot){st[++K]=N(ht,xt,Ot)}),st},Gt=function(v,N){return(Q(v)?Ci:Et)(v,ns(N))},re=function(v,N,K,st){var ht=-1,xt=v==null?0:v.length;for(st&&xt&&(K=v[++ht]);++ht<xt;)K=N(K,v[ht],ht,v);return K},he=function(v,N,K,st,ht){return ht(v,function(xt,Ot,zt){K=st?(st=!1,xt):N(K,xt,Ot,zt)}),K},ge=function(v,N,K){var st=Q(v)?re:he,ht=arguments.length<3;return st(v,ns(N),K,ht,La)},De=function(v){return typeof v=="string"||!Q(v)&&wt(v)&&nt(v)=="[object String]"},ze=Rs("length"),He=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ur=function(v){return He.test(v)},Ur="[\\ud800-\\udfff]",Xr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Wr="\\ud83c[\\udffb-\\udfff]",Tn="[^\\ud800-\\udfff]",On="(?:\\ud83c[\\udde6-\\uddff]){2}",Qr="[\\ud800-\\udbff][\\udc00-\\udfff]",ra="(?:"+Xr+"|"+Wr+")?",Ha="[\\ufe0e\\ufe0f]?"+ra+("(?:\\u200d(?:"+[Tn,On,Qr].join("|")+")[\\ufe0e\\ufe0f]?"+ra+")*"),Va="(?:"+[Tn+Xr+"?",Xr,On,Qr,Ur].join("|")+")",Ra=RegExp(Wr+"(?="+Wr+")|"+Va+Ha,"g"),_a=function(v){for(var N=Ra.lastIndex=0;Ra.test(v);)++N;return N},Pa=function(v){return ur(v)?_a(v):ze(v)},Oo=function(v){if(v==null)return 0;if(Dr(v))return De(v)?Pa(v):v.length;var N=no(v);return N=="[object Map]"||N=="[object Set]"?v.size:Rr(v).length},Eo=function(v,N,K){var st=Q(v),ht=st||R(v)||me(v);if(N=ns(N),K==null){var xt=v&&v.constructor;K=ht?st?new xt:[]:vt(v)&&Pt(xt)?fn(Ea(v)):{}}return(ht?Mn:fi)(v,function(Ot,zt,Kt){return N(K,Ot,zt,Kt)}),K},go=bt?bt.isConcatSpreadable:void 0,wo=function(v){return Q(v)||Ut(v)||!!(go&&v&&v[go])},So=function v(N,K,st,ht,xt){var Ot=-1,zt=N.length;for(st||(st=wo),xt||(xt=[]);++Ot<zt;){var Kt=N[Ot];K>0&&st(Kt)?K>1?v(Kt,K-1,st,ht,xt):ba(xt,Kt):ht||(xt[xt.length]=Kt)}return xt},No=function(v,N,K){switch(K.length){case 0:return v.call(N);case 1:return v.call(N,K[0]);case 2:return v.call(N,K[0],K[1]);case 3:return v.call(N,K[0],K[1],K[2])}return v.apply(N,K)},Ro=Math.max,ci=function(v,N,K){return N=Ro(N===void 0?v.length-1:N,0),function(){for(var st=arguments,ht=-1,xt=Ro(st.length-N,0),Ot=Array(xt);++ht<xt;)Ot[ht]=st[N+ht];ht=-1;for(var zt=Array(N+1);++ht<N;)zt[ht]=st[ht];return zt[N]=K(Ot),No(v,this,zt)}},Bi=In?function(v,N){return In(v,"toString",{configurable:!0,enumerable:!1,value:Fa(N),writable:!0})}:ja,Hs=Date.now,Zs=function(v){var N=0,K=0;return function(){var st=Hs(),ht=16-(st-K);if(K=st,ht>0){if(++N>=800)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}(Bi),ps=function(v,N){return Zs(ci(v,N,ja),v+"")},Tu=function(v,N,K,st){for(var ht=v.length,xt=K+(st?1:-1);st?xt--:++xt<ht;)if(N(v[xt],xt,v))return xt;return-1},Nf=function(v){return v!=v},hc=function(v,N,K){for(var st=K-1,ht=v.length;++st<ht;)if(v[st]===N)return st;return-1},vc=function(v,N,K){return N==N?hc(v,N,K):Tu(v,Nf,K)},pc=function(v,N){return!!(v!=null&&v.length)&&vc(v,N,0)>-1},Rf=function(v,N,K){for(var st=-1,ht=v==null?0:v.length;++st<ht;)if(K(N,v[st]))return!0;return!1},kf=function(){},gc=ga&&1/io(new ga([,-0]))[1]==1/0?function(v){return new ga(v)}:kf,du=function(v,N,K){var st=-1,ht=pc,xt=v.length,Ot=!0,zt=[],Kt=zt;if(K)Ot=!1,ht=Rf;else if(xt>=200){var fe=N?null:gc(v);if(fe)return io(fe);Ot=!1,ht=$i,Kt=new Vo}else Kt=N?[]:zt;t:for(;++st<xt;){var Te=v[st],be=N?N(Te):Te;if(Te=K||Te!==0?Te:0,Ot&&be==be){for(var We=Kt.length;We--;)if(Kt[We]===be)continue t;N&&Kt.push(be),zt.push(Te)}else ht(Kt,be,K)||(Kt!==zt&&Kt.push(be),zt.push(Te))}return zt},lf=function(v){return wt(v)&&Dr(v)},mc=ps(function(v){return du(So(v,1,lf,!0))}),qc=function(v,N){return Ci(N,function(K){return v[K]})},hu,yc=function(v){return v==null?[]:qc(v,ce(v))};try{hu={clone:$a,constant:Fa,each:mi,filter:_u,has:bo,isArray:Q,isEmpty:d,isFunction:Pt,isUndefined:G,keys:ce,map:Gt,reduce:ge,size:Oo,transform:Eo,union:mc,values:yc}}catch(v){}hu||(hu=window._);var ea=hu,Au=ui;function ui(v){this._isDirected=!ea.has(v,"directed")||v.directed,this._isMultigraph=!!ea.has(v,"multigraph")&&v.multigraph,this._isCompound=!!ea.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=ea.constant(void 0),this._defaultEdgeLabelFn=ea.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function df(v,N){v[N]?v[N]++:v[N]=1}function Xu(v,N){--v[N]||delete v[N]}function su(v,N,K,st){var ht=""+N,xt=""+K;if(!v&&ht>xt){var Ot=ht;ht=xt,xt=Ot}return ht+""+xt+""+(ea.isUndefined(st)?"\0":st)}function Bf(v,N,K,st){var ht=""+N,xt=""+K;if(!v&&ht>xt){var Ot=ht;ht=xt,xt=Ot}var zt={v:ht,w:xt};return st&&(zt.name=st),zt}function Iu(v,N){return su(v,N.v,N.w,N.name)}ui.prototype._nodeCount=0,ui.prototype._edgeCount=0,ui.prototype.isDirected=function(){return this._isDirected},ui.prototype.isMultigraph=function(){return this._isMultigraph},ui.prototype.isCompound=function(){return this._isCompound},ui.prototype.setGraph=function(v){return this._label=v,this},ui.prototype.graph=function(){return this._label},ui.prototype.setDefaultNodeLabel=function(v){return ea.isFunction(v)||(v=ea.constant(v)),this._defaultNodeLabelFn=v,this},ui.prototype.nodeCount=function(){return this._nodeCount},ui.prototype.nodes=function(){return ea.keys(this._nodes)},ui.prototype.sources=function(){var v=this;return ea.filter(this.nodes(),function(N){return ea.isEmpty(v._in[N])})},ui.prototype.sinks=function(){var v=this;return ea.filter(this.nodes(),function(N){return ea.isEmpty(v._out[N])})},ui.prototype.setNodes=function(v,N){var K=arguments,st=this;return ea.each(v,function(ht){K.length>1?st.setNode(ht,N):st.setNode(ht)}),this},ui.prototype.setNode=function(v,N){return ea.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=N),this):(this._nodes[v]=arguments.length>1?N:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},ui.prototype.node=function(v){return this._nodes[v]},ui.prototype.hasNode=function(v){return ea.has(this._nodes,v)},ui.prototype.removeNode=function(v){var N=this;if(ea.has(this._nodes,v)){var K=function(st){N.removeEdge(N._edgeObjs[st])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],ea.each(this.children(v),function(st){N.setParent(st)}),delete this._children[v]),ea.each(ea.keys(this._in[v]),K),delete this._in[v],delete this._preds[v],ea.each(ea.keys(this._out[v]),K),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},ui.prototype.setParent=function(v,N){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ea.isUndefined(N))N="\0";else{for(var K=N+="";!ea.isUndefined(K);K=this.parent(K))if(K===v)throw new Error("Setting "+N+" as parent of "+v+" would create a cycle");this.setNode(N)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=N,this._children[N][v]=!0,this},ui.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},ui.prototype.parent=function(v){if(this._isCompound){var N=this._parent[v];if(N!=="\0")return N}},ui.prototype.children=function(v){if(ea.isUndefined(v)&&(v="\0"),this._isCompound){var N=this._children[v];if(N)return ea.keys(N)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},ui.prototype.predecessors=function(v){var N=this._preds[v];if(N)return ea.keys(N)},ui.prototype.successors=function(v){var N=this._sucs[v];if(N)return ea.keys(N)},ui.prototype.neighbors=function(v){var N=this.predecessors(v);if(N)return ea.union(N,this.successors(v))},ui.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},ui.prototype.filterNodes=function(v){var N=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});N.setGraph(this.graph());var K=this;ea.each(this._nodes,function(xt,Ot){v(Ot)&&N.setNode(Ot,xt)}),ea.each(this._edgeObjs,function(xt){N.hasNode(xt.v)&&N.hasNode(xt.w)&&N.setEdge(xt,K.edge(xt))});var st={};function ht(xt){var Ot=K.parent(xt);return Ot===void 0||N.hasNode(Ot)?(st[xt]=Ot,Ot):Ot in st?st[Ot]:ht(Ot)}return this._isCompound&&ea.each(N.nodes(),function(xt){N.setParent(xt,ht(xt))}),N},ui.prototype.setDefaultEdgeLabel=function(v){return ea.isFunction(v)||(v=ea.constant(v)),this._defaultEdgeLabelFn=v,this},ui.prototype.edgeCount=function(){return this._edgeCount},ui.prototype.edges=function(){return ea.values(this._edgeObjs)},ui.prototype.setPath=function(v,N){var K=this,st=arguments;return ea.reduce(v,function(ht,xt){return st.length>1?K.setEdge(ht,xt,N):K.setEdge(ht,xt),xt}),this},ui.prototype.setEdge=function(){var v,N,K,st,ht=!1,xt=arguments[0];typeof xt=="object"&&xt!==null&&"v"in xt?(v=xt.v,N=xt.w,K=xt.name,arguments.length===2&&(st=arguments[1],ht=!0)):(v=xt,N=arguments[1],K=arguments[3],arguments.length>2&&(st=arguments[2],ht=!0)),v=""+v,N=""+N,ea.isUndefined(K)||(K=""+K);var Ot=su(this._isDirected,v,N,K);if(ea.has(this._edgeLabels,Ot))return ht&&(this._edgeLabels[Ot]=st),this;if(!ea.isUndefined(K)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(N),this._edgeLabels[Ot]=ht?st:this._defaultEdgeLabelFn(v,N,K);var zt=Bf(this._isDirected,v,N,K);return v=zt.v,N=zt.w,Object.freeze(zt),this._edgeObjs[Ot]=zt,df(this._preds[N],v),df(this._sucs[v],N),this._in[N][Ot]=zt,this._out[v][Ot]=zt,this._edgeCount++,this},ui.prototype.edge=function(v,N,K){var st=arguments.length===1?Iu(this._isDirected,arguments[0]):su(this._isDirected,v,N,K);return this._edgeLabels[st]},ui.prototype.hasEdge=function(v,N,K){var st=arguments.length===1?Iu(this._isDirected,arguments[0]):su(this._isDirected,v,N,K);return ea.has(this._edgeLabels,st)},ui.prototype.removeEdge=function(v,N,K){var st=arguments.length===1?Iu(this._isDirected,arguments[0]):su(this._isDirected,v,N,K),ht=this._edgeObjs[st];return ht&&(v=ht.v,N=ht.w,delete this._edgeLabels[st],delete this._edgeObjs[st],Xu(this._preds[N],v),Xu(this._sucs[v],N),delete this._in[N][st],delete this._out[v][st],this._edgeCount--),this},ui.prototype.inEdges=function(v,N){var K=this._in[v];if(K){var st=ea.values(K);return N?ea.filter(st,function(ht){return ht.v===N}):st}},ui.prototype.outEdges=function(v,N){var K=this._out[v];if(K){var st=ea.values(K);return N?ea.filter(st,function(ht){return ht.w===N}):st}},ui.prototype.nodeEdges=function(v,N){var K=this.inEdges(v,N);if(K)return K.concat(this.outEdges(v,N))};var xc={Graph:Au,version:"2.1.8"},hf={write:function(v){var N={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:bc(v),edges:Ws(v)};return ea.isUndefined(v.graph())||(N.value=ea.clone(v.graph())),N},read:function(v){var N=new Au(v.options).setGraph(v.value);return ea.each(v.nodes,function(K){N.setNode(K.v,K.value),K.parent&&N.setParent(K.v,K.parent)}),ea.each(v.edges,function(K){N.setEdge({v:K.v,w:K.w,name:K.name},K.value)}),N}};function bc(v){return ea.map(v.nodes(),function(N){var K=v.node(N),st=v.parent(N),ht={v:N};return ea.isUndefined(K)||(ht.value=K),ea.isUndefined(st)||(ht.parent=st),ht})}function Ws(v){return ea.map(v.edges(),function(N){var K=v.edge(N),st={v:N.v,w:N.w};return ea.isUndefined(N.name)||(st.name=N.name),ea.isUndefined(K)||(st.value=K),st})}var lt=function(v){var N,K={},st=[];function ht(xt){ea.has(K,xt)||(K[xt]=!0,N.push(xt),ea.each(v.successors(xt),ht),ea.each(v.predecessors(xt),ht))}return ea.each(v.nodes(),function(xt){N=[],ht(xt),N.length&&st.push(N)}),st},Nt=Vt;function Vt(){this._arr=[],this._keyIndices={}}Vt.prototype.size=function(){return this._arr.length},Vt.prototype.keys=function(){return this._arr.map(function(v){return v.key})},Vt.prototype.has=function(v){return ea.has(this._keyIndices,v)},Vt.prototype.priority=function(v){var N=this._keyIndices[v];if(N!==void 0)return this._arr[N].priority},Vt.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Vt.prototype.add=function(v,N){var K=this._keyIndices;if(v=String(v),!ea.has(K,v)){var st=this._arr,ht=st.length;return K[v]=ht,st.push({key:v,priority:N}),this._decrease(ht),!0}return!1},Vt.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},Vt.prototype.decrease=function(v,N){var K=this._keyIndices[v];if(N>this._arr[K].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[K].priority+" New: "+N);this._arr[K].priority=N,this._decrease(K)},Vt.prototype._heapify=function(v){var N=this._arr,K=2*v,st=K+1,ht=v;K<N.length&&(ht=N[K].priority<N[ht].priority?K:ht,st<N.length&&(ht=N[st].priority<N[ht].priority?st:ht),ht!==v&&(this._swap(v,ht),this._heapify(ht)))},Vt.prototype._decrease=function(v){for(var N,K=this._arr,st=K[v].priority;v!==0&&!(K[N=v>>1].priority<st);)this._swap(v,N),v=N},Vt.prototype._swap=function(v,N){var K=this._arr,st=this._keyIndices,ht=K[v],xt=K[N];K[v]=xt,K[N]=ht,st[xt.key]=v,st[ht.key]=N};var le=function(v,N,K,st){return function(ht,xt,Ot,zt){var Kt,fe,Te={},be=new Nt,We=function(cr){var Vr=cr.v!==Kt?cr.v:cr.w,mr=Te[Vr],wr=Ot(cr),Er=fe.distance+wr;if(wr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+cr+" Weight: "+wr);Er<mr.distance&&(mr.distance=Er,mr.predecessor=Kt,be.decrease(Vr,Er))};for(ht.nodes().forEach(function(cr){var Vr=cr===xt?0:Number.POSITIVE_INFINITY;Te[cr]={distance:Vr},be.add(cr,Vr)});be.size()>0&&(Kt=be.removeMin(),(fe=Te[Kt]).distance!==Number.POSITIVE_INFINITY);)zt(Kt).forEach(We);return Te}(v,String(N),K||Ie,st||function(ht){return v.outEdges(ht)})},Ie=ea.constant(1),nr=function(v,N,K){return ea.transform(v.nodes(),function(st,ht){st[ht]=le(v,ht,N,K)},{})},fr=function(v){var N=0,K=[],st={},ht=[];function xt(Ot){var zt=st[Ot]={onStack:!0,lowlink:N,index:N++};if(K.push(Ot),v.successors(Ot).forEach(function(Te){ea.has(st,Te)?st[Te].onStack&&(zt.lowlink=Math.min(zt.lowlink,st[Te].index)):(xt(Te),zt.lowlink=Math.min(zt.lowlink,st[Te].lowlink))}),zt.lowlink===zt.index){var Kt,fe=[];do Kt=K.pop(),st[Kt].onStack=!1,fe.push(Kt);while(Ot!==Kt);ht.push(fe)}}return v.nodes().forEach(function(Ot){ea.has(st,Ot)||xt(Ot)}),ht},Gr=function(v){return ea.filter(fr(v),function(N){return N.length>1||N.length===1&&v.hasEdge(N[0],N[0])})},vn=function(v,N,K){return function(st,ht,xt){var Ot={},zt=st.nodes();return zt.forEach(function(Kt){Ot[Kt]={},Ot[Kt][Kt]={distance:0},zt.forEach(function(fe){Kt!==fe&&(Ot[Kt][fe]={distance:Number.POSITIVE_INFINITY})}),xt(Kt).forEach(function(fe){var Te=fe.v===Kt?fe.w:fe.v,be=ht(fe);Ot[Kt][Te]={distance:be,predecessor:Kt}})}),zt.forEach(function(Kt){var fe=Ot[Kt];zt.forEach(function(Te){var be=Ot[Te];zt.forEach(function(We){var cr=be[Kt],Vr=fe[We],mr=be[We],wr=cr.distance+Vr.distance;wr<mr.distance&&(mr.distance=wr,mr.predecessor=Vr.predecessor)})})}),Ot}(v,N||mn,K||function(st){return v.outEdges(st)})},mn=ea.constant(1),Hn=aa;function aa(v){var N={},K={},st=[];if(ea.each(v.sinks(),function ht(xt){if(ea.has(K,xt))throw new Kn;ea.has(N,xt)||(K[xt]=!0,N[xt]=!0,ea.each(v.predecessors(xt),ht),delete K[xt],st.push(xt))}),ea.size(N)!==v.nodeCount())throw new Kn;return st}function Kn(){}aa.CycleException=Kn,Kn.prototype=new Error;var Oa=function(v,N,K){ea.isArray(N)||(N=[N]);var st=(v.isDirected()?v.successors:v.neighbors).bind(v),ht=[],xt={};return ea.each(N,function(Ot){if(!v.hasNode(Ot))throw new Error("Graph does not have node: "+Ot);Ja(v,Ot,K==="post",xt,st,ht)}),ht};function Ja(v,N,K,st,ht,xt){ea.has(st,N)||(st[N]=!0,K||xt.push(N),ea.each(ht(N),function(Ot){Ja(v,Ot,K,st,ht,xt)}),K&&xt.push(N))}var Na,Ta={Graph:xc.Graph,json:hf,alg:{components:lt,dijkstra:le,dijkstraAll:nr,findCycles:Gr,floydWarshall:vn,isAcyclic:function(v){try{Hn(v)}catch(N){if(N instanceof Hn.CycleException)return!1;throw N}return!0},postorder:function(v,N){return Oa(v,N,"post")},preorder:function(v,N){return Oa(v,N,"pre")},prim:function(v,N){var K,st=new Au,ht={},xt=new Nt;function Ot(Kt){var fe=Kt.v===K?Kt.w:Kt.v,Te=xt.priority(fe);if(Te!==void 0){var be=N(Kt);be<Te&&(ht[fe]=K,xt.decrease(fe,be))}}if(v.nodeCount()===0)return st;ea.each(v.nodes(),function(Kt){xt.add(Kt,Number.POSITIVE_INFINITY),st.setNode(Kt)}),xt.decrease(v.nodes()[0],0);for(var zt=!1;xt.size()>0;){if(K=xt.removeMin(),ea.has(ht,K))st.setEdge(K,ht[K]);else{if(zt)throw new Error("Input graph is not connected: "+v);zt=!0}v.nodeEdges(K).forEach(Ot)}return st},tarjan:fr,topsort:Hn},version:xc.version};try{Na=Ta}catch(v){}Na||(Na=window.graphlib);var ka=Na,ha=function(v){return si(v,5)},Ya=function(v,N,K){if(!vt(K))return!1;var st=typeof N;return!!(st=="number"?Dr(K)&&O(N,K.length):st=="string"&&N in K)&&E(K[N],v)},Ga=Object.prototype,ma=Ga.hasOwnProperty,ri=ps(function(v,N){v=Object(v);var K=-1,st=N.length,ht=st>2?N[2]:void 0;for(ht&&Ya(N[0],N[1],ht)&&(st=1);++K<st;)for(var xt=N[K],Ot=Fe(xt),zt=-1,Kt=Ot.length;++zt<Kt;){var fe=Ot[zt],Te=v[fe];(Te===void 0||E(Te,Ga[fe])&&!ma.call(v,fe))&&(v[fe]=xt[fe])}return v}),xi=function(v){return function(N,K,st){var ht=Object(N);if(!Dr(N)){var xt=ns(K);N=ce(N),K=function(zt){return xt(ht[zt],zt,ht)}}var Ot=v(N,K,st);return Ot>-1?ht[xt?N[Ot]:Ot]:void 0}},Vi=/^\s+|\s+$/g,Ai=/^[-+]0x[0-9a-f]+$/i,hi=/^0b[01]+$/i,to=/^0o[0-7]+$/i,ko=parseInt,so=function(v){if(typeof v=="number")return v;if(Ho(v))return NaN;if(vt(v)){var N=typeof v.valueOf=="function"?v.valueOf():v;v=vt(N)?N+"":N}if(typeof v!="string")return v===0?v:+v;v=v.replace(Vi,"");var K=hi.test(v);return K||to.test(v)?ko(v.slice(2),K?2:8):Ai.test(v)?NaN:+v},ks=function(v){return v?(v=so(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Ou=function(v){var N=ks(v),K=N%1;return N==N?K?N-K:N:0},Ls=Math.max,uu=xi(function(v,N,K){var st=v==null?0:v.length;if(!st)return-1;var ht=K==null?0:Ou(K);return ht<0&&(ht=Ls(st+ht,0)),Tu(v,ns(N),ht)}),Ss=function(v){return v!=null&&v.length?So(v,1):[]},tu=function(v,N){return v==null?v:Ui(v,za(N),Fe)},Ff=function(v){var N=v==null?0:v.length;return N?v[N-1]:void 0},Qc=function(v,N){var K={};return N=ns(N),fi(v,function(st,ht,xt){jn(K,ht,N(st,ht,xt))}),K},ju=function(v,N,K){for(var st=-1,ht=v.length;++st<ht;){var xt=v[st],Ot=N(xt);if(Ot!=null&&(zt===void 0?Ot==Ot&&!Ho(Ot):K(Ot,zt)))var zt=Ot,Kt=xt}return Kt},vf=function(v,N){return v>N},Ec=function(v){return v&&v.length?ju(v,ja,vf):void 0},Vu=function(v,N,K){(K!==void 0&&!E(v[N],K)||K===void 0&&!(N in v))&&jn(v,N,K)},vu=Function.prototype,zf=Object.prototype,Gf=vu.toString,wc=zf.hasOwnProperty,eu=Gf.call(Object),ru=function(v){if(!wt(v)||nt(v)!="[object Object]")return!1;var N=Ea(v);if(N===null)return!0;var K=wc.call(N,"constructor")&&N.constructor;return typeof K=="function"&&K instanceof K&&Gf.call(K)==eu},Sc=function(v,N){if((N!=="constructor"||typeof v[N]!="function")&&N!="__proto__")return v[N]},Hu=function(v){return Ht(v,Fe(v))},cd=function(v,N,K,st,ht,xt,Ot){var zt=Sc(v,K),Kt=Sc(N,K),fe=Ot.get(Kt);if(fe)Vu(v,K,fe);else{var Te=xt?xt(zt,Kt,K+"",v,N,Ot):void 0,be=Te===void 0;if(be){var We=Q(Kt),cr=!We&&R(Kt),Vr=!We&&!cr&&me(Kt);Te=Kt,We||cr||Vr?Q(zt)?Te=zt:lf(zt)?Te=Jr(zt):cr?(be=!1,Te=gr(Kt,!0)):Vr?(be=!1,Te=Nr(Kt,!0)):Te=[]:ru(Kt)||Ut(Kt)?(Te=zt,Ut(zt)?Te=Hu(zt):vt(zt)&&!Pt(zt)||(Te=Pn(Kt))):be=!1}be&&(Ot.set(Kt,Te),ht(Te,Kt,st,xt,Ot),Ot.delete(Kt)),Vu(v,K,Te)}},pu=function v(N,K,st,ht,xt){N!==K&&Ui(K,function(Ot,zt){if(xt||(xt=new Wn),vt(Ot))cd(N,K,zt,st,v,ht,xt);else{var Kt=ht?ht(Sc(N,zt),Ot,zt+"",N,K,xt):void 0;Kt===void 0&&(Kt=Ot),Vu(N,zt,Kt)}},Fe)},us=function(v){return ps(function(N,K){var st=-1,ht=K.length,xt=ht>1?K[ht-1]:void 0,Ot=ht>2?K[2]:void 0;for(xt=v.length>3&&typeof xt=="function"?(ht--,xt):void 0,Ot&&Ya(K[0],K[1],Ot)&&(xt=ht<3?void 0:xt,ht=1),N=Object(N);++st<ht;){var zt=K[st];zt&&v(N,zt,st,xt)}return N})}(function(v,N,K){pu(v,N,K)}),Jc=function(v,N){return v<N},pf=function(v){return v&&v.length?ju(v,ja,Jc):void 0},tl=function(v,N){return v&&v.length?ju(v,ns(N),Jc):void 0},gu=function(){return it.Date.now()},mu=function(v,N,K,st){if(!vt(v))return v;for(var ht=-1,xt=(N=ji(N,v)).length,Ot=xt-1,zt=v;zt!=null&&++ht<xt;){var Kt=xo(N[ht]),fe=K;if(Kt==="__proto__"||Kt==="constructor"||Kt==="prototype")return v;if(ht!=Ot){var Te=zt[Kt];(fe=st?st(Te,Kt,zt):void 0)===void 0&&(fe=vt(Te)?Te:O(N[ht+1])?[]:{})}Je(zt,Kt,fe),zt=zt[Kt]}return v},yu=function(v,N,K){for(var st=-1,ht=N.length,xt={};++st<ht;){var Ot=N[st],zt=Gs(v,Ot);K(zt,Ot)&&mu(xt,ji(Ot,v),zt)}return xt},Mc=function(v,N){return yu(v,N,function(K,st){return Js(v,st)})},_c=function(v){return Zs(ci(v,void 0,Ss),v+"")}(function(v,N){return v==null?{}:Mc(v,N)}),el=Math.ceil,Bs=Math.max,rl=function(v,N,K,st){for(var ht=-1,xt=Bs(el((N-v)/(K||1)),0),Ot=Array(xt);xt--;)Ot[st?xt:++ht]=v,v+=K;return Ot},Uf=function(v){return function(N,K,st){return st&&typeof st!="number"&&Ya(N,K,st)&&(K=st=void 0),N=ks(N),K===void 0?(K=N,N=0):K=ks(K),st=st===void 0?N<K?1:-1:ks(st),rl(N,K,st,v)}}(),Cc=function(v,N){var K=v.length;for(v.sort(N);K--;)v[K]=v[K].value;return v},nl=function(v,N){if(v!==N){var K=v!==void 0,st=v===null,ht=v==v,xt=Ho(v),Ot=N!==void 0,zt=N===null,Kt=N==N,fe=Ho(N);if(!zt&&!fe&&!xt&&v>N||xt&&Ot&&Kt&&!zt&&!fe||st&&Ot&&Kt||!K&&Kt||!ht)return 1;if(!st&&!xt&&!fe&&v<N||fe&&K&&ht&&!st&&!xt||zt&&K&&ht||!Ot&&ht||!Kt)return-1}return 0},Bl=function(v,N,K){for(var st=-1,ht=v.criteria,xt=N.criteria,Ot=ht.length,zt=K.length;++st<Ot;){var Kt=nl(ht[st],xt[st]);if(Kt)return st>=zt?Kt:Kt*(K[st]=="desc"?-1:1)}return v.index-N.index},al=function(v,N,K){N=N.length?Ci(N,function(xt){return Q(xt)?function(Ot){return Gs(Ot,xt.length===1?xt[0]:xt)}:xt}):[ja];var st=-1;N=Ci(N,Bt(ns));var ht=Et(v,function(xt,Ot,zt){return{criteria:Ci(N,function(Kt){return Kt(xt)}),index:++st,value:xt}});return Cc(ht,function(xt,Ot){return Bl(xt,Ot,K)})},Wf=ps(function(v,N){if(v==null)return[];var K=N.length;return K>1&&Ya(v,N[0],N[1])?N=[]:K>2&&Ya(N[0],N[1],N[2])&&(N=[N[0]]),al(v,So(N,1),[])}),il=0,Fl=function(v){var N=++il;return Ds(v)+N},ld=function(v,N,K){for(var st=-1,ht=v.length,xt=N.length,Ot={};++st<ht;){var zt=st<xt?N[st]:void 0;K(Ot,v[st],zt)}return Ot},Yf,Tc=function(v,N){return ld(v||[],N||[],Je)};try{Yf={cloneDeep:ha,constant:Fa,defaults:ri,each:mi,filter:_u,find:uu,flatten:Ss,forEach:yi,forIn:tu,has:bo,isUndefined:G,last:Ff,map:Gt,mapValues:Qc,max:Ec,merge:us,min:pf,minBy:tl,now:gu,pick:_c,range:Uf,reduce:ge,sortBy:Wf,uniqueId:Fl,values:yc,zipObject:Tc}}catch(v){}Yf||(Yf=window._);var tr=Yf,ol=Xf;function Xf(){var v={};v._next=v._prev=v,this._sentinel=v}function sl(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function ul(v,N){if(v!=="_next"&&v!=="_prev")return N}Xf.prototype.dequeue=function(){var v=this._sentinel,N=v._prev;if(N!==v)return sl(N),N},Xf.prototype.enqueue=function(v){var N=this._sentinel;v._prev&&v._next&&sl(v),v._next=N._next,N._next._prev=v,N._next=v,v._prev=N},Xf.prototype.toString=function(){for(var v=[],N=this._sentinel,K=N._prev;K!==N;)v.push(JSON.stringify(K,ul)),K=K._prev;return"["+v.join(", ")+"]"};var Ac=ka.Graph,zl=function(v,N){if(v.nodeCount()<=1)return[];var K=function(ht,xt){var Ot=new Ac,zt=0,Kt=0;tr.forEach(ht.nodes(),function(be){Ot.setNode(be,{v:be,in:0,out:0})}),tr.forEach(ht.edges(),function(be){var We=Ot.edge(be.v,be.w)||0,cr=xt(be),Vr=We+cr;Ot.setEdge(be.v,be.w,Vr),Kt=Math.max(Kt,Ot.node(be.v).out+=cr),zt=Math.max(zt,Ot.node(be.w).in+=cr)});var fe=tr.range(Kt+zt+3).map(function(){return new ol}),Te=zt+1;return tr.forEach(Ot.nodes(),function(be){gf(fe,Te,Ot.node(be))}),{graph:Ot,buckets:fe,zeroIdx:Te}}(v,N||fl),st=function(ht,xt,Ot){for(var zt,Kt=[],fe=xt[xt.length-1],Te=xt[0];ht.nodeCount();){for(;zt=Te.dequeue();)jf(ht,xt,Ot,zt);for(;zt=fe.dequeue();)jf(ht,xt,Ot,zt);if(ht.nodeCount()){for(var be=xt.length-2;be>0;--be)if(zt=xt[be].dequeue()){Kt=Kt.concat(jf(ht,xt,Ot,zt,!0));break}}}return Kt}(K.graph,K.buckets,K.zeroIdx);return tr.flatten(tr.map(st,function(ht){return v.outEdges(ht.v,ht.w)}),!0)},fl=tr.constant(1);function jf(v,N,K,st,ht){var xt=ht?[]:void 0;return tr.forEach(v.inEdges(st.v),function(Ot){var zt=v.edge(Ot),Kt=v.node(Ot.v);ht&&xt.push({v:Ot.v,w:Ot.w}),Kt.out-=zt,gf(N,K,Kt)}),tr.forEach(v.outEdges(st.v),function(Ot){var zt=v.edge(Ot),Kt=Ot.w,fe=v.node(Kt);fe.in-=zt,gf(N,K,fe)}),v.removeNode(st.v),xt}function gf(v,N,K){K.out?K.in?v[K.out-K.in+N].enqueue(K):v[v.length-1].enqueue(K):v[0].enqueue(K)}var cl={run:function(v){var N=v.graph().acyclicer==="greedy"?zl(v,function(K){return function(st){return K.edge(st).weight}}(v)):function(K){var st=[],ht={},xt={};function Ot(zt){tr.has(xt,zt)||(xt[zt]=!0,ht[zt]=!0,tr.forEach(K.outEdges(zt),function(Kt){tr.has(ht,Kt.w)?st.push(Kt):Ot(Kt.w)}),delete ht[zt])}return tr.forEach(K.nodes(),Ot),st}(v);tr.forEach(N,function(K){var st=v.edge(K);v.removeEdge(K),st.forwardName=K.name,st.reversed=!0,v.setEdge(K.w,K.v,st,tr.uniqueId("rev"))})},undo:function(v){tr.forEach(v.edges(),function(N){var K=v.edge(N);if(K.reversed){v.removeEdge(N);var st=K.forwardName;delete K.reversed,delete K.forwardName,v.setEdge(N.w,N.v,K,st)}})}},mf=ka.Graph,Zo={addDummyNode:yf,simplify:function(v){var N=new mf().setGraph(v.graph());return tr.forEach(v.nodes(),function(K){N.setNode(K,v.node(K))}),tr.forEach(v.edges(),function(K){var st=N.edge(K.v,K.w)||{weight:0,minlen:1},ht=v.edge(K);N.setEdge(K.v,K.w,{weight:st.weight+ht.weight,minlen:Math.max(st.minlen,ht.minlen)})}),N},asNonCompoundGraph:function(v){var N=new mf({multigraph:v.isMultigraph()}).setGraph(v.graph());return tr.forEach(v.nodes(),function(K){v.children(K).length||N.setNode(K,v.node(K))}),tr.forEach(v.edges(),function(K){N.setEdge(K,v.edge(K))}),N},successorWeights:function(v){var N=tr.map(v.nodes(),function(K){var st={};return tr.forEach(v.outEdges(K),function(ht){st[ht.w]=(st[ht.w]||0)+v.edge(ht).weight}),st});return tr.zipObject(v.nodes(),N)},predecessorWeights:function(v){var N=tr.map(v.nodes(),function(K){var st={};return tr.forEach(v.inEdges(K),function(ht){st[ht.v]=(st[ht.v]||0)+v.edge(ht).weight}),st});return tr.zipObject(v.nodes(),N)},intersectRect:function(v,N){var K,st,ht=v.x,xt=v.y,Ot=N.x-ht,zt=N.y-xt,Kt=v.width/2,fe=v.height/2;if(!Ot&&!zt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(zt)*Kt>Math.abs(Ot)*fe?(zt<0&&(fe=-fe),K=fe*Ot/zt,st=fe):(Ot<0&&(Kt=-Kt),K=Kt,st=Kt*zt/Ot),{x:ht+K,y:xt+st}},buildLayerMatrix:function(v){var N=tr.map(tr.range(ll(v)+1),function(){return[]});return tr.forEach(v.nodes(),function(K){var st=v.node(K),ht=st.rank;tr.isUndefined(ht)||(N[ht][st.order]=K)}),N},normalizeRanks:function(v){var N=tr.min(tr.map(v.nodes(),function(K){return v.node(K).rank}));tr.forEach(v.nodes(),function(K){var st=v.node(K);tr.has(st,"rank")&&(st.rank-=N)})},removeEmptyRanks:function(v){var N=tr.min(tr.map(v.nodes(),function(xt){return v.node(xt).rank})),K=[];tr.forEach(v.nodes(),function(xt){var Ot=v.node(xt).rank-N;K[Ot]||(K[Ot]=[]),K[Ot].push(xt)});var st=0,ht=v.graph().nodeRankFactor;tr.forEach(K,function(xt,Ot){tr.isUndefined(xt)&&Ot%ht!=0?--st:st&&tr.forEach(xt,function(zt){v.node(zt).rank+=st})})},addBorderNode:function(v,N,K,st){var ht={width:0,height:0};return arguments.length>=4&&(ht.rank=K,ht.order=st),yf(v,"border",ht,N)},maxRank:ll,partition:function(v,N){var K={lhs:[],rhs:[]};return tr.forEach(v,function(st){N(st)?K.lhs.push(st):K.rhs.push(st)}),K},time:function(v,N){var K=tr.now();try{return N()}finally{console.log(v+" time: "+(tr.now()-K)+"ms")}},notime:function(v,N){return N()}};function yf(v,N,K,st){var ht;do ht=tr.uniqueId(st);while(v.hasNode(ht));return K.dummy=N,v.setNode(ht,K),ht}function ll(v){return tr.max(tr.map(v.nodes(),function(N){var K=v.node(N).rank;if(!tr.isUndefined(K))return K}))}var Vf={run:function(v){v.graph().dummyChains=[],tr.forEach(v.edges(),function(N){(function(K,st){var ht,xt,Ot,zt=st.v,Kt=K.node(zt).rank,fe=st.w,Te=K.node(fe).rank,be=st.name,We=K.edge(st),cr=We.labelRank;if(Te!==Kt+1){for(K.removeEdge(st),Ot=0,++Kt;Kt<Te;++Ot,++Kt)We.points=[],xt={width:0,height:0,edgeLabel:We,edgeObj:st,rank:Kt},ht=Zo.addDummyNode(K,"edge",xt,"_d"),Kt===cr&&(xt.width=We.width,xt.height=We.height,xt.dummy="edge-label",xt.labelpos=We.labelpos),K.setEdge(zt,ht,{weight:We.weight},be),Ot===0&&K.graph().dummyChains.push(ht),zt=ht;K.setEdge(zt,fe,{weight:We.weight},be)}})(v,N)})},undo:function(v){tr.forEach(v.graph().dummyChains,function(N){var K,st=v.node(N),ht=st.edgeLabel;for(v.setEdge(st.edgeObj,ht);st.dummy;)K=v.successors(N)[0],v.removeNode(N),ht.points.push({x:st.x,y:st.y}),st.dummy==="edge-label"&&(ht.x=st.x,ht.y=st.y,ht.width=st.width,ht.height=st.height),N=K,st=v.node(N)})}},Ys=function(v){var N={};tr.forEach(v.sources(),function K(st){var ht=v.node(st);if(tr.has(N,st))return ht.rank;N[st]=!0;var xt=tr.min(tr.map(v.outEdges(st),function(Ot){return K(Ot.w)-v.edge(Ot).minlen}));return xt!==Number.POSITIVE_INFINITY&&xt!=null||(xt=0),ht.rank=xt})},xf=function(v,N){return v.node(N.w).rank-v.node(N.v).rank-v.edge(N).minlen},Zu=ka.Graph,Du=xf,Ku=function(v){var N,K,st=new Zu({directed:!1}),ht=v.nodes()[0],xt=v.nodeCount();for(st.setNode(ht,{});$u(st,v)<xt;)N=qu(st,v),K=st.hasNode(N.v)?Du(v,N):-Du(v,N),Lu(st,v,K);return st};function $u(v,N){return tr.forEach(v.nodes(),function K(st){tr.forEach(N.nodeEdges(st),function(ht){var xt=ht.v,Ot=st===xt?ht.w:xt;v.hasNode(Ot)||Du(N,ht)||(v.setNode(Ot,{}),v.setEdge(st,Ot,{}),K(Ot))})}),v.nodeCount()}function qu(v,N){return tr.minBy(N.edges(),function(K){if(v.hasNode(K.v)!==v.hasNode(K.w))return Du(N,K)})}function Lu(v,N,K){tr.forEach(v.nodes(),function(st){N.node(st).rank+=K})}var bf=xf,Ic=Ys,Hf=ka.alg.preorder,Oc=ka.alg.postorder,Dc=Zo.simplify,Qu=Ks;function Ks(v){v=Dc(v),Ic(v);var N,K=Ku(v);for(nu(K),dl(K,v);N=pl(K);)Ju(K,v,N,gl(K,v,N))}function dl(v,N){var K=Oc(v,v.nodes());K=K.slice(0,K.length-1),tr.forEach(K,function(st){(function(ht,xt,Ot){var zt=ht.node(Ot).parent;ht.edge(Ot,zt).cutvalue=hl(ht,xt,Ot)})(v,N,st)})}function hl(v,N,K){var st=v.node(K).parent,ht=!0,xt=N.edge(K,st),Ot=0;return xt||(ht=!1,xt=N.edge(st,K)),Ot=xt.weight,tr.forEach(N.nodeEdges(K),function(zt){var Kt,fe,Te=zt.v===K,be=Te?zt.w:zt.v;if(be!==st){var We=Te===ht,cr=N.edge(zt).weight;if(Ot+=We?cr:-cr,Kt=K,fe=be,v.hasEdge(Kt,fe)){var Vr=v.edge(K,be).cutvalue;Ot+=We?-Vr:Vr}}}),Ot}function nu(v,N){arguments.length<2&&(N=v.nodes()[0]),vl(v,{},1,N)}function vl(v,N,K,st,ht){var xt=K,Ot=v.node(st);return N[st]=!0,tr.forEach(v.neighbors(st),function(zt){tr.has(N,zt)||(K=vl(v,N,K,zt,st))}),Ot.low=xt,Ot.lim=K++,ht?Ot.parent=ht:delete Ot.parent,K}function pl(v){return tr.find(v.edges(),function(N){return v.edge(N).cutvalue<0})}function gl(v,N,K){var st=K.v,ht=K.w;N.hasEdge(st,ht)||(st=K.w,ht=K.v);var xt=v.node(st),Ot=v.node(ht),zt=xt,Kt=!1;xt.lim>Ot.lim&&(zt=Ot,Kt=!0);var fe=tr.filter(N.edges(),function(Te){return Kt===Gl(v,v.node(Te.v),zt)&&Kt!==Gl(v,v.node(Te.w),zt)});return tr.minBy(fe,function(Te){return bf(N,Te)})}function Ju(v,N,K,st){var ht=K.v,xt=K.w;v.removeEdge(ht,xt),v.setEdge(st.v,st.w,{}),nu(v),dl(v,N),function(Ot,zt){var Kt=tr.find(Ot.nodes(),function(Te){return!zt.node(Te).parent}),fe=Hf(Ot,Kt);fe=fe.slice(1),tr.forEach(fe,function(Te){var be=Ot.node(Te).parent,We=zt.edge(Te,be),cr=!1;We||(We=zt.edge(be,Te),cr=!0),zt.node(Te).rank=zt.node(be).rank+(cr?We.minlen:-We.minlen)})}(v,N)}function Gl(v,N,K){return K.low<=N.lim&&N.lim<=K.lim}Ks.initLowLimValues=nu,Ks.initCutValues=dl,Ks.calcCutValue=hl,Ks.leaveEdge=pl,Ks.enterEdge=gl,Ks.exchangeEdges=Ju;var ml=Ys,yl=function(v){switch(v.graph().ranker){case"network-simplex":Wl(v);break;case"tight-tree":(function(N){ml(N),Ku(N)})(v);break;case"longest-path":Ul(v);break;default:Wl(v)}},Ul=ml;function Wl(v){Qu(v)}var dd=function(v){var N=function(K){var st={},ht=0;function xt(Ot){var zt=ht;tr.forEach(K.children(Ot),xt),st[Ot]={low:zt,lim:ht++}}return tr.forEach(K.children(),xt),st}(v);tr.forEach(v.graph().dummyChains,function(K){for(var st=v.node(K),ht=st.edgeObj,xt=function(be,We,cr,Vr){var mr,wr,Er=[],Sn=[],Yn=Math.min(We[cr].low,We[Vr].low),Nn=Math.max(We[cr].lim,We[Vr].lim);mr=cr;do mr=be.parent(mr),Er.push(mr);while(mr&&(We[mr].low>Yn||Nn>We[mr].lim));for(wr=mr,mr=Vr;(mr=be.parent(mr))!==wr;)Sn.push(mr);return{path:Er.concat(Sn.reverse()),lca:wr}}(v,N,ht.v,ht.w),Ot=xt.path,zt=xt.lca,Kt=0,fe=Ot[Kt],Te=!0;K!==ht.w;){if(st=v.node(K),Te){for(;(fe=Ot[Kt])!==zt&&v.node(fe).maxRank<st.rank;)Kt++;fe===zt&&(Te=!1)}if(!Te){for(;Kt<Ot.length-1&&v.node(fe=Ot[Kt+1]).minRank<=st.rank;)Kt++;fe=Ot[Kt]}v.setParent(K,fe),K=v.successors(K)[0]}})},Yl={run:function(v){var N=Zo.addDummyNode(v,"root",{},"_root"),K=function(Ot){var zt={};function Kt(fe,Te){var be=Ot.children(fe);be&&be.length&&tr.forEach(be,function(We){Kt(We,Te+1)}),zt[fe]=Te}return tr.forEach(Ot.children(),function(fe){Kt(fe,1)}),zt}(v),st=tr.max(tr.values(K))-1,ht=2*st+1;v.graph().nestingRoot=N,tr.forEach(v.edges(),function(Ot){v.edge(Ot).minlen*=ht});var xt=function(Ot){return tr.reduce(Ot.edges(),function(zt,Kt){return zt+Ot.edge(Kt).weight},0)}(v)+1;tr.forEach(v.children(),function(Ot){Xl(v,N,ht,xt,st,K,Ot)}),v.graph().nodeRankFactor=ht},cleanup:function(v){var N=v.graph();v.removeNode(N.nestingRoot),delete N.nestingRoot,tr.forEach(v.edges(),function(K){v.edge(K).nestingEdge&&v.removeEdge(K)})}};function Xl(v,N,K,st,ht,xt,Ot){var zt=v.children(Ot);if(zt.length){var Kt=Zo.addBorderNode(v,"_bt"),fe=Zo.addBorderNode(v,"_bb"),Te=v.node(Ot);v.setParent(Kt,Ot),Te.borderTop=Kt,v.setParent(fe,Ot),Te.borderBottom=fe,tr.forEach(zt,function(be){Xl(v,N,K,st,ht,xt,be);var We=v.node(be),cr=We.borderTop?We.borderTop:be,Vr=We.borderBottom?We.borderBottom:be,mr=We.borderTop?st:2*st,wr=cr!==Vr?1:ht-xt[Ot]+1;v.setEdge(Kt,cr,{weight:mr,minlen:wr,nestingEdge:!0}),v.setEdge(Vr,fe,{weight:mr,minlen:wr,nestingEdge:!0})}),v.parent(Ot)||v.setEdge(N,Kt,{weight:0,minlen:ht+xt[Ot]})}else Ot!==N&&v.setEdge(N,Ot,{weight:0,minlen:K})}var hd=function(v){tr.forEach(v.children(),function N(K){var st=v.children(K),ht=v.node(K);if(st.length&&tr.forEach(st,N),tr.has(ht,"minRank")){ht.borderLeft=[],ht.borderRight=[];for(var xt=ht.minRank,Ot=ht.maxRank+1;xt<Ot;++xt)jl(v,"borderLeft","_bl",K,ht,xt),jl(v,"borderRight","_br",K,ht,xt)}})};function jl(v,N,K,st,ht,xt){var Ot={width:0,height:0,rank:xt,borderType:N},zt=ht[N][xt-1],Kt=Zo.addDummyNode(v,"border",Ot,K);ht[N][xt]=Kt,v.setParent(Kt,st),zt&&v.setEdge(zt,Kt,{weight:1})}var Vl={adjust:function(v){var N=v.graph().rankdir.toLowerCase();N!=="lr"&&N!=="rl"||Zf(v)},undo:function(v){var N=v.graph().rankdir.toLowerCase();N!=="bt"&&N!=="rl"||function(K){tr.forEach(K.nodes(),function(st){tf(K.node(st))}),tr.forEach(K.edges(),function(st){var ht=K.edge(st);tr.forEach(ht.points,tf),tr.has(ht,"y")&&tf(ht)})}(v),N!=="lr"&&N!=="rl"||(function(K){tr.forEach(K.nodes(),function(st){Kf(K.node(st))}),tr.forEach(K.edges(),function(st){var ht=K.edge(st);tr.forEach(ht.points,Kf),tr.has(ht,"x")&&Kf(ht)})}(v),Zf(v))}};function Zf(v){tr.forEach(v.nodes(),function(N){Hl(v.node(N))}),tr.forEach(v.edges(),function(N){Hl(v.edge(N))})}function Hl(v){var N=v.width;v.width=v.height,v.height=N}function tf(v){v.y=-v.y}function Kf(v){var N=v.x;v.x=v.y,v.y=N}var Ef=function(v){var N={},K=tr.filter(v.nodes(),function(zt){return!v.children(zt).length}),st=tr.max(tr.map(K,function(zt){return v.node(zt).rank})),ht=tr.map(tr.range(st+1),function(){return[]});function xt(zt){if(!tr.has(N,zt)){N[zt]=!0;var Kt=v.node(zt);ht[Kt.rank].push(zt),tr.forEach(v.successors(zt),xt)}}var Ot=tr.sortBy(K,function(zt){return v.node(zt).rank});return tr.forEach(Ot,xt),ht},Lc=function(v,N){for(var K=0,st=1;st<N.length;++st)K+=Pc(v,N[st-1],N[st]);return K};function Pc(v,N,K){for(var st=tr.zipObject(K,tr.map(K,function(fe,Te){return Te})),ht=tr.flatten(tr.map(N,function(fe){return tr.sortBy(tr.map(v.outEdges(fe),function(Te){return{pos:st[Te.w],weight:v.edge(Te).weight}}),"pos")}),!0),xt=1;xt<K.length;)xt<<=1;var Ot=2*xt-1;xt-=1;var zt=tr.map(new Array(Ot),function(){return 0}),Kt=0;return tr.forEach(ht.forEach(function(fe){var Te=fe.pos+xt;zt[Te]+=fe.weight;for(var be=0;Te>0;)Te%2&&(be+=zt[Te+1]),zt[Te=Te-1>>1]+=fe.weight;Kt+=fe.weight*be})),Kt}var Nc=function(v,N){return tr.map(N,function(K){var st=v.inEdges(K);if(st.length){var ht=tr.reduce(st,function(xt,Ot){var zt=v.edge(Ot),Kt=v.node(Ot.v);return{sum:xt.sum+zt.weight*Kt.order,weight:xt.weight+zt.weight}},{sum:0,weight:0});return{v:K,barycenter:ht.sum/ht.weight,weight:ht.weight}}return{v:K}})},xu=function(v,N){var K={};return tr.forEach(v,function(st,ht){var xt=K[st.v]={indegree:0,in:[],out:[],vs:[st.v],i:ht};tr.isUndefined(st.barycenter)||(xt.barycenter=st.barycenter,xt.weight=st.weight)}),tr.forEach(N.edges(),function(st){var ht=K[st.v],xt=K[st.w];tr.isUndefined(ht)||tr.isUndefined(xt)||(xt.indegree++,ht.out.push(K[st.w]))}),function(st){var ht=[];function xt(Kt){return function(fe){fe.merged||(tr.isUndefined(fe.barycenter)||tr.isUndefined(Kt.barycenter)||fe.barycenter>=Kt.barycenter)&&function(Te,be){var We=0,cr=0;Te.weight&&(We+=Te.barycenter*Te.weight,cr+=Te.weight),be.weight&&(We+=be.barycenter*be.weight,cr+=be.weight),Te.vs=be.vs.concat(Te.vs),Te.barycenter=We/cr,Te.weight=cr,Te.i=Math.min(be.i,Te.i),be.merged=!0}(Kt,fe)}}function Ot(Kt){return function(fe){fe.in.push(Kt),--fe.indegree==0&&st.push(fe)}}for(;st.length;){var zt=st.pop();ht.push(zt),tr.forEach(zt.in.reverse(),xt(zt)),tr.forEach(zt.out,Ot(zt))}return tr.map(tr.filter(ht,function(Kt){return!Kt.merged}),function(Kt){return tr.pick(Kt,["vs","i","barycenter","weight"])})}(tr.filter(K,function(st){return!st.indegree}))},wf=function(v,N){var K=Zo.partition(v,function(be){return tr.has(be,"barycenter")}),st=K.lhs,ht=tr.sortBy(K.rhs,function(be){return-be.i}),xt=[],Ot=0,zt=0,Kt=0;st.sort((fe=!!N,function(be,We){return be.barycenter<We.barycenter?-1:be.barycenter>We.barycenter?1:fe?We.i-be.i:be.i-We.i})),Kt=ef(xt,ht,Kt),tr.forEach(st,function(be){Kt+=be.vs.length,xt.push(be.vs),Ot+=be.barycenter*be.weight,zt+=be.weight,Kt=ef(xt,ht,Kt)});var fe,Te={vs:tr.flatten(xt,!0)};return zt&&(Te.barycenter=Ot/zt,Te.weight=zt),Te};function ef(v,N,K){for(var st;N.length&&(st=tr.last(N)).i<=K;)N.pop(),v.push(st.vs),K++;return K}var xl=function v(N,K,st,ht){var xt=N.children(K),Ot=N.node(K),zt=Ot?Ot.borderLeft:void 0,Kt=Ot?Ot.borderRight:void 0,fe={};zt&&(xt=tr.filter(xt,function(mr){return mr!==zt&&mr!==Kt}));var Te=Nc(N,xt);tr.forEach(Te,function(mr){if(N.children(mr.v).length){var wr=v(N,mr.v,st,ht);fe[mr.v]=wr,tr.has(wr,"barycenter")&&(Er=mr,Sn=wr,tr.isUndefined(Er.barycenter)?(Er.barycenter=Sn.barycenter,Er.weight=Sn.weight):(Er.barycenter=(Er.barycenter*Er.weight+Sn.barycenter*Sn.weight)/(Er.weight+Sn.weight),Er.weight+=Sn.weight))}var Er,Sn});var be=xu(Te,st);(function(mr,wr){tr.forEach(mr,function(Er){Er.vs=tr.flatten(Er.vs.map(function(Sn){return wr[Sn]?wr[Sn].vs:Sn}),!0)})})(be,fe);var We=wf(be,ht);if(zt&&(We.vs=tr.flatten([zt,We.vs,Kt],!0),N.predecessors(zt).length)){var cr=N.node(N.predecessors(zt)[0]),Vr=N.node(N.predecessors(Kt)[0]);tr.has(We,"barycenter")||(We.barycenter=0,We.weight=0),We.barycenter=(We.barycenter*We.weight+cr.order+Vr.order)/(We.weight+2),We.weight+=2}return We},$f=ka.Graph,Rc=function(v,N,K){var st=function(xt){for(var Ot;xt.hasNode(Ot=tr.uniqueId("_root")););return Ot}(v),ht=new $f({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(xt){return v.node(xt)});return tr.forEach(v.nodes(),function(xt){var Ot=v.node(xt),zt=v.parent(xt);(Ot.rank===N||Ot.minRank<=N&&N<=Ot.maxRank)&&(ht.setNode(xt),ht.setParent(xt,zt||st),tr.forEach(v[K](xt),function(Kt){var fe=Kt.v===xt?Kt.w:Kt.v,Te=ht.edge(fe,xt),be=tr.isUndefined(Te)?0:Te.weight;ht.setEdge(fe,xt,{weight:v.edge(Kt).weight+be})}),tr.has(Ot,"minRank")&&ht.setNode(xt,{borderLeft:Ot.borderLeft[N],borderRight:Ot.borderRight[N]}))}),ht},qf=function(v,N,K){var st,ht={};tr.forEach(K,function(xt){for(var Ot,zt,Kt=v.parent(xt);Kt;){if((Ot=v.parent(Kt))?(zt=ht[Ot],ht[Ot]=Kt):(zt=st,st=Kt),zt&&zt!==Kt)return void N.setEdge(zt,Kt);Kt=Ot}})},Qf=ka.Graph,kc=function(v){var N=Zo.maxRank(v),K=Sf(v,tr.range(1,N+1),"inEdges"),st=Sf(v,tr.range(N-1,-1,-1),"outEdges"),ht=Ef(v);rf(v,ht);for(var xt,Ot=Number.POSITIVE_INFINITY,zt=0,Kt=0;Kt<4;++zt,++Kt){Jf(zt%2?K:st,zt%4>=2),ht=Zo.buildLayerMatrix(v);var fe=Lc(v,ht);fe<Ot&&(Kt=0,xt=tr.cloneDeep(ht),Ot=fe)}rf(v,xt)};function Sf(v,N,K){return tr.map(N,function(st){return Rc(v,st,K)})}function Jf(v,N){var K=new Qf;tr.forEach(v,function(st){var ht=st.graph().root,xt=xl(st,ht,K,N);tr.forEach(xt.vs,function(Ot,zt){st.node(Ot).order=zt}),qf(st,K,xt.vs)})}function rf(v,N){tr.forEach(N,function(K){tr.forEach(K,function(st,ht){v.node(st).order=ht})})}var Zl=ka.Graph,tc=function(v){var N,K=Zo.buildLayerMatrix(v),st=tr.merge(nf(v,K),Kl(v,K)),ht={};tr.forEach(["u","d"],function(Ot){N=Ot==="u"?K:tr.values(K).reverse(),tr.forEach(["l","r"],function(zt){zt==="r"&&(N=tr.map(N,function(be){return tr.values(be).reverse()}));var Kt=(Ot==="u"?v.predecessors:v.successors).bind(v),fe=vd(v,N,st,Kt),Te=ql(v,N,fe.root,fe.align,zt==="r");zt==="r"&&(Te=tr.mapValues(Te,function(be){return-be})),ht[Ot+zt]=Te})});var xt=af(v,ht);return bl(ht,xt),Ql(ht,v.graph().align)};function nf(v,N){var K={};return tr.reduce(N,function(st,ht){var xt=0,Ot=0,zt=st.length,Kt=tr.last(ht);return tr.forEach(ht,function(fe,Te){var be=function(cr,Vr){if(cr.node(Vr).dummy)return tr.find(cr.predecessors(Vr),function(mr){return cr.node(mr).dummy})}(v,fe),We=be?v.node(be).order:zt;(be||fe===Kt)&&(tr.forEach(ht.slice(Ot,Te+1),function(cr){tr.forEach(v.predecessors(cr),function(Vr){var mr=v.node(Vr),wr=mr.order;!(wr<xt||We<wr)||mr.dummy&&v.node(cr).dummy||Bc(K,Vr,cr)})}),Ot=Te+1,xt=We)}),ht}),K}function Kl(v,N){var K={};function st(ht,xt,Ot,zt,Kt){var fe;tr.forEach(tr.range(xt,Ot),function(Te){fe=ht[Te],v.node(fe).dummy&&tr.forEach(v.predecessors(fe),function(be){var We=v.node(be);We.dummy&&(We.order<zt||We.order>Kt)&&Bc(K,be,fe)})})}return tr.reduce(N,function(ht,xt){var Ot,zt=-1,Kt=0;return tr.forEach(xt,function(fe,Te){if(v.node(fe).dummy==="border"){var be=v.predecessors(fe);be.length&&(Ot=v.node(be[0]).order,st(xt,Kt,Te,zt,Ot),Kt=Te,zt=Ot)}st(xt,Kt,xt.length,Ot,ht.length)}),xt}),K}function Bc(v,N,K){if(N>K){var st=N;N=K,K=st}var ht=v[N];ht||(v[N]=ht={}),ht[K]=!0}function $l(v,N,K){if(N>K){var st=N;N=K,K=st}return tr.has(v[N],K)}function vd(v,N,K,st){var ht={},xt={},Ot={};return tr.forEach(N,function(zt){tr.forEach(zt,function(Kt,fe){ht[Kt]=Kt,xt[Kt]=Kt,Ot[Kt]=fe})}),tr.forEach(N,function(zt){var Kt=-1;tr.forEach(zt,function(fe){var Te=st(fe);if(Te.length)for(var be=((Te=tr.sortBy(Te,function(mr){return Ot[mr]})).length-1)/2,We=Math.floor(be),cr=Math.ceil(be);We<=cr;++We){var Vr=Te[We];xt[fe]===fe&&Kt<Ot[Vr]&&!$l(K,fe,Vr)&&(xt[Vr]=fe,xt[fe]=ht[fe]=ht[Vr],Kt=Ot[Vr])}})}),{root:ht,align:xt}}function ql(v,N,K,st,ht){var xt={},Ot=function(fe,Te,be,We){var cr=new Zl,Vr=fe.graph(),mr=function(wr,Er,Sn){return function(Yn,Nn,la){var ua,wa=Yn.node(Nn),Ba=Yn.node(la),Ia=0;if(Ia+=wa.width/2,tr.has(wa,"labelpos"))switch(wa.labelpos.toLowerCase()){case"l":ua=-wa.width/2;break;case"r":ua=wa.width/2}if(ua&&(Ia+=Sn?ua:-ua),ua=0,Ia+=(wa.dummy?Er:wr)/2,Ia+=(Ba.dummy?Er:wr)/2,Ia+=Ba.width/2,tr.has(Ba,"labelpos"))switch(Ba.labelpos.toLowerCase()){case"l":ua=Ba.width/2;break;case"r":ua=-Ba.width/2}return ua&&(Ia+=Sn?ua:-ua),ua=0,Ia}}(Vr.nodesep,Vr.edgesep,We);return tr.forEach(Te,function(wr){var Er;tr.forEach(wr,function(Sn){var Yn=be[Sn];if(cr.setNode(Yn),Er){var Nn=be[Er],la=cr.edge(Nn,Yn);cr.setEdge(Nn,Yn,Math.max(mr(fe,Sn,Er),la||0))}Er=Sn})}),cr}(v,N,K,ht),zt=ht?"borderLeft":"borderRight";function Kt(fe,Te){for(var be=Ot.nodes(),We=be.pop(),cr={};We;)cr[We]?fe(We):(cr[We]=!0,be.push(We),be=be.concat(Te(We))),We=be.pop()}return Kt(function(fe){xt[fe]=Ot.inEdges(fe).reduce(function(Te,be){return Math.max(Te,xt[be.v]+Ot.edge(be))},0)},Ot.predecessors.bind(Ot)),Kt(function(fe){var Te=Ot.outEdges(fe).reduce(function(We,cr){return Math.min(We,xt[cr.w]-Ot.edge(cr))},Number.POSITIVE_INFINITY),be=v.node(fe);Te!==Number.POSITIVE_INFINITY&&be.borderType!==zt&&(xt[fe]=Math.max(xt[fe],Te))},Ot.successors.bind(Ot)),tr.forEach(st,function(fe){xt[fe]=xt[K[fe]]}),xt}function af(v,N){return tr.minBy(tr.values(N),function(K){var st=Number.NEGATIVE_INFINITY,ht=Number.POSITIVE_INFINITY;return tr.forIn(K,function(xt,Ot){var zt=function(Kt,fe){return Kt.node(fe).width}(v,Ot)/2;st=Math.max(xt+zt,st),ht=Math.min(xt-zt,ht)}),st-ht})}function bl(v,N){var K=tr.values(N),st=tr.min(K),ht=tr.max(K);tr.forEach(["u","d"],function(xt){tr.forEach(["l","r"],function(Ot){var zt,Kt=xt+Ot,fe=v[Kt];if(fe!==N){var Te=tr.values(fe);(zt=Ot==="l"?st-tr.min(Te):ht-tr.max(Te))&&(v[Kt]=tr.mapValues(fe,function(be){return be+zt}))}})})}function Ql(v,N){return tr.mapValues(v.ul,function(K,st){if(N)return v[N.toLowerCase()][st];var ht=tr.sortBy(tr.map(v,st));return(ht[1]+ht[2])/2})}var Jl=tc,pd=function(v){(function(N){var K=Zo.buildLayerMatrix(N),st=N.graph().ranksep,ht=0;tr.forEach(K,function(xt){var Ot=tr.max(tr.map(xt,function(zt){return N.node(zt).height}));tr.forEach(xt,function(zt){N.node(zt).y=ht+Ot/2}),ht+=Ot+st})})(v=Zo.asNonCompoundGraph(v)),tr.forEach(Jl(v),function(N,K){v.node(K).x=N})},El=Zo.normalizeRanks,td=Zo.removeEmptyRanks,gs=Zo,ed=ka.Graph,of=function(v,N){var K=N&&N.debugTiming?gs.time:gs.notime;K("layout",function(){var st=K("  buildLayoutGraph",function(){return function(ht){var xt=new ed({multigraph:!0,compound:!0}),Ot=fs(ht.graph());return xt.setGraph(tr.merge({},wl,ms(Ot,Pu),tr.pick(Ot,Sl))),tr.forEach(ht.nodes(),function(zt){var Kt=fs(ht.node(zt));xt.setNode(zt,tr.defaults(ms(Kt,ec),Ml)),xt.setParent(zt,ht.parent(zt))}),tr.forEach(ht.edges(),function(zt){var Kt=fs(ht.edge(zt));xt.setEdge(zt,tr.merge({},bu,ms(Kt,Bo),tr.pick(Kt,Wo)))}),xt}(v)});K("  runLayout",function(){(function(ht,xt){xt("    makeSpaceForEdgeLabels",function(){(function(Ot){var zt=Ot.graph();zt.ranksep/=2,tr.forEach(Ot.edges(),function(Kt){var fe=Ot.edge(Kt);fe.minlen*=2,fe.labelpos.toLowerCase()!=="c"&&(zt.rankdir==="TB"||zt.rankdir==="BT"?fe.width+=fe.labeloffset:fe.height+=fe.labeloffset)})})(ht)}),xt("    removeSelfEdges",function(){(function(Ot){tr.forEach(Ot.edges(),function(zt){if(zt.v===zt.w){var Kt=Ot.node(zt.v);Kt.selfEdges||(Kt.selfEdges=[]),Kt.selfEdges.push({e:zt,label:Ot.edge(zt)}),Ot.removeEdge(zt)}})})(ht)}),xt("    acyclic",function(){cl.run(ht)}),xt("    nestingGraph.run",function(){Yl.run(ht)}),xt("    rank",function(){yl(gs.asNonCompoundGraph(ht))}),xt("    injectEdgeLabelProxies",function(){(function(Ot){tr.forEach(Ot.edges(),function(zt){var Kt=Ot.edge(zt);if(Kt.width&&Kt.height){var fe=Ot.node(zt.v),Te={rank:(Ot.node(zt.w).rank-fe.rank)/2+fe.rank,e:zt};gs.addDummyNode(Ot,"edge-proxy",Te,"_ep")}})})(ht)}),xt("    removeEmptyRanks",function(){td(ht)}),xt("    nestingGraph.cleanup",function(){Yl.cleanup(ht)}),xt("    normalizeRanks",function(){El(ht)}),xt("    assignRankMinMax",function(){(function(Ot){var zt=0;tr.forEach(Ot.nodes(),function(Kt){var fe=Ot.node(Kt);fe.borderTop&&(fe.minRank=Ot.node(fe.borderTop).rank,fe.maxRank=Ot.node(fe.borderBottom).rank,zt=tr.max(zt,fe.maxRank))}),Ot.graph().maxRank=zt})(ht)}),xt("    removeEdgeLabelProxies",function(){(function(Ot){tr.forEach(Ot.nodes(),function(zt){var Kt=Ot.node(zt);Kt.dummy==="edge-proxy"&&(Ot.edge(Kt.e).labelRank=Kt.rank,Ot.removeNode(zt))})})(ht)}),xt("    normalize.run",function(){Vf.run(ht)}),xt("    parentDummyChains",function(){dd(ht)}),xt("    addBorderSegments",function(){hd(ht)}),xt("    order",function(){kc(ht)}),xt("    insertSelfEdges",function(){(function(Ot){var zt=gs.buildLayerMatrix(Ot);tr.forEach(zt,function(Kt){var fe=0;tr.forEach(Kt,function(Te,be){var We=Ot.node(Te);We.order=be+fe,tr.forEach(We.selfEdges,function(cr){gs.addDummyNode(Ot,"selfedge",{width:cr.label.width,height:cr.label.height,rank:We.rank,order:be+ ++fe,e:cr.e,label:cr.label},"_se")}),delete We.selfEdges})})})(ht)}),xt("    adjustCoordinateSystem",function(){Vl.adjust(ht)}),xt("    position",function(){pd(ht)}),xt("    positionSelfEdges",function(){(function(Ot){tr.forEach(Ot.nodes(),function(zt){var Kt=Ot.node(zt);if(Kt.dummy==="selfedge"){var fe=Ot.node(Kt.e.v),Te=fe.x+fe.width/2,be=fe.y,We=Kt.x-Te,cr=fe.height/2;Ot.setEdge(Kt.e,Kt.label),Ot.removeNode(zt),Kt.label.points=[{x:Te+2*We/3,y:be-cr},{x:Te+5*We/6,y:be-cr},{x:Te+We,y:be},{x:Te+5*We/6,y:be+cr},{x:Te+2*We/3,y:be+cr}],Kt.label.x=Kt.x,Kt.label.y=Kt.y}})})(ht)}),xt("    removeBorderNodes",function(){(function(Ot){tr.forEach(Ot.nodes(),function(zt){if(Ot.children(zt).length){var Kt=Ot.node(zt),fe=Ot.node(Kt.borderTop),Te=Ot.node(Kt.borderBottom),be=Ot.node(tr.last(Kt.borderLeft)),We=Ot.node(tr.last(Kt.borderRight));Kt.width=Math.abs(We.x-be.x),Kt.height=Math.abs(Te.y-fe.y),Kt.x=be.x+Kt.width/2,Kt.y=fe.y+Kt.height/2}}),tr.forEach(Ot.nodes(),function(zt){Ot.node(zt).dummy==="border"&&Ot.removeNode(zt)})})(ht)}),xt("    normalize.undo",function(){Vf.undo(ht)}),xt("    fixupEdgeLabelCoords",function(){(function(Ot){tr.forEach(Ot.edges(),function(zt){var Kt=Ot.edge(zt);if(tr.has(Kt,"x"))switch(Kt.labelpos!=="l"&&Kt.labelpos!=="r"||(Kt.width-=Kt.labeloffset),Kt.labelpos){case"l":Kt.x-=Kt.width/2+Kt.labeloffset;break;case"r":Kt.x+=Kt.width/2+Kt.labeloffset}})})(ht)}),xt("    undoCoordinateSystem",function(){Vl.undo(ht)}),xt("    translateGraph",function(){(function(Ot){var zt=Number.POSITIVE_INFINITY,Kt=0,fe=Number.POSITIVE_INFINITY,Te=0,be=Ot.graph(),We=be.marginx||0,cr=be.marginy||0;function Vr(mr){var wr=mr.x,Er=mr.y,Sn=mr.width,Yn=mr.height;zt=Math.min(zt,wr-Sn/2),Kt=Math.max(Kt,wr+Sn/2),fe=Math.min(fe,Er-Yn/2),Te=Math.max(Te,Er+Yn/2)}tr.forEach(Ot.nodes(),function(mr){Vr(Ot.node(mr))}),tr.forEach(Ot.edges(),function(mr){var wr=Ot.edge(mr);tr.has(wr,"x")&&Vr(wr)}),zt-=We,fe-=cr,tr.forEach(Ot.nodes(),function(mr){var wr=Ot.node(mr);wr.x-=zt,wr.y-=fe}),tr.forEach(Ot.edges(),function(mr){var wr=Ot.edge(mr);tr.forEach(wr.points,function(Er){Er.x-=zt,Er.y-=fe}),tr.has(wr,"x")&&(wr.x-=zt),tr.has(wr,"y")&&(wr.y-=fe)}),be.width=Kt-zt+We,be.height=Te-fe+cr})(ht)}),xt("    assignNodeIntersects",function(){(function(Ot){tr.forEach(Ot.edges(),function(zt){var Kt,fe,Te=Ot.edge(zt),be=Ot.node(zt.v),We=Ot.node(zt.w);Te.points?(Kt=Te.points[0],fe=Te.points[Te.points.length-1]):(Te.points=[],Kt=We,fe=be),Te.points.unshift(gs.intersectRect(be,Kt)),Te.points.push(gs.intersectRect(We,fe))})})(ht)}),xt("    reversePoints",function(){(function(Ot){tr.forEach(Ot.edges(),function(zt){var Kt=Ot.edge(zt);Kt.reversed&&Kt.points.reverse()})})(ht)}),xt("    acyclic.undo",function(){cl.undo(ht)})})(st,K)}),K("  updateInputGraph",function(){(function(ht,xt){tr.forEach(ht.nodes(),function(Ot){var zt=ht.node(Ot),Kt=xt.node(Ot);zt&&(zt.x=Kt.x,zt.y=Kt.y,xt.children(Ot).length&&(zt.width=Kt.width,zt.height=Kt.height))}),tr.forEach(ht.edges(),function(Ot){var zt=ht.edge(Ot),Kt=xt.edge(Ot);zt.points=Kt.points,tr.has(Kt,"x")&&(zt.x=Kt.x,zt.y=Kt.y)}),ht.graph().width=xt.graph().width,ht.graph().height=xt.graph().height})(v,st)})})},Pu=["nodesep","edgesep","ranksep","marginx","marginy"],wl={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Sl=["acyclicer","ranker","rankdir","align"],ec=["width","height"],Ml={width:0,height:0},Bo=["minlen","weight","width","height","labeloffset"],bu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Wo=["labelpos"];function ms(v,N){return tr.mapValues(tr.pick(v,N),Number)}function fs(v){var N={};return tr.forEach(v,function(K,st){N[st.toLowerCase()]=K}),N}var Fc=ka.Graph,sf={graphlib:ka,layout:of,debug:{debugOrdering:function(v){var N=Zo.buildLayerMatrix(v),K=new Fc({compound:!0,multigraph:!0}).setGraph({});return tr.forEach(v.nodes(),function(st){K.setNode(st,{label:st}),K.setParent(st,"layer"+v.node(st).rank)}),tr.forEach(v.edges(),function(st){K.setEdge(st.v,st.w,{},st.name)}),tr.forEach(N,function(st,ht){var xt="layer"+ht;K.setNode(xt,{rank:"same"}),tr.reduce(st,function(Ot,zt){return K.setEdge(Ot,zt,{style:"invis"}),zt})}),K}},util:{time:Zo.time,notime:Zo.notime},version:"0.8.5"},Gd=sf.graphlib,zc=sf.layout;class cs{constructor(N){this.cardinality=1,this.include=p.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=P.NODE,this.name=N.name,this.attr=N.attr||{},this.inputs=N.inputs,this.path=N.path||[],this.width=N.width,this.height=N.height}}class gd{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function rd(v){const N=new gd;return v.nodes.map(K=>new cs(K)).forEach(K=>{N.nodes[K.name]=K,K.inputs.forEach(st=>{(function(ht,xt,Ot){Ot.name!==xt.name&&ht.edges.push(Object.assign(Object.assign({},Ot.attr),{v:Ot.name,w:xt.name}))})(N,K,st)})}),N}class md{constructor(N,K={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=p.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=P.META,this.path=[],this.name=N,this.metaGraph=rc(N,m.META,K)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(N=>this.metaGraph.node(N))}leaves(){let N,K=[],st=[this];for(;st.length;){let ht=st.shift();ht.isGroupNode?(N=ht.metaGraph,N.nodes().forEach(xt=>st.push(N.node(xt)))):K.push(ht.name)}return K}}class Nu{constructor(N,K){this.v=N,this.w=K,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(N,K){this.baseEdgeList.push(N)}}function _l(v,N={}){return new md(v,N)}function Gc(v,N){return new Nu(v,N)}function rc(v,N,K){const st=K||{},ht=new Gd.Graph(st);return ht.setGraph({name:v,rankdir:st.rankdir,type:N,align:st.align}),ht}class Uc{constructor(N={}){this.graphOptions=N,this.index={},this.graphOptions.compound=!0,this.root=_l(T,this.graphOptions),this.index[T]=this.root}getNodeMap(){return this.index}node(N){return this.index[N]}setNode(N,K){this.index[N]=K}getBridgeGraph(N){const K=this.index[N];if(!K)throw Error("Could not find node in hierarchy: "+N);if(!("metaGraph"in K))return null;const st=K;if(st.bridgeGraph)return st.bridgeGraph;const ht=rc(L,m.BRIDGE,this.graphOptions);if(st.bridgeGraph=ht,!K.parentNode||!("metaGraph"in K.parentNode))return ht;const xt=K.parentNode;return[xt.metaGraph,this.getBridgeGraph(xt.name)].forEach(Ot=>{Ot.edges().filter(zt=>zt.v===N||zt.w===N).forEach(zt=>{const Kt=zt.w===N;Ot.edge(zt).baseEdgeList.forEach(fe=>{const[Te,be]=Kt?[fe.w,zt.v]:[fe.v,zt.w],We=this.getChildName(N,Te),cr={v:Kt?be:We,w:Kt?We:be};let Vr=ht.edge(cr);Vr||(Vr=Gc(cr.v,cr.w),Vr.inbound=Kt,ht.setEdge(cr.v,cr.w,Vr)),Vr.addBaseEdge(fe,this)})})}),ht}getChildName(N,K){let st=this.index[K];for(;st;){if(st.parentNode&&st.parentNode.name===N)return st.name;st=st.parentNode}throw Error("Could not find immediate child for descendant: "+K)}getPredecessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!0)}getSuccessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!1)}getOneWayEdges(N,K){const st=[];if(!N.parentNode||!N.parentNode.isGroupNode)return st;const ht=N.parentNode,xt=ht.metaGraph,Ot=this.getBridgeGraph(ht.name);return Eu(xt,N,K,st),Eu(Ot,N,K,st),st}}function nd(v,N){const{rankDirection:K,align:st}=N,ht=new Uc({rankdir:K,align:st});return function(xt,Ot){Object.keys(Ot.nodes).forEach(zt=>{const Kt=Ot.nodes[zt],fe=Kt.path;let Te=xt.root;Te.depth=Math.max(fe.length,Te.depth);for(let be=0;be<fe.length&&(Te.depth=Math.max(Te.depth,fe.length-be),Te.cardinality+=Kt.cardinality,be!==fe.length-1);be++){const We=fe[be];let cr=xt.node(We);cr||(cr=_l(We,xt.graphOptions),cr.path=Kt.path.slice(0,be+1),cr.parentNode=Te,xt.setNode(We,cr),Te.metaGraph.setNode(We,cr)),Te=cr}xt.setNode(Kt.name,Kt),Kt.parentNode=Te,Te.metaGraph.setNode(Kt.name,Kt)})}(ht,v),function(xt,Ot){const zt=xt.getNodeMap();let Kt=[],fe=[];const Te=(be,We)=>{let cr=0;for(;be;)We[cr++]=be.name,be=be.parentNode;return cr-1};Ot.edges.forEach(be=>{Kt=[],fe=[];let We=Te(Ot.nodes[be.v],Kt),cr=Te(Ot.nodes[be.w],fe);for(;Kt[We]===fe[cr];)if(We--,cr--,We<0||cr<0)throw Error("No difference found between ancestor paths.");const Vr=zt[Kt[We+1]],mr=Kt[We],wr=fe[cr];let Er=Vr.metaGraph.edge(mr,wr);Er||(Er=Gc(mr,wr),Vr.metaGraph.setEdge(mr,wr,Er)),Er.addBaseEdge(be,xt)})}(ht,v),ht}function Eu(v,N,K,st){(K?v.inEdges(N.name):v.outEdges(N.name)).forEach(ht=>{const xt=v.edge(ht);st.push(xt)})}class Cl{constructor(N){this.hierarchy=N,this.index={},this.hasSubHierarchy={},this.root=new Ae(this.hierarchy.root,this.hierarchy.graphOptions),this.index[N.root.name]=this.root,this.buildSubHierarchy(N.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(N){if(N in this.hasSubHierarchy)return;this.hasSubHierarchy[N]=!0;const K=this.index[N];if(K.node.type!==P.META)return;const st=K,ht=st.node.metaGraph,xt=st.coreGraph;ht.nodes().forEach(Te=>{const be=this.getOrCreateRenderNodeByName(Te);xt.setNode(Te,be)}),ht.edges().forEach(Te=>{const be=ht.edge(Te),We=new Rt(be);xt.setEdge(Te.v,Te.w,We)});const Ot=st.node.parentNode;if(!Ot)return;const zt=this.getRenderNodeByName(Ot.name),Kt=(Te,...be)=>be.concat([Te?"IN":"OUT"]).join("~~"),fe=this.hierarchy.getBridgeGraph(N);fe.edges().forEach(Te=>{const be=fe.edge(Te),We=!!ht.node(Te.w),[cr,Vr]=We?[Te.w,Te.v]:[Te.v,Te.w],mr=la=>{const ua=We?{v:la,w:N}:{v:N,w:la};return zt.coreGraph.edge(ua)};let wr=mr(Vr);wr||(wr=mr(Kt(We,Vr,Ot.name)));const Er=Kt(We,N),Sn=Kt(We,Vr,N);let Yn=xt.node(Sn);if(!Yn){let la=xt.node(Er);if(!la){const wa={name:Er,type:P.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:p.UNSPECIFIED,inbound:We,attr:{}};la=new Mf(wa),this.index[Er]=la,xt.setNode(Er,la)}const ua={name:Sn,type:P.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:p.UNSPECIFIED,inbound:We,attr:{}};Yn=new Mf(ua),this.index[Sn]=Yn,xt.setNode(Sn,Yn),xt.setParent(Sn,Er),la.node.cardinality++}const Nn=new Rt(be);Nn.adjoiningMetaEdge=wr,We?xt.setEdge(Sn,cr,Nn):xt.setEdge(cr,Sn,Nn)})}getOrCreateRenderNodeByName(N){if(!N)return null;if(N in this.index)return this.index[N];const K=this.getNodeByName(N);return K?(this.index[N]=K.isGroupNode?new Ae(K,this.hierarchy.graphOptions):new Mf(K),this.index[N]):null}getRenderNodeByName(N){return this.index[N]}getNodeByName(N){return this.hierarchy.node(N)}}class Mf{constructor(N){this.node=N,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=N.width||0,this.height=N.height||0,this.displayName=N.name,this.attr=N.attr}}class Rt{constructor(N){this.metaEdge=N,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Ae extends Mf{constructor(N,K){super(N);const st=N.metaGraph.graph();K.compound=!0,this.coreGraph=rc(st.name,m.CORE,K)}}function je(v,N){v.node.isGroupNode&&function(K,st){const ht=k(st);K.coreGraph.nodes().map(xt=>K.coreGraph.node(xt)).forEach(xt=>{var Ot,zt,Kt,fe,Te,be;const{height:We,width:cr}=xt;switch(xt.node.type){case P.NODE:Object.assign(xt,ht.nodeSize.node),xt.height=We||ht.nodeSize.node.height,xt.width=cr||ht.nodeSize.node.width;break;case P.BRIDGE:Object.assign(xt,ht.nodeSize.bridge);break;case P.META:xt.expanded?je(xt,st):(Object.assign(xt,ht.nodeSize.meta),xt.height=ht.nodeSize.meta.height,xt.width=ht.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+xt.node.type)}if(!xt.expanded){const Vr=xt.attr;(function(mr,wr=!1){if(mr.coreBox.width=mr.width,mr.coreBox.height=mr.height,!wr){const Er=`${mr.displayName}`.length,Sn=3;mr.width=Math.max(mr.coreBox.width,Er*Sn)}})(xt,st&&(xt.node.type===0&&!!(!((zt=(Ot=st==null?void 0:st.nodeSize)===null||Ot===void 0?void 0:Ot.meta)===null||zt===void 0)&&zt.width)||xt.node.type===1&&(!!(!((fe=(Kt=st==null?void 0:st.nodeSize)===null||Kt===void 0?void 0:Kt.node)===null||fe===void 0)&&fe.width)||!!Vr.width)||xt.node.type===2&&!!(!((be=(Te=st==null?void 0:st.nodeSize)===null||Te===void 0?void 0:Te.bridge)===null||be===void 0)&&be.width)))}})}(v,N),v.node.type===P.META&&function(K,st){const ht=k(st),xt=ht.subScene.meta;Object.assign(K,xt);const{nodeSep:Ot,rankSep:zt,edgeSep:Kt,align:fe}=ht.graph.meta,Te={nodesep:Ot,ranksep:zt,edgesep:Kt,align:fe};Object.assign(K.coreBox,function(cr,Vr){const{ranksep:mr,nodesep:wr,edgesep:Er,align:Sn}=Vr;Object.assign(cr.graph(),{ranksep:mr,nodesep:wr,edgesep:Er,align:Sn});const Yn=[];if(cr.nodes().forEach(Ba=>{cr.node(Ba).node.type!==P.BRIDGE&&Yn.push(Ba)}),!Yn.length)return{width:0,height:0};zc(cr);let Nn=1/0,la=1/0,ua=-1/0,wa=-1/0;return Yn.forEach(Ba=>{const Ia=cr.node(Ba),uo=.5*Ia.width,Ua=Ia.x-uo,Do=Ia.x+uo;Nn=Ua<Nn?Ua:Nn,ua=Do>ua?Do:ua;const Hi=.5*Ia.height,li=Ia.y-Hi,Fo=Ia.y+Hi;la=li<la?li:la,wa=Fo>wa?Fo:wa}),cr.edges().forEach(Ba=>{const Ia=cr.edge(Ba),uo=cr.node(Ia.metaEdge.v),Ua=cr.node(Ia.metaEdge.w);if(Ia.points.length===3&&function(li){let Fo=zr(li[0],li[1]);for(let fo=1;fo<li.length-1;fo++){const as=zr(li[fo],li[fo+1]);if(Math.abs(as-Fo)>1)return!1;Fo=as}return!0}(Ia.points)){if(uo!=null){const li=uo.expanded?uo.x:rn(uo);Ia.points[0].x=li}if(Ua!=null){const li=Ua.expanded?Ua.x:rn(Ua);Ia.points[2].x=li}Ia.points=[Ia.points[0],Ia.points[1]]}const Do=Ia.points[Ia.points.length-2];Ua!=null&&(Ia.points[Ia.points.length-1]=Fr(Do,Ua));const Hi=Ia.points[1];uo!=null&&(Ia.points[0]=Fr(Hi,uo)),Ia.points.forEach(li=>{Nn=li.x<Nn?li.x:Nn,ua=li.x>ua?li.x:ua,la=li.y<la?li.y:la,wa=li.y>wa?li.y:wa})}),cr.nodes().forEach(Ba=>{const Ia=cr.node(Ba);Ia.x-=Nn,Ia.y-=la}),cr.edges().forEach(Ba=>{cr.edge(Ba).points.forEach(Ia=>{Ia.x-=Nn,Ia.y-=la})}),{width:ua-Nn,height:wa-la}}(K.coreGraph,Te));let be=0;K.coreGraph.nodeCount()>0&&be++;const We=be<=1?0:be;K.coreBox.width+=We+We,K.coreBox.height=xt.labelHeight+K.coreBox.height,K.width=K.coreBox.width+xt.paddingLeft+xt.paddingRight,K.height=K.paddingTop+K.coreBox.height+K.paddingBottom}(v,N)}function zr(v,N){const K=N.x-v.x,st=N.y-v.y;return 180*Math.atan(st/K)/Math.PI}function rn(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Fr(v,N){const K=N.expanded?N.x:rn(N),st=N.y,ht=v.x-K,xt=v.y-st;let Ot,zt,Kt=N.expanded?N.width:N.coreBox.width,fe=N.expanded?N.height:N.coreBox.height;return Math.abs(xt)*Kt/2>Math.abs(ht)*fe/2?(xt<0&&(fe=-fe),Ot=xt===0?0:fe/2*ht/xt,zt=fe/2):(ht<0&&(Kt=-Kt),Ot=Kt/2,zt=ht===0?0:Kt/2*xt/ht),{x:K+Ot,y:st+zt}}function jr(v,N,K){var st,ht,xt,Ot;const zt=v.nodes.filter((be,We,cr)=>cr.findIndex(Vr=>Vr.id===be.id)!==We).map(be=>be.id);if(zt.length)throw new Error(`Duplicated ids found: ${zt.join(", ")}`);const Kt=function(be){const We={nodes:[]},cr=be.compound,Vr=Object.keys(cr||{}),mr=new Map,wr=(Sn,Yn=[])=>{if(mr.has(Sn))return mr.get(Sn);for(let Nn=0;Nn<Vr.length;Nn++){let la=Vr[Nn];if(cr&&cr[la].indexOf(Sn)!==-1)return Yn.unshift(la),wr(la,Yn)}return Yn.length===0&&mr.set(Sn,Yn),Yn},Er=Sn=>be.edges.filter(Yn=>Yn.w===Sn).map(Yn=>({name:Yn.v}));return be.nodes.forEach(Sn=>{const Yn=Sn.id,Nn=[...wr(Yn),Yn];let la=Er(Yn);We.nodes.push({name:Yn,path:Nn,inputs:la,width:Sn.width,height:Sn.height,attr:Object.assign({},Sn)})}),We}(v),fe=function(be,We){const cr=(mr,wr)=>{for(let Er of wr.values())if(Er.includes(mr))return!0;return!1},Vr=(mr,wr=[])=>{if(Object.keys(mr).length===0)return[...new Set(wr)];const Er=new Map(Object.keys(mr).map(Yn=>[Yn,mr[Yn]])),Sn={};for(let[Yn,Nn]of Er)cr(Yn,Er)?Sn[Yn]=Nn:wr=wr.concat(Yn,Nn);return Vr(Sn,wr)};return Vr(be).filter(mr=>We.includes(mr))}(v.compound||{},(N==null?void 0:N.expanded)||[]),Te=function(be,We){return function(cr){return new Cl(cr)}(nd(rd(be),We))}(Kt,{rankDirection:((ht=(st=K==null?void 0:K.graph)===null||st===void 0?void 0:st.meta)===null||ht===void 0?void 0:ht.rankDir)||(N==null?void 0:N.rankDirection)||x.graph.meta.rankDir,align:((Ot=(xt=K==null?void 0:K.graph)===null||xt===void 0?void 0:xt.meta)===null||Ot===void 0?void 0:Ot.align)||x.graph.meta.align});return function(be,We){We.forEach(cr=>{const Vr=be.getRenderInfoNodes().find(Er=>Er.displayName===cr);let mr=Vr&&Vr.node&&Vr.node.name||"";const wr=be.getRenderNodeByName(mr);if(!wr)throw new Error(`No nodes found: ${mr}`);wr.expanded=!0,be.buildSubHierarchy(mr)})}(Te,fe),je(Te.root,K),Cn(Te.root)}function bn(v,N=!1){const K=JSON.parse(JSON.stringify(v)),st={nodes:[K],edges:[...K.edges]};return K.nodes.forEach(function ht(xt){(xt.type===0||xt.type===1)&&st.nodes.push(xt),xt.type===0&&(st.edges=st.edges.concat(xt.edges)),Array.isArray(xt.nodes)&&xt.nodes.forEach(ht)}),N&&st.nodes.forEach(ht=>{const xt=st.nodes.find(Ot=>Ot.id===ht.parentNodeName);if(xt){const Ot=xt.x-xt.width/2+xt.paddingLeft,zt=xt.y-xt.height/2+xt.labelHeight+xt.paddingTop;xt.id!==T&&(ht.x+=Ot,ht.y+=zt),ht.type===0&&ht.edges.forEach(Kt=>{Kt.points.forEach(fe=>{fe.x+=ht.x-ht.width/2+ht.paddingLeft,fe.y+=ht.y-ht.height/2+ht.labelHeight+ht.paddingTop})})}}),st}function _n(v,N,K,st){var ht,xt;let Ot=[];const zt=((ht=K.find(be=>be.id===v))===null||ht===void 0?void 0:ht.path)||[],Kt=((xt=K.find(be=>be.id===N))===null||xt===void 0?void 0:xt.path)||[],fe=[T,...zt].slice(0,zt.length).reverse(),Te=[T,...Kt].slice(0,Kt.length);return fe.forEach(be=>{const We=K.find(cr=>cr.id===be);Ot=Ot.concat(We.edges.filter(cr=>cr.baseEdgeList.some(Vr=>Vr.v===((st==null?void 0:st.v)||v)&&Vr.w===((st==null?void 0:st.w)||N))))}),Te.filter(be=>!fe.includes(be)).forEach(be=>{const We=K.find(cr=>cr.id===be);Ot=Ot.concat(We.edges.filter(cr=>cr.baseEdgeList.some(Vr=>Vr.v===((st==null?void 0:st.v)||v)&&Vr.w===((st==null?void 0:st.w)||N))))}),Ot}function Cn(v){const N=v.coreGraph.nodes().map(st=>v.coreGraph.node(st));return Object.assign(Object.assign({},wn(v)),{expanded:v.expanded,nodes:v.expanded?(K=N,K.map(st=>st.node.type===P.META?Cn(st):wn(st))):[],edges:v.expanded?Bn(v):[]});var K}function wn(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function Bn(v){return v.coreGraph.edges().map(N=>({renderInfoEdge:v.coreGraph.edge(N),edge:N})).filter(({renderInfoEdge:N})=>N.metaEdge).map(({edge:N,renderInfoEdge:K})=>{const st=function(ht,xt){const Ot=xt.points.map(zt=>Object.assign({},zt));if(xt.adjoiningMetaEdge){const zt=xt.adjoiningMetaEdge.points,Kt=xt.metaEdge.inbound,fe=Kt?zt[zt.length-1]:zt[0],Te=Ot[Kt?0:Ot.length-1],be=ht.x-ht.width/2,We=ht.y-ht.height/2,cr=fe.x-be,Vr=fe.y-We,mr=-ht.paddingLeft,wr=-(ht.paddingTop+ht.labelHeight);Te.x=cr+mr,Te.y=Vr+wr}return Ot}(v,K);return{adjoiningEdge:K.adjoiningMetaEdge?{w:K.adjoiningMetaEdge.metaEdge.w,v:K.adjoiningMetaEdge.metaEdge.v}:null,inbound:K.metaEdge.inbound,w:N.w,v:N.v,points:st,weight:K.weight,baseEdgeList:K.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},533852:function(Ve,z,C){(function(x,k){Ve.exports=k(C(727484))})(this,function(x){"use strict";function k(L){return L&&typeof L=="object"&&"default"in L?L:{default:L}}var w=k(x),T={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(L,P){return P==="W"?L+"\u5468":L+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(L,P){var p=100*L+P;return p<600?"\u51CC\u6668":p<900?"\u65E9\u4E0A":p<1100?"\u4E0A\u5348":p<1300?"\u4E2D\u5348":p<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return w.default.locale(T,null,!0),T})},414144:function(Ve,z){var C,x,k;(function(w,T){if(!0)x=[z,Ve],C=T,k=typeof C=="function"?C.apply(z,x):C,k!==void 0&&(Ve.exports=k);else var L})(this,function(w,T){"use strict";var L={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function P(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(y){try{delete window[y]}catch(g){window[y]=void 0}}function m(y){var g=document.getElementById(y);g&&document.getElementsByTagName("head")[0].removeChild(g)}function S(y){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],A=y,E=g.timeout||L.timeout,D=g.jsonpCallback||L.jsonpCallback,F=void 0;return new Promise(function(Y,b){var h=g.jsonpCallbackFunction||P(),$=D+"_"+h;window[h]=function(W){Y({ok:!0,json:function(){return Promise.resolve(W)}}),F&&clearTimeout(F),m($),p(h)},A+=A.indexOf("?")===-1?"?":"&";var U=document.createElement("script");U.setAttribute("src",""+A+D+"="+h),g.charset&&U.setAttribute("charset",g.charset),g.nonce&&U.setAttribute("nonce",g.nonce),g.referrerPolicy&&U.setAttribute("referrerPolicy",g.referrerPolicy),U.id=$,document.getElementsByTagName("head")[0].appendChild(U),F=setTimeout(function(){b(new Error("JSONP request to "+y+" timed out")),p(h),m($),window[h]=function(){p(h)}},E),U.onerror=function(){b(new Error("JSONP request to "+y+" failed")),p(h),m($),F&&clearTimeout(F)}})}T.exports=S})},73633:function(Ve,z,C){"use strict";C.r(z),C.d(z,{ARRAY_TYPE:function(){return k},EPSILON:function(){return x},RANDOM:function(){return w},equals:function(){return p},setMatrixArrayType:function(){return T},toRadian:function(){return P}});var x=1e-6,k=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function T(m){k=m}var L=Math.PI/180;function P(m){return m*L}function p(m,S){return Math.abs(m-S)<=x*Math.max(1,Math.abs(m),Math.abs(S))}Math.hypot||(Math.hypot=function(){for(var m=0,S=arguments.length;S--;)m+=arguments[S]*arguments[S];return Math.sqrt(m)})},858204:function(Ve,z,C){"use strict";C.r(z),C.d(z,{glMatrix:function(){return p},mat2:function(){return x},mat2d:function(){return k},mat3:function(){return Ar},mat4:function(){return w},quat:function(){return L},quat2:function(){return P},vec2:function(){return ss},vec3:function(){return Rr},vec4:function(){return T}});var x={};C.r(x),C.d(x,{LDU:function(){return tt},add:function(){return rt},adjoint:function(){return Y},clone:function(){return S},copy:function(){return y},create:function(){return m},determinant:function(){return b},equals:function(){return bt},exactEquals:function(){return it},frob:function(){return q},fromRotation:function(){return W},fromScaling:function(){return V},fromValues:function(){return A},identity:function(){return g},invert:function(){return F},mul:function(){return Ct},multiply:function(){return h},multiplyScalar:function(){return gt},multiplyScalarAndAdd:function(){return Xt},rotate:function(){return $},scale:function(){return U},set:function(){return E},str:function(){return H},sub:function(){return At},subtract:function(){return ft},transpose:function(){return D}});var k={};C.r(k),C.d(k,{add:function(){return ae},clone:function(){return J},copy:function(){return yt},create:function(){return Z},determinant:function(){return Pt},equals:function(){return Tt},exactEquals:function(){return we},frob:function(){return Wt},fromRotation:function(){return ie},fromScaling:function(){return Lt},fromTranslation:function(){return ne},fromValues:function(){return nt},identity:function(){return _t},invert:function(){return It},mul:function(){return Pe},multiply:function(){return St},multiplyScalar:function(){return xe},multiplyScalarAndAdd:function(){return Jt},rotate:function(){return Dt},scale:function(){return Qt},set:function(){return vt},str:function(){return ve},sub:function(){return _r},subtract:function(){return Ce},translate:function(){return ue}});var w={};C.r(w),C.d(w,{add:function(){return me},adjoint:function(){return $e},clone:function(){return Br},copy:function(){return cn},create:function(){return Or},determinant:function(){return Tr},equals:function(){return un},exactEquals:function(){return Pr},frob:function(){return Le},fromQuat:function(){return dt},fromQuat2:function(){return Ht},fromRotation:function(){return Mn},fromRotationTranslation:function(){return Je},fromRotationTranslationScale:function(){return kt},fromRotationTranslationScaleOrigin:function(){return qt},fromScaling:function(){return Wn},fromTranslation:function(){return sn},fromValues:function(){return an},fromXRotation:function(){return In},fromYRotation:function(){return jn},fromZRotation:function(){return at},frustum:function(){return Ut},getRotation:function(){return Me},getScaling:function(){return wt},getTranslation:function(){return te},identity:function(){return Un},invert:function(){return xr},lookAt:function(){return Ft},mul:function(){return Ke},multiply:function(){return qr},multiplyScalar:function(){return pr},multiplyScalarAndAdd:function(){return Ze},ortho:function(){return X},orthoNO:function(){return O},orthoZO:function(){return mt},perspective:function(){return ot},perspectiveFromFieldOfView:function(){return M},perspectiveNO:function(){return Q},perspectiveZO:function(){return R},rotate:function(){return Rn},rotateX:function(){return Mr},rotateY:function(){return dn},rotateZ:function(){return hn},scale:function(){return xn},set:function(){return Dn},str:function(){return ee},sub:function(){return lr},subtract:function(){return Xe},targetTo:function(){return Bt},translate:function(){return gn},transpose:function(){return Xn}});var T={};C.r(T),C.d(T,{add:function(){return Se},ceil:function(){return Jr},clone:function(){return ce},copy:function(){return pe},create:function(){return Dr},cross:function(){return eo},dist:function(){return Si},distance:function(){return ba},div:function(){return vo},divide:function(){return gr},dot:function(){return Co},equals:function(){return ro},exactEquals:function(){return Po},floor:function(){return Gn},forEach:function(){return de},fromValues:function(){return jt},inverse:function(){return wi},len:function(){return Jo},length:function(){return Ni},lerp:function(){return ga},max:function(){return qn},min:function(){return pn},mul:function(){return es},multiply:function(){return or},negate:function(){return ei},normalize:function(){return Gi},random:function(){return lo},round:function(){return ln},scale:function(){return Vn},scaleAndAdd:function(){return ca},set:function(){return Oe},sqrDist:function(){return ao},sqrLen:function(){return Yt},squaredDistance:function(){return Ea},squaredLength:function(){return ti},str:function(){return ho},sub:function(){return no},subtract:function(){return Fe},transformMat4:function(){return To},transformQuat:function(){return ni},zero:function(){return Ri}});var L={};C.r(L),C.d(L,{add:function(){return mi},calculateW:function(){return Zn},clone:function(){return La},conjugate:function(){return $a},copy:function(){return za},create:function(){return Ge},dot:function(){return Wi},equals:function(){return Qa},exactEquals:function(){return io},exp:function(){return pa},fromEuler:function(){return Ui},fromMat3:function(){return Fa},fromValues:function(){return ja},getAngle:function(){return Sr},getAxisAngle:function(){return Nr},identity:function(){return sr},invert:function(){return si},len:function(){return os},length:function(){return Vo},lerp:function(){return Ao},ln:function(){return ya},mul:function(){return ki},multiply:function(){return en},normalize:function(){return Yi},pow:function(){return di},random:function(){return oa},rotateX:function(){return fn},rotateY:function(){return Pn},rotateZ:function(){return sa},rotationTo:function(){return Pi},scale:function(){return po},set:function(){return yi},setAxes:function(){return qi},setAxisAngle:function(){return Lr},slerp:function(){return Ma},sqlerp:function(){return zo},sqrLen:function(){return qa},squaredLength:function(){return $i},str:function(){return fi}});var P={};C.r(P),C.d(P,{add:function(){return ji},clone:function(){return Xi},conjugate:function(){return Vs},copy:function(){return Os},create:function(){return rs},dot:function(){return qs},equals:function(){return bo},exactEquals:function(){return Uo},fromMat4:function(){return hs},fromRotation:function(){return ls},fromRotationTranslation:function(){return ds},fromRotationTranslationValues:function(){return Es},fromTranslation:function(){return oo},fromValues:function(){return yo},getDual:function(){return ir},getReal:function(){return ye},getTranslation:function(){return Ln},identity:function(){return Ho},invert:function(){return Js},len:function(){return Us},length:function(){return Rs},lerp:function(){return Qs},mul:function(){return Gs},multiply:function(){return xo},normalize:function(){return _u},rotateAroundAxis:function(){return Ds},rotateByQuatAppend:function(){return Go},rotateByQuatPrepend:function(){return zs},rotateX:function(){return Sa},rotateY:function(){return Ci},rotateZ:function(){return Io},scale:function(){return vs},set:function(){return $t},setDual:function(){return Zr},setReal:function(){return dr},sqrLen:function(){return ns},squaredLength:function(){return ws},str:function(){return Cu},translate:function(){return Qn}});var p=C(73633);function m(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}function S(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function y(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function g(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d}function A(d,G,Et,Gt){var re=new p.ARRAY_TYPE(4);return re[0]=d,re[1]=G,re[2]=Et,re[3]=Gt,re}function E(d,G,Et,Gt,re){return d[0]=G,d[1]=Et,d[2]=Gt,d[3]=re,d}function D(d,G){if(d===G){var Et=G[1];d[1]=G[2],d[2]=Et}else d[0]=G[0],d[1]=G[2],d[2]=G[1],d[3]=G[3];return d}function F(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Et*he-re*Gt;return ge?(ge=1/ge,d[0]=he*ge,d[1]=-Gt*ge,d[2]=-re*ge,d[3]=Et*ge,d):null}function Y(d,G){var Et=G[0];return d[0]=G[3],d[1]=-G[1],d[2]=-G[2],d[3]=Et,d}function b(d){return d[0]*d[3]-d[2]*d[1]}function h(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[0],ze=Et[1],He=Et[2],ur=Et[3];return d[0]=Gt*De+he*ze,d[1]=re*De+ge*ze,d[2]=Gt*He+he*ur,d[3]=re*He+ge*ur,d}function $(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Math.sin(Et),ze=Math.cos(Et);return d[0]=Gt*ze+he*De,d[1]=re*ze+ge*De,d[2]=Gt*-De+he*ze,d[3]=re*-De+ge*ze,d}function U(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[0],ze=Et[1];return d[0]=Gt*De,d[1]=re*De,d[2]=he*ze,d[3]=ge*ze,d}function W(d,G){var Et=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=Et,d[2]=-Et,d[3]=Gt,d}function V(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d}function H(d){return"mat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function q(d){return Math.hypot(d[0],d[1],d[2],d[3])}function tt(d,G,Et,Gt){return d[2]=Gt[2]/Gt[0],Et[0]=Gt[0],Et[1]=Gt[1],Et[3]=Gt[3]-d[2]*Et[1],[d,G,Et]}function rt(d,G,Et){return d[0]=G[0]+Et[0],d[1]=G[1]+Et[1],d[2]=G[2]+Et[2],d[3]=G[3]+Et[3],d}function ft(d,G,Et){return d[0]=G[0]-Et[0],d[1]=G[1]-Et[1],d[2]=G[2]-Et[2],d[3]=G[3]-Et[3],d}function it(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function bt(d,G){var Et=d[0],Gt=d[1],re=d[2],he=d[3],ge=G[0],De=G[1],ze=G[2],He=G[3];return Math.abs(Et-ge)<=p.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ge))&&Math.abs(Gt-De)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(De))&&Math.abs(re-ze)<=p.EPSILON*Math.max(1,Math.abs(re),Math.abs(ze))&&Math.abs(he-He)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(He))}function gt(d,G,Et){return d[0]=G[0]*Et,d[1]=G[1]*Et,d[2]=G[2]*Et,d[3]=G[3]*Et,d}function Xt(d,G,Et,Gt){return d[0]=G[0]+Et[0]*Gt,d[1]=G[1]+Et[1]*Gt,d[2]=G[2]+Et[2]*Gt,d[3]=G[3]+Et[3]*Gt,d}var Ct=h,At=ft;function Z(){var d=new p.ARRAY_TYPE(6);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[4]=0,d[5]=0),d[0]=1,d[3]=1,d}function J(d){var G=new p.ARRAY_TYPE(6);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G}function yt(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d}function _t(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d}function nt(d,G,Et,Gt,re,he){var ge=new p.ARRAY_TYPE(6);return ge[0]=d,ge[1]=G,ge[2]=Et,ge[3]=Gt,ge[4]=re,ge[5]=he,ge}function vt(d,G,Et,Gt,re,he,ge){return d[0]=G,d[1]=Et,d[2]=Gt,d[3]=re,d[4]=he,d[5]=ge,d}function It(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=G[4],De=G[5],ze=Et*he-Gt*re;return ze?(ze=1/ze,d[0]=he*ze,d[1]=-Gt*ze,d[2]=-re*ze,d[3]=Et*ze,d[4]=(re*De-he*ge)*ze,d[5]=(Gt*ge-Et*De)*ze,d):null}function Pt(d){return d[0]*d[3]-d[1]*d[2]}function St(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=G[4],ze=G[5],He=Et[0],ur=Et[1],Ur=Et[2],Xr=Et[3],Wr=Et[4],Tn=Et[5];return d[0]=Gt*He+he*ur,d[1]=re*He+ge*ur,d[2]=Gt*Ur+he*Xr,d[3]=re*Ur+ge*Xr,d[4]=Gt*Wr+he*Tn+De,d[5]=re*Wr+ge*Tn+ze,d}function Dt(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=G[4],ze=G[5],He=Math.sin(Et),ur=Math.cos(Et);return d[0]=Gt*ur+he*He,d[1]=re*ur+ge*He,d[2]=Gt*-He+he*ur,d[3]=re*-He+ge*ur,d[4]=De,d[5]=ze,d}function Qt(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=G[4],ze=G[5],He=Et[0],ur=Et[1];return d[0]=Gt*He,d[1]=re*He,d[2]=he*ur,d[3]=ge*ur,d[4]=De,d[5]=ze,d}function ue(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=G[4],ze=G[5],He=Et[0],ur=Et[1];return d[0]=Gt,d[1]=re,d[2]=he,d[3]=ge,d[4]=Gt*He+he*ur+De,d[5]=re*He+ge*ur+ze,d}function ie(d,G){var Et=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=Et,d[2]=-Et,d[3]=Gt,d[4]=0,d[5]=0,d}function Lt(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d[4]=0,d[5]=0,d}function ne(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0],d[5]=G[1],d}function ve(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"}function Wt(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],1)}function ae(d,G,Et){return d[0]=G[0]+Et[0],d[1]=G[1]+Et[1],d[2]=G[2]+Et[2],d[3]=G[3]+Et[3],d[4]=G[4]+Et[4],d[5]=G[5]+Et[5],d}function Ce(d,G,Et){return d[0]=G[0]-Et[0],d[1]=G[1]-Et[1],d[2]=G[2]-Et[2],d[3]=G[3]-Et[3],d[4]=G[4]-Et[4],d[5]=G[5]-Et[5],d}function xe(d,G,Et){return d[0]=G[0]*Et,d[1]=G[1]*Et,d[2]=G[2]*Et,d[3]=G[3]*Et,d[4]=G[4]*Et,d[5]=G[5]*Et,d}function Jt(d,G,Et,Gt){return d[0]=G[0]+Et[0]*Gt,d[1]=G[1]+Et[1]*Gt,d[2]=G[2]+Et[2]*Gt,d[3]=G[3]+Et[3]*Gt,d[4]=G[4]+Et[4]*Gt,d[5]=G[5]+Et[5]*Gt,d}function we(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]}function Tt(d,G){var Et=d[0],Gt=d[1],re=d[2],he=d[3],ge=d[4],De=d[5],ze=G[0],He=G[1],ur=G[2],Ur=G[3],Xr=G[4],Wr=G[5];return Math.abs(Et-ze)<=p.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ze))&&Math.abs(Gt-He)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(He))&&Math.abs(re-ur)<=p.EPSILON*Math.max(1,Math.abs(re),Math.abs(ur))&&Math.abs(he-Ur)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ur))&&Math.abs(ge-Xr)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Xr))&&Math.abs(De-Wr)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(Wr))}var Pe=St,_r=Ce,Ar=C(935600);function Or(){var d=new p.ARRAY_TYPE(16);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d}function Br(d){var G=new p.ARRAY_TYPE(16);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G[8]=d[8],G[9]=d[9],G[10]=d[10],G[11]=d[11],G[12]=d[12],G[13]=d[13],G[14]=d[14],G[15]=d[15],G}function cn(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function an(d,G,Et,Gt,re,he,ge,De,ze,He,ur,Ur,Xr,Wr,Tn,On){var Qr=new p.ARRAY_TYPE(16);return Qr[0]=d,Qr[1]=G,Qr[2]=Et,Qr[3]=Gt,Qr[4]=re,Qr[5]=he,Qr[6]=ge,Qr[7]=De,Qr[8]=ze,Qr[9]=He,Qr[10]=ur,Qr[11]=Ur,Qr[12]=Xr,Qr[13]=Wr,Qr[14]=Tn,Qr[15]=On,Qr}function Dn(d,G,Et,Gt,re,he,ge,De,ze,He,ur,Ur,Xr,Wr,Tn,On,Qr){return d[0]=G,d[1]=Et,d[2]=Gt,d[3]=re,d[4]=he,d[5]=ge,d[6]=De,d[7]=ze,d[8]=He,d[9]=ur,d[10]=Ur,d[11]=Xr,d[12]=Wr,d[13]=Tn,d[14]=On,d[15]=Qr,d}function Un(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Xn(d,G){if(d===G){var Et=G[1],Gt=G[2],re=G[3],he=G[6],ge=G[7],De=G[11];d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=Et,d[6]=G[9],d[7]=G[13],d[8]=Gt,d[9]=he,d[11]=G[14],d[12]=re,d[13]=ge,d[14]=De}else d[0]=G[0],d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=G[1],d[5]=G[5],d[6]=G[9],d[7]=G[13],d[8]=G[2],d[9]=G[6],d[10]=G[10],d[11]=G[14],d[12]=G[3],d[13]=G[7],d[14]=G[11],d[15]=G[15];return d}function xr(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=G[4],De=G[5],ze=G[6],He=G[7],ur=G[8],Ur=G[9],Xr=G[10],Wr=G[11],Tn=G[12],On=G[13],Qr=G[14],ra=G[15],Ha=Et*De-Gt*ge,Va=Et*ze-re*ge,Ra=Et*He-he*ge,_a=Gt*ze-re*De,Pa=Gt*He-he*De,Oo=re*He-he*ze,Eo=ur*On-Ur*Tn,go=ur*Qr-Xr*Tn,wo=ur*ra-Wr*Tn,So=Ur*Qr-Xr*On,No=Ur*ra-Wr*On,Ro=Xr*ra-Wr*Qr,ci=Ha*Ro-Va*No+Ra*So+_a*wo-Pa*go+Oo*Eo;return ci?(ci=1/ci,d[0]=(De*Ro-ze*No+He*So)*ci,d[1]=(re*No-Gt*Ro-he*So)*ci,d[2]=(On*Oo-Qr*Pa+ra*_a)*ci,d[3]=(Xr*Pa-Ur*Oo-Wr*_a)*ci,d[4]=(ze*wo-ge*Ro-He*go)*ci,d[5]=(Et*Ro-re*wo+he*go)*ci,d[6]=(Qr*Ra-Tn*Oo-ra*Va)*ci,d[7]=(ur*Oo-Xr*Ra+Wr*Va)*ci,d[8]=(ge*No-De*wo+He*Eo)*ci,d[9]=(Gt*wo-Et*No-he*Eo)*ci,d[10]=(Tn*Pa-On*Ra+ra*Ha)*ci,d[11]=(Ur*Ra-ur*Pa-Wr*Ha)*ci,d[12]=(De*go-ge*So-ze*Eo)*ci,d[13]=(Et*So-Gt*go+re*Eo)*ci,d[14]=(On*Va-Tn*_a-Qr*Ha)*ci,d[15]=(ur*_a-Ur*Va+Xr*Ha)*ci,d):null}function $e(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=G[4],De=G[5],ze=G[6],He=G[7],ur=G[8],Ur=G[9],Xr=G[10],Wr=G[11],Tn=G[12],On=G[13],Qr=G[14],ra=G[15];return d[0]=De*(Xr*ra-Wr*Qr)-Ur*(ze*ra-He*Qr)+On*(ze*Wr-He*Xr),d[1]=-(Gt*(Xr*ra-Wr*Qr)-Ur*(re*ra-he*Qr)+On*(re*Wr-he*Xr)),d[2]=Gt*(ze*ra-He*Qr)-De*(re*ra-he*Qr)+On*(re*He-he*ze),d[3]=-(Gt*(ze*Wr-He*Xr)-De*(re*Wr-he*Xr)+Ur*(re*He-he*ze)),d[4]=-(ge*(Xr*ra-Wr*Qr)-ur*(ze*ra-He*Qr)+Tn*(ze*Wr-He*Xr)),d[5]=Et*(Xr*ra-Wr*Qr)-ur*(re*ra-he*Qr)+Tn*(re*Wr-he*Xr),d[6]=-(Et*(ze*ra-He*Qr)-ge*(re*ra-he*Qr)+Tn*(re*He-he*ze)),d[7]=Et*(ze*Wr-He*Xr)-ge*(re*Wr-he*Xr)+ur*(re*He-he*ze),d[8]=ge*(Ur*ra-Wr*On)-ur*(De*ra-He*On)+Tn*(De*Wr-He*Ur),d[9]=-(Et*(Ur*ra-Wr*On)-ur*(Gt*ra-he*On)+Tn*(Gt*Wr-he*Ur)),d[10]=Et*(De*ra-He*On)-ge*(Gt*ra-he*On)+Tn*(Gt*He-he*De),d[11]=-(Et*(De*Wr-He*Ur)-ge*(Gt*Wr-he*Ur)+ur*(Gt*He-he*De)),d[12]=-(ge*(Ur*Qr-Xr*On)-ur*(De*Qr-ze*On)+Tn*(De*Xr-ze*Ur)),d[13]=Et*(Ur*Qr-Xr*On)-ur*(Gt*Qr-re*On)+Tn*(Gt*Xr-re*Ur),d[14]=-(Et*(De*Qr-ze*On)-ge*(Gt*Qr-re*On)+Tn*(Gt*ze-re*De)),d[15]=Et*(De*Xr-ze*Ur)-ge*(Gt*Xr-re*Ur)+ur*(Gt*ze-re*De),d}function Tr(d){var G=d[0],Et=d[1],Gt=d[2],re=d[3],he=d[4],ge=d[5],De=d[6],ze=d[7],He=d[8],ur=d[9],Ur=d[10],Xr=d[11],Wr=d[12],Tn=d[13],On=d[14],Qr=d[15],ra=G*ge-Et*he,Ha=G*De-Gt*he,Va=G*ze-re*he,Ra=Et*De-Gt*ge,_a=Et*ze-re*ge,Pa=Gt*ze-re*De,Oo=He*Tn-ur*Wr,Eo=He*On-Ur*Wr,go=He*Qr-Xr*Wr,wo=ur*On-Ur*Tn,So=ur*Qr-Xr*Tn,No=Ur*Qr-Xr*On;return ra*No-Ha*So+Va*wo+Ra*go-_a*Eo+Pa*Oo}function qr(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=G[8],Xr=G[9],Wr=G[10],Tn=G[11],On=G[12],Qr=G[13],ra=G[14],Ha=G[15],Va=Et[0],Ra=Et[1],_a=Et[2],Pa=Et[3];return d[0]=Va*Gt+Ra*De+_a*Ur+Pa*On,d[1]=Va*re+Ra*ze+_a*Xr+Pa*Qr,d[2]=Va*he+Ra*He+_a*Wr+Pa*ra,d[3]=Va*ge+Ra*ur+_a*Tn+Pa*Ha,Va=Et[4],Ra=Et[5],_a=Et[6],Pa=Et[7],d[4]=Va*Gt+Ra*De+_a*Ur+Pa*On,d[5]=Va*re+Ra*ze+_a*Xr+Pa*Qr,d[6]=Va*he+Ra*He+_a*Wr+Pa*ra,d[7]=Va*ge+Ra*ur+_a*Tn+Pa*Ha,Va=Et[8],Ra=Et[9],_a=Et[10],Pa=Et[11],d[8]=Va*Gt+Ra*De+_a*Ur+Pa*On,d[9]=Va*re+Ra*ze+_a*Xr+Pa*Qr,d[10]=Va*he+Ra*He+_a*Wr+Pa*ra,d[11]=Va*ge+Ra*ur+_a*Tn+Pa*Ha,Va=Et[12],Ra=Et[13],_a=Et[14],Pa=Et[15],d[12]=Va*Gt+Ra*De+_a*Ur+Pa*On,d[13]=Va*re+Ra*ze+_a*Xr+Pa*Qr,d[14]=Va*he+Ra*He+_a*Wr+Pa*ra,d[15]=Va*ge+Ra*ur+_a*Tn+Pa*Ha,d}function gn(d,G,Et){var Gt=Et[0],re=Et[1],he=Et[2],ge,De,ze,He,ur,Ur,Xr,Wr,Tn,On,Qr,ra;return G===d?(d[12]=G[0]*Gt+G[4]*re+G[8]*he+G[12],d[13]=G[1]*Gt+G[5]*re+G[9]*he+G[13],d[14]=G[2]*Gt+G[6]*re+G[10]*he+G[14],d[15]=G[3]*Gt+G[7]*re+G[11]*he+G[15]):(ge=G[0],De=G[1],ze=G[2],He=G[3],ur=G[4],Ur=G[5],Xr=G[6],Wr=G[7],Tn=G[8],On=G[9],Qr=G[10],ra=G[11],d[0]=ge,d[1]=De,d[2]=ze,d[3]=He,d[4]=ur,d[5]=Ur,d[6]=Xr,d[7]=Wr,d[8]=Tn,d[9]=On,d[10]=Qr,d[11]=ra,d[12]=ge*Gt+ur*re+Tn*he+G[12],d[13]=De*Gt+Ur*re+On*he+G[13],d[14]=ze*Gt+Xr*re+Qr*he+G[14],d[15]=He*Gt+Wr*re+ra*he+G[15]),d}function xn(d,G,Et){var Gt=Et[0],re=Et[1],he=Et[2];return d[0]=G[0]*Gt,d[1]=G[1]*Gt,d[2]=G[2]*Gt,d[3]=G[3]*Gt,d[4]=G[4]*re,d[5]=G[5]*re,d[6]=G[6]*re,d[7]=G[7]*re,d[8]=G[8]*he,d[9]=G[9]*he,d[10]=G[10]*he,d[11]=G[11]*he,d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function Rn(d,G,Et,Gt){var re=Gt[0],he=Gt[1],ge=Gt[2],De=Math.hypot(re,he,ge),ze,He,ur,Ur,Xr,Wr,Tn,On,Qr,ra,Ha,Va,Ra,_a,Pa,Oo,Eo,go,wo,So,No,Ro,ci,Bi;return De<p.EPSILON?null:(De=1/De,re*=De,he*=De,ge*=De,ze=Math.sin(Et),He=Math.cos(Et),ur=1-He,Ur=G[0],Xr=G[1],Wr=G[2],Tn=G[3],On=G[4],Qr=G[5],ra=G[6],Ha=G[7],Va=G[8],Ra=G[9],_a=G[10],Pa=G[11],Oo=re*re*ur+He,Eo=he*re*ur+ge*ze,go=ge*re*ur-he*ze,wo=re*he*ur-ge*ze,So=he*he*ur+He,No=ge*he*ur+re*ze,Ro=re*ge*ur+he*ze,ci=he*ge*ur-re*ze,Bi=ge*ge*ur+He,d[0]=Ur*Oo+On*Eo+Va*go,d[1]=Xr*Oo+Qr*Eo+Ra*go,d[2]=Wr*Oo+ra*Eo+_a*go,d[3]=Tn*Oo+Ha*Eo+Pa*go,d[4]=Ur*wo+On*So+Va*No,d[5]=Xr*wo+Qr*So+Ra*No,d[6]=Wr*wo+ra*So+_a*No,d[7]=Tn*wo+Ha*So+Pa*No,d[8]=Ur*Ro+On*ci+Va*Bi,d[9]=Xr*Ro+Qr*ci+Ra*Bi,d[10]=Wr*Ro+ra*ci+_a*Bi,d[11]=Tn*Ro+Ha*ci+Pa*Bi,G!==d&&(d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d)}function Mr(d,G,Et){var Gt=Math.sin(Et),re=Math.cos(Et),he=G[4],ge=G[5],De=G[6],ze=G[7],He=G[8],ur=G[9],Ur=G[10],Xr=G[11];return G!==d&&(d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[4]=he*re+He*Gt,d[5]=ge*re+ur*Gt,d[6]=De*re+Ur*Gt,d[7]=ze*re+Xr*Gt,d[8]=He*re-he*Gt,d[9]=ur*re-ge*Gt,d[10]=Ur*re-De*Gt,d[11]=Xr*re-ze*Gt,d}function dn(d,G,Et){var Gt=Math.sin(Et),re=Math.cos(Et),he=G[0],ge=G[1],De=G[2],ze=G[3],He=G[8],ur=G[9],Ur=G[10],Xr=G[11];return G!==d&&(d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*re-He*Gt,d[1]=ge*re-ur*Gt,d[2]=De*re-Ur*Gt,d[3]=ze*re-Xr*Gt,d[8]=he*Gt+He*re,d[9]=ge*Gt+ur*re,d[10]=De*Gt+Ur*re,d[11]=ze*Gt+Xr*re,d}function hn(d,G,Et){var Gt=Math.sin(Et),re=Math.cos(Et),he=G[0],ge=G[1],De=G[2],ze=G[3],He=G[4],ur=G[5],Ur=G[6],Xr=G[7];return G!==d&&(d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*re+He*Gt,d[1]=ge*re+ur*Gt,d[2]=De*re+Ur*Gt,d[3]=ze*re+Xr*Gt,d[4]=He*re-he*Gt,d[5]=ur*re-ge*Gt,d[6]=Ur*re-De*Gt,d[7]=Xr*re-ze*Gt,d}function sn(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=G[0],d[13]=G[1],d[14]=G[2],d[15]=1,d}function Wn(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=G[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=G[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Mn(d,G,Et){var Gt=Et[0],re=Et[1],he=Et[2],ge=Math.hypot(Gt,re,he),De,ze,He;return ge<p.EPSILON?null:(ge=1/ge,Gt*=ge,re*=ge,he*=ge,De=Math.sin(G),ze=Math.cos(G),He=1-ze,d[0]=Gt*Gt*He+ze,d[1]=re*Gt*He+he*De,d[2]=he*Gt*He-re*De,d[3]=0,d[4]=Gt*re*He-he*De,d[5]=re*re*He+ze,d[6]=he*re*He+Gt*De,d[7]=0,d[8]=Gt*he*He+re*De,d[9]=re*he*He-Gt*De,d[10]=he*he*He+ze,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}function In(d,G){var Et=Math.sin(G),Gt=Math.cos(G);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Gt,d[6]=Et,d[7]=0,d[8]=0,d[9]=-Et,d[10]=Gt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function jn(d,G){var Et=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=0,d[2]=-Et,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=Et,d[9]=0,d[10]=Gt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function at(d,G){var Et=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=Et,d[2]=0,d[3]=0,d[4]=-Et,d[5]=Gt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Je(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Gt+Gt,ze=re+re,He=he+he,ur=Gt*De,Ur=Gt*ze,Xr=Gt*He,Wr=re*ze,Tn=re*He,On=he*He,Qr=ge*De,ra=ge*ze,Ha=ge*He;return d[0]=1-(Wr+On),d[1]=Ur+Ha,d[2]=Xr-ra,d[3]=0,d[4]=Ur-Ha,d[5]=1-(ur+On),d[6]=Tn+Qr,d[7]=0,d[8]=Xr+ra,d[9]=Tn-Qr,d[10]=1-(ur+Wr),d[11]=0,d[12]=Et[0],d[13]=Et[1],d[14]=Et[2],d[15]=1,d}function Ht(d,G){var Et=new p.ARRAY_TYPE(3),Gt=-G[0],re=-G[1],he=-G[2],ge=G[3],De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=Gt*Gt+re*re+he*he+ge*ge;return Ur>0?(Et[0]=(De*ge+ur*Gt+ze*he-He*re)*2/Ur,Et[1]=(ze*ge+ur*re+He*Gt-De*he)*2/Ur,Et[2]=(He*ge+ur*he+De*re-ze*Gt)*2/Ur):(Et[0]=(De*ge+ur*Gt+ze*he-He*re)*2,Et[1]=(ze*ge+ur*re+He*Gt-De*he)*2,Et[2]=(He*ge+ur*he+De*re-ze*Gt)*2),Je(d,G,Et),d}function te(d,G){return d[0]=G[12],d[1]=G[13],d[2]=G[14],d}function wt(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[4],ge=G[5],De=G[6],ze=G[8],He=G[9],ur=G[10];return d[0]=Math.hypot(Et,Gt,re),d[1]=Math.hypot(he,ge,De),d[2]=Math.hypot(ze,He,ur),d}function Me(d,G){var Et=new p.ARRAY_TYPE(3);wt(Et,G);var Gt=1/Et[0],re=1/Et[1],he=1/Et[2],ge=G[0]*Gt,De=G[1]*re,ze=G[2]*he,He=G[4]*Gt,ur=G[5]*re,Ur=G[6]*he,Xr=G[8]*Gt,Wr=G[9]*re,Tn=G[10]*he,On=ge+ur+Tn,Qr=0;return On>0?(Qr=Math.sqrt(On+1)*2,d[3]=.25*Qr,d[0]=(Ur-Wr)/Qr,d[1]=(Xr-ze)/Qr,d[2]=(De-He)/Qr):ge>ur&&ge>Tn?(Qr=Math.sqrt(1+ge-ur-Tn)*2,d[3]=(Ur-Wr)/Qr,d[0]=.25*Qr,d[1]=(De+He)/Qr,d[2]=(Xr+ze)/Qr):ur>Tn?(Qr=Math.sqrt(1+ur-ge-Tn)*2,d[3]=(Xr-ze)/Qr,d[0]=(De+He)/Qr,d[1]=.25*Qr,d[2]=(Ur+Wr)/Qr):(Qr=Math.sqrt(1+Tn-ge-ur)*2,d[3]=(De-He)/Qr,d[0]=(Xr+ze)/Qr,d[1]=(Ur+Wr)/Qr,d[2]=.25*Qr),d}function kt(d,G,Et,Gt){var re=G[0],he=G[1],ge=G[2],De=G[3],ze=re+re,He=he+he,ur=ge+ge,Ur=re*ze,Xr=re*He,Wr=re*ur,Tn=he*He,On=he*ur,Qr=ge*ur,ra=De*ze,Ha=De*He,Va=De*ur,Ra=Gt[0],_a=Gt[1],Pa=Gt[2];return d[0]=(1-(Tn+Qr))*Ra,d[1]=(Xr+Va)*Ra,d[2]=(Wr-Ha)*Ra,d[3]=0,d[4]=(Xr-Va)*_a,d[5]=(1-(Ur+Qr))*_a,d[6]=(On+ra)*_a,d[7]=0,d[8]=(Wr+Ha)*Pa,d[9]=(On-ra)*Pa,d[10]=(1-(Ur+Tn))*Pa,d[11]=0,d[12]=Et[0],d[13]=Et[1],d[14]=Et[2],d[15]=1,d}function qt(d,G,Et,Gt,re){var he=G[0],ge=G[1],De=G[2],ze=G[3],He=he+he,ur=ge+ge,Ur=De+De,Xr=he*He,Wr=he*ur,Tn=he*Ur,On=ge*ur,Qr=ge*Ur,ra=De*Ur,Ha=ze*He,Va=ze*ur,Ra=ze*Ur,_a=Gt[0],Pa=Gt[1],Oo=Gt[2],Eo=re[0],go=re[1],wo=re[2],So=(1-(On+ra))*_a,No=(Wr+Ra)*_a,Ro=(Tn-Va)*_a,ci=(Wr-Ra)*Pa,Bi=(1-(Xr+ra))*Pa,Hs=(Qr+Ha)*Pa,Zs=(Tn+Va)*Oo,ps=(Qr-Ha)*Oo,Tu=(1-(Xr+On))*Oo;return d[0]=So,d[1]=No,d[2]=Ro,d[3]=0,d[4]=ci,d[5]=Bi,d[6]=Hs,d[7]=0,d[8]=Zs,d[9]=ps,d[10]=Tu,d[11]=0,d[12]=Et[0]+Eo-(So*Eo+ci*go+Zs*wo),d[13]=Et[1]+go-(No*Eo+Bi*go+ps*wo),d[14]=Et[2]+wo-(Ro*Eo+Hs*go+Tu*wo),d[15]=1,d}function dt(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Et+Et,De=Gt+Gt,ze=re+re,He=Et*ge,ur=Gt*ge,Ur=Gt*De,Xr=re*ge,Wr=re*De,Tn=re*ze,On=he*ge,Qr=he*De,ra=he*ze;return d[0]=1-Ur-Tn,d[1]=ur+ra,d[2]=Xr-Qr,d[3]=0,d[4]=ur-ra,d[5]=1-He-Tn,d[6]=Wr+On,d[7]=0,d[8]=Xr+Qr,d[9]=Wr-On,d[10]=1-He-Ur,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Ut(d,G,Et,Gt,re,he,ge){var De=1/(Et-G),ze=1/(re-Gt),He=1/(he-ge);return d[0]=he*2*De,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he*2*ze,d[6]=0,d[7]=0,d[8]=(Et+G)*De,d[9]=(re+Gt)*ze,d[10]=(ge+he)*He,d[11]=-1,d[12]=0,d[13]=0,d[14]=ge*he*2*He,d[15]=0,d}function Q(d,G,Et,Gt,re){var he=1/Math.tan(G/2),ge;return d[0]=he/Et,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,re!=null&&re!==1/0?(ge=1/(Gt-re),d[10]=(re+Gt)*ge,d[14]=2*re*Gt*ge):(d[10]=-1,d[14]=-2*Gt),d}var ot=Q;function R(d,G,Et,Gt,re){var he=1/Math.tan(G/2),ge;return d[0]=he/Et,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,re!=null&&re!==1/0?(ge=1/(Gt-re),d[10]=re*ge,d[14]=re*Gt*ge):(d[10]=-1,d[14]=-Gt),d}function M(d,G,Et,Gt){var re=Math.tan(G.upDegrees*Math.PI/180),he=Math.tan(G.downDegrees*Math.PI/180),ge=Math.tan(G.leftDegrees*Math.PI/180),De=Math.tan(G.rightDegrees*Math.PI/180),ze=2/(ge+De),He=2/(re+he);return d[0]=ze,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=He,d[6]=0,d[7]=0,d[8]=-((ge-De)*ze*.5),d[9]=(re-he)*He*.5,d[10]=Gt/(Et-Gt),d[11]=-1,d[12]=0,d[13]=0,d[14]=Gt*Et/(Et-Gt),d[15]=0,d}function O(d,G,Et,Gt,re,he,ge){var De=1/(G-Et),ze=1/(Gt-re),He=1/(he-ge);return d[0]=-2*De,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*ze,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*He,d[11]=0,d[12]=(G+Et)*De,d[13]=(re+Gt)*ze,d[14]=(ge+he)*He,d[15]=1,d}var X=O;function mt(d,G,Et,Gt,re,he,ge){var De=1/(G-Et),ze=1/(Gt-re),He=1/(he-ge);return d[0]=-2*De,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*ze,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=He,d[11]=0,d[12]=(G+Et)*De,d[13]=(re+Gt)*ze,d[14]=he*He,d[15]=1,d}function Ft(d,G,Et,Gt){var re,he,ge,De,ze,He,ur,Ur,Xr,Wr,Tn=G[0],On=G[1],Qr=G[2],ra=Gt[0],Ha=Gt[1],Va=Gt[2],Ra=Et[0],_a=Et[1],Pa=Et[2];return Math.abs(Tn-Ra)<p.EPSILON&&Math.abs(On-_a)<p.EPSILON&&Math.abs(Qr-Pa)<p.EPSILON?Un(d):(ur=Tn-Ra,Ur=On-_a,Xr=Qr-Pa,Wr=1/Math.hypot(ur,Ur,Xr),ur*=Wr,Ur*=Wr,Xr*=Wr,re=Ha*Xr-Va*Ur,he=Va*ur-ra*Xr,ge=ra*Ur-Ha*ur,Wr=Math.hypot(re,he,ge),Wr?(Wr=1/Wr,re*=Wr,he*=Wr,ge*=Wr):(re=0,he=0,ge=0),De=Ur*ge-Xr*he,ze=Xr*re-ur*ge,He=ur*he-Ur*re,Wr=Math.hypot(De,ze,He),Wr?(Wr=1/Wr,De*=Wr,ze*=Wr,He*=Wr):(De=0,ze=0,He=0),d[0]=re,d[1]=De,d[2]=ur,d[3]=0,d[4]=he,d[5]=ze,d[6]=Ur,d[7]=0,d[8]=ge,d[9]=He,d[10]=Xr,d[11]=0,d[12]=-(re*Tn+he*On+ge*Qr),d[13]=-(De*Tn+ze*On+He*Qr),d[14]=-(ur*Tn+Ur*On+Xr*Qr),d[15]=1,d)}function Bt(d,G,Et,Gt){var re=G[0],he=G[1],ge=G[2],De=Gt[0],ze=Gt[1],He=Gt[2],ur=re-Et[0],Ur=he-Et[1],Xr=ge-Et[2],Wr=ur*ur+Ur*Ur+Xr*Xr;Wr>0&&(Wr=1/Math.sqrt(Wr),ur*=Wr,Ur*=Wr,Xr*=Wr);var Tn=ze*Xr-He*Ur,On=He*ur-De*Xr,Qr=De*Ur-ze*ur;return Wr=Tn*Tn+On*On+Qr*Qr,Wr>0&&(Wr=1/Math.sqrt(Wr),Tn*=Wr,On*=Wr,Qr*=Wr),d[0]=Tn,d[1]=On,d[2]=Qr,d[3]=0,d[4]=Ur*Qr-Xr*On,d[5]=Xr*Tn-ur*Qr,d[6]=ur*On-Ur*Tn,d[7]=0,d[8]=ur,d[9]=Ur,d[10]=Xr,d[11]=0,d[12]=re,d[13]=he,d[14]=ge,d[15]=1,d}function ee(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}function Le(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])}function me(d,G,Et){return d[0]=G[0]+Et[0],d[1]=G[1]+Et[1],d[2]=G[2]+Et[2],d[3]=G[3]+Et[3],d[4]=G[4]+Et[4],d[5]=G[5]+Et[5],d[6]=G[6]+Et[6],d[7]=G[7]+Et[7],d[8]=G[8]+Et[8],d[9]=G[9]+Et[9],d[10]=G[10]+Et[10],d[11]=G[11]+Et[11],d[12]=G[12]+Et[12],d[13]=G[13]+Et[13],d[14]=G[14]+Et[14],d[15]=G[15]+Et[15],d}function Xe(d,G,Et){return d[0]=G[0]-Et[0],d[1]=G[1]-Et[1],d[2]=G[2]-Et[2],d[3]=G[3]-Et[3],d[4]=G[4]-Et[4],d[5]=G[5]-Et[5],d[6]=G[6]-Et[6],d[7]=G[7]-Et[7],d[8]=G[8]-Et[8],d[9]=G[9]-Et[9],d[10]=G[10]-Et[10],d[11]=G[11]-Et[11],d[12]=G[12]-Et[12],d[13]=G[13]-Et[13],d[14]=G[14]-Et[14],d[15]=G[15]-Et[15],d}function pr(d,G,Et){return d[0]=G[0]*Et,d[1]=G[1]*Et,d[2]=G[2]*Et,d[3]=G[3]*Et,d[4]=G[4]*Et,d[5]=G[5]*Et,d[6]=G[6]*Et,d[7]=G[7]*Et,d[8]=G[8]*Et,d[9]=G[9]*Et,d[10]=G[10]*Et,d[11]=G[11]*Et,d[12]=G[12]*Et,d[13]=G[13]*Et,d[14]=G[14]*Et,d[15]=G[15]*Et,d}function Ze(d,G,Et,Gt){return d[0]=G[0]+Et[0]*Gt,d[1]=G[1]+Et[1]*Gt,d[2]=G[2]+Et[2]*Gt,d[3]=G[3]+Et[3]*Gt,d[4]=G[4]+Et[4]*Gt,d[5]=G[5]+Et[5]*Gt,d[6]=G[6]+Et[6]*Gt,d[7]=G[7]+Et[7]*Gt,d[8]=G[8]+Et[8]*Gt,d[9]=G[9]+Et[9]*Gt,d[10]=G[10]+Et[10]*Gt,d[11]=G[11]+Et[11]*Gt,d[12]=G[12]+Et[12]*Gt,d[13]=G[13]+Et[13]*Gt,d[14]=G[14]+Et[14]*Gt,d[15]=G[15]+Et[15]*Gt,d}function Pr(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]&&d[8]===G[8]&&d[9]===G[9]&&d[10]===G[10]&&d[11]===G[11]&&d[12]===G[12]&&d[13]===G[13]&&d[14]===G[14]&&d[15]===G[15]}function un(d,G){var Et=d[0],Gt=d[1],re=d[2],he=d[3],ge=d[4],De=d[5],ze=d[6],He=d[7],ur=d[8],Ur=d[9],Xr=d[10],Wr=d[11],Tn=d[12],On=d[13],Qr=d[14],ra=d[15],Ha=G[0],Va=G[1],Ra=G[2],_a=G[3],Pa=G[4],Oo=G[5],Eo=G[6],go=G[7],wo=G[8],So=G[9],No=G[10],Ro=G[11],ci=G[12],Bi=G[13],Hs=G[14],Zs=G[15];return Math.abs(Et-Ha)<=p.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Ha))&&Math.abs(Gt-Va)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Va))&&Math.abs(re-Ra)<=p.EPSILON*Math.max(1,Math.abs(re),Math.abs(Ra))&&Math.abs(he-_a)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(_a))&&Math.abs(ge-Pa)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Pa))&&Math.abs(De-Oo)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(Oo))&&Math.abs(ze-Eo)<=p.EPSILON*Math.max(1,Math.abs(ze),Math.abs(Eo))&&Math.abs(He-go)<=p.EPSILON*Math.max(1,Math.abs(He),Math.abs(go))&&Math.abs(ur-wo)<=p.EPSILON*Math.max(1,Math.abs(ur),Math.abs(wo))&&Math.abs(Ur-So)<=p.EPSILON*Math.max(1,Math.abs(Ur),Math.abs(So))&&Math.abs(Xr-No)<=p.EPSILON*Math.max(1,Math.abs(Xr),Math.abs(No))&&Math.abs(Wr-Ro)<=p.EPSILON*Math.max(1,Math.abs(Wr),Math.abs(Ro))&&Math.abs(Tn-ci)<=p.EPSILON*Math.max(1,Math.abs(Tn),Math.abs(ci))&&Math.abs(On-Bi)<=p.EPSILON*Math.max(1,Math.abs(On),Math.abs(Bi))&&Math.abs(Qr-Hs)<=p.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Hs))&&Math.abs(ra-Zs)<=p.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Zs))}var Ke=qr,lr=Xe,Rr=C(277160);function Dr(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function ce(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function jt(d,G,Et,Gt){var re=new p.ARRAY_TYPE(4);return re[0]=d,re[1]=G,re[2]=Et,re[3]=Gt,re}function pe(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function Oe(d,G,Et,Gt,re){return d[0]=G,d[1]=Et,d[2]=Gt,d[3]=re,d}function Se(d,G,Et){return d[0]=G[0]+Et[0],d[1]=G[1]+Et[1],d[2]=G[2]+Et[2],d[3]=G[3]+Et[3],d}function Fe(d,G,Et){return d[0]=G[0]-Et[0],d[1]=G[1]-Et[1],d[2]=G[2]-Et[2],d[3]=G[3]-Et[3],d}function or(d,G,Et){return d[0]=G[0]*Et[0],d[1]=G[1]*Et[1],d[2]=G[2]*Et[2],d[3]=G[3]*Et[3],d}function gr(d,G,Et){return d[0]=G[0]/Et[0],d[1]=G[1]/Et[1],d[2]=G[2]/Et[2],d[3]=G[3]/Et[3],d}function Jr(d,G){return d[0]=Math.ceil(G[0]),d[1]=Math.ceil(G[1]),d[2]=Math.ceil(G[2]),d[3]=Math.ceil(G[3]),d}function Gn(d,G){return d[0]=Math.floor(G[0]),d[1]=Math.floor(G[1]),d[2]=Math.floor(G[2]),d[3]=Math.floor(G[3]),d}function pn(d,G,Et){return d[0]=Math.min(G[0],Et[0]),d[1]=Math.min(G[1],Et[1]),d[2]=Math.min(G[2],Et[2]),d[3]=Math.min(G[3],Et[3]),d}function qn(d,G,Et){return d[0]=Math.max(G[0],Et[0]),d[1]=Math.max(G[1],Et[1]),d[2]=Math.max(G[2],Et[2]),d[3]=Math.max(G[3],Et[3]),d}function ln(d,G){return d[0]=Math.round(G[0]),d[1]=Math.round(G[1]),d[2]=Math.round(G[2]),d[3]=Math.round(G[3]),d}function Vn(d,G,Et){return d[0]=G[0]*Et,d[1]=G[1]*Et,d[2]=G[2]*Et,d[3]=G[3]*Et,d}function ca(d,G,Et,Gt){return d[0]=G[0]+Et[0]*Gt,d[1]=G[1]+Et[1]*Gt,d[2]=G[2]+Et[2]*Gt,d[3]=G[3]+Et[3]*Gt,d}function ba(d,G){var Et=G[0]-d[0],Gt=G[1]-d[1],re=G[2]-d[2],he=G[3]-d[3];return Math.hypot(Et,Gt,re,he)}function Ea(d,G){var Et=G[0]-d[0],Gt=G[1]-d[1],re=G[2]-d[2],he=G[3]-d[3];return Et*Et+Gt*Gt+re*re+he*he}function Ni(d){var G=d[0],Et=d[1],Gt=d[2],re=d[3];return Math.hypot(G,Et,Gt,re)}function ti(d){var G=d[0],Et=d[1],Gt=d[2],re=d[3];return G*G+Et*Et+Gt*Gt+re*re}function ei(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=-G[3],d}function wi(d,G){return d[0]=1/G[0],d[1]=1/G[1],d[2]=1/G[2],d[3]=1/G[3],d}function Gi(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Et*Et+Gt*Gt+re*re+he*he;return ge>0&&(ge=1/Math.sqrt(ge)),d[0]=Et*ge,d[1]=Gt*ge,d[2]=re*ge,d[3]=he*ge,d}function Co(d,G){return d[0]*G[0]+d[1]*G[1]+d[2]*G[2]+d[3]*G[3]}function eo(d,G,Et,Gt){var re=Et[0]*Gt[1]-Et[1]*Gt[0],he=Et[0]*Gt[2]-Et[2]*Gt[0],ge=Et[0]*Gt[3]-Et[3]*Gt[0],De=Et[1]*Gt[2]-Et[2]*Gt[1],ze=Et[1]*Gt[3]-Et[3]*Gt[1],He=Et[2]*Gt[3]-Et[3]*Gt[2],ur=G[0],Ur=G[1],Xr=G[2],Wr=G[3];return d[0]=Ur*He-Xr*ze+Wr*De,d[1]=-(ur*He)+Xr*ge-Wr*he,d[2]=ur*ze-Ur*ge+Wr*re,d[3]=-(ur*De)+Ur*he-Xr*re,d}function ga(d,G,Et,Gt){var re=G[0],he=G[1],ge=G[2],De=G[3];return d[0]=re+Gt*(Et[0]-re),d[1]=he+Gt*(Et[1]-he),d[2]=ge+Gt*(Et[2]-ge),d[3]=De+Gt*(Et[3]-De),d}function lo(d,G){G=G||1;var Et,Gt,re,he,ge,De;do Et=p.RANDOM()*2-1,Gt=p.RANDOM()*2-1,ge=Et*Et+Gt*Gt;while(ge>=1);do re=p.RANDOM()*2-1,he=p.RANDOM()*2-1,De=re*re+he*he;while(De>=1);var ze=Math.sqrt((1-ge)/De);return d[0]=G*Et,d[1]=G*Gt,d[2]=G*re*ze,d[3]=G*he*ze,d}function To(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3];return d[0]=Et[0]*Gt+Et[4]*re+Et[8]*he+Et[12]*ge,d[1]=Et[1]*Gt+Et[5]*re+Et[9]*he+Et[13]*ge,d[2]=Et[2]*Gt+Et[6]*re+Et[10]*he+Et[14]*ge,d[3]=Et[3]*Gt+Et[7]*re+Et[11]*he+Et[15]*ge,d}function ni(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=Et[0],De=Et[1],ze=Et[2],He=Et[3],ur=He*Gt+De*he-ze*re,Ur=He*re+ze*Gt-ge*he,Xr=He*he+ge*re-De*Gt,Wr=-ge*Gt-De*re-ze*he;return d[0]=ur*He+Wr*-ge+Ur*-ze-Xr*-De,d[1]=Ur*He+Wr*-De+Xr*-ge-ur*-ze,d[2]=Xr*He+Wr*-ze+ur*-De-Ur*-ge,d[3]=G[3],d}function Ri(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d}function ho(d){return"vec4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function Po(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function ro(d,G){var Et=d[0],Gt=d[1],re=d[2],he=d[3],ge=G[0],De=G[1],ze=G[2],He=G[3];return Math.abs(Et-ge)<=p.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ge))&&Math.abs(Gt-De)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(De))&&Math.abs(re-ze)<=p.EPSILON*Math.max(1,Math.abs(re),Math.abs(ze))&&Math.abs(he-He)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(He))}var no=Fe,es=or,vo=gr,Si=ba,ao=Ea,Jo=Ni,Yt=ti,de=function(){var d=Dr();return function(G,Et,Gt,re,he,ge){var De,ze;for(Et||(Et=4),Gt||(Gt=0),re?ze=Math.min(re*Et+Gt,G.length):ze=G.length,De=Gt;De<ze;De+=Et)d[0]=G[De],d[1]=G[De+1],d[2]=G[De+2],d[3]=G[De+3],he(d,d,ge),G[De]=d[0],G[De+1]=d[1],G[De+2]=d[2],G[De+3]=d[3];return G}}();function Ge(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function sr(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d}function Lr(d,G,Et){Et=Et*.5;var Gt=Math.sin(Et);return d[0]=Gt*G[0],d[1]=Gt*G[1],d[2]=Gt*G[2],d[3]=Math.cos(Et),d}function Nr(d,G){var Et=Math.acos(G[3])*2,Gt=Math.sin(Et/2);return Gt>p.EPSILON?(d[0]=G[0]/Gt,d[1]=G[1]/Gt,d[2]=G[2]/Gt):(d[0]=1,d[1]=0,d[2]=0),Et}function Sr(d,G){var Et=Wi(d,G);return Math.acos(2*Et*Et-1)}function en(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[0],ze=Et[1],He=Et[2],ur=Et[3];return d[0]=Gt*ur+ge*De+re*He-he*ze,d[1]=re*ur+ge*ze+he*De-Gt*He,d[2]=he*ur+ge*He+Gt*ze-re*De,d[3]=ge*ur-Gt*De-re*ze-he*He,d}function fn(d,G,Et){Et*=.5;var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Math.sin(Et),ze=Math.cos(Et);return d[0]=Gt*ze+ge*De,d[1]=re*ze+he*De,d[2]=he*ze-re*De,d[3]=ge*ze-Gt*De,d}function Pn(d,G,Et){Et*=.5;var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Math.sin(Et),ze=Math.cos(Et);return d[0]=Gt*ze-he*De,d[1]=re*ze+ge*De,d[2]=he*ze+Gt*De,d[3]=ge*ze-re*De,d}function sa(d,G,Et){Et*=.5;var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Math.sin(Et),ze=Math.cos(Et);return d[0]=Gt*ze+re*De,d[1]=re*ze-Gt*De,d[2]=he*ze+ge*De,d[3]=ge*ze-he*De,d}function Zn(d,G){var Et=G[0],Gt=G[1],re=G[2];return d[0]=Et,d[1]=Gt,d[2]=re,d[3]=Math.sqrt(Math.abs(1-Et*Et-Gt*Gt-re*re)),d}function pa(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Math.sqrt(Et*Et+Gt*Gt+re*re),De=Math.exp(he),ze=ge>0?De*Math.sin(ge)/ge:0;return d[0]=Et*ze,d[1]=Gt*ze,d[2]=re*ze,d[3]=De*Math.cos(ge),d}function ya(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Math.sqrt(Et*Et+Gt*Gt+re*re),De=ge>0?Math.atan2(ge,he)/ge:0;return d[0]=Et*De,d[1]=Gt*De,d[2]=re*De,d[3]=.5*Math.log(Et*Et+Gt*Gt+re*re+he*he),d}function di(d,G,Et){return ya(d,G),po(d,d,Et),pa(d,d),d}function Ma(d,G,Et,Gt){var re=G[0],he=G[1],ge=G[2],De=G[3],ze=Et[0],He=Et[1],ur=Et[2],Ur=Et[3],Xr,Wr,Tn,On,Qr;return Wr=re*ze+he*He+ge*ur+De*Ur,Wr<0&&(Wr=-Wr,ze=-ze,He=-He,ur=-ur,Ur=-Ur),1-Wr>p.EPSILON?(Xr=Math.acos(Wr),Tn=Math.sin(Xr),On=Math.sin((1-Gt)*Xr)/Tn,Qr=Math.sin(Gt*Xr)/Tn):(On=1-Gt,Qr=Gt),d[0]=On*re+Qr*ze,d[1]=On*he+Qr*He,d[2]=On*ge+Qr*ur,d[3]=On*De+Qr*Ur,d}function oa(d){var G=p.RANDOM(),Et=p.RANDOM(),Gt=p.RANDOM(),re=Math.sqrt(1-G),he=Math.sqrt(G);return d[0]=re*Math.sin(2*Math.PI*Et),d[1]=re*Math.cos(2*Math.PI*Et),d[2]=he*Math.sin(2*Math.PI*Gt),d[3]=he*Math.cos(2*Math.PI*Gt),d}function si(d,G){var Et=G[0],Gt=G[1],re=G[2],he=G[3],ge=Et*Et+Gt*Gt+re*re+he*he,De=ge?1/ge:0;return d[0]=-Et*De,d[1]=-Gt*De,d[2]=-re*De,d[3]=he*De,d}function $a(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d}function Fa(d,G){var Et=G[0]+G[4]+G[8],Gt;if(Et>0)Gt=Math.sqrt(Et+1),d[3]=.5*Gt,Gt=.5/Gt,d[0]=(G[5]-G[7])*Gt,d[1]=(G[6]-G[2])*Gt,d[2]=(G[1]-G[3])*Gt;else{var re=0;G[4]>G[0]&&(re=1),G[8]>G[re*3+re]&&(re=2);var he=(re+1)%3,ge=(re+2)%3;Gt=Math.sqrt(G[re*3+re]-G[he*3+he]-G[ge*3+ge]+1),d[re]=.5*Gt,Gt=.5/Gt,d[3]=(G[he*3+ge]-G[ge*3+he])*Gt,d[he]=(G[he*3+re]+G[re*3+he])*Gt,d[ge]=(G[ge*3+re]+G[re*3+ge])*Gt}return d}function Ui(d,G,Et,Gt){var re=.5*Math.PI/180;G*=re,Et*=re,Gt*=re;var he=Math.sin(G),ge=Math.cos(G),De=Math.sin(Et),ze=Math.cos(Et),He=Math.sin(Gt),ur=Math.cos(Gt);return d[0]=he*ze*ur-ge*De*He,d[1]=ge*De*ur+he*ze*He,d[2]=ge*ze*He-he*De*ur,d[3]=ge*ze*ur+he*De*He,d}function fi(d){return"quat("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}var La=ce,ja=jt,za=pe,yi=Oe,mi=Se,ki=en,po=Vn,Wi=Co,Ao=ga,Vo=Ni,os=Vo,$i=ti,qa=$i,Yi=Gi,io=Po,Qa=ro,Pi=function(){var d=Rr.create(),G=Rr.fromValues(1,0,0),Et=Rr.fromValues(0,1,0);return function(Gt,re,he){var ge=Rr.dot(re,he);return ge<-.999999?(Rr.cross(d,G,re),Rr.len(d)<1e-6&&Rr.cross(d,Et,re),Rr.normalize(d,d),Lr(Gt,d,Math.PI),Gt):ge>.999999?(Gt[0]=0,Gt[1]=0,Gt[2]=0,Gt[3]=1,Gt):(Rr.cross(d,re,he),Gt[0]=d[0],Gt[1]=d[1],Gt[2]=d[2],Gt[3]=1+ge,Yi(Gt,Gt))}}(),zo=function(){var d=Ge(),G=Ge();return function(Et,Gt,re,he,ge,De){return Ma(d,Gt,ge,De),Ma(G,re,he,De),Ma(Et,d,G,2*De*(1-De)),Et}}(),qi=function(){var d=Ar.create();return function(G,Et,Gt,re){return d[0]=Gt[0],d[3]=Gt[1],d[6]=Gt[2],d[1]=re[0],d[4]=re[1],d[7]=re[2],d[2]=-Et[0],d[5]=-Et[1],d[8]=-Et[2],Yi(G,Fa(G,d))}}();function rs(){var d=new p.ARRAY_TYPE(8);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[4]=0,d[5]=0,d[6]=0,d[7]=0),d[3]=1,d}function Xi(d){var G=new p.ARRAY_TYPE(8);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G}function yo(d,G,Et,Gt,re,he,ge,De){var ze=new p.ARRAY_TYPE(8);return ze[0]=d,ze[1]=G,ze[2]=Et,ze[3]=Gt,ze[4]=re,ze[5]=he,ze[6]=ge,ze[7]=De,ze}function Es(d,G,Et,Gt,re,he,ge){var De=new p.ARRAY_TYPE(8);De[0]=d,De[1]=G,De[2]=Et,De[3]=Gt;var ze=re*.5,He=he*.5,ur=ge*.5;return De[4]=ze*Gt+He*Et-ur*G,De[5]=He*Gt+ur*d-ze*Et,De[6]=ur*Gt+ze*G-He*d,De[7]=-ze*d-He*G-ur*Et,De}function ds(d,G,Et){var Gt=Et[0]*.5,re=Et[1]*.5,he=Et[2]*.5,ge=G[0],De=G[1],ze=G[2],He=G[3];return d[0]=ge,d[1]=De,d[2]=ze,d[3]=He,d[4]=Gt*He+re*ze-he*De,d[5]=re*He+he*ge-Gt*ze,d[6]=he*He+Gt*De-re*ge,d[7]=-Gt*ge-re*De-he*ze,d}function oo(d,G){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0]*.5,d[5]=G[1]*.5,d[6]=G[2]*.5,d[7]=0,d}function ls(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function hs(d,G){var Et=Ge();Me(Et,G);var Gt=new p.ARRAY_TYPE(3);return te(Gt,G),ds(d,Et,Gt),d}function Os(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d}function Ho(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function $t(d,G,Et,Gt,re,he,ge,De,ze){return d[0]=G,d[1]=Et,d[2]=Gt,d[3]=re,d[4]=he,d[5]=ge,d[6]=De,d[7]=ze,d}var ye=za;function ir(d,G){return d[0]=G[4],d[1]=G[5],d[2]=G[6],d[3]=G[7],d}var dr=za;function Zr(d,G){return d[4]=G[0],d[5]=G[1],d[6]=G[2],d[7]=G[3],d}function Ln(d,G){var Et=G[4],Gt=G[5],re=G[6],he=G[7],ge=-G[0],De=-G[1],ze=-G[2],He=G[3];return d[0]=(Et*He+he*ge+Gt*ze-re*De)*2,d[1]=(Gt*He+he*De+re*ge-Et*ze)*2,d[2]=(re*He+he*ze+Et*De-Gt*ge)*2,d}function Qn(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[0]*.5,ze=Et[1]*.5,He=Et[2]*.5,ur=G[4],Ur=G[5],Xr=G[6],Wr=G[7];return d[0]=Gt,d[1]=re,d[2]=he,d[3]=ge,d[4]=ge*De+re*He-he*ze+ur,d[5]=ge*ze+he*De-Gt*He+Ur,d[6]=ge*He+Gt*ze-re*De+Xr,d[7]=-Gt*De-re*ze-he*He+Wr,d}function Sa(d,G,Et){var Gt=-G[0],re=-G[1],he=-G[2],ge=G[3],De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=De*ge+ur*Gt+ze*he-He*re,Xr=ze*ge+ur*re+He*Gt-De*he,Wr=He*ge+ur*he+De*re-ze*Gt,Tn=ur*ge-De*Gt-ze*re-He*he;return fn(d,G,Et),Gt=d[0],re=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+Tn*Gt+Xr*he-Wr*re,d[5]=Xr*ge+Tn*re+Wr*Gt-Ur*he,d[6]=Wr*ge+Tn*he+Ur*re-Xr*Gt,d[7]=Tn*ge-Ur*Gt-Xr*re-Wr*he,d}function Ci(d,G,Et){var Gt=-G[0],re=-G[1],he=-G[2],ge=G[3],De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=De*ge+ur*Gt+ze*he-He*re,Xr=ze*ge+ur*re+He*Gt-De*he,Wr=He*ge+ur*he+De*re-ze*Gt,Tn=ur*ge-De*Gt-ze*re-He*he;return Pn(d,G,Et),Gt=d[0],re=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+Tn*Gt+Xr*he-Wr*re,d[5]=Xr*ge+Tn*re+Wr*Gt-Ur*he,d[6]=Wr*ge+Tn*he+Ur*re-Xr*Gt,d[7]=Tn*ge-Ur*Gt-Xr*re-Wr*he,d}function Io(d,G,Et){var Gt=-G[0],re=-G[1],he=-G[2],ge=G[3],De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=De*ge+ur*Gt+ze*he-He*re,Xr=ze*ge+ur*re+He*Gt-De*he,Wr=He*ge+ur*he+De*re-ze*Gt,Tn=ur*ge-De*Gt-ze*re-He*he;return sa(d,G,Et),Gt=d[0],re=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+Tn*Gt+Xr*he-Wr*re,d[5]=Xr*ge+Tn*re+Wr*Gt-Ur*he,d[6]=Wr*ge+Tn*he+Ur*re-Xr*Gt,d[7]=Tn*ge-Ur*Gt-Xr*re-Wr*he,d}function Go(d,G,Et){var Gt=Et[0],re=Et[1],he=Et[2],ge=Et[3],De=G[0],ze=G[1],He=G[2],ur=G[3];return d[0]=De*ge+ur*Gt+ze*he-He*re,d[1]=ze*ge+ur*re+He*Gt-De*he,d[2]=He*ge+ur*he+De*re-ze*Gt,d[3]=ur*ge-De*Gt-ze*re-He*he,De=G[4],ze=G[5],He=G[6],ur=G[7],d[4]=De*ge+ur*Gt+ze*he-He*re,d[5]=ze*ge+ur*re+He*Gt-De*he,d[6]=He*ge+ur*he+De*re-ze*Gt,d[7]=ur*ge-De*Gt-ze*re-He*he,d}function zs(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[0],ze=Et[1],He=Et[2],ur=Et[3];return d[0]=Gt*ur+ge*De+re*He-he*ze,d[1]=re*ur+ge*ze+he*De-Gt*He,d[2]=he*ur+ge*He+Gt*ze-re*De,d[3]=ge*ur-Gt*De-re*ze-he*He,De=Et[4],ze=Et[5],He=Et[6],ur=Et[7],d[4]=Gt*ur+ge*De+re*He-he*ze,d[5]=re*ur+ge*ze+he*De-Gt*He,d[6]=he*ur+ge*He+Gt*ze-re*De,d[7]=ge*ur-Gt*De-re*ze-he*He,d}function Ds(d,G,Et,Gt){if(Math.abs(Gt)<p.EPSILON)return Os(d,G);var re=Math.hypot(Et[0],Et[1],Et[2]);Gt=Gt*.5;var he=Math.sin(Gt),ge=he*Et[0]/re,De=he*Et[1]/re,ze=he*Et[2]/re,He=Math.cos(Gt),ur=G[0],Ur=G[1],Xr=G[2],Wr=G[3];d[0]=ur*He+Wr*ge+Ur*ze-Xr*De,d[1]=Ur*He+Wr*De+Xr*ge-ur*ze,d[2]=Xr*He+Wr*ze+ur*De-Ur*ge,d[3]=Wr*He-ur*ge-Ur*De-Xr*ze;var Tn=G[4],On=G[5],Qr=G[6],ra=G[7];return d[4]=Tn*He+ra*ge+On*ze-Qr*De,d[5]=On*He+ra*De+Qr*ge-Tn*ze,d[6]=Qr*He+ra*ze+Tn*De-On*ge,d[7]=ra*He-Tn*ge-On*De-Qr*ze,d}function ji(d,G,Et){return d[0]=G[0]+Et[0],d[1]=G[1]+Et[1],d[2]=G[2]+Et[2],d[3]=G[3]+Et[3],d[4]=G[4]+Et[4],d[5]=G[5]+Et[5],d[6]=G[6]+Et[6],d[7]=G[7]+Et[7],d}function xo(d,G,Et){var Gt=G[0],re=G[1],he=G[2],ge=G[3],De=Et[4],ze=Et[5],He=Et[6],ur=Et[7],Ur=G[4],Xr=G[5],Wr=G[6],Tn=G[7],On=Et[0],Qr=Et[1],ra=Et[2],Ha=Et[3];return d[0]=Gt*Ha+ge*On+re*ra-he*Qr,d[1]=re*Ha+ge*Qr+he*On-Gt*ra,d[2]=he*Ha+ge*ra+Gt*Qr-re*On,d[3]=ge*Ha-Gt*On-re*Qr-he*ra,d[4]=Gt*ur+ge*De+re*He-he*ze+Ur*Ha+Tn*On+Xr*ra-Wr*Qr,d[5]=re*ur+ge*ze+he*De-Gt*He+Xr*Ha+Tn*Qr+Wr*On-Ur*ra,d[6]=he*ur+ge*He+Gt*ze-re*De+Wr*Ha+Tn*ra+Ur*Qr-Xr*On,d[7]=ge*ur-Gt*De-re*ze-he*He+Tn*Ha-Ur*On-Xr*Qr-Wr*ra,d}var Gs=xo;function vs(d,G,Et){return d[0]=G[0]*Et,d[1]=G[1]*Et,d[2]=G[2]*Et,d[3]=G[3]*Et,d[4]=G[4]*Et,d[5]=G[5]*Et,d[6]=G[6]*Et,d[7]=G[7]*Et,d}var qs=Wi;function Qs(d,G,Et,Gt){var re=1-Gt;return qs(G,Et)<0&&(Gt=-Gt),d[0]=G[0]*re+Et[0]*Gt,d[1]=G[1]*re+Et[1]*Gt,d[2]=G[2]*re+Et[2]*Gt,d[3]=G[3]*re+Et[3]*Gt,d[4]=G[4]*re+Et[4]*Gt,d[5]=G[5]*re+Et[5]*Gt,d[6]=G[6]*re+Et[6]*Gt,d[7]=G[7]*re+Et[7]*Gt,d}function Js(d,G){var Et=ws(G);return d[0]=-G[0]/Et,d[1]=-G[1]/Et,d[2]=-G[2]/Et,d[3]=G[3]/Et,d[4]=-G[4]/Et,d[5]=-G[5]/Et,d[6]=-G[6]/Et,d[7]=G[7]/Et,d}function Vs(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d[4]=-G[4],d[5]=-G[5],d[6]=-G[6],d[7]=G[7],d}var Rs=Vo,Us=Rs,ws=$i,ns=ws;function _u(d,G){var Et=ws(G);if(Et>0){Et=Math.sqrt(Et);var Gt=G[0]/Et,re=G[1]/Et,he=G[2]/Et,ge=G[3]/Et,De=G[4],ze=G[5],He=G[6],ur=G[7],Ur=Gt*De+re*ze+he*He+ge*ur;d[0]=Gt,d[1]=re,d[2]=he,d[3]=ge,d[4]=(De-Gt*Ur)/Et,d[5]=(ze-re*Ur)/Et,d[6]=(He-he*Ur)/Et,d[7]=(ur-ge*Ur)/Et}return d}function Cu(d){return"quat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+")"}function Uo(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]}function bo(d,G){var Et=d[0],Gt=d[1],re=d[2],he=d[3],ge=d[4],De=d[5],ze=d[6],He=d[7],ur=G[0],Ur=G[1],Xr=G[2],Wr=G[3],Tn=G[4],On=G[5],Qr=G[6],ra=G[7];return Math.abs(Et-ur)<=p.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ur))&&Math.abs(Gt-Ur)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Ur))&&Math.abs(re-Xr)<=p.EPSILON*Math.max(1,Math.abs(re),Math.abs(Xr))&&Math.abs(he-Wr)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Wr))&&Math.abs(ge-Tn)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Tn))&&Math.abs(De-On)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(On))&&Math.abs(ze-Qr)<=p.EPSILON*Math.max(1,Math.abs(ze),Math.abs(Qr))&&Math.abs(He-ra)<=p.EPSILON*Math.max(1,Math.abs(He),Math.abs(ra))}var ss=C(631437)},935600:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return rt},adjoint:function(){return g},clone:function(){return T},copy:function(){return L},create:function(){return k},determinant:function(){return A},equals:function(){return Xt},exactEquals:function(){return gt},frob:function(){return tt},fromMat2d:function(){return U},fromMat4:function(){return w},fromQuat:function(){return W},fromRotation:function(){return h},fromScaling:function(){return $},fromTranslation:function(){return b},fromValues:function(){return P},identity:function(){return m},invert:function(){return y},mul:function(){return Ct},multiply:function(){return E},multiplyScalar:function(){return it},multiplyScalarAndAdd:function(){return bt},normalFromMat4:function(){return V},projection:function(){return H},rotate:function(){return F},scale:function(){return Y},set:function(){return p},str:function(){return q},sub:function(){return At},subtract:function(){return ft},translate:function(){return D},transpose:function(){return S}});var x=C(73633);function k(){var Z=new x.ARRAY_TYPE(9);return x.ARRAY_TYPE!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[5]=0,Z[6]=0,Z[7]=0),Z[0]=1,Z[4]=1,Z[8]=1,Z}function w(Z,J){return Z[0]=J[0],Z[1]=J[1],Z[2]=J[2],Z[3]=J[4],Z[4]=J[5],Z[5]=J[6],Z[6]=J[8],Z[7]=J[9],Z[8]=J[10],Z}function T(Z){var J=new x.ARRAY_TYPE(9);return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],J}function L(Z,J){return Z[0]=J[0],Z[1]=J[1],Z[2]=J[2],Z[3]=J[3],Z[4]=J[4],Z[5]=J[5],Z[6]=J[6],Z[7]=J[7],Z[8]=J[8],Z}function P(Z,J,yt,_t,nt,vt,It,Pt,St){var Dt=new x.ARRAY_TYPE(9);return Dt[0]=Z,Dt[1]=J,Dt[2]=yt,Dt[3]=_t,Dt[4]=nt,Dt[5]=vt,Dt[6]=It,Dt[7]=Pt,Dt[8]=St,Dt}function p(Z,J,yt,_t,nt,vt,It,Pt,St,Dt){return Z[0]=J,Z[1]=yt,Z[2]=_t,Z[3]=nt,Z[4]=vt,Z[5]=It,Z[6]=Pt,Z[7]=St,Z[8]=Dt,Z}function m(Z){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function S(Z,J){if(Z===J){var yt=J[1],_t=J[2],nt=J[5];Z[1]=J[3],Z[2]=J[6],Z[3]=yt,Z[5]=J[7],Z[6]=_t,Z[7]=nt}else Z[0]=J[0],Z[1]=J[3],Z[2]=J[6],Z[3]=J[1],Z[4]=J[4],Z[5]=J[7],Z[6]=J[2],Z[7]=J[5],Z[8]=J[8];return Z}function y(Z,J){var yt=J[0],_t=J[1],nt=J[2],vt=J[3],It=J[4],Pt=J[5],St=J[6],Dt=J[7],Qt=J[8],ue=Qt*It-Pt*Dt,ie=-Qt*vt+Pt*St,Lt=Dt*vt-It*St,ne=yt*ue+_t*ie+nt*Lt;return ne?(ne=1/ne,Z[0]=ue*ne,Z[1]=(-Qt*_t+nt*Dt)*ne,Z[2]=(Pt*_t-nt*It)*ne,Z[3]=ie*ne,Z[4]=(Qt*yt-nt*St)*ne,Z[5]=(-Pt*yt+nt*vt)*ne,Z[6]=Lt*ne,Z[7]=(-Dt*yt+_t*St)*ne,Z[8]=(It*yt-_t*vt)*ne,Z):null}function g(Z,J){var yt=J[0],_t=J[1],nt=J[2],vt=J[3],It=J[4],Pt=J[5],St=J[6],Dt=J[7],Qt=J[8];return Z[0]=It*Qt-Pt*Dt,Z[1]=nt*Dt-_t*Qt,Z[2]=_t*Pt-nt*It,Z[3]=Pt*St-vt*Qt,Z[4]=yt*Qt-nt*St,Z[5]=nt*vt-yt*Pt,Z[6]=vt*Dt-It*St,Z[7]=_t*St-yt*Dt,Z[8]=yt*It-_t*vt,Z}function A(Z){var J=Z[0],yt=Z[1],_t=Z[2],nt=Z[3],vt=Z[4],It=Z[5],Pt=Z[6],St=Z[7],Dt=Z[8];return J*(Dt*vt-It*St)+yt*(-Dt*nt+It*Pt)+_t*(St*nt-vt*Pt)}function E(Z,J,yt){var _t=J[0],nt=J[1],vt=J[2],It=J[3],Pt=J[4],St=J[5],Dt=J[6],Qt=J[7],ue=J[8],ie=yt[0],Lt=yt[1],ne=yt[2],ve=yt[3],Wt=yt[4],ae=yt[5],Ce=yt[6],xe=yt[7],Jt=yt[8];return Z[0]=ie*_t+Lt*It+ne*Dt,Z[1]=ie*nt+Lt*Pt+ne*Qt,Z[2]=ie*vt+Lt*St+ne*ue,Z[3]=ve*_t+Wt*It+ae*Dt,Z[4]=ve*nt+Wt*Pt+ae*Qt,Z[5]=ve*vt+Wt*St+ae*ue,Z[6]=Ce*_t+xe*It+Jt*Dt,Z[7]=Ce*nt+xe*Pt+Jt*Qt,Z[8]=Ce*vt+xe*St+Jt*ue,Z}function D(Z,J,yt){var _t=J[0],nt=J[1],vt=J[2],It=J[3],Pt=J[4],St=J[5],Dt=J[6],Qt=J[7],ue=J[8],ie=yt[0],Lt=yt[1];return Z[0]=_t,Z[1]=nt,Z[2]=vt,Z[3]=It,Z[4]=Pt,Z[5]=St,Z[6]=ie*_t+Lt*It+Dt,Z[7]=ie*nt+Lt*Pt+Qt,Z[8]=ie*vt+Lt*St+ue,Z}function F(Z,J,yt){var _t=J[0],nt=J[1],vt=J[2],It=J[3],Pt=J[4],St=J[5],Dt=J[6],Qt=J[7],ue=J[8],ie=Math.sin(yt),Lt=Math.cos(yt);return Z[0]=Lt*_t+ie*It,Z[1]=Lt*nt+ie*Pt,Z[2]=Lt*vt+ie*St,Z[3]=Lt*It-ie*_t,Z[4]=Lt*Pt-ie*nt,Z[5]=Lt*St-ie*vt,Z[6]=Dt,Z[7]=Qt,Z[8]=ue,Z}function Y(Z,J,yt){var _t=yt[0],nt=yt[1];return Z[0]=_t*J[0],Z[1]=_t*J[1],Z[2]=_t*J[2],Z[3]=nt*J[3],Z[4]=nt*J[4],Z[5]=nt*J[5],Z[6]=J[6],Z[7]=J[7],Z[8]=J[8],Z}function b(Z,J){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=J[0],Z[7]=J[1],Z[8]=1,Z}function h(Z,J){var yt=Math.sin(J),_t=Math.cos(J);return Z[0]=_t,Z[1]=yt,Z[2]=0,Z[3]=-yt,Z[4]=_t,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function $(Z,J){return Z[0]=J[0],Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=J[1],Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function U(Z,J){return Z[0]=J[0],Z[1]=J[1],Z[2]=0,Z[3]=J[2],Z[4]=J[3],Z[5]=0,Z[6]=J[4],Z[7]=J[5],Z[8]=1,Z}function W(Z,J){var yt=J[0],_t=J[1],nt=J[2],vt=J[3],It=yt+yt,Pt=_t+_t,St=nt+nt,Dt=yt*It,Qt=_t*It,ue=_t*Pt,ie=nt*It,Lt=nt*Pt,ne=nt*St,ve=vt*It,Wt=vt*Pt,ae=vt*St;return Z[0]=1-ue-ne,Z[3]=Qt-ae,Z[6]=ie+Wt,Z[1]=Qt+ae,Z[4]=1-Dt-ne,Z[7]=Lt-ve,Z[2]=ie-Wt,Z[5]=Lt+ve,Z[8]=1-Dt-ue,Z}function V(Z,J){var yt=J[0],_t=J[1],nt=J[2],vt=J[3],It=J[4],Pt=J[5],St=J[6],Dt=J[7],Qt=J[8],ue=J[9],ie=J[10],Lt=J[11],ne=J[12],ve=J[13],Wt=J[14],ae=J[15],Ce=yt*Pt-_t*It,xe=yt*St-nt*It,Jt=yt*Dt-vt*It,we=_t*St-nt*Pt,Tt=_t*Dt-vt*Pt,Pe=nt*Dt-vt*St,_r=Qt*ve-ue*ne,Ar=Qt*Wt-ie*ne,Or=Qt*ae-Lt*ne,Br=ue*Wt-ie*ve,cn=ue*ae-Lt*ve,an=ie*ae-Lt*Wt,Dn=Ce*an-xe*cn+Jt*Br+we*Or-Tt*Ar+Pe*_r;return Dn?(Dn=1/Dn,Z[0]=(Pt*an-St*cn+Dt*Br)*Dn,Z[1]=(St*Or-It*an-Dt*Ar)*Dn,Z[2]=(It*cn-Pt*Or+Dt*_r)*Dn,Z[3]=(nt*cn-_t*an-vt*Br)*Dn,Z[4]=(yt*an-nt*Or+vt*Ar)*Dn,Z[5]=(_t*Or-yt*cn-vt*_r)*Dn,Z[6]=(ve*Pe-Wt*Tt+ae*we)*Dn,Z[7]=(Wt*Jt-ne*Pe-ae*xe)*Dn,Z[8]=(ne*Tt-ve*Jt+ae*Ce)*Dn,Z):null}function H(Z,J,yt){return Z[0]=2/J,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=-2/yt,Z[5]=0,Z[6]=-1,Z[7]=1,Z[8]=1,Z}function q(Z){return"mat3("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+")"}function tt(Z){return Math.hypot(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8])}function rt(Z,J,yt){return Z[0]=J[0]+yt[0],Z[1]=J[1]+yt[1],Z[2]=J[2]+yt[2],Z[3]=J[3]+yt[3],Z[4]=J[4]+yt[4],Z[5]=J[5]+yt[5],Z[6]=J[6]+yt[6],Z[7]=J[7]+yt[7],Z[8]=J[8]+yt[8],Z}function ft(Z,J,yt){return Z[0]=J[0]-yt[0],Z[1]=J[1]-yt[1],Z[2]=J[2]-yt[2],Z[3]=J[3]-yt[3],Z[4]=J[4]-yt[4],Z[5]=J[5]-yt[5],Z[6]=J[6]-yt[6],Z[7]=J[7]-yt[7],Z[8]=J[8]-yt[8],Z}function it(Z,J,yt){return Z[0]=J[0]*yt,Z[1]=J[1]*yt,Z[2]=J[2]*yt,Z[3]=J[3]*yt,Z[4]=J[4]*yt,Z[5]=J[5]*yt,Z[6]=J[6]*yt,Z[7]=J[7]*yt,Z[8]=J[8]*yt,Z}function bt(Z,J,yt,_t){return Z[0]=J[0]+yt[0]*_t,Z[1]=J[1]+yt[1]*_t,Z[2]=J[2]+yt[2]*_t,Z[3]=J[3]+yt[3]*_t,Z[4]=J[4]+yt[4]*_t,Z[5]=J[5]+yt[5]*_t,Z[6]=J[6]+yt[6]*_t,Z[7]=J[7]+yt[7]*_t,Z[8]=J[8]+yt[8]*_t,Z}function gt(Z,J){return Z[0]===J[0]&&Z[1]===J[1]&&Z[2]===J[2]&&Z[3]===J[3]&&Z[4]===J[4]&&Z[5]===J[5]&&Z[6]===J[6]&&Z[7]===J[7]&&Z[8]===J[8]}function Xt(Z,J){var yt=Z[0],_t=Z[1],nt=Z[2],vt=Z[3],It=Z[4],Pt=Z[5],St=Z[6],Dt=Z[7],Qt=Z[8],ue=J[0],ie=J[1],Lt=J[2],ne=J[3],ve=J[4],Wt=J[5],ae=J[6],Ce=J[7],xe=J[8];return Math.abs(yt-ue)<=x.EPSILON*Math.max(1,Math.abs(yt),Math.abs(ue))&&Math.abs(_t-ie)<=x.EPSILON*Math.max(1,Math.abs(_t),Math.abs(ie))&&Math.abs(nt-Lt)<=x.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Lt))&&Math.abs(vt-ne)<=x.EPSILON*Math.max(1,Math.abs(vt),Math.abs(ne))&&Math.abs(It-ve)<=x.EPSILON*Math.max(1,Math.abs(It),Math.abs(ve))&&Math.abs(Pt-Wt)<=x.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Wt))&&Math.abs(St-ae)<=x.EPSILON*Math.max(1,Math.abs(St),Math.abs(ae))&&Math.abs(Dt-Ce)<=x.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(Ce))&&Math.abs(Qt-xe)<=x.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(xe))}var Ct=E,At=ft},631437:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return p},angle:function(){return Z},ceil:function(){return g},clone:function(){return w},copy:function(){return L},create:function(){return k},cross:function(){return rt},dist:function(){return Dt},distance:function(){return h},div:function(){return St},divide:function(){return y},dot:function(){return tt},equals:function(){return nt},exactEquals:function(){return _t},floor:function(){return A},forEach:function(){return ie},fromValues:function(){return T},inverse:function(){return H},len:function(){return vt},length:function(){return U},lerp:function(){return ft},max:function(){return D},min:function(){return E},mul:function(){return Pt},multiply:function(){return S},negate:function(){return V},normalize:function(){return q},random:function(){return it},rotate:function(){return At},round:function(){return F},scale:function(){return Y},scaleAndAdd:function(){return b},set:function(){return P},sqrDist:function(){return Qt},sqrLen:function(){return ue},squaredDistance:function(){return $},squaredLength:function(){return W},str:function(){return yt},sub:function(){return It},subtract:function(){return m},transformMat2:function(){return bt},transformMat2d:function(){return gt},transformMat3:function(){return Xt},transformMat4:function(){return Ct},zero:function(){return J}});var x=C(73633);function k(){var Lt=new x.ARRAY_TYPE(2);return x.ARRAY_TYPE!=Float32Array&&(Lt[0]=0,Lt[1]=0),Lt}function w(Lt){var ne=new x.ARRAY_TYPE(2);return ne[0]=Lt[0],ne[1]=Lt[1],ne}function T(Lt,ne){var ve=new x.ARRAY_TYPE(2);return ve[0]=Lt,ve[1]=ne,ve}function L(Lt,ne){return Lt[0]=ne[0],Lt[1]=ne[1],Lt}function P(Lt,ne,ve){return Lt[0]=ne,Lt[1]=ve,Lt}function p(Lt,ne,ve){return Lt[0]=ne[0]+ve[0],Lt[1]=ne[1]+ve[1],Lt}function m(Lt,ne,ve){return Lt[0]=ne[0]-ve[0],Lt[1]=ne[1]-ve[1],Lt}function S(Lt,ne,ve){return Lt[0]=ne[0]*ve[0],Lt[1]=ne[1]*ve[1],Lt}function y(Lt,ne,ve){return Lt[0]=ne[0]/ve[0],Lt[1]=ne[1]/ve[1],Lt}function g(Lt,ne){return Lt[0]=Math.ceil(ne[0]),Lt[1]=Math.ceil(ne[1]),Lt}function A(Lt,ne){return Lt[0]=Math.floor(ne[0]),Lt[1]=Math.floor(ne[1]),Lt}function E(Lt,ne,ve){return Lt[0]=Math.min(ne[0],ve[0]),Lt[1]=Math.min(ne[1],ve[1]),Lt}function D(Lt,ne,ve){return Lt[0]=Math.max(ne[0],ve[0]),Lt[1]=Math.max(ne[1],ve[1]),Lt}function F(Lt,ne){return Lt[0]=Math.round(ne[0]),Lt[1]=Math.round(ne[1]),Lt}function Y(Lt,ne,ve){return Lt[0]=ne[0]*ve,Lt[1]=ne[1]*ve,Lt}function b(Lt,ne,ve,Wt){return Lt[0]=ne[0]+ve[0]*Wt,Lt[1]=ne[1]+ve[1]*Wt,Lt}function h(Lt,ne){var ve=ne[0]-Lt[0],Wt=ne[1]-Lt[1];return Math.hypot(ve,Wt)}function $(Lt,ne){var ve=ne[0]-Lt[0],Wt=ne[1]-Lt[1];return ve*ve+Wt*Wt}function U(Lt){var ne=Lt[0],ve=Lt[1];return Math.hypot(ne,ve)}function W(Lt){var ne=Lt[0],ve=Lt[1];return ne*ne+ve*ve}function V(Lt,ne){return Lt[0]=-ne[0],Lt[1]=-ne[1],Lt}function H(Lt,ne){return Lt[0]=1/ne[0],Lt[1]=1/ne[1],Lt}function q(Lt,ne){var ve=ne[0],Wt=ne[1],ae=ve*ve+Wt*Wt;return ae>0&&(ae=1/Math.sqrt(ae)),Lt[0]=ne[0]*ae,Lt[1]=ne[1]*ae,Lt}function tt(Lt,ne){return Lt[0]*ne[0]+Lt[1]*ne[1]}function rt(Lt,ne,ve){var Wt=ne[0]*ve[1]-ne[1]*ve[0];return Lt[0]=Lt[1]=0,Lt[2]=Wt,Lt}function ft(Lt,ne,ve,Wt){var ae=ne[0],Ce=ne[1];return Lt[0]=ae+Wt*(ve[0]-ae),Lt[1]=Ce+Wt*(ve[1]-Ce),Lt}function it(Lt,ne){ne=ne||1;var ve=x.RANDOM()*2*Math.PI;return Lt[0]=Math.cos(ve)*ne,Lt[1]=Math.sin(ve)*ne,Lt}function bt(Lt,ne,ve){var Wt=ne[0],ae=ne[1];return Lt[0]=ve[0]*Wt+ve[2]*ae,Lt[1]=ve[1]*Wt+ve[3]*ae,Lt}function gt(Lt,ne,ve){var Wt=ne[0],ae=ne[1];return Lt[0]=ve[0]*Wt+ve[2]*ae+ve[4],Lt[1]=ve[1]*Wt+ve[3]*ae+ve[5],Lt}function Xt(Lt,ne,ve){var Wt=ne[0],ae=ne[1];return Lt[0]=ve[0]*Wt+ve[3]*ae+ve[6],Lt[1]=ve[1]*Wt+ve[4]*ae+ve[7],Lt}function Ct(Lt,ne,ve){var Wt=ne[0],ae=ne[1];return Lt[0]=ve[0]*Wt+ve[4]*ae+ve[12],Lt[1]=ve[1]*Wt+ve[5]*ae+ve[13],Lt}function At(Lt,ne,ve,Wt){var ae=ne[0]-ve[0],Ce=ne[1]-ve[1],xe=Math.sin(Wt),Jt=Math.cos(Wt);return Lt[0]=ae*Jt-Ce*xe+ve[0],Lt[1]=ae*xe+Ce*Jt+ve[1],Lt}function Z(Lt,ne){var ve=Lt[0],Wt=Lt[1],ae=ne[0],Ce=ne[1],xe=Math.sqrt(ve*ve+Wt*Wt)*Math.sqrt(ae*ae+Ce*Ce),Jt=xe&&(ve*ae+Wt*Ce)/xe;return Math.acos(Math.min(Math.max(Jt,-1),1))}function J(Lt){return Lt[0]=0,Lt[1]=0,Lt}function yt(Lt){return"vec2("+Lt[0]+", "+Lt[1]+")"}function _t(Lt,ne){return Lt[0]===ne[0]&&Lt[1]===ne[1]}function nt(Lt,ne){var ve=Lt[0],Wt=Lt[1],ae=ne[0],Ce=ne[1];return Math.abs(ve-ae)<=x.EPSILON*Math.max(1,Math.abs(ve),Math.abs(ae))&&Math.abs(Wt-Ce)<=x.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(Ce))}var vt=U,It=m,Pt=S,St=y,Dt=h,Qt=$,ue=W,ie=function(){var Lt=k();return function(ne,ve,Wt,ae,Ce,xe){var Jt,we;for(ve||(ve=2),Wt||(Wt=0),ae?we=Math.min(ae*ve+Wt,ne.length):we=ne.length,Jt=Wt;Jt<we;Jt+=ve)Lt[0]=ne[Jt],Lt[1]=ne[Jt+1],Ce(Lt,Lt,xe),ne[Jt]=Lt[0],ne[Jt+1]=Lt[1];return ne}}()},277160:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return m},angle:function(){return _t},bezier:function(){return bt},ceil:function(){return A},clone:function(){return w},copy:function(){return P},create:function(){return k},cross:function(){return rt},dist:function(){return ue},distance:function(){return $},div:function(){return Qt},divide:function(){return g},dot:function(){return tt},equals:function(){return Pt},exactEquals:function(){return It},floor:function(){return E},forEach:function(){return ve},fromValues:function(){return L},hermite:function(){return it},inverse:function(){return H},len:function(){return Lt},length:function(){return T},lerp:function(){return ft},max:function(){return F},min:function(){return D},mul:function(){return Dt},multiply:function(){return y},negate:function(){return V},normalize:function(){return q},random:function(){return gt},rotateX:function(){return Z},rotateY:function(){return J},rotateZ:function(){return yt},round:function(){return Y},scale:function(){return b},scaleAndAdd:function(){return h},set:function(){return p},sqrDist:function(){return ie},sqrLen:function(){return ne},squaredDistance:function(){return U},squaredLength:function(){return W},str:function(){return vt},sub:function(){return St},subtract:function(){return S},transformMat3:function(){return Ct},transformMat4:function(){return Xt},transformQuat:function(){return At},zero:function(){return nt}});var x=C(73633);function k(){var Wt=new x.ARRAY_TYPE(3);return x.ARRAY_TYPE!=Float32Array&&(Wt[0]=0,Wt[1]=0,Wt[2]=0),Wt}function w(Wt){var ae=new x.ARRAY_TYPE(3);return ae[0]=Wt[0],ae[1]=Wt[1],ae[2]=Wt[2],ae}function T(Wt){var ae=Wt[0],Ce=Wt[1],xe=Wt[2];return Math.hypot(ae,Ce,xe)}function L(Wt,ae,Ce){var xe=new x.ARRAY_TYPE(3);return xe[0]=Wt,xe[1]=ae,xe[2]=Ce,xe}function P(Wt,ae){return Wt[0]=ae[0],Wt[1]=ae[1],Wt[2]=ae[2],Wt}function p(Wt,ae,Ce,xe){return Wt[0]=ae,Wt[1]=Ce,Wt[2]=xe,Wt}function m(Wt,ae,Ce){return Wt[0]=ae[0]+Ce[0],Wt[1]=ae[1]+Ce[1],Wt[2]=ae[2]+Ce[2],Wt}function S(Wt,ae,Ce){return Wt[0]=ae[0]-Ce[0],Wt[1]=ae[1]-Ce[1],Wt[2]=ae[2]-Ce[2],Wt}function y(Wt,ae,Ce){return Wt[0]=ae[0]*Ce[0],Wt[1]=ae[1]*Ce[1],Wt[2]=ae[2]*Ce[2],Wt}function g(Wt,ae,Ce){return Wt[0]=ae[0]/Ce[0],Wt[1]=ae[1]/Ce[1],Wt[2]=ae[2]/Ce[2],Wt}function A(Wt,ae){return Wt[0]=Math.ceil(ae[0]),Wt[1]=Math.ceil(ae[1]),Wt[2]=Math.ceil(ae[2]),Wt}function E(Wt,ae){return Wt[0]=Math.floor(ae[0]),Wt[1]=Math.floor(ae[1]),Wt[2]=Math.floor(ae[2]),Wt}function D(Wt,ae,Ce){return Wt[0]=Math.min(ae[0],Ce[0]),Wt[1]=Math.min(ae[1],Ce[1]),Wt[2]=Math.min(ae[2],Ce[2]),Wt}function F(Wt,ae,Ce){return Wt[0]=Math.max(ae[0],Ce[0]),Wt[1]=Math.max(ae[1],Ce[1]),Wt[2]=Math.max(ae[2],Ce[2]),Wt}function Y(Wt,ae){return Wt[0]=Math.round(ae[0]),Wt[1]=Math.round(ae[1]),Wt[2]=Math.round(ae[2]),Wt}function b(Wt,ae,Ce){return Wt[0]=ae[0]*Ce,Wt[1]=ae[1]*Ce,Wt[2]=ae[2]*Ce,Wt}function h(Wt,ae,Ce,xe){return Wt[0]=ae[0]+Ce[0]*xe,Wt[1]=ae[1]+Ce[1]*xe,Wt[2]=ae[2]+Ce[2]*xe,Wt}function $(Wt,ae){var Ce=ae[0]-Wt[0],xe=ae[1]-Wt[1],Jt=ae[2]-Wt[2];return Math.hypot(Ce,xe,Jt)}function U(Wt,ae){var Ce=ae[0]-Wt[0],xe=ae[1]-Wt[1],Jt=ae[2]-Wt[2];return Ce*Ce+xe*xe+Jt*Jt}function W(Wt){var ae=Wt[0],Ce=Wt[1],xe=Wt[2];return ae*ae+Ce*Ce+xe*xe}function V(Wt,ae){return Wt[0]=-ae[0],Wt[1]=-ae[1],Wt[2]=-ae[2],Wt}function H(Wt,ae){return Wt[0]=1/ae[0],Wt[1]=1/ae[1],Wt[2]=1/ae[2],Wt}function q(Wt,ae){var Ce=ae[0],xe=ae[1],Jt=ae[2],we=Ce*Ce+xe*xe+Jt*Jt;return we>0&&(we=1/Math.sqrt(we)),Wt[0]=ae[0]*we,Wt[1]=ae[1]*we,Wt[2]=ae[2]*we,Wt}function tt(Wt,ae){return Wt[0]*ae[0]+Wt[1]*ae[1]+Wt[2]*ae[2]}function rt(Wt,ae,Ce){var xe=ae[0],Jt=ae[1],we=ae[2],Tt=Ce[0],Pe=Ce[1],_r=Ce[2];return Wt[0]=Jt*_r-we*Pe,Wt[1]=we*Tt-xe*_r,Wt[2]=xe*Pe-Jt*Tt,Wt}function ft(Wt,ae,Ce,xe){var Jt=ae[0],we=ae[1],Tt=ae[2];return Wt[0]=Jt+xe*(Ce[0]-Jt),Wt[1]=we+xe*(Ce[1]-we),Wt[2]=Tt+xe*(Ce[2]-Tt),Wt}function it(Wt,ae,Ce,xe,Jt,we){var Tt=we*we,Pe=Tt*(2*we-3)+1,_r=Tt*(we-2)+we,Ar=Tt*(we-1),Or=Tt*(3-2*we);return Wt[0]=ae[0]*Pe+Ce[0]*_r+xe[0]*Ar+Jt[0]*Or,Wt[1]=ae[1]*Pe+Ce[1]*_r+xe[1]*Ar+Jt[1]*Or,Wt[2]=ae[2]*Pe+Ce[2]*_r+xe[2]*Ar+Jt[2]*Or,Wt}function bt(Wt,ae,Ce,xe,Jt,we){var Tt=1-we,Pe=Tt*Tt,_r=we*we,Ar=Pe*Tt,Or=3*we*Pe,Br=3*_r*Tt,cn=_r*we;return Wt[0]=ae[0]*Ar+Ce[0]*Or+xe[0]*Br+Jt[0]*cn,Wt[1]=ae[1]*Ar+Ce[1]*Or+xe[1]*Br+Jt[1]*cn,Wt[2]=ae[2]*Ar+Ce[2]*Or+xe[2]*Br+Jt[2]*cn,Wt}function gt(Wt,ae){ae=ae||1;var Ce=x.RANDOM()*2*Math.PI,xe=x.RANDOM()*2-1,Jt=Math.sqrt(1-xe*xe)*ae;return Wt[0]=Math.cos(Ce)*Jt,Wt[1]=Math.sin(Ce)*Jt,Wt[2]=xe*ae,Wt}function Xt(Wt,ae,Ce){var xe=ae[0],Jt=ae[1],we=ae[2],Tt=Ce[3]*xe+Ce[7]*Jt+Ce[11]*we+Ce[15];return Tt=Tt||1,Wt[0]=(Ce[0]*xe+Ce[4]*Jt+Ce[8]*we+Ce[12])/Tt,Wt[1]=(Ce[1]*xe+Ce[5]*Jt+Ce[9]*we+Ce[13])/Tt,Wt[2]=(Ce[2]*xe+Ce[6]*Jt+Ce[10]*we+Ce[14])/Tt,Wt}function Ct(Wt,ae,Ce){var xe=ae[0],Jt=ae[1],we=ae[2];return Wt[0]=xe*Ce[0]+Jt*Ce[3]+we*Ce[6],Wt[1]=xe*Ce[1]+Jt*Ce[4]+we*Ce[7],Wt[2]=xe*Ce[2]+Jt*Ce[5]+we*Ce[8],Wt}function At(Wt,ae,Ce){var xe=Ce[0],Jt=Ce[1],we=Ce[2],Tt=Ce[3],Pe=ae[0],_r=ae[1],Ar=ae[2],Or=Jt*Ar-we*_r,Br=we*Pe-xe*Ar,cn=xe*_r-Jt*Pe,an=Jt*cn-we*Br,Dn=we*Or-xe*cn,Un=xe*Br-Jt*Or,Xn=Tt*2;return Or*=Xn,Br*=Xn,cn*=Xn,an*=2,Dn*=2,Un*=2,Wt[0]=Pe+Or+an,Wt[1]=_r+Br+Dn,Wt[2]=Ar+cn+Un,Wt}function Z(Wt,ae,Ce,xe){var Jt=[],we=[];return Jt[0]=ae[0]-Ce[0],Jt[1]=ae[1]-Ce[1],Jt[2]=ae[2]-Ce[2],we[0]=Jt[0],we[1]=Jt[1]*Math.cos(xe)-Jt[2]*Math.sin(xe),we[2]=Jt[1]*Math.sin(xe)+Jt[2]*Math.cos(xe),Wt[0]=we[0]+Ce[0],Wt[1]=we[1]+Ce[1],Wt[2]=we[2]+Ce[2],Wt}function J(Wt,ae,Ce,xe){var Jt=[],we=[];return Jt[0]=ae[0]-Ce[0],Jt[1]=ae[1]-Ce[1],Jt[2]=ae[2]-Ce[2],we[0]=Jt[2]*Math.sin(xe)+Jt[0]*Math.cos(xe),we[1]=Jt[1],we[2]=Jt[2]*Math.cos(xe)-Jt[0]*Math.sin(xe),Wt[0]=we[0]+Ce[0],Wt[1]=we[1]+Ce[1],Wt[2]=we[2]+Ce[2],Wt}function yt(Wt,ae,Ce,xe){var Jt=[],we=[];return Jt[0]=ae[0]-Ce[0],Jt[1]=ae[1]-Ce[1],Jt[2]=ae[2]-Ce[2],we[0]=Jt[0]*Math.cos(xe)-Jt[1]*Math.sin(xe),we[1]=Jt[0]*Math.sin(xe)+Jt[1]*Math.cos(xe),we[2]=Jt[2],Wt[0]=we[0]+Ce[0],Wt[1]=we[1]+Ce[1],Wt[2]=we[2]+Ce[2],Wt}function _t(Wt,ae){var Ce=Wt[0],xe=Wt[1],Jt=Wt[2],we=ae[0],Tt=ae[1],Pe=ae[2],_r=Math.sqrt(Ce*Ce+xe*xe+Jt*Jt),Ar=Math.sqrt(we*we+Tt*Tt+Pe*Pe),Or=_r*Ar,Br=Or&&tt(Wt,ae)/Or;return Math.acos(Math.min(Math.max(Br,-1),1))}function nt(Wt){return Wt[0]=0,Wt[1]=0,Wt[2]=0,Wt}function vt(Wt){return"vec3("+Wt[0]+", "+Wt[1]+", "+Wt[2]+")"}function It(Wt,ae){return Wt[0]===ae[0]&&Wt[1]===ae[1]&&Wt[2]===ae[2]}function Pt(Wt,ae){var Ce=Wt[0],xe=Wt[1],Jt=Wt[2],we=ae[0],Tt=ae[1],Pe=ae[2];return Math.abs(Ce-we)<=x.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(we))&&Math.abs(xe-Tt)<=x.EPSILON*Math.max(1,Math.abs(xe),Math.abs(Tt))&&Math.abs(Jt-Pe)<=x.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(Pe))}var St=S,Dt=y,Qt=g,ue=$,ie=U,Lt=T,ne=W,ve=function(){var Wt=k();return function(ae,Ce,xe,Jt,we,Tt){var Pe,_r;for(Ce||(Ce=3),xe||(xe=0),Jt?_r=Math.min(Jt*Ce+xe,ae.length):_r=ae.length,Pe=xe;Pe<_r;Pe+=Ce)Wt[0]=ae[Pe],Wt[1]=ae[Pe+1],Wt[2]=ae[Pe+2],we(Wt,Wt,Tt),ae[Pe]=Wt[0],ae[Pe+1]=Wt[1],ae[Pe+2]=Wt[2];return ae}}()},738186:function(Ve){var z=[],C=[],x="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function k(T,L){if(L=L||{},T===void 0)throw new Error(x);var P=L.prepend===!0?"prepend":"append",p=L.container!==void 0?L.container:document.querySelector("head"),m=z.indexOf(p);m===-1&&(m=z.push(p)-1,C[m]={});var S;return C[m]!==void 0&&C[m][P]!==void 0?S=C[m][P]:(S=C[m][P]=w(),P==="prepend"?p.insertBefore(S,p.childNodes[0]):p.appendChild(S)),T.charCodeAt(0)===65279&&(T=T.substr(1,T.length)),S.styleSheet?S.styleSheet.cssText+=T:S.textContent+=T,S}function w(){var T=document.createElement("style");return T.setAttribute("type","text/css"),T}Ve.exports=k,Ve.exports.insertCss=k},896874:function(Ve){function z(C,x,k){switch(k.length){case 0:return C.call(x);case 1:return C.call(x,k[0]);case 2:return C.call(x,k[0],k[1]);case 3:return C.call(x,k[0],k[1],k[2])}return C.apply(x,k)}Ve.exports=z},829932:function(Ve){function z(C,x){for(var k=-1,w=C==null?0:C.length,T=Array(w);++k<w;)T[k]=x(C[k],k,C);return T}Ve.exports=z},920731:function(Ve,z,C){var x=C(288668),k=C(447443),w=C(301196),T=C(829932),L=C(307518),P=C(274757),p=200;function m(S,y,g,A){var E=-1,D=k,F=!0,Y=S.length,b=[],h=y.length;if(!Y)return b;g&&(y=T(y,L(g))),A?(D=w,F=!1):y.length>=p&&(D=P,F=!1,y=new x(y));t:for(;++E<Y;){var $=S[E],U=g==null?$:g($);if($=A||$!==0?$:0,F&&U===U){for(var W=h;W--;)if(y[W]===U)continue t;b.push($)}else D(y,U,A)||b.push($)}return b}Ve.exports=m},238749:function(Ve,z,C){var x=C(644239),k=C(541780),w=C(637005),T="[object Arguments]",L="[object Array]",P="[object Boolean]",p="[object Date]",m="[object Error]",S="[object Function]",y="[object Map]",g="[object Number]",A="[object Object]",E="[object RegExp]",D="[object Set]",F="[object String]",Y="[object WeakMap]",b="[object ArrayBuffer]",h="[object DataView]",$="[object Float32Array]",U="[object Float64Array]",W="[object Int8Array]",V="[object Int16Array]",H="[object Int32Array]",q="[object Uint8Array]",tt="[object Uint8ClampedArray]",rt="[object Uint16Array]",ft="[object Uint32Array]",it={};it[$]=it[U]=it[W]=it[V]=it[H]=it[q]=it[tt]=it[rt]=it[ft]=!0,it[T]=it[L]=it[b]=it[P]=it[h]=it[p]=it[m]=it[S]=it[y]=it[g]=it[A]=it[E]=it[D]=it[F]=it[Y]=!1;function bt(gt){return w(gt)&&k(gt.length)&&!!it[x(gt)]}Ve.exports=bt},105976:function(Ve,z,C){var x=C(406557),k=C(545357),w=C(430061);function T(L,P){return w(k(L,P,x),L+"")}Ve.exports=T},356560:function(Ve,z,C){var x=C(575703),k=C(538777),w=C(406557),T=k?function(L,P){return k(L,"toString",{configurable:!0,enumerable:!1,value:x(P),writable:!0})}:w;Ve.exports=T},307518:function(Ve){function z(C){return function(x){return C(x)}}Ve.exports=z},538777:function(Ve,z,C){var x=C(610852),k=function(){try{var w=x(Object,"defineProperty");return w({},"",{}),w}catch(T){}}();Ve.exports=k},385924:function(Ve,z,C){var x=C(205569),k=x(Object.getPrototypeOf,Object);Ve.exports=k},531167:function(Ve,z,C){Ve=C.nmd(Ve);var x=C(431957),k=z&&!z.nodeType&&z,w=k&&!0&&Ve&&!Ve.nodeType&&Ve,T=w&&w.exports===k,L=T&&x.process,P=function(){try{var p=w&&w.require&&w.require("util").types;return p||L&&L.binding&&L.binding("util")}catch(m){}}();Ve.exports=P},205569:function(Ve){function z(C,x){return function(k){return C(x(k))}}Ve.exports=z},545357:function(Ve,z,C){var x=C(896874),k=Math.max;function w(T,L,P){return L=k(L===void 0?T.length-1:L,0),function(){for(var p=arguments,m=-1,S=k(p.length-L,0),y=Array(S);++m<S;)y[m]=p[L+m];m=-1;for(var g=Array(L+1);++m<L;)g[m]=p[m];return g[L]=P(y),x(T,this,g)}}Ve.exports=w},430061:function(Ve,z,C){var x=C(356560),k=C(521275),w=k(x);Ve.exports=w},521275:function(Ve){var z=800,C=16,x=Date.now;function k(w){var T=0,L=0;return function(){var P=x(),p=C-(P-L);if(L=P,p>0){if(++T>=z)return arguments[0]}else T=0;return w.apply(void 0,arguments)}}Ve.exports=k},575703:function(Ve){function z(C){return function(){return C}}Ve.exports=z},291966:function(Ve,z,C){var x=C(920731),k=C(121078),w=C(105976),T=C(229246),L=w(function(P,p){return T(P)?x(P,k(p,1,T,!0)):[]});Ve.exports=L},406557:function(Ve){function z(C){return C}Ve.exports=z},498612:function(Ve,z,C){var x=C(623560),k=C(541780);function w(T){return T!=null&&k(T.length)&&!x(T)}Ve.exports=w},229246:function(Ve,z,C){var x=C(498612),k=C(637005);function w(T){return k(T)&&x(T)}Ve.exports=w},541780:function(Ve){var z=9007199254740991;function C(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=z}Ve.exports=C},281763:function(Ve,z,C){var x=C(644239),k=C(637005),w="[object Number]";function T(L){return typeof L=="number"||k(L)&&x(L)==w}Ve.exports=T},968630:function(Ve,z,C){var x=C(644239),k=C(385924),w=C(637005),T="[object Object]",L=Function.prototype,P=Object.prototype,p=L.toString,m=P.hasOwnProperty,S=p.call(Object);function y(g){if(!w(g)||x(g)!=T)return!1;var A=k(g);if(A===null)return!0;var E=m.call(A,"constructor")&&A.constructor;return typeof E=="function"&&E instanceof E&&p.call(E)==S}Ve.exports=y},936719:function(Ve,z,C){var x=C(238749),k=C(307518),w=C(531167),T=w&&w.isTypedArray,L=T?k(T):x;Ve.exports=L},252796:function(Ve,z,C){Ve.exports=C(410643)},913264:function(Ve){"use strict";var z=!!(typeof window!="undefined"&&window.document&&window.document.createElement),C={canUseDOM:z,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:z&&!!(window.addEventListener||window.attachEvent),canUseViewport:z&&!!window.screen,isInWorker:!z};Ve.exports=C},784518:function(Ve){var z=!1,C,x,k,w,T,L,P,p,m,S,y,g,A,E,D;function F(){if(!z){z=!0;var b=navigator.userAgent,h=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(b),$=/(Mac OS X)|(Windows)|(Linux)/.exec(b);if(g=/\b(iPhone|iP[ao]d)/.exec(b),A=/\b(iP[ao]d)/.exec(b),S=/Android/i.exec(b),E=/FBAN\/\w+;/i.exec(b),D=/Mobile/i.exec(b),y=!!/Win64/.exec(b),h){C=h[1]?parseFloat(h[1]):h[5]?parseFloat(h[5]):NaN,C&&document&&document.documentMode&&(C=document.documentMode);var U=/(?:Trident\/(\d+.\d+))/.exec(b);L=U?parseFloat(U[1])+4:C,x=h[2]?parseFloat(h[2]):NaN,k=h[3]?parseFloat(h[3]):NaN,w=h[4]?parseFloat(h[4]):NaN,w?(h=/(?:Chrome\/(\d+\.\d+))/.exec(b),T=h&&h[1]?parseFloat(h[1]):NaN):T=NaN}else C=x=k=T=w=NaN;if($){if($[1]){var W=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(b);P=W?parseFloat(W[1].replace("_",".")):!0}else P=!1;p=!!$[2],m=!!$[3]}else P=p=m=!1}}var Y={ie:function(){return F()||C},ieCompatibilityMode:function(){return F()||L>C},ie64:function(){return Y.ie()&&y},firefox:function(){return F()||x},opera:function(){return F()||k},webkit:function(){return F()||w},safari:function(){return Y.webkit()},chrome:function(){return F()||T},windows:function(){return F()||p},osx:function(){return F()||P},linux:function(){return F()||m},iphone:function(){return F()||g},mobile:function(){return F()||g||A||S||D},nativeApp:function(){return F()||E},android:function(){return F()||S},ipad:function(){return F()||A}};Ve.exports=Y},396534:function(Ve,z,C){"use strict";var x=C(913264),k;x.canUseDOM&&(k=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function w(T,L){if(!x.canUseDOM||L&&!("addEventListener"in document))return!1;var P="on"+T,p=P in document;if(!p){var m=document.createElement("div");m.setAttribute(P,"return;"),p=typeof m[P]=="function"}return!p&&k&&T==="wheel"&&(p=document.implementation.hasFeature("Events.wheel","3.0")),p}Ve.exports=w},410643:function(Ve,z,C){"use strict";var x=C(784518),k=C(396534),w=10,T=40,L=800;function P(p){var m=0,S=0,y=0,g=0;return"detail"in p&&(S=p.detail),"wheelDelta"in p&&(S=-p.wheelDelta/120),"wheelDeltaY"in p&&(S=-p.wheelDeltaY/120),"wheelDeltaX"in p&&(m=-p.wheelDeltaX/120),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(m=S,S=0),y=m*w,g=S*w,"deltaY"in p&&(g=p.deltaY),"deltaX"in p&&(y=p.deltaX),(y||g)&&p.deltaMode&&(p.deltaMode==1?(y*=T,g*=T):(y*=L,g*=L)),y&&!m&&(m=y<1?-1:1),g&&!S&&(S=g<1?-1:1),{spinX:m,spinY:S,pixelX:y,pixelY:g}}P.getEventType=function(){return x.firefox()?"DOMMouseScroll":k("wheel")?"wheel":"mousewheel"},Ve.exports=P},75:function(Ve,z,C){var x=C(734155);(function(){var k,w,T,L,P,p;typeof performance!="undefined"&&performance!==null&&performance.now?Ve.exports=function(){return performance.now()}:typeof x!="undefined"&&x!==null&&x.hrtime?(Ve.exports=function(){return(k()-P)/1e6},w=x.hrtime,k=function(){var m;return m=w(),m[0]*1e9+m[1]},L=k(),p=x.uptime()*1e9,P=L-p):Date.now?(Ve.exports=function(){return Date.now()-T},T=Date.now()):(Ve.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},654087:function(Ve,z,C){for(var x=C(75),k=typeof window=="undefined"?C.g:window,w=["moz","webkit"],T="AnimationFrame",L=k["request"+T],P=k["cancel"+T]||k["cancelRequest"+T],p=0;!L&&p<w.length;p++)L=k[w[p]+"Request"+T],P=k[w[p]+"Cancel"+T]||k[w[p]+"CancelRequest"+T];if(!L||!P){var m=0,S=0,y=[],g=1e3/60;L=function(A){if(y.length===0){var E=x(),D=Math.max(0,g-(E-m));m=D+E,setTimeout(function(){var F=y.slice(0);y.length=0;for(var Y=0;Y<F.length;Y++)if(!F[Y].cancelled)try{F[Y].callback(m)}catch(b){setTimeout(function(){throw b},0)}},Math.round(D))}return y.push({handle:++S,callback:A,cancelled:!1}),S},P=function(A){for(var E=0;E<y.length;E++)y[E].handle===A&&(y[E].cancelled=!0)}}Ve.exports=function(A){return L.call(k,A)},Ve.exports.cancel=function(){P.apply(k,arguments)},Ve.exports.polyfill=function(A){A||(A=k),A.requestAnimationFrame=L,A.cancelAnimationFrame=P}},174219:function(Ve,z){"use strict";var C;C={value:!0},z.Z=void 0;var x={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};z.Z=x},585369:function(Ve,z){"use strict";var C;C={value:!0},z.Z=void 0;var x={locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},k=x;z.Z=k},752376:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return Je}});var x=C(671002),k=C(601413),w=C(297685),T=C(700091),L=C(667294);function P(Ht){var te=[];return L.Children.forEach(Ht,function(wt){te.push(wt)}),te}function p(Ht,te){var wt=null;return Ht&&Ht.forEach(function(Me){wt||!Me||Me.key===te&&(wt=Me)}),wt}function m(Ht,te){var wt=[],Me={},kt=[],qt=null;return Ht.forEach(function(dt){dt&&(dt.key&&p(te,dt.key)?(kt.length&&(Me[dt.key]=kt,kt=[]),qt=dt.key):dt.key&&kt.push(dt))}),qt||(wt=wt.concat(kt)),te.forEach(function(dt){dt&&(dt.key&&Me.hasOwnProperty(dt.key)&&(wt=wt.concat(Me[dt.key])),wt.push(dt),dt.key===qt&&(wt=wt.concat(kt)))}),wt}function S(Ht,te,wt){var Me;return typeof Ht=="function"?Me=Ht({key:te,index:wt}):Me=Ht,Me}function y(Ht){return Ht&&Ht.children}var g=!(typeof window!="undefined"&&window.document&&window.document.createElement),A=g?L.useEffect:L.useLayoutEffect,E=C(974902),D=C(973935),F=C(364687),Y=C.n(F),b=C(115861),h=C(215671),$=C(143144),U=C(952191);function W(){}var V=U.rV,H=/.*shadow$/gi,q=!(typeof window!="undefined"&&window.document&&window.document.createElement),tt=Date.now;function rt(Ht){if(typeof Ht=="string"){if(Ht.charAt(0).match(/m/i)){var te=document.createElementNS("http://www.w3.org/2000/svg","path");return te.setAttributeNS(null,"d",Ht),te}return document.querySelector(Ht)}else if(Ht.style)return Ht;throw new Error("Error while parsing the path")}var ft={type:"to",duration:450,delay:0,repeat:0,repeatDelay:0,appearTo:0,yoyo:!1,ease:"easeInOutQuad",onStart:W,onUpdate:W,onComplete:W,onRepeat:W,startAt:{}},it={animation:{},paused:!1,reverse:!1,delay:0,repeat:0,repeatDelay:0,yoyo:!1,moment:null,resetStyle:!1,regionStartTime:0,regionEndTime:void 0,onChange:W,onChangeTimeline:W},bt=function(te){var wt={};return Object.keys(it).forEach(function(Me){wt[Me]=typeof te[Me]=="undefined"?it[Me]:te[Me]}),wt.delay&&(wt.delay=Math.round(wt.delay)),te.repeatDelay&&(wt.repeatDelay=Math.round(wt.repeatDelay)),wt},gt=function(te){if(Array.isArray(te)||!te)return te;if(te.length){var wt=Array.prototype.slice.call(te);return wt.length?[te]:wt}return[te]},Xt=function(te){return te.length===1?te[0]:te},Ct=function(te,wt){var Me=wt.appearTo,kt=Me===void 0?0:Me,qt=wt.delay,dt=qt===void 0?0:qt,Ut=wt.duration,Q=Ut===void 0?450:Ut,ot=wt.repeat,R=wt.repeatDelay;if(typeof kt=="string")return 0;var M,O=0;return typeof te.appearTo=="number"?te.appearTo:(typeof te.appearTo=="string"&&te.appearTo.charAt(1)==="="&&(O=parseFloat(te.appearTo.replace("=",""))),M=kt+dt+Q+O,ot===-1?M=Number.MAX_VALUE:ot&&(M=kt+dt+Q*(ot+1)+(R||0)*ot+O),M)},At=function(te){switch(te){case"opacity":case"scaleX":case"scaleY":case"scale":return 1;default:return 0}},Z=function(te,wt){var Me=typeof te=="string"?parseFloat(te):te;return J(Me,wt.vars,1,wt.count,wt.unit)},J=function(te,wt,Me){var kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",qt=arguments.length>4?arguments[4]:void 0;return kt==="+="||kt==="-="?te+wt*Me+(qt||0):(wt-te)*Me+te+(qt||0)},yt=function(te){if(!te)return{};var wt=typeof window!="undefined"&&document.defaultView?document.defaultView.getComputedStyle(te):{};return wt},_t={margin:1,padding:1,borderWidth:1,borderRadius:1};function nt(Ht){var te=Ht.target,wt=Ht.computedStyle,Me=Ht.style,kt=Ht.value,qt=Ht.startUnit,dt=Ht.endUnit,Ut=Ht.fixed,Q=Ht.isOriginWidth,ot=Ht.useCurrentTarget;if(q)return kt;var R=/(?:Left|Right|Width|X)/i.test(Me)||Q;R=Me==="padding"||Me==="marign"?!0:R;var M=Me.indexOf("border")!==-1||Me.indexOf("translate")!==-1||Me==="transformOrigin"||ot?te:te.parentNode||document.body;M=Ut?document.body:M;var O,X,mt;switch(qt){case"%":O=parseFloat(kt)/100*(R?M.clientWidth:M.clientHeight);break;case"vw":O=parseFloat(kt)*document.body.clientWidth/100;break;case"vh":O=parseFloat(kt)*document.body.clientHeight/100;break;case"em":wt?O=parseFloat(kt)*parseFloat(wt.fontSize):(mt="em",O=parseFloat(kt));break;case"rem":{wt?(X=window.getComputedStyle(document.getElementsByTagName("html")[0]),O=parseFloat(kt)*parseFloat(X.fontSize)):(mt="rem",O=parseFloat(kt));break}default:O=parseFloat(kt);break}switch(dt){case"%":O=O?O*100/(R?M.clientWidth:M.clientHeight):0;break;case"vw":O=parseFloat(kt)/document.body.clientWidth*100;break;case"vh":O=parseFloat(kt)/document.body.clientHeight*100;break;case"em":wt?O=parseFloat(kt)/parseFloat(wt.fontSize):(mt="em",O=parseFloat(kt));break;case"rem":{wt?(X=X||window.getComputedStyle(document.getElementsByTagName("html")[0]),O=parseFloat(kt)/parseFloat(X.fontSize)):(mt="rem",O=parseFloat(kt));break}default:break}return mt&&console.warn("Warning: Element is not 'DOM, can not use '".concat(mt,"', automatically convert to animation units.")),O}function vt(Ht){if(typeof Ht=="string")return Ht;var te=Ht.perspective,wt=Ht.rotate,Me=Ht.rotateX,kt=Ht.rotateY,qt=Ht.scaleX,dt=Ht.scaleY,Ut=Ht.scaleZ,Q=Ht.skewX,ot=Ht.skewY,R=typeof Ht.translateX=="string"?Ht.translateX:"".concat(Ht.translateX,"px"),M=typeof Ht.translateY=="string"?Ht.translateY:"".concat(Ht.translateY,"px"),O=typeof Ht.translateZ=="string"?Ht.translateZ:"".concat(Ht.translateZ,"px"),X=Q||ot?"skew(".concat(Q,"deg,").concat(ot,"deg)"):"",mt=wt?"rotate(".concat(wt,"deg)"):"",Ft=qt!==1||dt!==1||Ut!==1?"scale3d(".concat(qt,",").concat(dt,",").concat(Ut,")"):"",Bt=Me?"rotateX(".concat(Me,"deg)"):"",ee=kt?"rotateY(".concat(kt,"deg)"):"",Le=te?"perspective(".concat(te,"px)"):"",me=Ft||mt||Bt||ee||X?"":"translate(0px, 0px)",Xe=Ht.translateZ?"translate3d(".concat(R,",").concat(M,",").concat(O,")"):(Ht.translateX||Ht.translateY)&&"translate(".concat(R,",").concat(M,")")||me;return"".concat(Le," ").concat(Xe," ").concat(Ft," ").concat(mt," ").concat(Bt," ").concat(ee," ").concat(X).trim()}var It={brightness:1,saturate:1,contrast:1,grayScale:0,hueRotate:"0deg",sepia:0,invert:0},Pt=(0,$.Z)(function Ht(){var te=this;(0,h.Z)(this,Ht),this.push=function(wt){gt(wt).forEach(function(Me){te[Me.className]=Me})},this.register=this.push}),St=new Pt,Dt=/%|vw|vh|em|rem/i,Qt=(0,$.Z)(function Ht(te){var wt=this;(0,h.Z)(this,Ht),this.props=void 0,this.computedStyle=void 0,this.root=void 0,this.index=void 0,this.targetIndex=void 0,this.tweenVars={},this.transformName=void 0,this.filterName=void 0,this.target=void 0,this.start={},this.startAt={},this.propsData={data:{},type:{},unit:{},count:{},splitStr:{},isTransform:{}},this.setDefaultData=function(){var Me=wt.props;for(var kt in Me){var qt=Me[kt],dt=qt.split&&qt.split(/\s+|,/).length>1||kt.match(/color|fill|stroke/i)||kt.match(/shadow/i),Ut=(kt==="background"||kt==="backgroundImage")&&qt.match(/[a-z|-]+\(([\s\S]*?)\)/gi);if(Ut){wt.propsData.data[kt]={value:qt,plugin:St.GradientsPlugin};continue}if(dt){wt.propsData.data[kt]={value:qt,plugin:St.ArrayPlugin};continue}var Q=(0,U.Lo)(kt),ot=wt.getTweenData(Q,Me[kt]);wt.propsData.data[Q]=ot.data[Q],wt.propsData.type[Q]=ot.type[Q],wt.propsData.unit[Q]=ot.unit[Q],wt.propsData.count[Q]=ot.count[Q],wt.propsData.isTransform[Q]=(0,U.dt)(Q)==="transform",ot.splitStr[Q]&&(wt.propsData.splitStr[Q]=ot.splitStr[Q])}},this.getTweenData=function(Me,kt){var qt={data:{},isTransform:{},type:{},unit:{},count:{},splitStr:{}},dt=kt;qt.data[Me]=dt;var Ut=typeof qt.data[Me]=="string";qt.unit[Me]=Ut?qt.data[Me].replace(/[^a-z|%]/g,""):"",qt.count[Me]=Ut?qt.data[Me].replace(/[^+|=|-]/g,""):"";var Q=Ut?parseFloat(qt.data[Me].replace(/[a-z|%|=]/g,"")):qt.data[Me];return qt.data[Me]=!Q&&Q!==0?qt.data[Me]:Q,qt},this.setStartAtValue=function(Me,kt){return(0,x.Z)(kt)==="object"?Z(Me,kt):Me},this.getAnimStart=function(){var Me=wt.target,kt=wt.root,qt=wt.targetIndex,dt=wt.propsData,Ut=wt.startAt,Q=wt.start,ot=wt.tweenVars,R={};for(var M in Ut)R[(0,U.Lo)(M)]=Ut[M];wt.computedStyle=wt.computedStyle||yt(Me),ot.style=ot.style||{};var O,X;for(var mt in dt.data){var Ft,Bt=dt.data[mt];if(Bt.plugin){var ee=new Bt.plugin(Bt.value,mt);ee.target=Me,ee.root=kt,ee.parent=parent,ee.index=wt.index,ee.targetIndex=qt,ee.tweenVars=ot,ee.startAt=wt.startAt,ee.computedStyle=wt.computedStyle,Bt.plugin=ee,Q[mt]=ee.getAnimStart();continue}var Le=(0,U.dt)(mt),me=Le==="transform"?wt.transformName:Le;me=Le==="filter"?wt.filterName:me;var Xe=ot.style[me],pr=Xe!=null?Xe:wt.computedStyle[Le],Ze=(Ft=R[mt])!==null&&Ft!==void 0?Ft:pr,Pr=dt.unit[mt],un="";if(Le==="transform"){O=O||(Ze===Xe?(0,k.Z)({},Xe):(0,U.Ck)(wt.computedStyle[wt.transformName]));var Ke=O[mt];if(R&&mt in R){var lr,Rr;Ke=wt.setStartAtValue((lr=(Rr=R[mt].vars)!==null&&Rr!==void 0?Rr:Xe==null?void 0:Xe[mt])!==null&&lr!==void 0?lr:Ke,R[mt]),un=R[mt].unit,mt==="scale"?(O.scaleX=Ke,O.scaleY=Ke):O[mt]=Ke}un!==Pr&&(Ke=nt({target:Me,computedStyle:wt.computedStyle,style:Le,value:Ke,startUnit:un,endUnit:Pr}),mt==="scale"?(O.scaleX=Ke,O.scaleY=Ke):O[mt]=Ke),Q[wt.transformName]=O}else if(Le==="filter"){var Dr=U._T.filterConvert[mt]||mt;X=X||(Ze===Xe?(0,k.Z)({},Xe):(0,U.GX)(pr)||{}),X[Dr]=X[Dr]||It[Dr];var ce=X[Dr];if(R&&mt in R){var jt;ce=wt.setStartAtValue((jt=R[mt].vars)!==null&&jt!==void 0?jt:ce,R[mt]),un=R[mt].unit,X[Dr]=ce}if(Pr!==un){var pe;X[Dr]=nt({target:Me,computedStyle:wt.computedStyle,style:Le,value:ce,startUnit:un,endUnit:Pr,fixed:((pe=wt.computedStyle)===null||pe===void 0?void 0:pe.position)==="fixed"})}Q[wt.filterName]=X}else{var Oe;if(Ze=(Oe=R[mt])!==null&&Oe!==void 0?Oe:pr,(!Ze||Ze==="none"||Ze==="auto")&&(Ze=""),Pr=dt.unit[Le],un=(0,x.Z)(Ze)==="object"?Ze.unit:"".concat(Ze).replace(/[^a-z|%]/g,""),Ze=wt.setStartAtValue(pr,R[mt]),Pr!==un){var Se;Ze=nt({target:Me,computedStyle:wt.computedStyle,style:Le,value:parseFloat(Ze),startUnit:un,endUnit:Pr,fixed:((Se=wt.computedStyle)===null||Se===void 0?void 0:Se.position)==="fixed"})}var Fe=parseFloat(Ze);Q[Le]=isNaN(Fe)?At(Le):Fe}}return Q},this.render=function(Me){var kt=wt.propsData,qt=wt.start,dt=wt.tweenVars,Ut=dt.style||{};qt[wt.transformName]&&!Ut[wt.transformName]&&(Ut[wt.transformName]=(0,k.Z)({},qt[wt.transformName])),qt[wt.filterName]&&!Ut[wt.filterName]&&(Ut[wt.filterName]=(0,k.Z)({},qt[wt.filterName]));var Q=Ut[wt.transformName],ot=Ut[wt.filterName],R=kt.data,M=kt.unit,O=kt.count,X=kt.isTransform;for(var mt in R){var Ft=R[mt];if(Ft.plugin){Ut[mt]=Ft.plugin.render(Me);continue}var Bt=X[mt],ee=Bt?qt[wt.transformName][mt]:qt[mt],Le=M[mt],me=O[mt];if(Bt){if(mt==="scale"){var Xe=qt[wt.transformName].scaleX,pr=qt[wt.transformName].scaleY;me.charAt(1)==="="?(Q.scaleX=Xe+Ft*Me,Q.scaleY=pr+Ft*Me):(Q.scaleX=(Ft-Xe)*Me+Xe,Q.scaleY=(Ft-pr)*Me+pr)}else Q[mt]=J(parseFloat(ee),Ft,Me,me,Le);Q.text=vt(Ut[wt.transformName])}else if(U._T.filter.indexOf(mt)>=0){var Ze=U._T.filterConvert[mt]||mt;ee=parseFloat(qt[wt.filterName][Ze])||0,ot[Ze]=J(ee,Ft,Me,me,Le),ot.text="";for(var Pr in ot)Pr!=="text"&&(ot.text="".concat(ot.text," ").concat(Pr,"(").concat(ot[Pr],")").trim())}else{var un=(0,U.YJ)(mt,0);un=typeof un=="number"?0:un.replace(/[^a-z|%]/g,""),Le=Le||un,typeof Ft=="string"?Ut[mt]=Ft:Ut[mt]=J(ee,Ft,Me,me,Le)}}return Ut},this.props=te,this.transformName=(0,U.Yf)("transform"),this.filterName=(0,U.Yf)("filter")||"filter",this.setDefaultData()});Qt.key="style",Qt.className="style";var ue=Qt,ie=C(497326),Lt=C(360136),ne=C(973568),ve=(0,$.Z)(function Ht(te,wt){(0,h.Z)(this,Ht),this.value=void 0,this.key=void 0,this.root=void 0,this.index=void 0,this.style={},this.start={},this.startAt={},this.target=void 0,this.value=te,this.key=wt});ve.className=void 0,ve.key=void 0;var Wt=function(Ht){(0,Lt.Z)(wt,Ht);var te=(0,ne.Z)(wt);function wt(Me,kt){var qt;(0,h.Z)(this,wt),qt=te.call(this,Me,kt),qt.value=void 0,qt.key=void 0,qt.start=[],qt.tweenVars={},qt.vars={},qt.computedStyle=void 0,qt.propsData={data:[],unit:[],count:[]},qt.setDefaultData=function(Q,ot){var R=(0,ie.Z)(qt),M=R.propsData,O=R.value,X=(0,E.Z)(O);if(Q==="color"){var mt;X[3]=(mt=X[3])!==null&&mt!==void 0?mt:1}M.type=Q,M.data=X.map(function(Ft){return!parseFloat(Ft)&&parseFloat(Ft)!==0?Ft:parseFloat(Ft)}),M.unit=X.map(function(Ft){return Ft.toString().replace(/[^a-z|%]/g,"")}),M.count=X.map(function(Ft){return Ft.toString().replace(/[^+|=|-]/g,"")}),ot&&(M.splitStr=ot)},qt.convertToMarksArray=function(Q,ot,R,M){var O=(R||"").toString().replace(/[^a-z|%]/g,""),X=typeof M=="number"?Q[M]:void 0;return O===X?parseFloat(R):!parseFloat(R)&&parseFloat(R)!==0?R:nt({target:qt.target,computedStyle:qt.computedStyle,style:ot,value:R,startUnit:O,endUnit:X,isOriginWidth:ot==="transformOrigin"&&!M})},qt.getAnimStart=function(){var Q,ot,R,M,O=(0,ie.Z)(qt),X=O.startAt,mt=O.target,Ft=O.key,Bt=O.propsData,ee=O.computedStyle,Le=O.tweenVars,me=(Q=(ot=(R=X==null?void 0:X[Ft])!==null&&R!==void 0?R:ee?(M=Le.style)===null||M===void 0?void 0:M[Ft]:Le[Ft])!==null&&ot!==void 0?ot:(ee||mt)[Ft])!==null&&Q!==void 0?Q:"",Xe=Bt.data.indexOf("inset"),pr;if(Xe!==-1&&!me.match("inset")&&Bt.type==="shadow"&&(pr=me,me=""),(!me||me==="none"||me==="auto")&&(me=""),me=Bt.type==="shadow"?(0,U.hy)(me,Ft):me,me=Bt.type==="color"?(0,U.lu)(me):me,me=Bt.type==="string"?me.split(/[\s|,]/):me,_t[Ft]){var Ze,Pr,un,Ke;me[1]=(Ze=me[1])!==null&&Ze!==void 0?Ze:me[0],me[2]=(Pr=me[2])!==null&&Pr!==void 0?Pr:me[0],me[3]=(un=(Ke=me[3])!==null&&Ke!==void 0?Ke:me[1])!==null&&un!==void 0?un:me[0]}var lr=Bt.unit,Rr=me.map(function(Dr,ce){return parseFloat(Dr).toString()==="NaN"?Dr:qt.convertToMarksArray(lr,Ft,Dr,ce)});return qt.start=Rr.concat(Xe>=0?"inset":[]),qt.start.oldShadow=pr,qt.start},qt.render=function(Q){var ot=(0,ie.Z)(qt),R=ot.start,M=ot.propsData,O=M.type,X=M.splitStr,mt=M.data,Ft=M.count,Bt=M.unit,ee=mt.map(function(Ze,Pr){return typeof Ze=="string"?Ze:J(R[Pr],Ze,Q,Ft[Pr],Bt[Pr])});switch(O){case"string":ee=ee.join(X);break;case"color":ee=(0,U.Lq)(ee);break;case"shadow":{var Le=ee.indexOf("inset")>=0,me=Le?ee.filter(function(Ze){return Ze!=="inset"}):ee,Xe=me.slice(0,me.length-4).map(function(Ze){return typeof Ze=="number"?"".concat(Ze,"px"):Ze}),pr=(0,U.Lq)(me.slice(me.length-4,me.length));ee="".concat(R.oldShadow?"".concat(R.oldShadow,","):"").concat(Xe.join(" ")," ").concat(pr," ").concat(Le?"inset":"").trim();break}default:break}return ee},qt.value=Me,qt.key=kt;var dt="",Ut="";return typeof Me=="string"&&(kt.match(H)?(qt.value=(0,U.hy)(Me,kt),dt="shadow"):kt.match(/color|fill|stroke/i)||Me.match(V)?(qt.value=(0,U.lu)(Me),dt="color"):(Ut=Me.replace(/[^\s|,]/g,"").replace(/\s+/g," "),qt.value=Me.split(/[\s|,]/),dt="string")),qt.setDefaultData(dt,Ut),qt}return(0,$.Z)(wt)}(ve);Wt.className="ArrayPlugin";var ae=Wt,Ce={linear:{"to top":"0deg","to top right":"45deg","to right top":"45deg","to right":"90deg","to right bottom":"135deg","to bottom right":"135deg","to bottom":"180deg","to bottom left":"225deg","to left bottom":"225deg","to left":"270deg","to left top":"315deg","to top left":"315deg"},radial:{center:"50% 50%",top:"50% 0%","top right":"100% 0%","right top":"100% 0%",right:"100% 50%","right bottom":"100% 100%","bottom right":"100% 100%",bottom:"50% 100%","bottom left":"0% 100%","left bottom":"0% 100%",left:"0% 50%","left top":"0% 0%","top left":"0% 0%"}},xe=["closest-side","closest-corner","farthest-side","farthest-corner"],Jt=function(te,wt,Me){console.warn("Warning: The gradient ".concat(te,"(").concat(wt," => ").concat(Me,") is different, which has been automatically converted to animation gradient ").concat(te,"(").concat(Me,")."))},we=function(te){return te==="url"||te.indexOf("image")>=0||te==="paint"||te==="cross-fade"||te==="element"},Tt=function(Ht){(0,Lt.Z)(wt,Ht);var te=(0,ne.Z)(wt);function wt(Me){var kt;return(0,h.Z)(this,wt),kt=te.call(this,Me,"backgroundImage"),kt.value=void 0,kt.tweenVars={},kt.vars=[],kt.computedStyle=void 0,kt.defaultStartVars=[],kt.getPosition=function(qt){return qt.map(function(dt){return{data:parseFloat(dt),unit:dt.replace(/[^a-z|%]/g,"")}})},kt.getAngle=function(qt,dt){var Ut=qt.replace(/-|gradient|repeating]/g,""),Q,ot,R,M;switch(Ut){case"linear":{R=kt.getPosition((Ce.linear[dt]||dt||Ce.linear["to bottom"]).split(" "));break}case"radial":{var O=dt.split(" ");Q=O.find(function(ee){return xe.indexOf(ee)>=0})||xe[3],ot=O.find(function(ee){return ee==="circle"||ee==="ellipse"})||"ellipse";var X=new RegExp("".concat(Q,"|").concat(ot,"|at"),"g"),mt=dt.replace(X,"").trim();M=kt.getPosition((Ce.radial[mt]||mt||Ce.radial.center).split(" "));break}case"conic":{var Ft=dt.split("at").map(function(ee){return ee.trim()}),Bt=(Ft[0]||"").split(" ");ot=Bt[0]||"from",R=kt.getPosition([Bt[1]||"0deg"]),M=kt.getPosition((Ce.radial[Ft[1]]||Ft[1]||Ce.radial.center).split(" "));break}default:break}return{extent:Q,shape:ot,angle:R,position:M}},kt.valueToIValue=function(qt){if(!qt)return[];var dt=qt.replace(/\),\s+?(url|radial|conic|linear|repeating|image|element|cross|paint)/,")#,#$1").split("#,#");return dt.map(function(Ut){var Q=Ut.replace(/([a-z|-]+)\((.*)\)/,"$1").trim();if(Q==="url")return{type:Q,values:Ut};var ot=Ut.replace(/([a-z|-]+)\((.*)\)/,"$2").replace(/#([0-9a-f]{6}|[0-9a-f]{3})|(rgb[a]?|hsl)+\(\d+\,[\s+]?\d+[\%]?\,[\s+]?\d+[\%]?(\,\d+)?\)/gi,function(X){return X.replace(/\s+/g,"")}).replace(/\,([a-z|#|\s+])/g,"#,#$1").split("#,#").map(function(X){return X.trim()}),R=ot[0].match(V)?"":ot[0];R&&ot.splice(0,1);var M=kt.getAngle(Q,R),O=ot.map(function(X){var mt=X.trim().split(/\s+/),Ft,Bt=(mt[0].match(V),mt[0]);return Bt&&(mt.splice(0,1),Ft=(0,U.lu)(Bt)),{color:Ft,positions:mt.map(function(ee){return{data:parseFloat(ee),unit:ee.toString().replace(/[^a-z|%]/g,"")}})}});return{type:Q,angle:M,values:O}})},kt.getAnimStart=function(){var qt,dt=(0,ie.Z)(kt),Ut=dt.startAt,Q=dt.key,ot=dt.computedStyle,R=dt.target,M=dt.vars,O=dt.tweenVars,X=(0,k.Z)({},Ut),mt=(qt=O[Q])!==null&&qt!==void 0?qt:(ot||R)[Q];(!mt||mt==="none"||mt==="auto")&&(mt=""),X[Q]=X[Q]||mt,X[Q]=X[Q]?kt.valueToIValue(X[Q]):kt.defaultStartVars;var Ft=Math.max(M.length,X[Q].length),Bt=(Ft===X[Q].length?X[Q]:M).map(function(ee,Le){var me,Xe,pr=X[Q][Le]||kt.defaultStartVars[Le],Ze=M[Le]||pr;if((!pr||pr.type!==Ze.type)&&(pr.type!==Ze.type&&Jt("type",pr.type,Ze.type),pr=kt.defaultStartVars[Le]),we(Ze.type)||typeof Ze.values=="string"||typeof pr.values=="string")return(0,k.Z)({},Ze);if(((me=Ze.angle)===null||me===void 0?void 0:me.extent)!==((Xe=pr.angle)===null||Xe===void 0?void 0:Xe.extent)){var Pr,un;Jt("extent keyword",(Pr=pr.angle)===null||Pr===void 0?void 0:Pr.extent,(un=Ze.angle)===null||un===void 0?void 0:un.extent)}var Ke=Math.max(pr.values.length,Ze.values.length),lr=Ke===pr.values.length?pr.values:Ze.values;return pr.values=lr.map(function(Rr,Dr){var ce=pr.values[Dr],jt=Ze.values[Dr]||ce;return(0,k.Z)((0,k.Z)({},ce),{},{positions:(jt||ce).positions.map(function(pe,Oe){var Se=ce?ce.positions[Oe]||ce.positions[ce.positions.length-1]:jt.positions[jt.positions.length-1],Fe=pe||Se;return!Se&&ce&&pr.values.length&&(Se={data:100/(pr.values.length-1)*Dr,unit:"%"}),Fe.unit!==Se.unit&&Jt("units",Se.unit,Fe.unit),{data:Se.data,unit:Fe.unit}})})}),pr});return kt.start=Bt,kt.start},kt.render=function(qt){var dt="",Ut=Math.max(kt.vars.length,kt.start.length);return(Ut===kt.vars.length?kt.vars:kt.start).forEach(function(Q,ot){var R=kt.start[ot],M=kt.vars[ot]||R;if(we(M.type)||typeof M.values=="string"||!M.angle){dt+="".concat(dt?",":""," ").concat(M.values).trim();return}var O=Math.max(R.values.length,M.values.length),X=(O===R.values.length?R.values:M.values).map(function(Le,me){var Xe=R.values[me],pr=M.values[me];pr||(pr=Xe);var Ze=Xe.color,Pr=Xe.positions;!Ze&&pr.color&&(Ze=(0,E.Z)(pr.color)),Pr||(Pr=pr.positions.map(function(lr){return(0,k.Z)({},lr)}));var un=pr.color?pr.color.map(function(lr,Rr){return J(Ze[Rr],lr,qt)}):pr.color,Ke=pr.positions.map(function(lr,Rr){return"".concat(J(Pr[Rr].data,lr.data,qt)).concat(lr.unit)}).join(" ");return"".concat(un?(0,U.Lq)(un):un||""," ").concat(Ke).trim()}),mt=M.angle,Ft=mt.angle&&mt.angle.map(function(Le,me){return"".concat(J(R.angle.angle[me].data,Le.data,qt)).concat(Le.unit)}).join(" "),Bt=mt.position&&mt.position.map(function(Le,me){return"".concat(J(R.angle.position[me].data,Le.data,qt)).concat(Le.unit)}).join(" "),ee="".concat(mt.extent||""," ").concat(mt.shape||""," ").concat(Ft||""," ").concat(Bt?"at ".concat(Bt):"").trim();dt+="".concat(dt?",":""," ").concat(M.type,"(").concat(ee?"".concat(ee,","):"").concat(X.join(","),")").trim()}),dt},kt.value=Me,kt.vars=kt.valueToIValue(Me),kt.defaultStartVars=kt.vars.map(function(qt){return we(qt.type)||typeof qt.values=="string"?(0,k.Z)({},qt):(0,k.Z)((0,k.Z)({},qt),{},{values:qt.values.map(function(dt){var Ut;return dt.color&&typeof dt.color!="string"?(Ut=(0,E.Z)(dt.color),Ut[3]=0):Ut=dt.color,{color:Ut,positions:(0,E.Z)(dt.positions)}})})}),kt}return(0,$.Z)(wt)}(ve);Tt.className="GradientsPlugin";var Pe=C(654087),_r=C.n(Pe),Ar=function(){function Ht(){var te=this;(0,h.Z)(this,Ht),this.lagThreshold=150,this.adjustedLag=33,this.emptyTime=0,this.elapsed=0,this.frameFPS=1e3/240,this.startTime=0,this.prevTime=0,this.useTimeout=!1,this.lastUpdate=this.startTime,this.nextTime=this.frameFPS,this.req=void 0,this.id=-1,this.tweenId=0,this.tickFn=[],this.state="sleep",this.time=0,this.frame=0,this.removeReq=function(wt){return te.useTimeout?clearTimeout(wt):(0,Pe.cancel)(wt)},this.tick=function(){var wt=te.tickFn;te.startTime||(te.startTime=tt()-te.frameFPS,te.lastUpdate=te.startTime),te.elapsed=tt()-te.lastUpdate,te.elapsed>te.lagThreshold&&(te.startTime+=te.elapsed-te.adjustedLag),te.lastUpdate+=te.elapsed,te.time=te.lastUpdate-te.startTime;var Me=te.time-te.nextTime;if(Me>0){te.frame++,te.nextTime+=Me+(Me>=te.frameFPS?4:te.frameFPS-Me);for(var kt=te.time-te.prevTime,qt=0;qt<wt.length;qt++)wt[qt].fn({time:te.time,elapsed:kt<te.frameFPS?te.frameFPS:kt});te.prevTime=te.time}if(!te.tickFn.length&&(te.emptyTime||(te.emptyTime=te.time+500),te.time>=te.emptyTime)){te.emptyTime=0,te.sleep();return}te.req&&(te.id=te.req(te.tick))},this.wake=function(){te.id&&te.sleep(),te.req=te.useTimeout?function(wt){return setTimeout(wt,te.frameFPS)}:_r(),te.tick(),te.state="wake"},this.sleep=function(){te.removeReq(te.id),te.id=-1,te.req=void 0,te.state="sleep"},this.add=function(wt){var Me="TweenOneTicker_".concat(te.tweenId);return te.tweenId+=1,te.tickFn.findIndex(function(kt){return kt.key===Me})===-1&&te.tickFn.push({key:Me,fn:wt}),te.emptyTime=0,te.req||te.wake(),Me},this.clear=function(wt){te.tickFn=te.tickFn.filter(function(Me){return Me.key!==wt&&Me.fn!==wt})},this.timeout=function(wt,Me){if(typeof wt!="function")return console.warn("not function");var kt=te.time,qt=te.add(function(){var dt=te.time-kt;dt>=(Me||0)&&(te.clear(qt),wt())});return qt},this.interval=function(wt,Me){if(typeof wt!="function")return console.warn("not function"),null;var kt=te.time;return te.add(function(){var qt=te.time-kt;qt>=(Me||0)&&(kt=te.time,wt())})}}return(0,$.Z)(Ht,[{key:"fps",value:function(wt,Me){this.frameFPS=1e3/(wt||240),this.nextTime=this.time+this.frameFPS,this.useTimeout=typeof Me=="undefined"?this.useTimeout:Me,this.useTimeout&&(this.req=function(kt){return setTimeout(kt,wt)})}}]),Ht}(),Or=new Ar,Br=Or,cn=function(){function Ht(){var te=this;(0,h.Z)(this,Ht),this.children=[],this.autoSleep=200,this.tickerKey=void 0,this.startTime=void 0,this.addChild=function(wt){te.children.indexOf(wt)===-1?(te.children.push(wt),te.updateTickerState()):te.start()},this.removeChild=function(wt){te.children=te.children.filter(function(Me){return Me!==wt}),te.updateTickerState()},this.kill=function(wt){te.children=te.children.filter(function(Me){var kt=Me.root.targets,qt=kt.map(function(Ut,Q){if(wt.indexOf(Ut)===-1)return Ut;delete Ut._tweenOneVars});Me.root.targets=qt;var dt=!!qt.filter(function(Ut){return Ut}).length;return dt||Me.kill(),dt}),te.updateTickerState()},this.killAll=function(wt){wt&&(te.children.forEach(function(Me){Me==null||Me.root.targets.forEach(function(kt){kt&&delete kt._tweenOneVars})}),te.children=[]),Br.clear(te.tickerKey),te.tickerKey=void 0},this.getTotalTime=function(){for(var wt=0,Me=0;Me<te.children.length;Me++){var kt=te.children[Me],qt=kt.pausedState?0:kt.startTime+kt.totalTime;wt?wt=Math.max(qt,wt):wt=qt}return wt},this.updateTickerState=function(){!te.children.length||!te.children.some(function(wt){return!(wt!=null&&wt.pausedState)&&(!(wt!=null&&wt.reverseState)&&wt.progressTime<wt.totalTime||(wt==null?void 0:wt.reverseState)&&wt.progressTime>0)})?te.killAll(!te.children.length):te.start()},this.start=function(){te.tickerKey||(te.tickerKey=Br.add(te.render))},this.render=function(wt){for(var Me=wt.time,kt=wt.elapsed,qt=kt===void 0?0:kt,dt=te.children,Ut=dt.length,Q=0;Q<Ut;Q++){var ot=dt[Q];if(ot){var R=ot.startTime-qt,M=ot.startTime+ot.totalTime+qt;Me>R&&Me<M&&!ot.pausedState&&ot.render({time:Me,elapsed:qt})}}}}return(0,$.Z)(Ht,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Ht}(),an=cn,Dn=C(141e3),Un=C.n(Dn);Un().path=function(Ht,te){var wt=te||{};if(q)return"linear";for(var Me=rt(Ht),kt=Me.getTotalLength(),qt=wt.rect||100,dt=wt.lengthPixel||200,Ut=[],Q=0;Q<dt-1;Q++)Ut.push(Me.getPointAtLength(kt/(dt-1)*Q));return Ut.push(Me.getPointAtLength(dt)),function(R,M,O,X){var mt=Un().linear(R,M,O,X),Ft=qt*mt,Bt=Ut.filter(function(ee){return ee.x>=Ft})[0]||Me.getPointAtLength(mt*kt);return 1-Bt.y/qt}};var Xn=Un(),xr=function(){function Ht(te){var wt=this;(0,h.Z)(this,Ht),this.item=void 0,this.vars={},this.start=void 0,this.parent=void 0,this.root=void 0,this.startAt={},this.mode=void 0,this.appearTo=0,this.props={},this.index=void 0,this.register=void 0,this.reverseStart=void 0,this.repeatNum=0,this.prevMoment=void 0,this.easing=void 0,this.changeValueToVars=function(dt,Ut,Q){var ot=(Array.isArray(Ut)||dt.match(/color|fill|stroke/i)||dt.match(H)&&typeof Ut=="string"||typeof Ut=="string"&&Ut.split(/[\s|,]/).length>1)&&!(dt in St);if(dt in St||ot)return Q?Ut:{value:Ut,plugins:[],array:ot};var R=parseFloat(Ut.toString().replace(/=/g,"")),M=Ut.toString().replace(/[^a-z|%]/g,""),O=Ut.toString().charAt(1)==="="?Ut.toString().replace(/[^\+\=|\-\=]/gi,""):"";return{vars:R,unit:M,count:O}},this.setEase=function(dt){if(typeof dt=="function"){wt.easing=dt;return}else if(dt.match(/,/g)){wt.easing=Xn.path(dt);return}wt.easing=Xn[dt]},this.getTotalTime=function(){var dt=wt.props,Ut=dt.duration,Q=Ut===void 0?450:Ut,ot=dt.delay,R=ot===void 0?0:ot,M=dt.repeat,O=M===void 0?0:M,X=dt.repeatDelay,mt=X===void 0?0:X;return O===-1?Number.MAX_VALUE:R+Q*(O+1)+mt*O},this.getEaseToRatio=function(dt,Ut){var Q=wt.props.ease,ot=Q===void 0?"":Q;return(dt===0||dt===1)&&!(typeof ot=="function"||ot.match(/,/g))?dt:wt.easing(Ut?1-dt:dt,Ut?1:0,Ut?0:1,1)},this.setRatioToVars=function(dt){for(var Ut=wt.vars,Q=wt.root,ot=0;ot<Q.targets.length;ot++)if(Q.targets[ot])for(var R in Ut){var M=Ut[R];if(M.plugins){R==="PathMotion"?Q.vars[ot].style=M.plugins[ot].render(dt):Q.vars[ot][R]=M.plugins[ot].render(dt);continue}var O=M.vars,X=M.count,mt=M.unit,Ft=wt.start[ot][R];Q.vars[ot][R]=J(Ft,O,dt,X,mt)}},this.onRegisterAnimate=function(){wt.register=!0;for(var dt=wt.root,Ut=wt.parent,Q=wt.startAt,ot=[],R=0;R<dt.targets.length;R++){var M=dt.targets[R],O=dt.vars[R],X={};for(var mt in wt.vars){var Ft=wt.vars[mt];if(Ft.plugins){var Bt=new St[Ft.array?"ArrayPlugin":mt](Ft.value,mt);Bt.target=M,Bt.root=dt,Bt.parent=Ut,Bt.targetIndex=R,Bt.tweenVars=O,Bt.index=wt.index,Bt.startAt=Q,X[mt]=Bt.getAnimStart(),Ft.plugins.push(Bt)}else{var ee,Le,me=(ee=dt.attr?M.getAttribute(mt):O[mt]||M[mt])!==null&&ee!==void 0?ee:At(mt),Xe=(Le=Q[mt])!==null&&Le!==void 0?Le:me,pr=(0,x.Z)(Xe)==="object"&&"vars"in Xe&&"count"in Xe,Ze=pr?Xe.unit:"".concat(Xe).replace(/[^a-z|%]/g,""),Pr=Ft.unit;Ze&&Ze!==Pr&&console.warn("Different units, start unit ".concat(Ze,", to value unit ").concat(Pr,", remove start unit.")),X[mt]=pr?Z(me,Xe):parseFloat(Xe)}}ot.push(X)}wt.start=ot},this.overflowRatio=function(dt){var Ut=dt<0?0:dt,Q=wt.props.duration;return Ut=Ut>Q?Q:Ut,Ut},this.render=function(dt){var Ut=dt.moment,Q=dt.fps,ot=Q===void 0?0:Q,R=dt.silence,M=dt.render,O=wt.parent,X=wt.root,mt=wt.props,Ft=Xt(X.targets),Bt=O.onChange,ee=mt.repeat,Le=ee===void 0?0:ee,me=mt.type,Xe=me===void 0?"to":me,pr=mt.duration,Ze=pr===void 0?450:pr,Pr=mt.delay,un=Pr===void 0?0:Pr,Ke=mt.repeatDelay,lr=Ke===void 0?0:Ke,Rr=mt.yoyo;Le=Le===-1?Number.MAX_VALUE:Le;var Dr=Ut-un,ce=Math.floor(Dr/(Ze+lr))||0;ce=ce>Le?Le:ce,ce=ce<0?0:ce,Dr=Dr-(Ze+lr)*ce;var jt=!!(Rr&&ce%2),pe=Xe==="from",Oe=jt&&pe?!1:jt||pe;Dr=Oe?Ze-Dr:Dr;var Se=pe?0:un,Fe=Oe?1:0;if(!wt.register&&Ut>=Se&&(wt.onRegisterAnimate(),(Oe&&Dr<=0||!Oe&&Dr>=Ze&&Ze)&&(wt.prevMoment=Ut,Fe=Oe?0:1),wt.setRatioToVars(Fe),Bt({index:wt.index,vars:X.vars})),wt.register&&Ut>un-ot&&Ut<wt.totalTime+ot){Dr=wt.overflowRatio(Dr),Fe=Oe?1:0,Ut>=wt.totalTime&&wt.mode!=="onComplete"&&wt.prevMoment!==void 0||wt.prevMoment===void 0&&Ut>=wt.totalTime&&Ze?(Fe=Oe?0:1,wt.mode="onComplete",wt.props.onComplete&&wt.props.onComplete({mode:wt.mode,index:wt.index,moment:Dr,ratio:Fe,targets:Ft,vars:Xt(X.vars)})):wt.prevMoment===void 0||Ut<=0&&Ut>-ot&&wt.mode!=="onStart"&&wt.prevMoment>Ut?(wt.mode="onStart",wt.props.onStart&&wt.props.onStart({mode:wt.mode,index:wt.index,moment:Dr,ratio:Fe,targets:Ft,vars:Xt(X.vars)})):(Fe=Dr&&Ze?Dr/Ze:0,wt.mode="onUpdate",wt.props.onUpdate&&wt.props.onUpdate({mode:wt.mode,index:wt.index,moment:Dr,ratio:Fe,targets:Ft,vars:Xt(X.vars)})),Le&&ce!==wt.repeatNum&&Ut&&wt.mode==="onUpdate"&&(wt.mode="onRepeat",wt.props.onRepeat&&wt.props.onRepeat({mode:wt.mode,index:wt.index,moment:Dr,ratio:Fe,targets:Ft,vars:Xt(wt.root.vars)})),wt.setRatioToVars(wt.getEaseToRatio(Fe,pe)),Le&&(wt.repeatNum=ce);var or={mode:wt.mode,moment:Dr,repeat:ce,ratio:Fe,targets:X.targets,vars:X.vars,index:wt.index};R&&(or.silence=R),M&&(or.render=M),Bt(or),wt.prevMoment=Ut}},this.item=te,this.startAt=(0,k.Z)({},te.startAt),Object.keys(this.startAt).forEach(function(dt){wt.startAt[dt]=wt.changeValueToVars(dt,wt.startAt[dt],!0)});var Me={};for(var kt in te){var qt=te[kt];kt in ft?Me[kt]=qt:this.vars[kt]=this.changeValueToVars(kt,qt)}this.props=(0,k.Z)((0,k.Z)({},ft),Me),this.setEase(this.props.ease)}return(0,$.Z)(Ht,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Ht}(),$e=(0,$.Z)(function Ht(te){var wt=this;(0,h.Z)(this,Ht),this.props=void 0,this.id=void 0,this.children=[],this.totalTime=0,this.totalTimeRegion=0,this.childTotalTime=0,this.childRegionTotalTime=0,this.prevMoment=void 0,this.progressTime=0,this.progressMoment=-1,this.startMoment=0,this.startTime=0,this.repeatNum=0,this.mode="onTimelineStart",this.pausedState=void 0,this.reverseState=void 0,this.root=void 0,this.parent=void 0,this.regionStartTime=0,this.regionEndTime=void 0,this.onChangeChild=void 0,this.onChangeTimeline=void 0,this.init=function(){for(var dt=wt.props,Ut=dt.reverse,Q=dt.animation,ot=dt.moment,R=gt(Q),M=0;M<R.length;M++){var O=R[M];O.type==="set"&&(O.duration=0);var X=new xr(O);X.index=M;var mt=M?Ct(O,R[M-1]):0;O.appearTo=mt,X.appearTo=mt,wt.addChild(X)}wt.render({time:(Ut?wt.totalTime:0)+wt.startTime,elapsed:16.67}),wt.totalTime||wt.render({time:(Ut?wt.totalTime:0)+wt.startTime,elapsed:16.67}),ot?wt.goto(ot):wt.play()},this.addChild=function(dt){dt.parent=wt,dt.root=wt.root,wt.children.indexOf(dt)===-1&&(wt.children.push(dt),wt.setTotalTime())},this.setTotalTime=function(){wt.childTotalTime=0,wt.childRegionTotalTime=0;for(var dt=0;dt<wt.children.length;dt++){var Ut=wt.children[dt];if(Ut.appearTo!==wt.childTotalTime){var Q=Ut.appearTo+Ut.totalTime;Q>wt.childTotalTime&&(wt.childTotalTime=Q,wt.childRegionTotalTime=Q)}else wt.childTotalTime+=Ut.totalTime,wt.childRegionTotalTime+=Ut.totalTime}wt.regionStartTime&&(wt.childRegionTotalTime-=wt.regionStartTime),wt.regionEndTime&&(wt.childRegionTotalTime=wt.regionEndTime-wt.regionStartTime);var ot=wt.props,R=ot.repeat,M=R===void 0?0:R,O=ot.repeatDelay,X=O===void 0?0:O,mt=ot.delay;wt.totalTime=M===-1?Number.MAX_VALUE:mt+wt.childTotalTime*(M+1)+X*M,wt.totalTimeRegion=M===-1?Number.MAX_VALUE:mt+wt.childRegionTotalTime*(M+1)+X*M},this.setStartTimeOrMoment=function(dt){wt.startTime=Br.time,wt.startMoment=dt||wt.progressMoment},this.reRenderCall=function(){wt.render({time:wt.startTime,elapsed:Br.elapsed||Br.frameFPS})},this.play=function(dt){if(dt){var Q;(Q=wt.parent)===null||Q===void 0||Q.updateTickerState()}else{var Ut;(Ut=wt.parent)===null||Ut===void 0||Ut.addChild(wt)}},this.paused=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;wt.pausedState=dt,wt.setStartTimeOrMoment(),wt.play(dt)},this.reverse=function(dt){wt.reverseState=dt,wt.setStartTimeOrMoment(),wt.play(wt.pausedState)},this.goto=function(dt,Ut){var Q=dt-wt.regionStartTime;wt.startTime=Br.time,wt.startMoment=Q>wt.totalTime?wt.totalTime:Q,wt.progressMoment=wt.startMoment,wt.progressTime=Q,wt.play(wt.pausedState),wt.reRenderCall(),!!Ut!==wt.pausedState&&wt.paused(Ut)},this.kill=function(dt){if(typeof dt=="number")wt.paused(),delete wt.children[dt],wt.setTotalTime(),wt.paused(!1);else{var Ut;wt.children=[],(Ut=wt.parent)===null||Ut===void 0||Ut.removeChild(wt)}},this.onChange=function(dt){dt.timelineMoment=wt.progressMoment,wt.onChangeChild(dt)},this.render=function(dt){var Ut=dt.time,Q=dt.elapsed,ot=Q||Br.frameFPS||0,R=wt.totalTime,M=wt.totalTimeRegion,O=wt.childTotalTime,X=wt.childRegionTotalTime,mt=wt.children,Ft=wt.props,Bt=wt.startTime,ee=wt.reverseState,Le=wt.pausedState,me=wt.startMoment,Xe=wt.onChangeTimeline,pr=wt.parent,Ze=wt.root,Pr=wt.prevMoment,un=wt.regionStartTime,Ke=Ft.repeatDelay,lr=Ke===void 0?0:Ke,Rr=Ft.yoyo,Dr=Ft.delay,ce=Ft.repeat,jt=ce===void 0?0:ce;jt=jt===-1?Number.MAX_VALUE:jt;var pe=Ut-Bt-Dr,Oe=ee?me-pe:pe+me;if(!(Oe<-ot)){var Se=Oe<0?0:Oe;Se=Se>R?R:Se,Se=me<un?Oe:Se,Se=me>M?me:Se;var Fe=jt?Math.floor(Se/(X+lr)):0;Fe=jt&&Fe>jt?jt:Fe;var or=Se-(X+lr)*Fe,gr=!!(Rr&&Fe%2);or=gr?X-or:or,or=un+or;var Jr=ee?!gr:gr;if(wt.mode="onTimelineUpdate",typeof Pr!="number"&&(wt.mode="onTimelineStart"),Se>=M-Dr&&typeof Pr=="number"&&(wt.mode="onTimelineComplete"),Fe!==wt.repeatNum&&(wt.mode="onTimelineRepeat",Se>O*Fe&&Se<O*Fe+ot)){for(var Gn=Jr?0:mt.length-1;Jr?Gn<=mt.length-1:Gn>=0;Jr?Gn++:Gn--){var pn=mt[Gn];Jr||(pn.prevMoment=void 0),pn.render({moment:Jr?pn.totalTime:0,fps:ot})}Xe({moment:Se,totalTime:R,repeat:Fe,mode:wt.mode,targets:Ze.targets}),wt.mode="onTimelineUpdate"}jt&&(wt.repeatNum=Fe),wt.progressMoment=Se,wt.prevMoment=Se,wt.progressTime=pe;for(var qn=0;qn<mt.length;qn++){var ln=mt[qn],Vn=ln.totalTime+ln.appearTo,ca=or>=ln.appearTo-ot&&or<Vn+ot;if((ln.mode!=="onComplete"&&or>Vn+ot&&!gr&&ln.totalTime||typeof ln.mode=="undefined"&&!ln.totalTime)&&(ln.render({moment:ln.totalTime,fps:ot}),ln.prevMoment=void 0),or<ln.appearTo-ot&&ln.mode&&ln.mode!=="onStart"&&(ln.render({moment:ln.appearTo,fps:ot,silence:!0}),ln.prevMoment=void 0,ln.mode=void 0),ca){var ba=or<0?0:or;if(or>Vn&&ln.mode==="onComplete"&&!gr)return;ba=or>Vn?Vn:or,ln.render({moment:ba-ln.appearTo,fps:ot}),Vn||(ln.render({moment:ln.totalTime,fps:ot,render:!0}),ln.prevMoment=void 0)}}Xe({moment:Se,totalTime:R,repeat:Fe,mode:wt.mode,targets:Ze.targets}),(Le||M&&Oe+Dr>=M&&!ee||ee&&Oe+Dr<=0||!mt.length)&&(pr==null||pr.removeChild(wt))}},this.props=te;var Me=this.props,kt=Me.paused,qt=Me.reverse;this.reverseState=qt,this.pausedState=kt,this.regionStartTime=te.regionStartTime||0,this.regionEndTime=te.regionEndTime});St.push(ae),St.push(Tt),St.push(ue);var Tr=0,qr=new an,gn=function(){function Ht(te,wt){var Me=this;(0,h.Z)(this,Ht),this.targets=void 0,this.props=void 0,this.timeline=void 0,this.animate=void 0,this.$reverse=!1,this.vars=[],this.initTime=void 0,this.attr=void 0,this.init=function(){var kt=(0,b.Z)(Y().mark(function qt(dt){var Ut;return Y().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:Ut=bt(dt),Me.targets[0].tagName&&!Me.attr&&(Ut.animation=gt(Ut.animation).map(function(R){var M={style:{}};for(var O in R)O in St||O in ft?M[O]=R[O]:M.style[O]=R[O];return Object.keys(M.style).length||delete M.style,R.duration&&(R.duration=Math.round(R.duration)),R.delay&&(R.delay=Math.round(R.delay)),R.appearTo&&(R.appearTo=Math.round(R.appearTo)),R.repeatDelay&&(R.repeatDelay=Math.round(R.repeatDelay)),M})),Me.animate=new $e(Ut),Me.animate.id="TweenOne_".concat(Tr),Tr++,Me.animate.startTime=Me.initTime,Me.animate.onChangeChild=Me.onChange,Me.animate.onChangeTimeline=Me.onChangeTimeline,Me.animate.root=Me,Me.animate.parent=Me.timeline,Me.animate.init();case 11:case"end":return ot.stop()}},qt)}));return function(qt){return kt.apply(this,arguments)}}(),this.renderToDom=function(){for(var kt=0;kt<Me.vars.length;kt++){var qt=Me.vars[kt];for(var dt in qt){var Ut=qt[dt],Q=Me.targets[kt];if(Q)if(Me.props.attr&&Q.tagName&&Q.setAttribute){if(dt==="style")for(var ot in Ut)Q.style[ot]=Ut[dt];Q.setAttribute(dt,Ut)}else if(dt in St){var R=St[dt].key;if(typeof Q[R]=="function")Q[R](Ut.attr,Ut.path);else if((0,x.Z)(Ut)==="object"&&(0,x.Z)(Q[R])==="object"&&R)for(var M in Ut){var O=Ut[M];R==="__self"?Q[M]=O:Q[R][M]=(0,x.Z)(O)==="object"&&O.text||O}else Q[R||dt]=Ut}else Q[dt]=Ut}}},this.onChange=function(kt){kt.mode==="onComplete"&&kt.render&&Me.renderToDom(),kt.mode&&Me.props.onChange&&!kt.silence&&(kt.targets=Xt(kt.targets),kt.vars=Xt(kt.vars),Me.props.onChange(kt))},this.onChangeTimeline=function(kt){if(Me.renderToDom(),kt.mode==="onTimelineComplete"){var qt;(qt=kt.targets)===null||qt===void 0||qt.forEach(function(dt){delete dt._tweenOneVars})}kt.mode&&Me.props.onChangeTimeline&&(kt.targets=Xt(kt.targets),kt.vars=Xt(Me.vars),Me.props.onChangeTimeline(kt))},this.goto=function(kt,qt){Me.targets.forEach(function(dt){dt&&Object.keys(dt._tweenOneVars||{}).forEach(function(Ut){delete dt._tweenOneVars[Ut]})}),Me.animate.goto(kt,qt)},this.kill=function(kt){Me.animate.kill(kt)},this.targets=te,this.props=wt,this.timeline=qr,this.initTime=Br.time,this.attr=wt.attr,te.forEach(function(kt){Me.vars.push(kt._tweenOneVars)}),this.init(wt)}return(0,$.Z)(Ht,[{key:"paused",get:function(){return this.animate.pausedState},set:function(wt){this.animate.paused(wt)}},{key:"reverse",get:function(){return this.$reverse},set:function(wt){this.$reverse=wt,this.animate.reverse(wt)}},{key:"regionStartTime",get:function(){return this.animate.regionStartTime},set:function(wt){this.animate.regionStartTime=wt,this.animate.setTotalTime()}},{key:"regionEndTime",get:function(){return this.animate.regionEndTime||this.animate.totalTime},set:function(wt){this.animate.regionEndTime=wt,this.animate.setTotalTime()}}]),Ht}(),xn=function(te,wt){if(!te){console.error("Error: targets is undefined.");return}Br.state!=="wake"&&Br.wake();var Me=gt(te).map(function(Ut){return Ut._tweenOneVars=Ut._tweenOneVars||{},Ut}),kt=Me.filter(function(Ut){return Ut.tagName}),qt=Me.filter(function(Ut){return!Ut.tagName}),dt=[];return kt.length&&dt.push(new gn(kt,wt)),qt.length&&dt.push(new gn(qt,wt)),Xt(dt)};xn.kill=function(Ht){typeof Ht=="undefined"?qr.killAll(!0):qr.kill(gt(Ht))},xn.plugins=St;var Rn=xn,Mr=Rn;function dn(Ht){return!Ht&&Ht!==0?[]:Array.isArray(Ht)?Ht:[Ht]}function hn(Ht,te){if(!Ht||!te)return!1;var wt=Object.keys(Ht),Me=Object.keys(te);return wt.length&&Me.length&&wt.length===Me.length?!wt.some(function(kt){var qt=Ht[kt],dt=te[kt];if(Array.isArray(qt)&&Array.isArray(dt)){var Ut=qt.join(),Q=dt.join();Ut===Q&&!Ut.match(/\[object object\]/gi)&&(qt=Ut,dt=Q)}return qt!==dt}):!1}function sn(Ht,te){if(Ht===te||hn(Ht,te))return!0;if(!Ht||!te||Object.keys(Ht).length!==Object.keys(te).length)return!1;var wt=!0,Me=function(qt,dt){var Ut=Object.keys(qt).length>Object.keys(dt).length?qt:dt,Q=Object.keys(qt).length>Object.keys(dt).length?dt:qt;Object.keys(Ut).forEach(function(ot){wt&&(ot in Q||(wt=!1),(0,x.Z)(Ut[ot])==="object"&&(0,x.Z)(Q[ot])==="object"?wt=sn(Ut[ot],Q[ot]):typeof Ut[ot]=="function"&&typeof Q[ot]=="function"?Ut[ot].toString().replace(/\s+/g,"")!==Q[ot].toString().replace(/\s+/g,"")&&(wt=!1):Ut[ot]!==Q[ot]&&(wt=!1))})};return Array.isArray(Ht)&&Array.isArray(te)?Ht.forEach(function(kt,qt){Me(kt,te[qt])}):Me(Ht,te),wt}var Wn=["component","componentProps","animation","attr","paused","reverse","repeat","repeatDelay","yoyo","moment","onChange","onChangeTimeline","resetStyle","killPrevAnim"],Mn=L.forwardRef(function(Ht,te){var wt=Ht.component,Me=wt===void 0?"div":wt,kt=Ht.componentProps,qt=Ht.animation,dt=Ht.attr,Ut=Ht.paused,Q=Ht.reverse,ot=Ht.repeat,R=Ht.repeatDelay,M=Ht.yoyo,O=Ht.moment,X=Ht.onChange,mt=Ht.onChangeTimeline,Ft=Ht.resetStyle,Bt=Ht.killPrevAnim,ee=Bt===void 0?!0:Bt,Le=(0,T.Z)(Ht,Wn),me=Le||{},Xe=me.children,pr=me.className,Ze=me.style,Pr=Ze===void 0?{}:Ze,un=(0,L.useRef)(),Ke=(0,L.useRef)(),lr=(0,L.useRef)(),Rr=function(Jr,Gn){var pn=lr.current;if(pn){if(Jr==="moment"){typeof Gn=="number"&&pn.goto(Gn,Ut);return}pn[Jr]=!!Gn}};A(function(){Rr("paused",Ut)},[Ut]),A(function(){Rr("moment",O)},[O]),A(function(){Rr("reverse",Q)},[Q]),A(function(){if(!un.current)return console.warn("Warning: TweenOne domRef is error.");if(!sn(qt,Ke.current)){var gr=dn(un.current).map(function(pn){return pn instanceof Element||!(pn instanceof L.Component)?pn:(0,D.findDOMNode)(pn)}).filter(function(pn,qn){return pn instanceof Element?pn:(console.warn("Warning: TweenOne tag[".concat(qn,"] is not dom.")),!1)});if(lr.current&&ee&&lr.current.kill(),Ft&&lr.current){var Jr=Me?Pr:(0,k.Z)((0,k.Z)({},Pr),Xe.props.style),Gn=Object.keys(Jr).map(function(pn){return"".concat((0,U.Rs)(pn),":").concat((0,U.YJ)(pn,Jr[pn]))}).join(";");gr.forEach(function(pn){pn.setAttribute("style",Gn),delete pn._tweenOneVars})}lr.current=qt&&Mr(gr,{animation:qt,attr:dt,yoyo:M,moment:O,repeat:ot,reverse:Q,paused:Ut,repeatDelay:R,onChange:X,onChangeTimeline:mt}),Ke.current=qt}},[qt]),(0,L.useEffect)(function(){return function(){lr.current&&lr.current.kill&&lr.current.kill()}},[]);var Dr=function(Jr){un.current=Jr,te&&"current"in te?te.current=Jr:typeof te=="function"&&te(Jr)};if(!Me&&Xe&&typeof Xe!="string"&&typeof Xe!="boolean"&&typeof Xe!="number"){var ce=Xe.props,jt=ce||{},pe=jt.style,Oe=jt.className,Se=Oe===void 0?"":Oe,Fe=(0,k.Z)((0,k.Z)({},pe),Pr),or=pr?"".concat(pr," ").concat(Se).trim():Se;return L.cloneElement(Xe,{style:Fe,ref:Dr,className:(0,E.Z)(new Set(or.split(/\s+/))).join(" ").trim()||void 0})}return Me?(0,L.createElement)(Me,(0,k.Z)((0,k.Z)({ref:Dr},Le),kt)):(console.warn("Warning: component is null, children must be ReactElement."),Xe)});Mn.isTweenOne=!0,Mn.displayName="TweenOne";var In=Mn,jn=["component","componentProps","leave","enter","appear","resetStyle","animatingClassName","onEnd","exclusive"],at=L.forwardRef(function(Ht,te){var wt=Ht.component,Me=wt===void 0?"div":wt,kt=Ht.componentProps,qt=kt===void 0?{}:kt,dt=Ht.leave,Ut=dt===void 0?{x:-50,opacity:0}:dt,Q=Ht.enter,ot=Q===void 0?{x:50,opacity:0,type:"from"}:Q,R=Ht.appear,M=R===void 0?!0:R,O=Ht.resetStyle,X=O===void 0?!0:O,mt=Ht.animatingClassName,Ft=mt===void 0?["tween-one-entering","tween-one-leaving"]:mt,Bt=Ht.onEnd,ee=Bt===void 0?function(){}:Bt,Le=Ht.exclusive,me=Le===void 0?!1:Le,Xe=(0,T.Z)(Ht,jn),pr=(0,L.useRef)([]),Ze=(0,L.useRef)([]),Pr=(0,L.useRef)({}),un=(0,L.useRef)(!1),Ke=(0,L.useRef)([]),lr=(0,L.useRef)({}),Rr=P(y(Ht)),Dr=(0,L.useRef)(Rr),ce=(0,L.useState)(Rr),jt=(0,w.Z)(ce,2),pe=jt[0],Oe=jt[1],Se=function(ln){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ca=ln.key;return Pr.current[ca]=L.createElement(In,(0,k.Z)((0,k.Z)({},Vn),{},{key:ca,component:null}),ln),Pr.current[ca]},Fe=function(ln,Vn){var ca=ln.replace(Ft[Vn?1:0],"").trim();return ca.indexOf(Ft[Vn?0:1])===-1&&(ca="".concat(ca," ").concat(Ft[Vn?0:1]).trim()),ca},or=function(ln,Vn){var ca=m(Vn,ln);return pr.current=[],Ze.current=[],ln.forEach(function(ba){if(ba){var Ea=ba.key,Ni=p(Vn,Ea);Ea&&Pr.current[Ea]&&(Pr.current[Ea]=L.cloneElement(Pr.current[Ea],{},ba)),!Ni&&Ea&&pr.current.push(Ea)}}),Vn.forEach(function(ba){if(ba){var Ea=ba.key,Ni=p(ln,Ea);!Ni&&Ea&&(Ze.current.push(Ea),delete Pr.current[Ea])}}),ca},gr=function(){if(!Object.keys(lr.current).length&&Ke.current.length){var ln=or(Ke.current[Ke.current.length-1],Dr.current);Oe(ln),Ke.current=[]}},Jr=function(ln,Vn,ca){var ba=ca.targets,Ea=(0,x.Z)(ba.className)==="object"&&"baseVal"in ba.className,Ni=Vn==="enter"||Vn==="appear";if(ln&&ca.mode==="onTimelineComplete"){if(delete lr.current[ln],Ea?ba.className.baseVal=ba.className.baseVal.replace(Ft[Ni?0:1],"").trim():ba.className=ba.className.replace(Ft[Ni?0:1],"").trim(),Ni)pr.current.splice(pr.current.indexOf(ln),1),pr.current.length||gr();else if(Vn==="leave"&&(Ze.current.splice(Ze.current.indexOf(ln),1),Dr.current=Dr.current.filter(function(ei){return ln!==ei.key}),!Ze.current.length)){var ti=Dr.current.map(function(ei){return ei.key});Object.keys(Pr.current).forEach(function(ei){ti.indexOf(ei)===-1&&delete Pr.current[ei]}),Oe(Dr.current)}ee({key:ln,type:Vn,target:ca.targets})}},Gn=function(ln,Vn,ca){var ba=ca==="leave"?Ut:ot;if(ca==="appear"){var Ea=S(M,ln.key,Vn);ba=Ea&&ot||null}var Ni=S(ba,ln.key,Vn),ti=function(Co){Jr(ln.key,ca,Co)},ei=ca==="appear"&&!M?ln.props.className:Fe(ln.props.className||"",ca==="enter"||ca==="appear")||void 0,wi={key:ln.key,animation:Ni,onChangeTimeline:ti,resetStyle:X,className:ei};return(ln.key&&pr.current.concat(Ze.current).indexOf(ln.key)>=0||!un.current&&ba)&&ln.key&&!Pr.current[ln.key]&&(lr.current[ln.key]=ca),Se(ln,wi)};A(function(){if(un.current){var qn=P(Ht.children).filter(function(Vn){return Vn}),ln=P(Dr.current);Object.keys(lr.current).length&&!me?Ke.current.push(qn):Oe(or(qn,ln))}},[Ht.children]),A(function(){gr()}),(0,L.useEffect)(function(){un.current=!0},[]),Dr.current=pe;var pn=pe.map(function(qn,ln){if(!qn||!qn.key)return qn;var Vn=qn.key;return Ze.current.indexOf(Vn)>=0?Gn(qn,Ze.current.indexOf(Vn),"leave"):(pr.current.indexOf(Vn)>=0||lr.current[Vn]&&Ze.current.indexOf(Vn)===-1)&&!(lr.current[Vn]==="enter"&&Pr.current[Vn])?Gn(qn,pr.current.indexOf(Vn),"enter"):un.current?Pr.current[Vn]:Gn(qn,ln,"appear")});return g?Me?(0,L.createElement)(Me,(0,k.Z)((0,k.Z)((0,k.Z)({},Xe),qt),{},{ref:te}),Ht.children):L.createElement(L.Fragment,null,Ht.children):Me?(0,L.createElement)(Me,(0,k.Z)((0,k.Z)((0,k.Z)({},Xe),qt),{},{ref:te}),pn):pn[0]?(0,L.cloneElement)(pn[0],{ref:te}):null});at.displayName="TweenOneGroup",at.isTweenOneGroup=!0;var Je=at},217857:function(Ve,z,C){"use strict";var x;x={value:!0};var k=C(667294),w=C(308273);function T(rt,ft){var it=rt==null?null:typeof Symbol!="undefined"&&rt[Symbol.iterator]||rt["@@iterator"];if(it!=null){var bt,gt,Xt,Ct,At=[],Z=!0,J=!1;try{if(Xt=(it=it.call(rt)).next,ft===0){if(Object(it)!==it)return;Z=!1}else for(;!(Z=(bt=Xt.call(it)).done)&&(At.push(bt.value),At.length!==ft);Z=!0);}catch(yt){J=!0,gt=yt}finally{try{if(!Z&&it.return!=null&&(Ct=it.return(),Object(Ct)!==Ct))return}finally{if(J)throw gt}}return At}}function L(rt,ft){var it=Object.keys(rt);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(rt);ft&&(bt=bt.filter(function(gt){return Object.getOwnPropertyDescriptor(rt,gt).enumerable})),it.push.apply(it,bt)}return it}function P(rt){for(var ft=1;ft<arguments.length;ft++){var it=arguments[ft]!=null?arguments[ft]:{};ft%2?L(Object(it),!0).forEach(function(bt){p(rt,bt,it[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(it)):L(Object(it)).forEach(function(bt){Object.defineProperty(rt,bt,Object.getOwnPropertyDescriptor(it,bt))})}return rt}function p(rt,ft,it){return ft=b(ft),ft in rt?Object.defineProperty(rt,ft,{value:it,enumerable:!0,configurable:!0,writable:!0}):rt[ft]=it,rt}function m(){return m=Object.assign?Object.assign.bind():function(rt){for(var ft=1;ft<arguments.length;ft++){var it=arguments[ft];for(var bt in it)Object.prototype.hasOwnProperty.call(it,bt)&&(rt[bt]=it[bt])}return rt},m.apply(this,arguments)}function S(rt,ft){if(rt==null)return{};var it={},bt=Object.keys(rt),gt,Xt;for(Xt=0;Xt<bt.length;Xt++)gt=bt[Xt],!(ft.indexOf(gt)>=0)&&(it[gt]=rt[gt]);return it}function y(rt,ft){if(rt==null)return{};var it=S(rt,ft),bt,gt;if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(rt);for(gt=0;gt<Xt.length;gt++)bt=Xt[gt],!(ft.indexOf(bt)>=0)&&Object.prototype.propertyIsEnumerable.call(rt,bt)&&(it[bt]=rt[bt])}return it}function g(rt,ft){return A(rt)||T(rt,ft)||E(rt,ft)||F()}function A(rt){if(Array.isArray(rt))return rt}function E(rt,ft){if(rt){if(typeof rt=="string")return D(rt,ft);var it=Object.prototype.toString.call(rt).slice(8,-1);if(it==="Object"&&rt.constructor&&(it=rt.constructor.name),it==="Map"||it==="Set")return Array.from(rt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return D(rt,ft)}}function D(rt,ft){(ft==null||ft>rt.length)&&(ft=rt.length);for(var it=0,bt=new Array(ft);it<ft;it++)bt[it]=rt[it];return bt}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(rt,ft){if(typeof rt!="object"||rt===null)return rt;var it=rt[Symbol.toPrimitive];if(it!==void 0){var bt=it.call(rt,ft||"default");if(typeof bt!="object")return bt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ft==="string"?String:Number)(rt)}function b(rt){var ft=Y(rt,"string");return typeof ft=="symbol"?ft:String(ft)}var h=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?k.useLayoutEffect:k.useEffect;function $(rt){var ft=k.useRef(rt);return h(function(){ft.current=rt}),k.useCallback(function(){for(var it=arguments.length,bt=new Array(it),gt=0;gt<it;gt++)bt[gt]=arguments[gt];return ft.current.apply(void 0,bt)},[])}var U=function(ft,it){var bt=it.decimal,gt=it.decimals,Xt=it.duration,Ct=it.easingFn,At=it.end,Z=it.formattingFn,J=it.numerals,yt=it.prefix,_t=it.separator,nt=it.start,vt=it.suffix,It=it.useEasing,Pt=it.useGrouping,St=it.useIndianSeparators,Dt=it.enableScrollSpy,Qt=it.scrollSpyDelay,ue=it.scrollSpyOnce;return new w.CountUp(ft,At,{startVal:nt,duration:Xt,decimal:bt,decimalPlaces:gt,easingFn:Ct,formattingFn:Z,numerals:J,separator:_t,prefix:yt,suffix:vt,useEasing:It,useIndianSeparators:St,useGrouping:Pt,enableScrollSpy:Dt,scrollSpyDelay:Qt,scrollSpyOnce:ue})},W=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],V={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},H=function(ft){var it=Object.fromEntries(Object.entries(ft).filter(function(ae){var Ce=g(ae,2),xe=Ce[1];return xe!==void 0})),bt=k.useMemo(function(){return P(P({},V),it)},[ft]),gt=bt.ref,Xt=bt.startOnMount,Ct=bt.enableReinitialize,At=bt.delay,Z=bt.onEnd,J=bt.onStart,yt=bt.onPauseResume,_t=bt.onReset,nt=bt.onUpdate,vt=y(bt,W),It=k.useRef(),Pt=k.useRef(),St=k.useRef(!1),Dt=$(function(){return U(typeof gt=="string"?gt:gt.current,vt)}),Qt=$(function(ae){var Ce=It.current;if(Ce&&!ae)return Ce;var xe=Dt();return It.current=xe,xe}),ue=$(function(){var ae=function(){return Qt(!0).start(function(){Z==null||Z({pauseResume:ie,reset:Lt,start:ve,update:ne})})};At&&At>0?Pt.current=setTimeout(ae,At*1e3):ae(),J==null||J({pauseResume:ie,reset:Lt,update:ne})}),ie=$(function(){Qt().pauseResume(),yt==null||yt({reset:Lt,start:ve,update:ne})}),Lt=$(function(){Qt().el&&(Pt.current&&clearTimeout(Pt.current),Qt().reset(),_t==null||_t({pauseResume:ie,start:ve,update:ne}))}),ne=$(function(ae){Qt().update(ae),nt==null||nt({pauseResume:ie,reset:Lt,start:ve})}),ve=$(function(){Lt(),ue()}),Wt=$(function(ae){Xt&&(ae&&Lt(),ue())});return k.useEffect(function(){St.current?Ct&&Wt(!0):(St.current=!0,Wt())},[Ct,St,Wt,At,ft.start,ft.suffix,ft.prefix,ft.duration,ft.separator,ft.decimals,ft.decimal,ft.formattingFn]),k.useEffect(function(){return function(){Lt()}},[Lt]),{start:ve,pauseResume:ie,reset:Lt,update:ne,getCountUp:Qt}},q=["className","redraw","containerProps","children","style"],tt=function(ft){var it=ft.className,bt=ft.redraw,gt=ft.containerProps,Xt=ft.children,Ct=ft.style,At=y(ft,q),Z=k.useRef(null),J=k.useRef(!1),yt=H(P(P({},At),{},{ref:Z,startOnMount:typeof Xt!="function"||ft.delay===0,enableReinitialize:!1})),_t=yt.start,nt=yt.reset,vt=yt.update,It=yt.pauseResume,Pt=yt.getCountUp,St=$(function(){_t()}),Dt=$(function(ie){ft.preserveValue||nt(),vt(ie)}),Qt=$(function(){if(typeof ft.children=="function"&&!(Z.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}Pt()});k.useEffect(function(){Qt()},[Qt]),k.useEffect(function(){J.current&&Dt(ft.end)},[ft.end,Dt]);var ue=bt&&ft;return k.useEffect(function(){bt&&J.current&&St()},[St,bt,ue]),k.useEffect(function(){!bt&&J.current&&St()},[St,bt,ft.start,ft.suffix,ft.prefix,ft.duration,ft.separator,ft.decimals,ft.decimal,ft.className,ft.formattingFn]),k.useEffect(function(){J.current=!0},[]),typeof Xt=="function"?Xt({countUpRef:Z,start:_t,reset:nt,update:vt,pauseResume:It,getCountUp:Pt}):k.createElement("span",m({className:it,ref:Z,style:Ct},gt),typeof ft.start!="undefined"?Pt().formattingFn(ft.start):"")};z.ZP=tt,x=H},175668:function(Ve,z,C){"use strict";function x(nt){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},x(nt)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"DraggableCore",{enumerable:!0,get:function(){return S.default}}),z.default=void 0;var k=D(C(667294)),w=A(C(45697)),T=A(C(973935)),L=A(C(386010)),P=C(381825),p=C(102849),m=C(909280),S=A(C(180783)),y=A(C(955904)),g=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function A(nt){return nt&&nt.__esModule?nt:{default:nt}}function E(nt){if(typeof WeakMap!="function")return null;var vt=new WeakMap,It=new WeakMap;return(E=function(St){return St?It:vt})(nt)}function D(nt,vt){if(!vt&&nt&&nt.__esModule)return nt;if(nt===null||x(nt)!=="object"&&typeof nt!="function")return{default:nt};var It=E(vt);if(It&&It.has(nt))return It.get(nt);var Pt={},St=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Dt in nt)if(Dt!=="default"&&Object.prototype.hasOwnProperty.call(nt,Dt)){var Qt=St?Object.getOwnPropertyDescriptor(nt,Dt):null;Qt&&(Qt.get||Qt.set)?Object.defineProperty(Pt,Dt,Qt):Pt[Dt]=nt[Dt]}return Pt.default=nt,It&&It.set(nt,Pt),Pt}function F(){return F=Object.assign||function(nt){for(var vt=1;vt<arguments.length;vt++){var It=arguments[vt];for(var Pt in It)Object.prototype.hasOwnProperty.call(It,Pt)&&(nt[Pt]=It[Pt])}return nt},F.apply(this,arguments)}function Y(nt,vt){if(nt==null)return{};var It=b(nt,vt),Pt,St;if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(nt);for(St=0;St<Dt.length;St++)Pt=Dt[St],!(vt.indexOf(Pt)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,Pt)&&(It[Pt]=nt[Pt])}return It}function b(nt,vt){if(nt==null)return{};var It={},Pt=Object.keys(nt),St,Dt;for(Dt=0;Dt<Pt.length;Dt++)St=Pt[Dt],!(vt.indexOf(St)>=0)&&(It[St]=nt[St]);return It}function h(nt,vt){var It=Object.keys(nt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(nt);vt&&(Pt=Pt.filter(function(St){return Object.getOwnPropertyDescriptor(nt,St).enumerable})),It.push.apply(It,Pt)}return It}function $(nt){for(var vt=1;vt<arguments.length;vt++){var It=arguments[vt]!=null?arguments[vt]:{};vt%2?h(Object(It),!0).forEach(function(Pt){yt(nt,Pt,It[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(It)):h(Object(It)).forEach(function(Pt){Object.defineProperty(nt,Pt,Object.getOwnPropertyDescriptor(It,Pt))})}return nt}function U(nt,vt){return tt(nt)||q(nt,vt)||V(nt,vt)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(nt,vt){if(nt){if(typeof nt=="string")return H(nt,vt);var It=Object.prototype.toString.call(nt).slice(8,-1);if(It==="Object"&&nt.constructor&&(It=nt.constructor.name),It==="Map"||It==="Set")return Array.from(nt);if(It==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(It))return H(nt,vt)}}function H(nt,vt){(vt==null||vt>nt.length)&&(vt=nt.length);for(var It=0,Pt=new Array(vt);It<vt;It++)Pt[It]=nt[It];return Pt}function q(nt,vt){var It=nt==null?null:typeof Symbol!="undefined"&&nt[Symbol.iterator]||nt["@@iterator"];if(It!=null){var Pt=[],St=!0,Dt=!1,Qt,ue;try{for(It=It.call(nt);!(St=(Qt=It.next()).done)&&(Pt.push(Qt.value),!(vt&&Pt.length===vt));St=!0);}catch(ie){Dt=!0,ue=ie}finally{try{!St&&It.return!=null&&It.return()}finally{if(Dt)throw ue}}return Pt}}function tt(nt){if(Array.isArray(nt))return nt}function rt(nt,vt){if(!(nt instanceof vt))throw new TypeError("Cannot call a class as a function")}function ft(nt,vt){for(var It=0;It<vt.length;It++){var Pt=vt[It];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(nt,Pt.key,Pt)}}function it(nt,vt,It){return vt&&ft(nt.prototype,vt),It&&ft(nt,It),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function bt(nt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(vt&&vt.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),vt&&gt(nt,vt)}function gt(nt,vt){return gt=Object.setPrototypeOf||function(Pt,St){return Pt.__proto__=St,Pt},gt(nt,vt)}function Xt(nt){var vt=Z();return function(){var Pt=J(nt),St;if(vt){var Dt=J(this).constructor;St=Reflect.construct(Pt,arguments,Dt)}else St=Pt.apply(this,arguments);return Ct(this,St)}}function Ct(nt,vt){if(vt&&(x(vt)==="object"||typeof vt=="function"))return vt;if(vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(nt)}function At(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}function J(nt){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(It){return It.__proto__||Object.getPrototypeOf(It)},J(nt)}function yt(nt,vt,It){return vt in nt?Object.defineProperty(nt,vt,{value:It,enumerable:!0,configurable:!0,writable:!0}):nt[vt]=It,nt}var _t=function(nt){bt(It,nt);var vt=Xt(It);function It(Pt){var St;return rt(this,It),St=vt.call(this,Pt),yt(At(St),"onDragStart",function(Dt,Qt){(0,y.default)("Draggable: onDragStart: %j",Qt);var ue=St.props.onStart(Dt,(0,p.createDraggableData)(At(St),Qt));if(ue===!1)return!1;St.setState({dragging:!0,dragged:!0})}),yt(At(St),"onDrag",function(Dt,Qt){if(!St.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",Qt);var ue=(0,p.createDraggableData)(At(St),Qt),ie={x:ue.x,y:ue.y};if(St.props.bounds){var Lt=ie.x,ne=ie.y;ie.x+=St.state.slackX,ie.y+=St.state.slackY;var ve=(0,p.getBoundPosition)(At(St),ie.x,ie.y),Wt=U(ve,2),ae=Wt[0],Ce=Wt[1];ie.x=ae,ie.y=Ce,ie.slackX=St.state.slackX+(Lt-ie.x),ie.slackY=St.state.slackY+(ne-ie.y),ue.x=ie.x,ue.y=ie.y,ue.deltaX=ie.x-St.state.x,ue.deltaY=ie.y-St.state.y}var xe=St.props.onDrag(Dt,ue);if(xe===!1)return!1;St.setState(ie)}),yt(At(St),"onDragStop",function(Dt,Qt){if(!St.state.dragging)return!1;var ue=St.props.onStop(Dt,(0,p.createDraggableData)(At(St),Qt));if(ue===!1)return!1;(0,y.default)("Draggable: onDragStop: %j",Qt);var ie={dragging:!1,slackX:0,slackY:0},Lt=!!St.props.position;if(Lt){var ne=St.props.position,ve=ne.x,Wt=ne.y;ie.x=ve,ie.y=Wt}St.setState(ie)}),St.state={dragging:!1,dragged:!1,x:Pt.position?Pt.position.x:Pt.defaultPosition.x,y:Pt.position?Pt.position.y:Pt.defaultPosition.y,prevPropsPosition:$({},Pt.position),slackX:0,slackY:0,isElementSVG:!1},Pt.position&&!(Pt.onDrag||Pt.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),St}return it(It,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var St,Dt,Qt;return(St=(Dt=this.props)===null||Dt===void 0||(Qt=Dt.nodeRef)===null||Qt===void 0?void 0:Qt.current)!==null&&St!==void 0?St:T.default.findDOMNode(this)}},{key:"render",value:function(){var St,Dt=this.props,Qt=Dt.axis,ue=Dt.bounds,ie=Dt.children,Lt=Dt.defaultPosition,ne=Dt.defaultClassName,ve=Dt.defaultClassNameDragging,Wt=Dt.defaultClassNameDragged,ae=Dt.position,Ce=Dt.positionOffset,xe=Dt.scale,Jt=Y(Dt,g),we={},Tt=null,Pe=!!ae,_r=!Pe||this.state.dragging,Ar=ae||Lt,Or={x:(0,p.canDragX)(this)&&_r?this.state.x:Ar.x,y:(0,p.canDragY)(this)&&_r?this.state.y:Ar.y};this.state.isElementSVG?Tt=(0,P.createSVGTransform)(Or,Ce):we=(0,P.createCSSTransform)(Or,Ce);var Br=(0,L.default)(ie.props.className||"",ne,(St={},yt(St,ve,this.state.dragging),yt(St,Wt,this.state.dragged),St));return k.createElement(S.default,F({},Jt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),k.cloneElement(k.Children.only(ie),{className:Br,style:$($({},ie.props.style),we),transform:Tt}))}}],[{key:"getDerivedStateFromProps",value:function(St,Dt){var Qt=St.position,ue=Dt.prevPropsPosition;return Qt&&(!ue||Qt.x!==ue.x||Qt.y!==ue.y)?((0,y.default)("Draggable: getDerivedStateFromProps %j",{position:Qt,prevPropsPosition:ue}),{x:Qt.x,y:Qt.y,prevPropsPosition:$({},Qt)}):null}}]),It}(k.Component);z.default=_t,yt(_t,"displayName","Draggable"),yt(_t,"propTypes",$($({},S.default.propTypes),{},{axis:w.default.oneOf(["both","x","y","none"]),bounds:w.default.oneOfType([w.default.shape({left:w.default.number,right:w.default.number,top:w.default.number,bottom:w.default.number}),w.default.string,w.default.oneOf([!1])]),defaultClassName:w.default.string,defaultClassNameDragging:w.default.string,defaultClassNameDragged:w.default.string,defaultPosition:w.default.shape({x:w.default.number,y:w.default.number}),positionOffset:w.default.shape({x:w.default.oneOfType([w.default.number,w.default.string]),y:w.default.oneOfType([w.default.number,w.default.string])}),position:w.default.shape({x:w.default.number,y:w.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe})),yt(_t,"defaultProps",$($({},S.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},180783:function(Ve,z,C){"use strict";function x(Ct){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},x(Ct)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=g(C(667294)),w=S(C(45697)),T=S(C(973935)),L=C(381825),P=C(102849),p=C(909280),m=S(C(955904));function S(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}function y(Ct){if(typeof WeakMap!="function")return null;var At=new WeakMap,Z=new WeakMap;return(y=function(yt){return yt?Z:At})(Ct)}function g(Ct,At){if(!At&&Ct&&Ct.__esModule)return Ct;if(Ct===null||x(Ct)!=="object"&&typeof Ct!="function")return{default:Ct};var Z=y(At);if(Z&&Z.has(Ct))return Z.get(Ct);var J={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _t in Ct)if(_t!=="default"&&Object.prototype.hasOwnProperty.call(Ct,_t)){var nt=yt?Object.getOwnPropertyDescriptor(Ct,_t):null;nt&&(nt.get||nt.set)?Object.defineProperty(J,_t,nt):J[_t]=Ct[_t]}return J.default=Ct,Z&&Z.set(Ct,J),J}function A(Ct,At){return b(Ct)||Y(Ct,At)||D(Ct,At)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ct,At){if(Ct){if(typeof Ct=="string")return F(Ct,At);var Z=Object.prototype.toString.call(Ct).slice(8,-1);if(Z==="Object"&&Ct.constructor&&(Z=Ct.constructor.name),Z==="Map"||Z==="Set")return Array.from(Ct);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return F(Ct,At)}}function F(Ct,At){(At==null||At>Ct.length)&&(At=Ct.length);for(var Z=0,J=new Array(At);Z<At;Z++)J[Z]=Ct[Z];return J}function Y(Ct,At){var Z=Ct==null?null:typeof Symbol!="undefined"&&Ct[Symbol.iterator]||Ct["@@iterator"];if(Z!=null){var J=[],yt=!0,_t=!1,nt,vt;try{for(Z=Z.call(Ct);!(yt=(nt=Z.next()).done)&&(J.push(nt.value),!(At&&J.length===At));yt=!0);}catch(It){_t=!0,vt=It}finally{try{!yt&&Z.return!=null&&Z.return()}finally{if(_t)throw vt}}return J}}function b(Ct){if(Array.isArray(Ct))return Ct}function h(Ct,At){if(!(Ct instanceof At))throw new TypeError("Cannot call a class as a function")}function $(Ct,At){for(var Z=0;Z<At.length;Z++){var J=At[Z];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(Ct,J.key,J)}}function U(Ct,At,Z){return At&&$(Ct.prototype,At),Z&&$(Ct,Z),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}function W(Ct,At){if(typeof At!="function"&&At!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(At&&At.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),At&&V(Ct,At)}function V(Ct,At){return V=Object.setPrototypeOf||function(J,yt){return J.__proto__=yt,J},V(Ct,At)}function H(Ct){var At=rt();return function(){var J=ft(Ct),yt;if(At){var _t=ft(this).constructor;yt=Reflect.construct(J,arguments,_t)}else yt=J.apply(this,arguments);return q(this,yt)}}function q(Ct,At){if(At&&(x(At)==="object"||typeof At=="function"))return At;if(At!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tt(Ct)}function tt(Ct){if(Ct===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ct}function rt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ct){return!1}}function ft(Ct){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},ft(Ct)}function it(Ct,At,Z){return At in Ct?Object.defineProperty(Ct,At,{value:Z,enumerable:!0,configurable:!0,writable:!0}):Ct[At]=Z,Ct}var bt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},gt=bt.mouse,Xt=function(Ct){W(Z,Ct);var At=H(Z);function Z(){var J;h(this,Z);for(var yt=arguments.length,_t=new Array(yt),nt=0;nt<yt;nt++)_t[nt]=arguments[nt];return J=At.call.apply(At,[this].concat(_t)),it(tt(J),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),it(tt(J),"mounted",!1),it(tt(J),"handleDragStart",function(vt){if(J.props.onMouseDown(vt),!J.props.allowAnyClick&&typeof vt.button=="number"&&vt.button!==0)return!1;var It=J.findDOMNode();if(!It||!It.ownerDocument||!It.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Pt=It.ownerDocument;if(!(J.props.disabled||!(vt.target instanceof Pt.defaultView.Node)||J.props.handle&&!(0,L.matchesSelectorAndParentsTo)(vt.target,J.props.handle,It)||J.props.cancel&&(0,L.matchesSelectorAndParentsTo)(vt.target,J.props.cancel,It))){vt.type==="touchstart"&&vt.preventDefault();var St=(0,L.getTouchIdentifier)(vt);J.setState({touchIdentifier:St});var Dt=(0,P.getControlPosition)(vt,St,tt(J));if(Dt!=null){var Qt=Dt.x,ue=Dt.y,ie=(0,P.createCoreData)(tt(J),Qt,ue);(0,m.default)("DraggableCore: handleDragStart: %j",ie),(0,m.default)("calling",J.props.onStart);var Lt=J.props.onStart(vt,ie);Lt===!1||J.mounted===!1||(J.props.enableUserSelectHack&&(0,L.addUserSelectStyles)(Pt),J.setState({dragging:!0,lastX:Qt,lastY:ue}),(0,L.addEvent)(Pt,gt.move,J.handleDrag),(0,L.addEvent)(Pt,gt.stop,J.handleDragStop))}}}),it(tt(J),"handleDrag",function(vt){var It=(0,P.getControlPosition)(vt,J.state.touchIdentifier,tt(J));if(It!=null){var Pt=It.x,St=It.y;if(Array.isArray(J.props.grid)){var Dt=Pt-J.state.lastX,Qt=St-J.state.lastY,ue=(0,P.snapToGrid)(J.props.grid,Dt,Qt),ie=A(ue,2);if(Dt=ie[0],Qt=ie[1],!Dt&&!Qt)return;Pt=J.state.lastX+Dt,St=J.state.lastY+Qt}var Lt=(0,P.createCoreData)(tt(J),Pt,St);(0,m.default)("DraggableCore: handleDrag: %j",Lt);var ne=J.props.onDrag(vt,Lt);if(ne===!1||J.mounted===!1){try{J.handleDragStop(new MouseEvent("mouseup"))}catch(Wt){var ve=document.createEvent("MouseEvents");ve.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),J.handleDragStop(ve)}return}J.setState({lastX:Pt,lastY:St})}}),it(tt(J),"handleDragStop",function(vt){if(J.state.dragging){var It=(0,P.getControlPosition)(vt,J.state.touchIdentifier,tt(J));if(It!=null){var Pt=It.x,St=It.y;if(Array.isArray(J.props.grid)){var Dt=Pt-J.state.lastX||0,Qt=St-J.state.lastY||0,ue=(0,P.snapToGrid)(J.props.grid,Dt,Qt),ie=A(ue,2);Dt=ie[0],Qt=ie[1],Pt=J.state.lastX+Dt,St=J.state.lastY+Qt}var Lt=(0,P.createCoreData)(tt(J),Pt,St),ne=J.props.onStop(vt,Lt);if(ne===!1||J.mounted===!1)return!1;var ve=J.findDOMNode();ve&&J.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(ve.ownerDocument),(0,m.default)("DraggableCore: handleDragStop: %j",Lt),J.setState({dragging:!1,lastX:NaN,lastY:NaN}),ve&&((0,m.default)("DraggableCore: Removing handlers"),(0,L.removeEvent)(ve.ownerDocument,gt.move,J.handleDrag),(0,L.removeEvent)(ve.ownerDocument,gt.stop,J.handleDragStop))}}}),it(tt(J),"onMouseDown",function(vt){return gt=bt.mouse,J.handleDragStart(vt)}),it(tt(J),"onMouseUp",function(vt){return gt=bt.mouse,J.handleDragStop(vt)}),it(tt(J),"onTouchStart",function(vt){return gt=bt.touch,J.handleDragStart(vt)}),it(tt(J),"onTouchEnd",function(vt){return gt=bt.touch,J.handleDragStop(vt)}),J}return U(Z,[{key:"componentDidMount",value:function(){this.mounted=!0;var yt=this.findDOMNode();yt&&(0,L.addEvent)(yt,bt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var yt=this.findDOMNode();if(yt){var _t=yt.ownerDocument;(0,L.removeEvent)(_t,bt.mouse.move,this.handleDrag),(0,L.removeEvent)(_t,bt.touch.move,this.handleDrag),(0,L.removeEvent)(_t,bt.mouse.stop,this.handleDragStop),(0,L.removeEvent)(_t,bt.touch.stop,this.handleDragStop),(0,L.removeEvent)(yt,bt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(_t)}}},{key:"findDOMNode",value:function(){var yt,_t,nt;return(yt=this.props)!==null&&yt!==void 0&&yt.nodeRef?(_t=this.props)===null||_t===void 0||(nt=_t.nodeRef)===null||nt===void 0?void 0:nt.current:T.default.findDOMNode(this)}},{key:"render",value:function(){return k.cloneElement(k.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),Z}(k.Component);z.default=Xt,it(Xt,"displayName","DraggableCore"),it(Xt,"propTypes",{allowAnyClick:w.default.bool,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(At,Z){if(At[Z]&&At[Z].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe}),it(Xt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},861193:function(Ve,z,C){"use strict";var x=C(175668),k=x.default,w=x.DraggableCore;Ve.exports=k,Ve.exports.default=k,Ve.exports.DraggableCore=w},381825:function(Ve,z,C){"use strict";function x(it){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(bt){return typeof bt}:function(bt){return bt&&typeof Symbol=="function"&&bt.constructor===Symbol&&bt!==Symbol.prototype?"symbol":typeof bt},x(it)}Object.defineProperty(z,"__esModule",{value:!0}),z.addClassName=rt,z.addEvent=A,z.addUserSelectStyles=q,z.createCSSTransform=$,z.createSVGTransform=U,z.getTouch=V,z.getTouchIdentifier=H,z.getTranslation=W,z.innerHeight=Y,z.innerWidth=b,z.matchesSelector=y,z.matchesSelectorAndParentsTo=g,z.offsetXYFromParent=h,z.outerHeight=D,z.outerWidth=F,z.removeClassName=ft,z.removeEvent=E,z.removeUserSelectStyles=tt;var k=C(909280),w=L(C(138650));function T(it){if(typeof WeakMap!="function")return null;var bt=new WeakMap,gt=new WeakMap;return(T=function(Ct){return Ct?gt:bt})(it)}function L(it,bt){if(!bt&&it&&it.__esModule)return it;if(it===null||x(it)!=="object"&&typeof it!="function")return{default:it};var gt=T(bt);if(gt&&gt.has(it))return gt.get(it);var Xt={},Ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var At in it)if(At!=="default"&&Object.prototype.hasOwnProperty.call(it,At)){var Z=Ct?Object.getOwnPropertyDescriptor(it,At):null;Z&&(Z.get||Z.set)?Object.defineProperty(Xt,At,Z):Xt[At]=it[At]}return Xt.default=it,gt&&gt.set(it,Xt),Xt}function P(it,bt){var gt=Object.keys(it);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(it);bt&&(Xt=Xt.filter(function(Ct){return Object.getOwnPropertyDescriptor(it,Ct).enumerable})),gt.push.apply(gt,Xt)}return gt}function p(it){for(var bt=1;bt<arguments.length;bt++){var gt=arguments[bt]!=null?arguments[bt]:{};bt%2?P(Object(gt),!0).forEach(function(Xt){m(it,Xt,gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(gt)):P(Object(gt)).forEach(function(Xt){Object.defineProperty(it,Xt,Object.getOwnPropertyDescriptor(gt,Xt))})}return it}function m(it,bt,gt){return bt in it?Object.defineProperty(it,bt,{value:gt,enumerable:!0,configurable:!0,writable:!0}):it[bt]=gt,it}var S="";function y(it,bt){return S||(S=(0,k.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(gt){return(0,k.isFunction)(it[gt])})),(0,k.isFunction)(it[S])?it[S](bt):!1}function g(it,bt,gt){var Xt=it;do{if(y(Xt,bt))return!0;if(Xt===gt)return!1;Xt=Xt.parentNode}while(Xt);return!1}function A(it,bt,gt,Xt){if(it){var Ct=p({capture:!0},Xt);it.addEventListener?it.addEventListener(bt,gt,Ct):it.attachEvent?it.attachEvent("on"+bt,gt):it["on"+bt]=gt}}function E(it,bt,gt,Xt){if(it){var Ct=p({capture:!0},Xt);it.removeEventListener?it.removeEventListener(bt,gt,Ct):it.detachEvent?it.detachEvent("on"+bt,gt):it["on"+bt]=null}}function D(it){var bt=it.clientHeight,gt=it.ownerDocument.defaultView.getComputedStyle(it);return bt+=(0,k.int)(gt.borderTopWidth),bt+=(0,k.int)(gt.borderBottomWidth),bt}function F(it){var bt=it.clientWidth,gt=it.ownerDocument.defaultView.getComputedStyle(it);return bt+=(0,k.int)(gt.borderLeftWidth),bt+=(0,k.int)(gt.borderRightWidth),bt}function Y(it){var bt=it.clientHeight,gt=it.ownerDocument.defaultView.getComputedStyle(it);return bt-=(0,k.int)(gt.paddingTop),bt-=(0,k.int)(gt.paddingBottom),bt}function b(it){var bt=it.clientWidth,gt=it.ownerDocument.defaultView.getComputedStyle(it);return bt-=(0,k.int)(gt.paddingLeft),bt-=(0,k.int)(gt.paddingRight),bt}function h(it,bt,gt){var Xt=bt===bt.ownerDocument.body,Ct=Xt?{left:0,top:0}:bt.getBoundingClientRect(),At=(it.clientX+bt.scrollLeft-Ct.left)/gt,Z=(it.clientY+bt.scrollTop-Ct.top)/gt;return{x:At,y:Z}}function $(it,bt){var gt=W(it,bt,"px");return m({},(0,w.browserPrefixToKey)("transform",w.default),gt)}function U(it,bt){var gt=W(it,bt,"");return gt}function W(it,bt,gt){var Xt=it.x,Ct=it.y,At="translate(".concat(Xt).concat(gt,",").concat(Ct).concat(gt,")");if(bt){var Z="".concat(typeof bt.x=="string"?bt.x:bt.x+gt),J="".concat(typeof bt.y=="string"?bt.y:bt.y+gt);At="translate(".concat(Z,", ").concat(J,")")+At}return At}function V(it,bt){return it.targetTouches&&(0,k.findInArray)(it.targetTouches,function(gt){return bt===gt.identifier})||it.changedTouches&&(0,k.findInArray)(it.changedTouches,function(gt){return bt===gt.identifier})}function H(it){if(it.targetTouches&&it.targetTouches[0])return it.targetTouches[0].identifier;if(it.changedTouches&&it.changedTouches[0])return it.changedTouches[0].identifier}function q(it){if(it){var bt=it.getElementById("react-draggable-style-el");bt||(bt=it.createElement("style"),bt.type="text/css",bt.id="react-draggable-style-el",bt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,bt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,it.getElementsByTagName("head")[0].appendChild(bt)),it.body&&rt(it.body,"react-draggable-transparent-selection")}}function tt(it){if(it)try{if(it.body&&ft(it.body,"react-draggable-transparent-selection"),it.selection)it.selection.empty();else{var bt=(it.defaultView||window).getSelection();bt&&bt.type!=="Caret"&&bt.removeAllRanges()}}catch(gt){}}function rt(it,bt){it.classList?it.classList.add(bt):it.className.match(new RegExp("(?:^|\\s)".concat(bt,"(?!\\S)")))||(it.className+=" ".concat(bt))}function ft(it,bt){it.classList?it.classList.remove(bt):it.className=it.className.replace(new RegExp("(?:^|\\s)".concat(bt,"(?!\\S)"),"g"),"")}},138650:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.browserPrefixToKey=k,z.browserPrefixToStyle=w,z.default=void 0,z.getPrefix=x;var C=["Moz","Webkit","O","ms"];function x(){var P,p,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var S=(P=window.document)===null||P===void 0||(p=P.documentElement)===null||p===void 0?void 0:p.style;if(!S||m in S)return"";for(var y=0;y<C.length;y++)if(k(m,C[y])in S)return C[y];return""}function k(P,p){return p?"".concat(p).concat(T(P)):P}function w(P,p){return p?"-".concat(p.toLowerCase(),"-").concat(P):P}function T(P){for(var p="",m=!0,S=0;S<P.length;S++)m?(p+=P[S].toUpperCase(),m=!1):P[S]==="-"?m=!0:p+=P[S];return p}var L=x();z.default=L},955904:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=C;function C(){var x}},102849:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.canDragX=L,z.canDragY=P,z.createCoreData=m,z.createDraggableData=S,z.getBoundPosition=w,z.getControlPosition=p,z.snapToGrid=T;var x=C(909280),k=C(381825);function w(A,E,D){if(!A.props.bounds)return[E,D];var F=A.props.bounds;F=typeof F=="string"?F:y(F);var Y=g(A);if(typeof F=="string"){var b=Y.ownerDocument,h=b.defaultView,$;if(F==="parent"?$=Y.parentNode:$=b.querySelector(F),!($ instanceof h.HTMLElement))throw new Error('Bounds selector "'+F+'" could not find an element.');var U=$,W=h.getComputedStyle(Y),V=h.getComputedStyle(U);F={left:-Y.offsetLeft+(0,x.int)(V.paddingLeft)+(0,x.int)(W.marginLeft),top:-Y.offsetTop+(0,x.int)(V.paddingTop)+(0,x.int)(W.marginTop),right:(0,k.innerWidth)(U)-(0,k.outerWidth)(Y)-Y.offsetLeft+(0,x.int)(V.paddingRight)-(0,x.int)(W.marginRight),bottom:(0,k.innerHeight)(U)-(0,k.outerHeight)(Y)-Y.offsetTop+(0,x.int)(V.paddingBottom)-(0,x.int)(W.marginBottom)}}return(0,x.isNum)(F.right)&&(E=Math.min(E,F.right)),(0,x.isNum)(F.bottom)&&(D=Math.min(D,F.bottom)),(0,x.isNum)(F.left)&&(E=Math.max(E,F.left)),(0,x.isNum)(F.top)&&(D=Math.max(D,F.top)),[E,D]}function T(A,E,D){var F=Math.round(E/A[0])*A[0],Y=Math.round(D/A[1])*A[1];return[F,Y]}function L(A){return A.props.axis==="both"||A.props.axis==="x"}function P(A){return A.props.axis==="both"||A.props.axis==="y"}function p(A,E,D){var F=typeof E=="number"?(0,k.getTouch)(A,E):null;if(typeof E=="number"&&!F)return null;var Y=g(D),b=D.props.offsetParent||Y.offsetParent||Y.ownerDocument.body;return(0,k.offsetXYFromParent)(F||A,b,D.props.scale)}function m(A,E,D){var F=A.state,Y=!(0,x.isNum)(F.lastX),b=g(A);return Y?{node:b,deltaX:0,deltaY:0,lastX:E,lastY:D,x:E,y:D}:{node:b,deltaX:E-F.lastX,deltaY:D-F.lastY,lastX:F.lastX,lastY:F.lastY,x:E,y:D}}function S(A,E){var D=A.props.scale;return{node:E.node,x:A.state.x+E.deltaX/D,y:A.state.y+E.deltaY/D,deltaX:E.deltaX/D,deltaY:E.deltaY/D,lastX:A.state.x,lastY:A.state.y}}function y(A){return{left:A.left,top:A.top,right:A.right,bottom:A.bottom}}function g(A){var E=A.findDOMNode();if(!E)throw new Error("<DraggableCore>: Unmounted during event!");return E}},909280:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.dontSetMe=T,z.findInArray=C,z.int=w,z.isFunction=x,z.isNum=k;function C(L,P){for(var p=0,m=L.length;p<m;p++)if(P.apply(P,[L[p],p,L]))return L[p]}function x(L){return typeof L=="function"||Object.prototype.toString.call(L)==="[object Function]"}function k(L){return typeof L=="number"&&!isNaN(L)}function w(L){return parseInt(L,10)}function T(L,P,p){if(L[P])return new Error("Invalid prop ".concat(P," passed to ").concat(p," - do not set this, set it on the child."))}},797005:function(Ve,z,C){var x;function k(p){if(!p||typeof window=="undefined")return;const m=document.createElement("style");return m.setAttribute("type","text/css"),m.innerHTML=p,document.head.appendChild(m),p}x={value:!0};var w=C(667294);function T(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var L=T(w);k(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const P=w.forwardRef(function({style:m={},className:S="",autoFill:y=!1,play:g=!0,pauseOnHover:A=!1,pauseOnClick:E=!1,direction:D="left",speed:F=50,delay:Y=0,loop:b=0,gradient:h=!1,gradientColor:$=[255,255,255],gradientWidth:U=200,onFinish:W,onCycleComplete:V,onMount:H,children:q},tt){const[rt,ft]=w.useState(0),[it,bt]=w.useState(0),[gt,Xt]=w.useState(1),[Ct,At]=w.useState(!1),Z=w.useRef(null),J=tt||Z,yt=w.useRef(null),_t=w.useCallback(()=>{if(yt.current&&J.current){const ue=J.current.getBoundingClientRect(),ie=yt.current.getBoundingClientRect();let Lt=ue.width,ne=ie.width;(D==="up"||D==="down")&&(Lt=ue.height,ne=ie.height),Xt(y&&Lt&&ne&&ne<Lt?Math.ceil(Lt/ne):1),ft(Lt),bt(ne)}},[y,J,D]);w.useEffect(()=>{if(Ct&&(_t(),yt.current&&J.current)){const ue=new ResizeObserver(()=>_t());return ue.observe(J.current),ue.observe(yt.current),()=>{ue&&ue.disconnect()}}},[_t,J,Ct]),w.useEffect(()=>{_t()},[_t,q]),w.useEffect(()=>{At(!0)},[]),w.useEffect(()=>{typeof H=="function"&&H()},[]);const nt=w.useMemo(()=>y?it*gt/F:it<rt?rt/F:it/F,[y,rt,it,gt,F]),vt=`rgba(${$[0]}, ${$[1]}, ${$[2]}`,It=w.useMemo(()=>Object.assign(Object.assign({},m),{["--pause-on-hover"]:!g||A?"paused":"running",["--pause-on-click"]:!g||A&&!E||E?"paused":"running",["--width"]:D==="up"||D==="down"?"100vh":"100%",["--transform"]:D==="up"?"rotate(-90deg)":D==="down"?"rotate(90deg)":"none"}),[m,g,A,E,D]),Pt=w.useMemo(()=>({["--gradient-color"]:`${vt}, 1), ${vt}, 0)`,["--gradient-width"]:typeof U=="number"?`${U}px`:U}),[vt,U]),St=w.useMemo(()=>({["--play"]:g?"running":"paused",["--direction"]:D==="left"?"normal":"reverse",["--duration"]:`${nt}s`,["--delay"]:`${Y}s`,["--iteration-count"]:b?`${b}`:"infinite",["--min-width"]:y?"auto":"100%"}),[g,D,nt,Y,b,y]),Dt=w.useMemo(()=>({["--transform"]:D==="up"?"rotate(90deg)":D==="down"?"rotate(-90deg)":"none"}),[D]),Qt=w.useCallback(ue=>[...Array(Number.isFinite(ue)&&ue>=0?ue:0)].map((ie,Lt)=>L.default.createElement(w.Fragment,{key:Lt},w.Children.map(q,ne=>L.default.createElement("div",{style:Dt,className:"child"},ne)))),[Dt,q]);return Ct?L.default.createElement("div",{ref:J,style:It,className:"marquee-container "+S},h&&L.default.createElement("div",{style:Pt,className:"overlay"}),L.default.createElement("div",{className:"marquee",style:St,onAnimationIteration:V,onAnimationEnd:W},L.default.createElement("div",{className:"initial-child-container",ref:yt},w.Children.map(q,ue=>L.default.createElement("div",{style:Dt,className:"child"},ue))),Qt(gt-1)),L.default.createElement("div",{className:"marquee",style:St},Qt(gt))):null});z.Z=P},537763:function(Ve,z,C){Ve.exports=function(x){var k={};function w(T){if(k[T])return k[T].exports;var L=k[T]={exports:{},id:T,loaded:!1};return x[T].call(L.exports,L,L.exports,w),L.loaded=!0,L.exports}return w.m=x,w.c=k,w.p="",w(0)}([function(x,k,w){x.exports=w(1)},function(x,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});function T(p){return p&&p.__esModule?p:{default:p}}var L=w(2),P=T(L);k.default=P.default,x.exports=k.default},function(x,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var T=Object.assign||function(D){for(var F=1;F<arguments.length;F++){var Y=arguments[F];for(var b in Y)Object.prototype.hasOwnProperty.call(Y,b)&&(D[b]=Y[b])}return D};k.default=E;function L(D){return D&&D.__esModule?D:{default:D}}function P(D,F){var Y={};for(var b in D)F.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(D,b)&&(Y[b]=D[b]);return Y}var p=w(3),m=w(4),S=L(m),y=w(14),g=w(15),A=L(g);E.propTypes={activeClassName:S.default.string,activeIndex:S.default.number,activeStyle:S.default.object,autoEscape:S.default.bool,className:S.default.string,findChunks:S.default.func,highlightClassName:S.default.oneOfType([S.default.object,S.default.string]),highlightStyle:S.default.object,highlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),sanitize:S.default.func,searchWords:S.default.arrayOf(S.default.oneOfType([S.default.string,S.default.instanceOf(RegExp)])).isRequired,textToHighlight:S.default.string.isRequired,unhighlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),unhighlightClassName:S.default.string,unhighlightStyle:S.default.object};function E(D){var F=D.activeClassName,Y=F===void 0?"":F,b=D.activeIndex,h=b===void 0?-1:b,$=D.activeStyle,U=D.autoEscape,W=D.caseSensitive,V=W===void 0?!1:W,H=D.className,q=D.findChunks,tt=D.highlightClassName,rt=tt===void 0?"":tt,ft=D.highlightStyle,it=ft===void 0?{}:ft,bt=D.highlightTag,gt=bt===void 0?"mark":bt,Xt=D.sanitize,Ct=D.searchWords,At=D.textToHighlight,Z=D.unhighlightTag,J=Z===void 0?"span":Z,yt=D.unhighlightClassName,_t=yt===void 0?"":yt,nt=D.unhighlightStyle,vt=P(D,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),It=(0,p.findAll)({autoEscape:U,caseSensitive:V,findChunks:q,sanitize:Xt,searchWords:Ct,textToHighlight:At}),Pt=gt,St=-1,Dt="",Qt=void 0,ue=function(ne){var ve={};for(var Wt in ne)ve[Wt.toLowerCase()]=ne[Wt];return ve},ie=(0,A.default)(ue);return(0,y.createElement)("span",T({className:H},vt,{children:It.map(function(Lt,ne){var ve=At.substr(Lt.start,Lt.end-Lt.start);if(Lt.highlight){St++;var Wt=void 0;typeof rt=="object"?V?Wt=rt[ve]:(rt=ie(rt),Wt=rt[ve.toLowerCase()]):Wt=rt;var ae=St===+h;Dt=Wt+" "+(ae?Y:""),Qt=ae===!0&&$!=null?Object.assign({},it,$):it;var Ce={children:ve,className:Dt,key:ne,style:Qt};return typeof Pt!="string"&&(Ce.highlightIndex=St),(0,y.createElement)(Pt,Ce)}else return(0,y.createElement)(J,{children:ve,className:_t,key:ne,style:nt})})}))}x.exports=k.default},function(x,k){x.exports=function(w){var T={};function L(P){if(T[P])return T[P].exports;var p=T[P]={exports:{},id:P,loaded:!1};return w[P].call(p.exports,p,p.exports,L),p.loaded=!0,p.exports}return L.m=w,L.c=T,L.p="",L(0)}([function(w,T,L){w.exports=L(1)},function(w,T,L){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var P=L(2);Object.defineProperty(T,"combineChunks",{enumerable:!0,get:function(){return P.combineChunks}}),Object.defineProperty(T,"fillInChunks",{enumerable:!0,get:function(){return P.fillInChunks}}),Object.defineProperty(T,"findAll",{enumerable:!0,get:function(){return P.findAll}}),Object.defineProperty(T,"findChunks",{enumerable:!0,get:function(){return P.findChunks}})},function(w,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.findAll=function(A){var E=A.autoEscape,D=A.caseSensitive,F=D===void 0?!1:D,Y=A.findChunks,b=Y===void 0?p:Y,h=A.sanitize,$=A.searchWords,U=A.textToHighlight;return m({chunksToHighlight:P({chunks:b({autoEscape:E,caseSensitive:F,sanitize:h,searchWords:$,textToHighlight:U})}),totalLength:U?U.length:0})},P=T.combineChunks=function(A){var E=A.chunks;return E=E.sort(function(D,F){return D.start-F.start}).reduce(function(D,F){if(D.length===0)return[F];var Y=D.pop();if(F.start<=Y.end){var b=Math.max(Y.end,F.end);D.push({start:Y.start,end:b})}else D.push(Y,F);return D},[]),E},p=function(A){var E=A.autoEscape,D=A.caseSensitive,F=A.sanitize,Y=F===void 0?S:F,b=A.searchWords,h=A.textToHighlight;return h=Y(h),b.filter(function($){return $}).reduce(function($,U){U=Y(U),E&&(U=y(U));for(var W=new RegExp(U,D?"g":"gi"),V=void 0;V=W.exec(h);){var H=V.index,q=W.lastIndex;q>H&&$.push({start:H,end:q}),V.index==W.lastIndex&&W.lastIndex++}return $},[])};T.findChunks=p;var m=T.fillInChunks=function(A){var E=A.chunksToHighlight,D=A.totalLength,F=[],Y=function($,U,W){U-$>0&&F.push({start:$,end:U,highlight:W})};if(E.length===0)Y(0,D,!1);else{var b=0;E.forEach(function(h){Y(b,h.start,!1),Y(h.start,h.end,!0),b=h.end}),Y(b,D,!1)}return F};function S(g){return g}function y(g){return g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(x,k,w){(function(T){if(T.env.NODE_ENV!=="production"){var L=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,P=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===L},p=!0;x.exports=w(6)(P,p)}else x.exports=w(13)()}).call(k,w(5))},function(x,k){var w=x.exports={},T,L;function P(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?T=setTimeout:T=P}catch(h){T=P}try{typeof clearTimeout=="function"?L=clearTimeout:L=p}catch(h){L=p}})();function m(h){if(T===setTimeout)return setTimeout(h,0);if((T===P||!T)&&setTimeout)return T=setTimeout,setTimeout(h,0);try{return T(h,0)}catch($){try{return T.call(null,h,0)}catch(U){return T.call(this,h,0)}}}function S(h){if(L===clearTimeout)return clearTimeout(h);if((L===p||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(h);try{return L(h)}catch($){try{return L.call(null,h)}catch(U){return L.call(this,h)}}}var y=[],g=!1,A,E=-1;function D(){!g||!A||(g=!1,A.length?y=A.concat(y):E=-1,y.length&&F())}function F(){if(!g){var h=m(D);g=!0;for(var $=y.length;$;){for(A=y,y=[];++E<$;)A&&A[E].run();E=-1,$=y.length}A=null,g=!1,S(h)}}w.nextTick=function(h){var $=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)$[U-1]=arguments[U];y.push(new Y(h,$)),y.length===1&&!g&&m(F)};function Y(h,$){this.fun=h,this.array=$}Y.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function b(){}w.on=b,w.addListener=b,w.once=b,w.off=b,w.removeListener=b,w.removeAllListeners=b,w.emit=b,w.prependListener=b,w.prependOnceListener=b,w.listeners=function(h){return[]},w.binding=function(h){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(h){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(x,k,w){(function(T){"use strict";var L=w(7),P=w(8),p=w(9),m=w(10),S=w(11),y=w(12);x.exports=function(g,A){var E=typeof Symbol=="function"&&Symbol.iterator,D="@@iterator";function F(nt){var vt=nt&&(E&&nt[E]||nt[D]);if(typeof vt=="function")return vt}var Y="<<anonymous>>",b={array:W("array"),bool:W("boolean"),func:W("function"),number:W("number"),object:W("object"),string:W("string"),symbol:W("symbol"),any:V(),arrayOf:H,element:q(),instanceOf:tt,node:bt(),objectOf:ft,oneOf:rt,oneOfType:it,shape:gt,exact:Xt};function h(nt,vt){return nt===vt?nt!==0||1/nt===1/vt:nt!==nt&&vt!==vt}function $(nt){this.message=nt,this.stack=""}$.prototype=Error.prototype;function U(nt){if(T.env.NODE_ENV!=="production")var vt={},It=0;function Pt(Dt,Qt,ue,ie,Lt,ne,ve){if(ie=ie||Y,ne=ne||ue,ve!==S){if(A)P(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(T.env.NODE_ENV!=="production"&&typeof console!="undefined"){var Wt=ie+":"+ue;!vt[Wt]&&It<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ne,ie),vt[Wt]=!0,It++)}}return Qt[ue]==null?Dt?Qt[ue]===null?new $("The "+Lt+" `"+ne+"` is marked as required "+("in `"+ie+"`, but its value is `null`.")):new $("The "+Lt+" `"+ne+"` is marked as required in "+("`"+ie+"`, but its value is `undefined`.")):null:nt(Qt,ue,ie,Lt,ne)}var St=Pt.bind(null,!1);return St.isRequired=Pt.bind(null,!0),St}function W(nt){function vt(It,Pt,St,Dt,Qt,ue){var ie=It[Pt],Lt=Z(ie);if(Lt!==nt){var ne=J(ie);return new $("Invalid "+Dt+" `"+Qt+"` of type "+("`"+ne+"` supplied to `"+St+"`, expected ")+("`"+nt+"`."))}return null}return U(vt)}function V(){return U(L.thatReturnsNull)}function H(nt){function vt(It,Pt,St,Dt,Qt){if(typeof nt!="function")return new $("Property `"+Qt+"` of component `"+St+"` has invalid PropType notation inside arrayOf.");var ue=It[Pt];if(!Array.isArray(ue)){var ie=Z(ue);return new $("Invalid "+Dt+" `"+Qt+"` of type "+("`"+ie+"` supplied to `"+St+"`, expected an array."))}for(var Lt=0;Lt<ue.length;Lt++){var ne=nt(ue,Lt,St,Dt,Qt+"["+Lt+"]",S);if(ne instanceof Error)return ne}return null}return U(vt)}function q(){function nt(vt,It,Pt,St,Dt){var Qt=vt[It];if(!g(Qt)){var ue=Z(Qt);return new $("Invalid "+St+" `"+Dt+"` of type "+("`"+ue+"` supplied to `"+Pt+"`, expected a single ReactElement."))}return null}return U(nt)}function tt(nt){function vt(It,Pt,St,Dt,Qt){if(!(It[Pt]instanceof nt)){var ue=nt.name||Y,ie=_t(It[Pt]);return new $("Invalid "+Dt+" `"+Qt+"` of type "+("`"+ie+"` supplied to `"+St+"`, expected ")+("instance of `"+ue+"`."))}return null}return U(vt)}function rt(nt){if(!Array.isArray(nt))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),L.thatReturnsNull;function vt(It,Pt,St,Dt,Qt){for(var ue=It[Pt],ie=0;ie<nt.length;ie++)if(h(ue,nt[ie]))return null;var Lt=JSON.stringify(nt);return new $("Invalid "+Dt+" `"+Qt+"` of value `"+ue+"` "+("supplied to `"+St+"`, expected one of "+Lt+"."))}return U(vt)}function ft(nt){function vt(It,Pt,St,Dt,Qt){if(typeof nt!="function")return new $("Property `"+Qt+"` of component `"+St+"` has invalid PropType notation inside objectOf.");var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Dt+" `"+Qt+"` of type "+("`"+ie+"` supplied to `"+St+"`, expected an object."));for(var Lt in ue)if(ue.hasOwnProperty(Lt)){var ne=nt(ue,Lt,St,Dt,Qt+"."+Lt,S);if(ne instanceof Error)return ne}return null}return U(vt)}function it(nt){if(!Array.isArray(nt))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),L.thatReturnsNull;for(var vt=0;vt<nt.length;vt++){var It=nt[vt];if(typeof It!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",yt(It),vt),L.thatReturnsNull}function Pt(St,Dt,Qt,ue,ie){for(var Lt=0;Lt<nt.length;Lt++){var ne=nt[Lt];if(ne(St,Dt,Qt,ue,ie,S)==null)return null}return new $("Invalid "+ue+" `"+ie+"` supplied to "+("`"+Qt+"`."))}return U(Pt)}function bt(){function nt(vt,It,Pt,St,Dt){return Ct(vt[It])?null:new $("Invalid "+St+" `"+Dt+"` supplied to "+("`"+Pt+"`, expected a ReactNode."))}return U(nt)}function gt(nt){function vt(It,Pt,St,Dt,Qt){var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Dt+" `"+Qt+"` of type `"+ie+"` "+("supplied to `"+St+"`, expected `object`."));for(var Lt in nt){var ne=nt[Lt];if(ne){var ve=ne(ue,Lt,St,Dt,Qt+"."+Lt,S);if(ve)return ve}}return null}return U(vt)}function Xt(nt){function vt(It,Pt,St,Dt,Qt){var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Dt+" `"+Qt+"` of type `"+ie+"` "+("supplied to `"+St+"`, expected `object`."));var Lt=m({},It[Pt],nt);for(var ne in Lt){var ve=nt[ne];if(!ve)return new $("Invalid "+Dt+" `"+Qt+"` key `"+ne+"` supplied to `"+St+"`.\nBad object: "+JSON.stringify(It[Pt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(nt),null,"  "));var Wt=ve(ue,ne,St,Dt,Qt+"."+ne,S);if(Wt)return Wt}return null}return U(vt)}function Ct(nt){switch(typeof nt){case"number":case"string":case"undefined":return!0;case"boolean":return!nt;case"object":if(Array.isArray(nt))return nt.every(Ct);if(nt===null||g(nt))return!0;var vt=F(nt);if(vt){var It=vt.call(nt),Pt;if(vt!==nt.entries){for(;!(Pt=It.next()).done;)if(!Ct(Pt.value))return!1}else for(;!(Pt=It.next()).done;){var St=Pt.value;if(St&&!Ct(St[1]))return!1}}else return!1;return!0;default:return!1}}function At(nt,vt){return nt==="symbol"||vt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&vt instanceof Symbol}function Z(nt){var vt=typeof nt;return Array.isArray(nt)?"array":nt instanceof RegExp?"object":At(vt,nt)?"symbol":vt}function J(nt){if(typeof nt=="undefined"||nt===null)return""+nt;var vt=Z(nt);if(vt==="object"){if(nt instanceof Date)return"date";if(nt instanceof RegExp)return"regexp"}return vt}function yt(nt){var vt=J(nt);switch(vt){case"array":case"object":return"an "+vt;case"boolean":case"date":case"regexp":return"a "+vt;default:return vt}}function _t(nt){return!nt.constructor||!nt.constructor.name?Y:nt.constructor.name}return b.checkPropTypes=y,b.PropTypes=b,b}}).call(k,w(5))},function(x,k){"use strict";function w(L){return function(){return L}}var T=function(){};T.thatReturns=w,T.thatReturnsFalse=w(!1),T.thatReturnsTrue=w(!0),T.thatReturnsNull=w(null),T.thatReturnsThis=function(){return this},T.thatReturnsArgument=function(L){return L},x.exports=T},function(x,k,w){(function(T){"use strict";var L=function(m){};T.env.NODE_ENV!=="production"&&(L=function(m){if(m===void 0)throw new Error("invariant requires an error message argument")});function P(p,m,S,y,g,A,E,D){if(L(m),!p){var F;if(m===void 0)F=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var Y=[S,y,g,A,E,D],b=0;F=new Error(m.replace(/%s/g,function(){return Y[b++]})),F.name="Invariant Violation"}throw F.framesToPop=1,F}}x.exports=P}).call(k,w(5))},function(x,k,w){(function(T){"use strict";var L=w(7),P=L;if(T.env.NODE_ENV!=="production"){var p=function(S){for(var y=arguments.length,g=Array(y>1?y-1:0),A=1;A<y;A++)g[A-1]=arguments[A];var E=0,D="Warning: "+S.replace(/%s/g,function(){return g[E++]});typeof console!="undefined"&&console.error(D);try{throw new Error(D)}catch(F){}};P=function(S,y){if(y===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(y.indexOf("Failed Composite propType: ")!==0&&!S){for(var g=arguments.length,A=Array(g>2?g-2:0),E=2;E<g;E++)A[E-2]=arguments[E];p.apply(void 0,[y].concat(A))}}}x.exports=P}).call(k,w(5))},function(x,k){"use strict";var w=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;function P(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function p(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var S={},y=0;y<10;y++)S["_"+String.fromCharCode(y)]=y;var g=Object.getOwnPropertyNames(S).map(function(E){return S[E]});if(g.join("")!=="0123456789")return!1;var A={};return"abcdefghijklmnopqrst".split("").forEach(function(E){A[E]=E}),Object.keys(Object.assign({},A)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}x.exports=p()?Object.assign:function(m,S){for(var y,g=P(m),A,E=1;E<arguments.length;E++){y=Object(arguments[E]);for(var D in y)T.call(y,D)&&(g[D]=y[D]);if(w){A=w(y);for(var F=0;F<A.length;F++)L.call(y,A[F])&&(g[A[F]]=y[A[F]])}}return g}},function(x,k){"use strict";var w="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";x.exports=w},function(x,k,w){(function(T){"use strict";if(T.env.NODE_ENV!=="production")var L=w(8),P=w(9),p=w(11),m={};function S(y,g,A,E,D){if(T.env.NODE_ENV!=="production"){for(var F in y)if(y.hasOwnProperty(F)){var Y;try{L(typeof y[F]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",E||"React class",A,F,typeof y[F]),Y=y[F](g,F,E,A,null,p)}catch(h){Y=h}if(P(!Y||Y instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",A,F,typeof Y),Y instanceof Error&&!(Y.message in m)){m[Y.message]=!0;var b=D?D():"";P(!1,"Failed %s type: %s%s",A,Y.message,b!=null?b:"")}}}}x.exports=S}).call(k,w(5))},function(x,k,w){"use strict";var T=w(7),L=w(8),P=w(11);x.exports=function(){function p(y,g,A,E,D,F){F!==P&&L(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}p.isRequired=p;function m(){return p}var S={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:m,element:p,instanceOf:m,node:p,objectOf:m,oneOf:m,oneOfType:m,shape:m,exact:m};return S.checkPropTypes=T,S.PropTypes=S,S}},function(x,k){x.exports=C(667294)},function(x,k){"use strict";var w=function(P,p){return P===p};function T(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,p=void 0,m=[],S=void 0,y=!1,g=function(D,F){return P(D,m[F])},A=function(){for(var D=arguments.length,F=Array(D),Y=0;Y<D;Y++)F[Y]=arguments[Y];return y&&p===this&&F.length===m.length&&F.every(g)||(y=!0,p=this,m=F,S=L.apply(this,F)),S};return A}x.exports=T}])},58533:function(Ve,z,C){"use strict";var x=C(667294);var k=function(y,g){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)E.hasOwnProperty(D)&&(A[D]=E[D])},k(y,g)};function w(y,g){k(y,g);function A(){this.constructor=y}y.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}var T=function(){return T=Object.assign||function(g){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(g[F]=A[F])}return g},T.apply(this,arguments)};function L(y,g,A,E){var D,F=!1,Y=0;function b(){D&&clearTimeout(D)}function h(){b(),F=!0}typeof g!="boolean"&&(E=A,A=g,g=void 0);function $(){var U=this,W=Date.now()-Y,V=arguments;if(F)return;function H(){Y=Date.now(),A.apply(U,V)}function q(){D=void 0}E&&!D&&H(),b(),E===void 0&&W>y?H():g!==!0&&(D=setTimeout(E?q:H,E===void 0?y-W:y))}return $.cancel=h,$}var P={Pixel:"Pixel",Percent:"Percent"},p={unit:P.Percent,value:.8};function m(y){return typeof y=="number"?{unit:P.Percent,value:y*100}:typeof y=="string"?y.match(/^(\d*(\.\d+)?)px$/)?{unit:P.Pixel,value:parseFloat(y)}:y.match(/^(\d*(\.\d+)?)%$/)?{unit:P.Percent,value:parseFloat(y)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),p):(console.warn("scrollThreshold should be string or number"),p)}var S=function(y){w(g,y);function g(A){var E=y.call(this,A)||this;return E.lastScrollTop=0,E.actionTriggered=!1,E.startY=0,E.currentY=0,E.dragging=!1,E.maxPullDownDistance=0,E.getScrollableTarget=function(){return E.props.scrollableTarget instanceof HTMLElement?E.props.scrollableTarget:typeof E.props.scrollableTarget=="string"?document.getElementById(E.props.scrollableTarget):(E.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},E.onStart=function(D){E.lastScrollTop||(E.dragging=!0,D instanceof MouseEvent?E.startY=D.pageY:D instanceof TouchEvent&&(E.startY=D.touches[0].pageY),E.currentY=E.startY,E._infScroll&&(E._infScroll.style.willChange="transform",E._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},E.onMove=function(D){E.dragging&&(D instanceof MouseEvent?E.currentY=D.pageY:D instanceof TouchEvent&&(E.currentY=D.touches[0].pageY),!(E.currentY<E.startY)&&(E.currentY-E.startY>=Number(E.props.pullDownToRefreshThreshold)&&E.setState({pullToRefreshThresholdBreached:!0}),!(E.currentY-E.startY>E.maxPullDownDistance*1.5)&&E._infScroll&&(E._infScroll.style.overflow="visible",E._infScroll.style.transform="translate3d(0px, "+(E.currentY-E.startY)+"px, 0px)")))},E.onEnd=function(){E.startY=0,E.currentY=0,E.dragging=!1,E.state.pullToRefreshThresholdBreached&&(E.props.refreshFunction&&E.props.refreshFunction(),E.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){E._infScroll&&(E._infScroll.style.overflow="auto",E._infScroll.style.transform="none",E._infScroll.style.willChange="unset")})},E.onScrollListener=function(D){typeof E.props.onScroll=="function"&&setTimeout(function(){return E.props.onScroll&&E.props.onScroll(D)},0);var F=E.props.height||E._scrollableNode?D.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!E.actionTriggered){var Y=E.props.inverse?E.isElementAtTop(F,E.props.scrollThreshold):E.isElementAtBottom(F,E.props.scrollThreshold);Y&&E.props.hasMore&&(E.actionTriggered=!0,E.setState({showLoader:!0}),E.props.next&&E.props.next()),E.lastScrollTop=F.scrollTop}},E.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:A.dataLength},E.throttledOnScrollListener=L(150,E.onScrollListener).bind(E),E.onStart=E.onStart.bind(E),E.onMove=E.onMove.bind(E),E.onEnd=E.onEnd.bind(E),E}return g.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},g.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},g.prototype.componentDidUpdate=function(A){this.props.dataLength!==A.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},g.getDerivedStateFromProps=function(A,E){var D=A.dataLength!==E.prevDataLength;return D?T(T({},E),{prevDataLength:A.dataLength}):null},g.prototype.isElementAtTop=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,F=m(E);return F.unit===P.Pixel?A.scrollTop<=F.value+D-A.scrollHeight+1:A.scrollTop<=F.value/100+D-A.scrollHeight+1},g.prototype.isElementAtBottom=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,F=m(E);return F.unit===P.Pixel?A.scrollTop+D>=A.scrollHeight-F.value:A.scrollTop+D>=F.value/100*A.scrollHeight},g.prototype.render=function(){var A=this,E=T({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),D=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),F=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return x.createElement("div",{style:F,className:"infinite-scroll-component__outerdiv"},x.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(Y){return A._infScroll=Y},style:E},this.props.pullDownToRefresh&&x.createElement("div",{style:{position:"relative"},ref:function(Y){return A._pullDown=Y}},x.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!D&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},g}(x.Component);z.Z=S},122827:function(Ve,z,C){"use strict";z.__esModule=!0,z.default=void 0;var x=p(C(667294)),k=C(861193),w=C(459069),T=C(100448),L=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function P(h){if(typeof WeakMap!="function")return null;var $=new WeakMap,U=new WeakMap;return(P=function(V){return V?U:$})(h)}function p(h,$){if(!$&&h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var U=P($);if(U&&U.has(h))return U.get(h);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in h)if(H!=="default"&&Object.prototype.hasOwnProperty.call(h,H)){var q=V?Object.getOwnPropertyDescriptor(h,H):null;q&&(q.get||q.set)?Object.defineProperty(W,H,q):W[H]=h[H]}return W.default=h,U&&U.set(h,W),W}function m(){return m=Object.assign?Object.assign.bind():function(h){for(var $=1;$<arguments.length;$++){var U=arguments[$];for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(h[W]=U[W])}return h},m.apply(this,arguments)}function S(h,$){if(h==null)return{};var U={},W=Object.keys(h),V,H;for(H=0;H<W.length;H++)V=W[H],!($.indexOf(V)>=0)&&(U[V]=h[V]);return U}function y(h,$){var U=Object.keys(h);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(h);$&&(W=W.filter(function(V){return Object.getOwnPropertyDescriptor(h,V).enumerable})),U.push.apply(U,W)}return U}function g(h){for(var $=1;$<arguments.length;$++){var U=arguments[$]!=null?arguments[$]:{};$%2?y(Object(U),!0).forEach(function(W){A(h,W,U[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(U)):y(Object(U)).forEach(function(W){Object.defineProperty(h,W,Object.getOwnPropertyDescriptor(U,W))})}return h}function A(h,$,U){return $=E($),$ in h?Object.defineProperty(h,$,{value:U,enumerable:!0,configurable:!0,writable:!0}):h[$]=U,h}function E(h){var $=D(h,"string");return typeof $=="symbol"?$:String($)}function D(h,$){if(typeof h!="object"||h===null)return h;var U=h[Symbol.toPrimitive];if(U!==void 0){var W=U.call(h,$||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(h)}function F(h,$){h.prototype=Object.create($.prototype),h.prototype.constructor=h,Y(h,$)}function Y(h,$){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,V){return W.__proto__=V,W},Y(h,$)}var b=function(h){F($,h);function $(){for(var W,V=arguments.length,H=new Array(V),q=0;q<V;q++)H[q]=arguments[q];return W=h.call.apply(h,[this].concat(H))||this,W.handleRefs={},W.lastHandleRect=null,W.slack=null,W}var U=$.prototype;return U.componentWillUnmount=function(){this.resetData()},U.resetData=function(){this.lastHandleRect=this.slack=null},U.runConstraints=function(V,H){var q=this.props,tt=q.minConstraints,rt=q.maxConstraints,ft=q.lockAspectRatio;if(!tt&&!rt&&!ft)return[V,H];if(ft){var it=this.props.width/this.props.height,bt=V-this.props.width,gt=H-this.props.height;Math.abs(bt)>Math.abs(gt*it)?H=V/it:V=H*it}var Xt=V,Ct=H,At=this.slack||[0,0],Z=At[0],J=At[1];return V+=Z,H+=J,tt&&(V=Math.max(tt[0],V),H=Math.max(tt[1],H)),rt&&(V=Math.min(rt[0],V),H=Math.min(rt[1],H)),this.slack=[Z+(Xt-V),J+(Ct-H)],[V,H]},U.resizeHandler=function(V,H){var q=this;return function(tt,rt){var ft=rt.node,it=rt.deltaX,bt=rt.deltaY;V==="onResizeStart"&&q.resetData();var gt=(q.props.axis==="both"||q.props.axis==="x")&&H!=="n"&&H!=="s",Xt=(q.props.axis==="both"||q.props.axis==="y")&&H!=="e"&&H!=="w";if(!(!gt&&!Xt)){var Ct=H[0],At=H[H.length-1],Z=ft.getBoundingClientRect();if(q.lastHandleRect!=null){if(At==="w"){var J=Z.left-q.lastHandleRect.left;it+=J}if(Ct==="n"){var yt=Z.top-q.lastHandleRect.top;bt+=yt}}q.lastHandleRect=Z,At==="w"&&(it=-it),Ct==="n"&&(bt=-bt);var _t=q.props.width+(gt?it/q.props.transformScale:0),nt=q.props.height+(Xt?bt/q.props.transformScale:0),vt=q.runConstraints(_t,nt);_t=vt[0],nt=vt[1];var It=_t!==q.props.width||nt!==q.props.height,Pt=typeof q.props[V]=="function"?q.props[V]:null,St=V==="onResize"&&!It;Pt&&!St&&(tt.persist==null||tt.persist(),Pt(tt,{node:ft,size:{width:_t,height:nt},handle:H})),V==="onResizeStop"&&q.resetData()}}},U.renderResizeHandle=function(V,H){var q=this.props.handle;if(!q)return x.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+V,ref:H});if(typeof q=="function")return q(V,H);var tt=typeof q.type=="string",rt=g({ref:H},tt?{}:{handleAxis:V});return x.cloneElement(q,rt)},U.render=function(){var V=this,H=this.props,q=H.children,tt=H.className,rt=H.draggableOpts,ft=H.width,it=H.height,bt=H.handle,gt=H.handleSize,Xt=H.lockAspectRatio,Ct=H.axis,At=H.minConstraints,Z=H.maxConstraints,J=H.onResize,yt=H.onResizeStop,_t=H.onResizeStart,nt=H.resizeHandles,vt=H.transformScale,It=S(H,L);return(0,w.cloneElement)(q,g(g({},It),{},{className:(tt?tt+" ":"")+"react-resizable",children:[].concat(q.props.children,nt.map(function(Pt){var St,Dt=(St=V.handleRefs[Pt])!=null?St:V.handleRefs[Pt]=x.createRef();return x.createElement(k.DraggableCore,m({},rt,{nodeRef:Dt,key:"resizableHandle-"+Pt,onStop:V.resizeHandler("onResizeStop",Pt),onStart:V.resizeHandler("onResizeStart",Pt),onDrag:V.resizeHandler("onResize",Pt)}),V.renderResizeHandle(Pt,Dt))}))}))},$}(x.Component);z.default=b,b.propTypes=T.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},808735:function(Ve,z,C){"use strict";var x;x=!0,z.default=void 0;var k=S(C(667294)),w=p(C(45697)),T=p(C(122827)),L=C(100448),P=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function p(U){return U&&U.__esModule?U:{default:U}}function m(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(m=function(q){return q?V:W})(U)}function S(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||typeof U!="object"&&typeof U!="function")return{default:U};var V=m(W);if(V&&V.has(U))return V.get(U);var H={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in U)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(U,tt)){var rt=q?Object.getOwnPropertyDescriptor(U,tt):null;rt&&(rt.get||rt.set)?Object.defineProperty(H,tt,rt):H[tt]=U[tt]}return H.default=U,V&&V.set(U,H),H}function y(){return y=Object.assign?Object.assign.bind():function(U){for(var W=1;W<arguments.length;W++){var V=arguments[W];for(var H in V)Object.prototype.hasOwnProperty.call(V,H)&&(U[H]=V[H])}return U},y.apply(this,arguments)}function g(U,W){var V=Object.keys(U);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(U);W&&(H=H.filter(function(q){return Object.getOwnPropertyDescriptor(U,q).enumerable})),V.push.apply(V,H)}return V}function A(U){for(var W=1;W<arguments.length;W++){var V=arguments[W]!=null?arguments[W]:{};W%2?g(Object(V),!0).forEach(function(H){E(U,H,V[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(V)):g(Object(V)).forEach(function(H){Object.defineProperty(U,H,Object.getOwnPropertyDescriptor(V,H))})}return U}function E(U,W,V){return W=D(W),W in U?Object.defineProperty(U,W,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[W]=V,U}function D(U){var W=F(U,"string");return typeof W=="symbol"?W:String(W)}function F(U,W){if(typeof U!="object"||U===null)return U;var V=U[Symbol.toPrimitive];if(V!==void 0){var H=V.call(U,W||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(U)}function Y(U,W){if(U==null)return{};var V={},H=Object.keys(U),q,tt;for(tt=0;tt<H.length;tt++)q=H[tt],!(W.indexOf(q)>=0)&&(V[q]=U[q]);return V}function b(U,W){U.prototype=Object.create(W.prototype),U.prototype.constructor=U,h(U,W)}function h(U,W){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,q){return H.__proto__=q,H},h(U,W)}var $=function(U){b(W,U);function W(){for(var H,q=arguments.length,tt=new Array(q),rt=0;rt<q;rt++)tt[rt]=arguments[rt];return H=U.call.apply(U,[this].concat(tt))||this,H.state={width:H.props.width,height:H.props.height,propsWidth:H.props.width,propsHeight:H.props.height},H.onResize=function(ft,it){var bt=it.size;H.props.onResize?(ft.persist==null||ft.persist(),H.setState(bt,function(){return H.props.onResize&&H.props.onResize(ft,it)})):H.setState(bt)},H}W.getDerivedStateFromProps=function(q,tt){return tt.propsWidth!==q.width||tt.propsHeight!==q.height?{width:q.width,height:q.height,propsWidth:q.width,propsHeight:q.height}:null};var V=W.prototype;return V.render=function(){var q=this.props,tt=q.handle,rt=q.handleSize,ft=q.onResize,it=q.onResizeStart,bt=q.onResizeStop,gt=q.draggableOpts,Xt=q.minConstraints,Ct=q.maxConstraints,At=q.lockAspectRatio,Z=q.axis,J=q.width,yt=q.height,_t=q.resizeHandles,nt=q.style,vt=q.transformScale,It=Y(q,P);return k.createElement(T.default,{axis:Z,draggableOpts:gt,handle:tt,handleSize:rt,height:this.state.height,lockAspectRatio:At,maxConstraints:Ct,minConstraints:Xt,onResizeStart:it,onResize:this.onResize,onResizeStop:bt,resizeHandles:_t,transformScale:vt,width:this.state.width},k.createElement("div",y({},It,{style:A(A({},nt),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},W}(k.Component);z.default=$,$.propTypes=A(A({},L.resizableProps),{},{children:w.default.element})},100448:function(Ve,z,C){"use strict";z.__esModule=!0,z.resizableProps=void 0;var x=w(C(45697)),k=C(861193);function w(L){return L&&L.__esModule?L:{default:L}}var T={axis:x.default.oneOf(["both","x","y","none"]),className:x.default.string,children:x.default.element.isRequired,draggableOpts:x.default.shape({allowAnyClick:x.default.bool,cancel:x.default.string,children:x.default.node,disabled:x.default.bool,enableUserSelectHack:x.default.bool,offsetParent:x.default.node,grid:x.default.arrayOf(x.default.number),handle:x.default.string,nodeRef:x.default.object,onStart:x.default.func,onDrag:x.default.func,onStop:x.default.func,onMouseDown:x.default.func,scale:x.default.number}),height:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="y"){var y;return(y=x.default.number).isRequired.apply(y,p)}return x.default.number.apply(x.default,p)},handle:x.default.oneOfType([x.default.node,x.default.func]),handleSize:x.default.arrayOf(x.default.number),lockAspectRatio:x.default.bool,maxConstraints:x.default.arrayOf(x.default.number),minConstraints:x.default.arrayOf(x.default.number),onResizeStop:x.default.func,onResizeStart:x.default.func,onResize:x.default.func,resizeHandles:x.default.arrayOf(x.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:x.default.number,width:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="x"){var y;return(y=x.default.number).isRequired.apply(y,p)}return x.default.number.apply(x.default,p)}};z.resizableProps=T},459069:function(Ve,z,C){"use strict";z.__esModule=!0,z.cloneElement=m;var x=k(C(667294));function k(S){return S&&S.__esModule?S:{default:S}}function w(S,y){var g=Object.keys(S);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);y&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),g.push.apply(g,A)}return g}function T(S){for(var y=1;y<arguments.length;y++){var g=arguments[y]!=null?arguments[y]:{};y%2?w(Object(g),!0).forEach(function(A){L(S,A,g[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(g)):w(Object(g)).forEach(function(A){Object.defineProperty(S,A,Object.getOwnPropertyDescriptor(g,A))})}return S}function L(S,y,g){return y=P(y),y in S?Object.defineProperty(S,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):S[y]=g,S}function P(S){var y=p(S,"string");return typeof y=="symbol"?y:String(y)}function p(S,y){if(typeof S!="object"||S===null)return S;var g=S[Symbol.toPrimitive];if(g!==void 0){var A=g.call(S,y||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(S)}function m(S,y){return y.style&&S.props.style&&(y.style=T(T({},S.props.style),y.style)),y.className&&S.props.className&&(y.className=S.props.className+" "+y.className),x.default.cloneElement(S,y)}},101706:function(Ve,z,C){"use strict";Ve.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Ve.exports.Resizable=C(122827).default,Ve.exports.ResizableBox=C(808735).default},491907:function(Ve,z,C){"use strict";C.d(z,{cd:function(){return Ct}});var x=C(487462),k=C(497326),w=C(589611);function T(xe,Jt){xe.prototype=Object.create(Jt.prototype),xe.prototype.constructor=xe,(0,w.Z)(xe,Jt)}var L=function(Jt,we){return Jt===we};function P(xe,Jt){Jt===void 0&&(Jt=L);var we,Tt=[],Pe,_r=!1,Ar=function(cn,an){return Jt(cn,Tt[an])},Or=function(){for(var cn=arguments.length,an=new Array(cn),Dn=0;Dn<cn;Dn++)an[Dn]=arguments[Dn];return _r&&we===this&&an.length===Tt.length&&an.every(Ar)||(Pe=xe.apply(this,an),_r=!0,we=this,Tt=an),Pe};return Or}var p=P,m=C(667294),S=typeof performance=="object"&&typeof performance.now=="function",y=S?function(){return performance.now()}:function(){return Date.now()};function g(xe){cancelAnimationFrame(xe.id)}function A(xe,Jt){var we=y();function Tt(){y()-we>=Jt?xe.call(null):Pe.id=requestAnimationFrame(Tt)}var Pe={id:requestAnimationFrame(Tt)};return Pe}var E=-1;function D(xe){if(xe===void 0&&(xe=!1),E===-1||xe){var Jt=document.createElement("div"),we=Jt.style;we.width="50px",we.height="50px",we.overflow="scroll",document.body.appendChild(Jt),E=Jt.offsetWidth-Jt.clientWidth,document.body.removeChild(Jt)}return E}var F=null;function Y(xe){if(xe===void 0&&(xe=!1),F===null||xe){var Jt=document.createElement("div"),we=Jt.style;we.width="50px",we.height="50px",we.overflow="scroll",we.direction="rtl";var Tt=document.createElement("div"),Pe=Tt.style;return Pe.width="100px",Pe.height="100px",Jt.appendChild(Tt),document.body.appendChild(Jt),Jt.scrollLeft>0?F="positive-descending":(Jt.scrollLeft=1,Jt.scrollLeft===0?F="negative":F="positive-ascending"),document.body.removeChild(Jt),F}return F}var b=150,h=function(Jt){var we=Jt.columnIndex,Tt=Jt.data,Pe=Jt.rowIndex;return Pe+":"+we},$=null,U=null,W=null;function V(xe){var Jt,we=xe.getColumnOffset,Tt=xe.getColumnStartIndexForOffset,Pe=xe.getColumnStopIndexForStartIndex,_r=xe.getColumnWidth,Ar=xe.getEstimatedTotalHeight,Or=xe.getEstimatedTotalWidth,Br=xe.getOffsetForColumnAndAlignment,cn=xe.getOffsetForRowAndAlignment,an=xe.getRowHeight,Dn=xe.getRowOffset,Un=xe.getRowStartIndexForOffset,Xn=xe.getRowStopIndexForStartIndex,xr=xe.initInstanceProps,$e=xe.shouldResetStyleCacheOnItemSizeChange,Tr=xe.validateProps;return Jt=function(qr){T(gn,qr);function gn(Rn){var Mr;return Mr=qr.call(this,Rn)||this,Mr._instanceProps=xr(Mr.props,(0,k.Z)(Mr)),Mr._resetIsScrollingTimeoutId=null,Mr._outerRef=void 0,Mr.state={instance:(0,k.Z)(Mr),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof Mr.props.initialScrollLeft=="number"?Mr.props.initialScrollLeft:0,scrollTop:typeof Mr.props.initialScrollTop=="number"?Mr.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},Mr._callOnItemsRendered=void 0,Mr._callOnItemsRendered=p(function(dn,hn,sn,Wn,Mn,In,jn,at){return Mr.props.onItemsRendered({overscanColumnStartIndex:dn,overscanColumnStopIndex:hn,overscanRowStartIndex:sn,overscanRowStopIndex:Wn,visibleColumnStartIndex:Mn,visibleColumnStopIndex:In,visibleRowStartIndex:jn,visibleRowStopIndex:at})}),Mr._callOnScroll=void 0,Mr._callOnScroll=p(function(dn,hn,sn,Wn,Mn){return Mr.props.onScroll({horizontalScrollDirection:sn,scrollLeft:dn,scrollTop:hn,verticalScrollDirection:Wn,scrollUpdateWasRequested:Mn})}),Mr._getItemStyle=void 0,Mr._getItemStyle=function(dn,hn){var sn=Mr.props,Wn=sn.columnWidth,Mn=sn.direction,In=sn.rowHeight,jn=Mr._getItemStyleCache($e&&Wn,$e&&Mn,$e&&In),at=dn+":"+hn,Je;if(jn.hasOwnProperty(at))Je=jn[at];else{var Ht=we(Mr.props,hn,Mr._instanceProps),te=Mn==="rtl";jn[at]=Je={position:"absolute",left:te?void 0:Ht,right:te?Ht:void 0,top:Dn(Mr.props,dn,Mr._instanceProps),height:an(Mr.props,dn,Mr._instanceProps),width:_r(Mr.props,hn,Mr._instanceProps)}}return Je},Mr._getItemStyleCache=void 0,Mr._getItemStyleCache=p(function(dn,hn,sn){return{}}),Mr._onScroll=function(dn){var hn=dn.currentTarget,sn=hn.clientHeight,Wn=hn.clientWidth,Mn=hn.scrollLeft,In=hn.scrollTop,jn=hn.scrollHeight,at=hn.scrollWidth;Mr.setState(function(Je){if(Je.scrollLeft===Mn&&Je.scrollTop===In)return null;var Ht=Mr.props.direction,te=Mn;if(Ht==="rtl")switch(Y()){case"negative":te=-Mn;break;case"positive-descending":te=at-Wn-Mn;break}te=Math.max(0,Math.min(te,at-Wn));var wt=Math.max(0,Math.min(In,jn-sn));return{isScrolling:!0,horizontalScrollDirection:Je.scrollLeft<Mn?"forward":"backward",scrollLeft:te,scrollTop:wt,verticalScrollDirection:Je.scrollTop<In?"forward":"backward",scrollUpdateWasRequested:!1}},Mr._resetIsScrollingDebounced)},Mr._outerRefSetter=function(dn){var hn=Mr.props.outerRef;Mr._outerRef=dn,typeof hn=="function"?hn(dn):hn!=null&&typeof hn=="object"&&hn.hasOwnProperty("current")&&(hn.current=dn)},Mr._resetIsScrollingDebounced=function(){Mr._resetIsScrollingTimeoutId!==null&&g(Mr._resetIsScrollingTimeoutId),Mr._resetIsScrollingTimeoutId=A(Mr._resetIsScrolling,b)},Mr._resetIsScrolling=function(){Mr._resetIsScrollingTimeoutId=null,Mr.setState({isScrolling:!1},function(){Mr._getItemStyleCache(-1)})},Mr}gn.getDerivedStateFromProps=function(Mr,dn){return H(Mr,dn),Tr(Mr),null};var xn=gn.prototype;return xn.scrollTo=function(Mr){var dn=Mr.scrollLeft,hn=Mr.scrollTop;dn!==void 0&&(dn=Math.max(0,dn)),hn!==void 0&&(hn=Math.max(0,hn)),this.setState(function(sn){return dn===void 0&&(dn=sn.scrollLeft),hn===void 0&&(hn=sn.scrollTop),sn.scrollLeft===dn&&sn.scrollTop===hn?null:{horizontalScrollDirection:sn.scrollLeft<dn?"forward":"backward",scrollLeft:dn,scrollTop:hn,scrollUpdateWasRequested:!0,verticalScrollDirection:sn.scrollTop<hn?"forward":"backward"}},this._resetIsScrollingDebounced)},xn.scrollToItem=function(Mr){var dn=Mr.align,hn=dn===void 0?"auto":dn,sn=Mr.columnIndex,Wn=Mr.rowIndex,Mn=this.props,In=Mn.columnCount,jn=Mn.height,at=Mn.rowCount,Je=Mn.width,Ht=this.state,te=Ht.scrollLeft,wt=Ht.scrollTop,Me=D();sn!==void 0&&(sn=Math.max(0,Math.min(sn,In-1))),Wn!==void 0&&(Wn=Math.max(0,Math.min(Wn,at-1)));var kt=Ar(this.props,this._instanceProps),qt=Or(this.props,this._instanceProps),dt=qt>Je?Me:0,Ut=kt>jn?Me:0;this.scrollTo({scrollLeft:sn!==void 0?Br(this.props,sn,hn,te,this._instanceProps,Ut):te,scrollTop:Wn!==void 0?cn(this.props,Wn,hn,wt,this._instanceProps,dt):wt})},xn.componentDidMount=function(){var Mr=this.props,dn=Mr.initialScrollLeft,hn=Mr.initialScrollTop;if(this._outerRef!=null){var sn=this._outerRef;typeof dn=="number"&&(sn.scrollLeft=dn),typeof hn=="number"&&(sn.scrollTop=hn)}this._callPropsCallbacks()},xn.componentDidUpdate=function(){var Mr=this.props.direction,dn=this.state,hn=dn.scrollLeft,sn=dn.scrollTop,Wn=dn.scrollUpdateWasRequested;if(Wn&&this._outerRef!=null){var Mn=this._outerRef;if(Mr==="rtl")switch(Y()){case"negative":Mn.scrollLeft=-hn;break;case"positive-ascending":Mn.scrollLeft=hn;break;default:var In=Mn.clientWidth,jn=Mn.scrollWidth;Mn.scrollLeft=jn-In-hn;break}else Mn.scrollLeft=Math.max(0,hn);Mn.scrollTop=Math.max(0,sn)}this._callPropsCallbacks()},xn.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&g(this._resetIsScrollingTimeoutId)},xn.render=function(){var Mr=this.props,dn=Mr.children,hn=Mr.className,sn=Mr.columnCount,Wn=Mr.direction,Mn=Mr.height,In=Mr.innerRef,jn=Mr.innerElementType,at=Mr.innerTagName,Je=Mr.itemData,Ht=Mr.itemKey,te=Ht===void 0?h:Ht,wt=Mr.outerElementType,Me=Mr.outerTagName,kt=Mr.rowCount,qt=Mr.style,dt=Mr.useIsScrolling,Ut=Mr.width,Q=this.state.isScrolling,ot=this._getHorizontalRangeToRender(),R=ot[0],M=ot[1],O=this._getVerticalRangeToRender(),X=O[0],mt=O[1],Ft=[];if(sn>0&&kt)for(var Bt=X;Bt<=mt;Bt++)for(var ee=R;ee<=M;ee++)Ft.push((0,m.createElement)(dn,{columnIndex:ee,data:Je,isScrolling:dt?Q:void 0,key:te({columnIndex:ee,data:Je,rowIndex:Bt}),rowIndex:Bt,style:this._getItemStyle(Bt,ee)}));var Le=Ar(this.props,this._instanceProps),me=Or(this.props,this._instanceProps);return(0,m.createElement)(wt||Me||"div",{className:hn,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,x.Z)({position:"relative",height:Mn,width:Ut,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Wn},qt)},(0,m.createElement)(jn||at||"div",{children:Ft,ref:In,style:{height:Le,pointerEvents:Q?"none":void 0,width:me}}))},xn._callPropsCallbacks=function(){var Mr=this.props,dn=Mr.columnCount,hn=Mr.onItemsRendered,sn=Mr.onScroll,Wn=Mr.rowCount;if(typeof hn=="function"&&dn>0&&Wn>0){var Mn=this._getHorizontalRangeToRender(),In=Mn[0],jn=Mn[1],at=Mn[2],Je=Mn[3],Ht=this._getVerticalRangeToRender(),te=Ht[0],wt=Ht[1],Me=Ht[2],kt=Ht[3];this._callOnItemsRendered(In,jn,te,wt,at,Je,Me,kt)}if(typeof sn=="function"){var qt=this.state,dt=qt.horizontalScrollDirection,Ut=qt.scrollLeft,Q=qt.scrollTop,ot=qt.scrollUpdateWasRequested,R=qt.verticalScrollDirection;this._callOnScroll(Ut,Q,dt,R,ot)}},xn._getHorizontalRangeToRender=function(){var Mr=this.props,dn=Mr.columnCount,hn=Mr.overscanColumnCount,sn=Mr.overscanColumnsCount,Wn=Mr.overscanCount,Mn=Mr.rowCount,In=this.state,jn=In.horizontalScrollDirection,at=In.isScrolling,Je=In.scrollLeft,Ht=hn||sn||Wn||1;if(dn===0||Mn===0)return[0,0,0,0];var te=Tt(this.props,Je,this._instanceProps),wt=Pe(this.props,te,Je,this._instanceProps),Me=!at||jn==="backward"?Math.max(1,Ht):1,kt=!at||jn==="forward"?Math.max(1,Ht):1;return[Math.max(0,te-Me),Math.max(0,Math.min(dn-1,wt+kt)),te,wt]},xn._getVerticalRangeToRender=function(){var Mr=this.props,dn=Mr.columnCount,hn=Mr.overscanCount,sn=Mr.overscanRowCount,Wn=Mr.overscanRowsCount,Mn=Mr.rowCount,In=this.state,jn=In.isScrolling,at=In.verticalScrollDirection,Je=In.scrollTop,Ht=sn||Wn||hn||1;if(dn===0||Mn===0)return[0,0,0,0];var te=Un(this.props,Je,this._instanceProps),wt=Xn(this.props,te,Je,this._instanceProps),Me=!jn||at==="backward"?Math.max(1,Ht):1,kt=!jn||at==="forward"?Math.max(1,Ht):1;return[Math.max(0,te-Me),Math.max(0,Math.min(Mn-1,wt+kt)),te,wt]},gn}(m.PureComponent),Jt.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},Jt}var H=function(Jt,we){var Tt=Jt.children,Pe=Jt.direction,_r=Jt.height,Ar=Jt.innerTagName,Or=Jt.outerTagName,Br=Jt.overscanColumnsCount,cn=Jt.overscanCount,an=Jt.overscanRowsCount,Dn=Jt.width,Un=we.instance},q=50,tt=function(Jt,we){var Tt=Jt.rowCount,Pe=we.rowMetadataMap,_r=we.estimatedRowHeight,Ar=we.lastMeasuredRowIndex,Or=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Pe[Ar];Or=Br.offset+Br.size}var cn=Tt-Ar-1,an=cn*_r;return Or+an},rt=function(Jt,we){var Tt=Jt.columnCount,Pe=we.columnMetadataMap,_r=we.estimatedColumnWidth,Ar=we.lastMeasuredColumnIndex,Or=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Pe[Ar];Or=Br.offset+Br.size}var cn=Tt-Ar-1,an=cn*_r;return Or+an},ft=function(Jt,we,Tt,Pe){var _r,Ar,Or;if(Jt==="column"?(_r=Pe.columnMetadataMap,Ar=we.columnWidth,Or=Pe.lastMeasuredColumnIndex):(_r=Pe.rowMetadataMap,Ar=we.rowHeight,Or=Pe.lastMeasuredRowIndex),Tt>Or){var Br=0;if(Or>=0){var cn=_r[Or];Br=cn.offset+cn.size}for(var an=Or+1;an<=Tt;an++){var Dn=Ar(an);_r[an]={offset:Br,size:Dn},Br+=Dn}Jt==="column"?Pe.lastMeasuredColumnIndex=Tt:Pe.lastMeasuredRowIndex=Tt}return _r[Tt]},it=function(Jt,we,Tt,Pe){var _r,Ar;Jt==="column"?(_r=Tt.columnMetadataMap,Ar=Tt.lastMeasuredColumnIndex):(_r=Tt.rowMetadataMap,Ar=Tt.lastMeasuredRowIndex);var Or=Ar>0?_r[Ar].offset:0;return Or>=Pe?bt(Jt,we,Tt,Ar,0,Pe):gt(Jt,we,Tt,Math.max(0,Ar),Pe)},bt=function(Jt,we,Tt,Pe,_r,Ar){for(;_r<=Pe;){var Or=_r+Math.floor((Pe-_r)/2),Br=ft(Jt,we,Or,Tt).offset;if(Br===Ar)return Or;Br<Ar?_r=Or+1:Br>Ar&&(Pe=Or-1)}return _r>0?_r-1:0},gt=function(Jt,we,Tt,Pe,_r){for(var Ar=Jt==="column"?we.columnCount:we.rowCount,Or=1;Pe<Ar&&ft(Jt,we,Pe,Tt).offset<_r;)Pe+=Or,Or*=2;return bt(Jt,we,Tt,Math.min(Pe,Ar-1),Math.floor(Pe/2),_r)},Xt=function(Jt,we,Tt,Pe,_r,Ar,Or){var Br=Jt==="column"?we.width:we.height,cn=ft(Jt,we,Tt,Ar),an=Jt==="column"?rt(we,Ar):tt(we,Ar),Dn=Math.max(0,Math.min(an-Br,cn.offset)),Un=Math.max(0,cn.offset-Br+Or+cn.size);switch(Pe==="smart"&&(_r>=Un-Br&&_r<=Dn+Br?Pe="auto":Pe="center"),Pe){case"start":return Dn;case"end":return Un;case"center":return Math.round(Un+(Dn-Un)/2);case"auto":default:return _r>=Un&&_r<=Dn?_r:Un>Dn||_r<Un?Un:Dn}},Ct=V({getColumnOffset:function(Jt,we,Tt){return ft("column",Jt,we,Tt).offset},getColumnStartIndexForOffset:function(Jt,we,Tt){return it("column",Jt,Tt,we)},getColumnStopIndexForStartIndex:function(Jt,we,Tt,Pe){for(var _r=Jt.columnCount,Ar=Jt.width,Or=ft("column",Jt,we,Pe),Br=Tt+Ar,cn=Or.offset+Or.size,an=we;an<_r-1&&cn<Br;)an++,cn+=ft("column",Jt,an,Pe).size;return an},getColumnWidth:function(Jt,we,Tt){return Tt.columnMetadataMap[we].size},getEstimatedTotalHeight:tt,getEstimatedTotalWidth:rt,getOffsetForColumnAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){return Xt("column",Jt,we,Tt,Pe,_r,Ar)},getOffsetForRowAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){return Xt("row",Jt,we,Tt,Pe,_r,Ar)},getRowOffset:function(Jt,we,Tt){return ft("row",Jt,we,Tt).offset},getRowHeight:function(Jt,we,Tt){return Tt.rowMetadataMap[we].size},getRowStartIndexForOffset:function(Jt,we,Tt){return it("row",Jt,Tt,we)},getRowStopIndexForStartIndex:function(Jt,we,Tt,Pe){for(var _r=Jt.rowCount,Ar=Jt.height,Or=ft("row",Jt,we,Pe),Br=Tt+Ar,cn=Or.offset+Or.size,an=we;an<_r-1&&cn<Br;)an++,cn+=ft("row",Jt,an,Pe).size;return an},initInstanceProps:function(Jt,we){var Tt=Jt,Pe=Tt.estimatedColumnWidth,_r=Tt.estimatedRowHeight,Ar={columnMetadataMap:{},estimatedColumnWidth:Pe||q,estimatedRowHeight:_r||q,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return we.resetAfterColumnIndex=function(Or,Br){Br===void 0&&(Br=!0),we.resetAfterIndices({columnIndex:Or,shouldForceUpdate:Br})},we.resetAfterRowIndex=function(Or,Br){Br===void 0&&(Br=!0),we.resetAfterIndices({rowIndex:Or,shouldForceUpdate:Br})},we.resetAfterIndices=function(Or){var Br=Or.columnIndex,cn=Or.rowIndex,an=Or.shouldForceUpdate,Dn=an===void 0?!0:an;typeof Br=="number"&&(Ar.lastMeasuredColumnIndex=Math.min(Ar.lastMeasuredColumnIndex,Br-1)),typeof cn=="number"&&(Ar.lastMeasuredRowIndex=Math.min(Ar.lastMeasuredRowIndex,cn-1)),we._getItemStyleCache(-1),Dn&&we.forceUpdate()},Ar},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Jt){var we=Jt.columnWidth,Tt=Jt.rowHeight}}),At=150,Z=function(Jt,we){return Jt},J=null,yt=null;function _t(xe){var Jt,we=xe.getItemOffset,Tt=xe.getEstimatedTotalSize,Pe=xe.getItemSize,_r=xe.getOffsetForIndexAndAlignment,Ar=xe.getStartIndexForOffset,Or=xe.getStopIndexForStartIndex,Br=xe.initInstanceProps,cn=xe.shouldResetStyleCacheOnItemSizeChange,an=xe.validateProps;return Jt=function(Dn){T(Un,Dn);function Un(xr){var $e;return $e=Dn.call(this,xr)||this,$e._instanceProps=Br($e.props,(0,k.Z)($e)),$e._outerRef=void 0,$e._resetIsScrollingTimeoutId=null,$e.state={instance:(0,k.Z)($e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof $e.props.initialScrollOffset=="number"?$e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},$e._callOnItemsRendered=void 0,$e._callOnItemsRendered=p(function(Tr,qr,gn,xn){return $e.props.onItemsRendered({overscanStartIndex:Tr,overscanStopIndex:qr,visibleStartIndex:gn,visibleStopIndex:xn})}),$e._callOnScroll=void 0,$e._callOnScroll=p(function(Tr,qr,gn){return $e.props.onScroll({scrollDirection:Tr,scrollOffset:qr,scrollUpdateWasRequested:gn})}),$e._getItemStyle=void 0,$e._getItemStyle=function(Tr){var qr=$e.props,gn=qr.direction,xn=qr.itemSize,Rn=qr.layout,Mr=$e._getItemStyleCache(cn&&xn,cn&&Rn,cn&&gn),dn;if(Mr.hasOwnProperty(Tr))dn=Mr[Tr];else{var hn=we($e.props,Tr,$e._instanceProps),sn=Pe($e.props,Tr,$e._instanceProps),Wn=gn==="horizontal"||Rn==="horizontal",Mn=gn==="rtl",In=Wn?hn:0;Mr[Tr]=dn={position:"absolute",left:Mn?void 0:In,right:Mn?In:void 0,top:Wn?0:hn,height:Wn?"100%":sn,width:Wn?sn:"100%"}}return dn},$e._getItemStyleCache=void 0,$e._getItemStyleCache=p(function(Tr,qr,gn){return{}}),$e._onScrollHorizontal=function(Tr){var qr=Tr.currentTarget,gn=qr.clientWidth,xn=qr.scrollLeft,Rn=qr.scrollWidth;$e.setState(function(Mr){if(Mr.scrollOffset===xn)return null;var dn=$e.props.direction,hn=xn;if(dn==="rtl")switch(Y()){case"negative":hn=-xn;break;case"positive-descending":hn=Rn-gn-xn;break}return hn=Math.max(0,Math.min(hn,Rn-gn)),{isScrolling:!0,scrollDirection:Mr.scrollOffset<xn?"forward":"backward",scrollOffset:hn,scrollUpdateWasRequested:!1}},$e._resetIsScrollingDebounced)},$e._onScrollVertical=function(Tr){var qr=Tr.currentTarget,gn=qr.clientHeight,xn=qr.scrollHeight,Rn=qr.scrollTop;$e.setState(function(Mr){if(Mr.scrollOffset===Rn)return null;var dn=Math.max(0,Math.min(Rn,xn-gn));return{isScrolling:!0,scrollDirection:Mr.scrollOffset<dn?"forward":"backward",scrollOffset:dn,scrollUpdateWasRequested:!1}},$e._resetIsScrollingDebounced)},$e._outerRefSetter=function(Tr){var qr=$e.props.outerRef;$e._outerRef=Tr,typeof qr=="function"?qr(Tr):qr!=null&&typeof qr=="object"&&qr.hasOwnProperty("current")&&(qr.current=Tr)},$e._resetIsScrollingDebounced=function(){$e._resetIsScrollingTimeoutId!==null&&g($e._resetIsScrollingTimeoutId),$e._resetIsScrollingTimeoutId=A($e._resetIsScrolling,At)},$e._resetIsScrolling=function(){$e._resetIsScrollingTimeoutId=null,$e.setState({isScrolling:!1},function(){$e._getItemStyleCache(-1,null)})},$e}Un.getDerivedStateFromProps=function($e,Tr){return nt($e,Tr),an($e),null};var Xn=Un.prototype;return Xn.scrollTo=function($e){$e=Math.max(0,$e),this.setState(function(Tr){return Tr.scrollOffset===$e?null:{scrollDirection:Tr.scrollOffset<$e?"forward":"backward",scrollOffset:$e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},Xn.scrollToItem=function($e,Tr){Tr===void 0&&(Tr="auto");var qr=this.props,gn=qr.itemCount,xn=qr.layout,Rn=this.state.scrollOffset;$e=Math.max(0,Math.min($e,gn-1));var Mr=0;if(this._outerRef){var dn=this._outerRef;xn==="vertical"?Mr=dn.scrollWidth>dn.clientWidth?D():0:Mr=dn.scrollHeight>dn.clientHeight?D():0}this.scrollTo(_r(this.props,$e,Tr,Rn,this._instanceProps,Mr))},Xn.componentDidMount=function(){var $e=this.props,Tr=$e.direction,qr=$e.initialScrollOffset,gn=$e.layout;if(typeof qr=="number"&&this._outerRef!=null){var xn=this._outerRef;Tr==="horizontal"||gn==="horizontal"?xn.scrollLeft=qr:xn.scrollTop=qr}this._callPropsCallbacks()},Xn.componentDidUpdate=function(){var $e=this.props,Tr=$e.direction,qr=$e.layout,gn=this.state,xn=gn.scrollOffset,Rn=gn.scrollUpdateWasRequested;if(Rn&&this._outerRef!=null){var Mr=this._outerRef;if(Tr==="horizontal"||qr==="horizontal")if(Tr==="rtl")switch(Y()){case"negative":Mr.scrollLeft=-xn;break;case"positive-ascending":Mr.scrollLeft=xn;break;default:var dn=Mr.clientWidth,hn=Mr.scrollWidth;Mr.scrollLeft=hn-dn-xn;break}else Mr.scrollLeft=xn;else Mr.scrollTop=xn}this._callPropsCallbacks()},Xn.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&g(this._resetIsScrollingTimeoutId)},Xn.render=function(){var $e=this.props,Tr=$e.children,qr=$e.className,gn=$e.direction,xn=$e.height,Rn=$e.innerRef,Mr=$e.innerElementType,dn=$e.innerTagName,hn=$e.itemCount,sn=$e.itemData,Wn=$e.itemKey,Mn=Wn===void 0?Z:Wn,In=$e.layout,jn=$e.outerElementType,at=$e.outerTagName,Je=$e.style,Ht=$e.useIsScrolling,te=$e.width,wt=this.state.isScrolling,Me=gn==="horizontal"||In==="horizontal",kt=Me?this._onScrollHorizontal:this._onScrollVertical,qt=this._getRangeToRender(),dt=qt[0],Ut=qt[1],Q=[];if(hn>0)for(var ot=dt;ot<=Ut;ot++)Q.push((0,m.createElement)(Tr,{data:sn,key:Mn(ot,sn),index:ot,isScrolling:Ht?wt:void 0,style:this._getItemStyle(ot)}));var R=Tt(this.props,this._instanceProps);return(0,m.createElement)(jn||at||"div",{className:qr,onScroll:kt,ref:this._outerRefSetter,style:(0,x.Z)({position:"relative",height:xn,width:te,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:gn},Je)},(0,m.createElement)(Mr||dn||"div",{children:Q,ref:Rn,style:{height:Me?"100%":R,pointerEvents:wt?"none":void 0,width:Me?R:"100%"}}))},Xn._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var $e=this.props.itemCount;if($e>0){var Tr=this._getRangeToRender(),qr=Tr[0],gn=Tr[1],xn=Tr[2],Rn=Tr[3];this._callOnItemsRendered(qr,gn,xn,Rn)}}if(typeof this.props.onScroll=="function"){var Mr=this.state,dn=Mr.scrollDirection,hn=Mr.scrollOffset,sn=Mr.scrollUpdateWasRequested;this._callOnScroll(dn,hn,sn)}},Xn._getRangeToRender=function(){var $e=this.props,Tr=$e.itemCount,qr=$e.overscanCount,gn=this.state,xn=gn.isScrolling,Rn=gn.scrollDirection,Mr=gn.scrollOffset;if(Tr===0)return[0,0,0,0];var dn=Ar(this.props,Mr,this._instanceProps),hn=Or(this.props,dn,Mr,this._instanceProps),sn=!xn||Rn==="backward"?Math.max(1,qr):1,Wn=!xn||Rn==="forward"?Math.max(1,qr):1;return[Math.max(0,dn-sn),Math.max(0,Math.min(Tr-1,hn+Wn)),dn,hn]},Un}(m.PureComponent),Jt.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},Jt}var nt=function(Jt,we){var Tt=Jt.children,Pe=Jt.direction,_r=Jt.height,Ar=Jt.layout,Or=Jt.innerTagName,Br=Jt.outerTagName,cn=Jt.width,an=we.instance;if(!1)var Dn},vt=50,It=function(Jt,we,Tt){var Pe=Jt,_r=Pe.itemSize,Ar=Tt.itemMetadataMap,Or=Tt.lastMeasuredIndex;if(we>Or){var Br=0;if(Or>=0){var cn=Ar[Or];Br=cn.offset+cn.size}for(var an=Or+1;an<=we;an++){var Dn=_r(an);Ar[an]={offset:Br,size:Dn},Br+=Dn}Tt.lastMeasuredIndex=we}return Ar[we]},Pt=function(Jt,we,Tt){var Pe=we.itemMetadataMap,_r=we.lastMeasuredIndex,Ar=_r>0?Pe[_r].offset:0;return Ar>=Tt?St(Jt,we,_r,0,Tt):Dt(Jt,we,Math.max(0,_r),Tt)},St=function(Jt,we,Tt,Pe,_r){for(;Pe<=Tt;){var Ar=Pe+Math.floor((Tt-Pe)/2),Or=It(Jt,Ar,we).offset;if(Or===_r)return Ar;Or<_r?Pe=Ar+1:Or>_r&&(Tt=Ar-1)}return Pe>0?Pe-1:0},Dt=function(Jt,we,Tt,Pe){for(var _r=Jt.itemCount,Ar=1;Tt<_r&&It(Jt,Tt,we).offset<Pe;)Tt+=Ar,Ar*=2;return St(Jt,we,Math.min(Tt,_r-1),Math.floor(Tt/2),Pe)},Qt=function(Jt,we){var Tt=Jt.itemCount,Pe=we.itemMetadataMap,_r=we.estimatedItemSize,Ar=we.lastMeasuredIndex,Or=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Pe[Ar];Or=Br.offset+Br.size}var cn=Tt-Ar-1,an=cn*_r;return Or+an},ue=_t({getItemOffset:function(Jt,we,Tt){return It(Jt,we,Tt).offset},getItemSize:function(Jt,we,Tt){return Tt.itemMetadataMap[we].size},getEstimatedTotalSize:Qt,getOffsetForIndexAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){var Or=Jt.direction,Br=Jt.height,cn=Jt.layout,an=Jt.width,Dn=Or==="horizontal"||cn==="horizontal",Un=Dn?an:Br,Xn=It(Jt,we,_r),xr=Qt(Jt,_r),$e=Math.max(0,Math.min(xr-Un,Xn.offset)),Tr=Math.max(0,Xn.offset-Un+Xn.size+Ar);switch(Tt==="smart"&&(Pe>=Tr-Un&&Pe<=$e+Un?Tt="auto":Tt="center"),Tt){case"start":return $e;case"end":return Tr;case"center":return Math.round(Tr+($e-Tr)/2);case"auto":default:return Pe>=Tr&&Pe<=$e?Pe:Pe<Tr?Tr:$e}},getStartIndexForOffset:function(Jt,we,Tt){return Pt(Jt,Tt,we)},getStopIndexForStartIndex:function(Jt,we,Tt,Pe){for(var _r=Jt.direction,Ar=Jt.height,Or=Jt.itemCount,Br=Jt.layout,cn=Jt.width,an=_r==="horizontal"||Br==="horizontal",Dn=an?cn:Ar,Un=It(Jt,we,Pe),Xn=Tt+Dn,xr=Un.offset+Un.size,$e=we;$e<Or-1&&xr<Xn;)$e++,xr+=It(Jt,$e,Pe).size;return $e},initInstanceProps:function(Jt,we){var Tt=Jt,Pe=Tt.estimatedItemSize,_r={itemMetadataMap:{},estimatedItemSize:Pe||vt,lastMeasuredIndex:-1};return we.resetAfterIndex=function(Ar,Or){Or===void 0&&(Or=!0),_r.lastMeasuredIndex=Math.min(_r.lastMeasuredIndex,Ar-1),we._getItemStyleCache(-1),Or&&we.forceUpdate()},_r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Jt){var we=Jt.itemSize}}),ie=V({getColumnOffset:function(Jt,we){var Tt=Jt.columnWidth;return we*Tt},getColumnWidth:function(Jt,we){var Tt=Jt.columnWidth;return Tt},getRowOffset:function(Jt,we){var Tt=Jt.rowHeight;return we*Tt},getRowHeight:function(Jt,we){var Tt=Jt.rowHeight;return Tt},getEstimatedTotalHeight:function(Jt){var we=Jt.rowCount,Tt=Jt.rowHeight;return Tt*we},getEstimatedTotalWidth:function(Jt){var we=Jt.columnCount,Tt=Jt.columnWidth;return Tt*we},getOffsetForColumnAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){var Or=Jt.columnCount,Br=Jt.columnWidth,cn=Jt.width,an=Math.max(0,Or*Br-cn),Dn=Math.min(an,we*Br),Un=Math.max(0,we*Br-cn+Ar+Br);switch(Tt==="smart"&&(Pe>=Un-cn&&Pe<=Dn+cn?Tt="auto":Tt="center"),Tt){case"start":return Dn;case"end":return Un;case"center":var Xn=Math.round(Un+(Dn-Un)/2);return Xn<Math.ceil(cn/2)?0:Xn>an+Math.floor(cn/2)?an:Xn;case"auto":default:return Pe>=Un&&Pe<=Dn?Pe:Un>Dn||Pe<Un?Un:Dn}},getOffsetForRowAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){var Or=Jt.rowHeight,Br=Jt.height,cn=Jt.rowCount,an=Math.max(0,cn*Or-Br),Dn=Math.min(an,we*Or),Un=Math.max(0,we*Or-Br+Ar+Or);switch(Tt==="smart"&&(Pe>=Un-Br&&Pe<=Dn+Br?Tt="auto":Tt="center"),Tt){case"start":return Dn;case"end":return Un;case"center":var Xn=Math.round(Un+(Dn-Un)/2);return Xn<Math.ceil(Br/2)?0:Xn>an+Math.floor(Br/2)?an:Xn;case"auto":default:return Pe>=Un&&Pe<=Dn?Pe:Un>Dn||Pe<Un?Un:Dn}},getColumnStartIndexForOffset:function(Jt,we){var Tt=Jt.columnWidth,Pe=Jt.columnCount;return Math.max(0,Math.min(Pe-1,Math.floor(we/Tt)))},getColumnStopIndexForStartIndex:function(Jt,we,Tt){var Pe=Jt.columnWidth,_r=Jt.columnCount,Ar=Jt.width,Or=we*Pe,Br=Math.ceil((Ar+Tt-Or)/Pe);return Math.max(0,Math.min(_r-1,we+Br-1))},getRowStartIndexForOffset:function(Jt,we){var Tt=Jt.rowHeight,Pe=Jt.rowCount;return Math.max(0,Math.min(Pe-1,Math.floor(we/Tt)))},getRowStopIndexForStartIndex:function(Jt,we,Tt){var Pe=Jt.rowHeight,_r=Jt.rowCount,Ar=Jt.height,Or=we*Pe,Br=Math.ceil((Ar+Tt-Or)/Pe);return Math.max(0,Math.min(_r-1,we+Br-1))},initInstanceProps:function(Jt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Jt){var we=Jt.columnWidth,Tt=Jt.rowHeight}}),Lt=_t({getItemOffset:function(Jt,we){var Tt=Jt.itemSize;return we*Tt},getItemSize:function(Jt,we){var Tt=Jt.itemSize;return Tt},getEstimatedTotalSize:function(Jt){var we=Jt.itemCount,Tt=Jt.itemSize;return Tt*we},getOffsetForIndexAndAlignment:function(Jt,we,Tt,Pe,_r,Ar){var Or=Jt.direction,Br=Jt.height,cn=Jt.itemCount,an=Jt.itemSize,Dn=Jt.layout,Un=Jt.width,Xn=Or==="horizontal"||Dn==="horizontal",xr=Xn?Un:Br,$e=Math.max(0,cn*an-xr),Tr=Math.min($e,we*an),qr=Math.max(0,we*an-xr+an+Ar);switch(Tt==="smart"&&(Pe>=qr-xr&&Pe<=Tr+xr?Tt="auto":Tt="center"),Tt){case"start":return Tr;case"end":return qr;case"center":{var gn=Math.round(qr+(Tr-qr)/2);return gn<Math.ceil(xr/2)?0:gn>$e+Math.floor(xr/2)?$e:gn}case"auto":default:return Pe>=qr&&Pe<=Tr?Pe:Pe<qr?qr:Tr}},getStartIndexForOffset:function(Jt,we){var Tt=Jt.itemCount,Pe=Jt.itemSize;return Math.max(0,Math.min(Tt-1,Math.floor(we/Pe)))},getStopIndexForStartIndex:function(Jt,we,Tt){var Pe=Jt.direction,_r=Jt.height,Ar=Jt.itemCount,Or=Jt.itemSize,Br=Jt.layout,cn=Jt.width,an=Pe==="horizontal"||Br==="horizontal",Dn=we*Or,Un=an?cn:_r,Xn=Math.ceil((Un+Tt-Dn)/Or);return Math.max(0,Math.min(Ar-1,we+Xn-1))},initInstanceProps:function(Jt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Jt){var we=Jt.itemSize}});function ne(xe,Jt){for(var we in xe)if(!(we in Jt))return!0;for(var Tt in Jt)if(xe[Tt]!==Jt[Tt])return!0;return!1}var ve=null,Wt=null;function ae(xe,Jt){var we=xe.style,Tt=_objectWithoutPropertiesLoose(xe,ve),Pe=Jt.style,_r=_objectWithoutPropertiesLoose(Jt,Wt);return!ne(we,Pe)&&!ne(Tt,_r)}function Ce(xe,Jt){return!ae(this.props,xe)||ne(this.state,Jt)}},481550:function(Ve){(function(z,C){Ve.exports=C()})(this,function(){"use strict";var z=function(Rt){return Rt instanceof Uint8Array||Rt instanceof Uint16Array||Rt instanceof Uint32Array||Rt instanceof Int8Array||Rt instanceof Int16Array||Rt instanceof Int32Array||Rt instanceof Float32Array||Rt instanceof Float64Array||Rt instanceof Uint8ClampedArray},C=function(Rt,Ae){for(var je=Object.keys(Ae),zr=0;zr<je.length;++zr)Rt[je[zr]]=Ae[je[zr]];return Rt},x=`
`;function k(Rt){return typeof atob!="undefined"?atob(Rt):"base64:"+Rt}function w(Rt){var Ae=new Error("(regl) "+Rt);throw console.error(Ae),Ae}function T(Rt,Ae){Rt||w(Ae)}function L(Rt){return Rt?": "+Rt:""}function P(Rt,Ae,je){Rt in Ae||w("unknown parameter ("+Rt+")"+L(je)+". possible values: "+Object.keys(Ae).join())}function p(Rt,Ae){z(Rt)||w("invalid parameter type"+L(Ae)+". must be a typed array")}function m(Rt,Ae){switch(Ae){case"number":return typeof Rt=="number";case"object":return typeof Rt=="object";case"string":return typeof Rt=="string";case"boolean":return typeof Rt=="boolean";case"function":return typeof Rt=="function";case"undefined":return typeof Rt=="undefined";case"symbol":return typeof Rt=="symbol"}}function S(Rt,Ae,je){m(Rt,Ae)||w("invalid parameter type"+L(je)+". expected "+Ae+", got "+typeof Rt)}function y(Rt,Ae){Rt>=0&&(Rt|0)===Rt||w("invalid parameter type, ("+Rt+")"+L(Ae)+". must be a nonnegative integer")}function g(Rt,Ae,je){Ae.indexOf(Rt)<0&&w("invalid value"+L(je)+". must be one of: "+Ae)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(Rt){Object.keys(Rt).forEach(function(Ae){A.indexOf(Ae)<0&&w('invalid regl constructor argument "'+Ae+'". must be one of '+A)})}function D(Rt,Ae){for(Rt=Rt+"";Rt.length<Ae;)Rt=" "+Rt;return Rt}function F(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Y(Rt,Ae){this.number=Rt,this.line=Ae,this.errors=[]}function b(Rt,Ae,je){this.file=Rt,this.line=Ae,this.message=je}function h(){var Rt=new Error,Ae=(Rt.stack||Rt).toString(),je=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Ae);if(je)return je[1];var zr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Ae);return zr?zr[1]:"unknown"}function $(){var Rt=new Error,Ae=(Rt.stack||Rt).toString(),je=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Ae);if(je)return je[1];var zr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Ae);return zr?zr[1]:"unknown"}function U(Rt,Ae){var je=Rt.split(`
`),zr=1,rn=0,Fr={unknown:new F,0:new F};Fr.unknown.name=Fr[0].name=Ae||h(),Fr.unknown.lines.push(new Y(0,""));for(var jr=0;jr<je.length;++jr){var bn=je[jr],_n=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(bn);if(_n)switch(_n[1]){case"line":var Cn=/(\d+)(\s+\d+)?/.exec(_n[2]);Cn&&(zr=Cn[1]|0,Cn[2]&&(rn=Cn[2]|0,rn in Fr||(Fr[rn]=new F)));break;case"define":var wn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(_n[2]);wn&&(Fr[rn].name=wn[1]?k(wn[2]):wn[2]);break}Fr[rn].lines.push(new Y(zr++,bn))}return Object.keys(Fr).forEach(function(Bn){var v=Fr[Bn];v.lines.forEach(function(N){v.index[N.number]=N})}),Fr}function W(Rt){var Ae=[];return Rt.split(`
`).forEach(function(je){if(!(je.length<5)){var zr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(je);zr?Ae.push(new b(zr[1]|0,zr[2]|0,zr[3].trim())):je.length>0&&Ae.push(new b("unknown",0,je))}}),Ae}function V(Rt,Ae){Ae.forEach(function(je){var zr=Rt[je.file];if(zr){var rn=zr.index[je.line];if(rn){rn.errors.push(je),zr.hasErrors=!0;return}}Rt.unknown.hasErrors=!0,Rt.unknown.lines[0].errors.push(je)})}function H(Rt,Ae,je,zr,rn){if(!Rt.getShaderParameter(Ae,Rt.COMPILE_STATUS)){var Fr=Rt.getShaderInfoLog(Ae),jr=zr===Rt.FRAGMENT_SHADER?"fragment":"vertex";gt(je,"string",jr+" shader source must be a string",rn);var bn=U(je,rn),_n=W(Fr);V(bn,_n),Object.keys(bn).forEach(function(Cn){var wn=bn[Cn];if(!wn.hasErrors)return;var Bn=[""],v=[""];function N(K,st){Bn.push(K),v.push(st||"")}N("file number "+Cn+": "+wn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),wn.lines.forEach(function(K){if(K.errors.length>0){N(D(K.number,4)+"|  ","background-color:yellow; font-weight:bold"),N(K.line+x,"color:red; background-color:yellow; font-weight:bold");var st=0;K.errors.forEach(function(ht){var xt=ht.message,Ot=/^\s*'(.*)'\s*:\s*(.*)$/.exec(xt);if(Ot){var zt=Ot[1];switch(xt=Ot[2],zt){case"assign":zt="=";break}st=Math.max(K.line.indexOf(zt,st),0)}else st=0;N(D("| ",6)),N(D("^^^",st+3)+x,"font-weight:bold"),N(D("| ",6)),N(xt+x,"font-weight:bold")}),N(D("| ",6)+x)}else N(D(K.number,4)+"|  "),N(K.line+x,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=Bn.join("%c"),console.log.apply(console,v)):console.log(Bn.join(""))}),T.raise("Error compiling "+jr+" shader, "+bn[0].name)}}function q(Rt,Ae,je,zr,rn){if(!Rt.getProgramParameter(Ae,Rt.LINK_STATUS)){var Fr=Rt.getProgramInfoLog(Ae),jr=U(je,rn),bn=U(zr,rn),_n='Error linking program with vertex shader, "'+bn[0].name+'", and fragment shader "'+jr[0].name+'"';typeof document!="undefined"?console.log("%c"+_n+x+"%c"+Fr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(_n+x+Fr),T.raise(_n)}}function tt(Rt){Rt._commandRef=h()}function rt(Rt,Ae,je,zr){tt(Rt);function rn(_n){return _n?zr.id(_n):0}Rt._fragId=rn(Rt.static.frag),Rt._vertId=rn(Rt.static.vert);function Fr(_n,Cn){Object.keys(Cn).forEach(function(wn){_n[zr.id(wn)]=!0})}var jr=Rt._uniformSet={};Fr(jr,Ae.static),Fr(jr,Ae.dynamic);var bn=Rt._attributeSet={};Fr(bn,je.static),Fr(bn,je.dynamic),Rt._hasCount="count"in Rt.static||"count"in Rt.dynamic||"elements"in Rt.static||"elements"in Rt.dynamic}function ft(Rt,Ae){var je=$();w(Rt+" in command "+(Ae||h())+(je==="unknown"?"":" called from "+je))}function it(Rt,Ae,je){Rt||ft(Ae,je||h())}function bt(Rt,Ae,je,zr){Rt in Ae||ft("unknown parameter ("+Rt+")"+L(je)+". possible values: "+Object.keys(Ae).join(),zr||h())}function gt(Rt,Ae,je,zr){m(Rt,Ae)||ft("invalid parameter type"+L(je)+". expected "+Ae+", got "+typeof Rt,zr||h())}function Xt(Rt){Rt()}function Ct(Rt,Ae,je){Rt.texture?g(Rt.texture._texture.internalformat,Ae,"unsupported texture format for attachment"):g(Rt.renderbuffer._renderbuffer.format,je,"unsupported renderbuffer format for attachment")}var At=33071,Z=9728,J=9984,yt=9985,_t=9986,nt=9987,vt=5120,It=5121,Pt=5122,St=5123,Dt=5124,Qt=5125,ue=5126,ie=32819,Lt=32820,ne=33635,ve=34042,Wt=36193,ae={};ae[vt]=ae[It]=1,ae[Pt]=ae[St]=ae[Wt]=ae[ne]=ae[ie]=ae[Lt]=2,ae[Dt]=ae[Qt]=ae[ue]=ae[ve]=4;function Ce(Rt,Ae){return Rt===Lt||Rt===ie||Rt===ne?2:Rt===ve?4:ae[Rt]*Ae}function xe(Rt){return!(Rt&Rt-1)&&!!Rt}function Jt(Rt,Ae,je){var zr,rn=Ae.width,Fr=Ae.height,jr=Ae.channels;T(rn>0&&rn<=je.maxTextureSize&&Fr>0&&Fr<=je.maxTextureSize,"invalid texture shape"),(Rt.wrapS!==At||Rt.wrapT!==At)&&T(xe(rn)&&xe(Fr),"incompatible wrap mode for texture, both width and height must be power of 2"),Ae.mipmask===1?rn!==1&&Fr!==1&&T(Rt.minFilter!==J&&Rt.minFilter!==_t&&Rt.minFilter!==yt&&Rt.minFilter!==nt,"min filter requires mipmap"):(T(xe(rn)&&xe(Fr),"texture must be a square power of 2 to support mipmapping"),T(Ae.mipmask===(rn<<1)-1,"missing or incomplete mipmap data")),Ae.type===ue&&(je.extensions.indexOf("oes_texture_float_linear")<0&&T(Rt.minFilter===Z&&Rt.magFilter===Z,"filter not supported, must enable oes_texture_float_linear"),T(!Rt.genMipmaps,"mipmap generation not supported with float textures"));var bn=Ae.images;for(zr=0;zr<16;++zr)if(bn[zr]){var _n=rn>>zr,Cn=Fr>>zr;T(Ae.mipmask&1<<zr,"missing mipmap data");var wn=bn[zr];if(T(wn.width===_n&&wn.height===Cn,"invalid shape for mip images"),T(wn.format===Ae.format&&wn.internalformat===Ae.internalformat&&wn.type===Ae.type,"incompatible type for mip image"),!wn.compressed)if(wn.data){var Bn=Math.ceil(Ce(wn.type,jr)*_n/wn.unpackAlignment)*wn.unpackAlignment;T(wn.data.byteLength===Bn*Cn,"invalid data for image, buffer size is inconsistent with image format")}else wn.element||wn.copy}else Rt.genMipmaps||T((Ae.mipmask&1<<zr)===0,"extra mipmap data");Ae.compressed&&T(!Rt.genMipmaps,"mipmap generation for compressed images not supported")}function we(Rt,Ae,je,zr){var rn=Rt.width,Fr=Rt.height,jr=Rt.channels;T(rn>0&&rn<=zr.maxTextureSize&&Fr>0&&Fr<=zr.maxTextureSize,"invalid texture shape"),T(rn===Fr,"cube map must be square"),T(Ae.wrapS===At&&Ae.wrapT===At,"wrap mode not supported by cube map");for(var bn=0;bn<je.length;++bn){var _n=je[bn];T(_n.width===rn&&_n.height===Fr,"inconsistent cube map face shape"),Ae.genMipmaps&&(T(!_n.compressed,"can not generate mipmap for compressed textures"),T(_n.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Cn=_n.images,wn=0;wn<16;++wn){var Bn=Cn[wn];if(Bn){var v=rn>>wn,N=Fr>>wn;T(_n.mipmask&1<<wn,"missing mipmap data"),T(Bn.width===v&&Bn.height===N,"invalid shape for mip images"),T(Bn.format===Rt.format&&Bn.internalformat===Rt.internalformat&&Bn.type===Rt.type,"incompatible type for mip image"),Bn.compressed||(Bn.data?T(Bn.data.byteLength===v*N*Math.max(Ce(Bn.type,jr),Bn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Bn.element||Bn.copy)}}}}var Tt=C(T,{optional:Xt,raise:w,commandRaise:ft,command:it,parameter:P,commandParameter:bt,constructor:E,type:S,commandType:gt,isTypedArray:p,nni:y,oneOf:g,shaderError:H,linkError:q,callSite:$,saveCommandRef:tt,saveDrawInfo:rt,framebufferFormat:Ct,guessCommand:h,texture2D:Jt,textureCube:we}),Pe=0,_r=0,Ar=5,Or=6;function Br(Rt,Ae){this.id=Pe++,this.type=Rt,this.data=Ae}function cn(Rt){return Rt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function an(Rt){if(Rt.length===0)return[];var Ae=Rt.charAt(0),je=Rt.charAt(Rt.length-1);if(Rt.length>1&&Ae===je&&(Ae==='"'||Ae==="'"))return['"'+cn(Rt.substr(1,Rt.length-2))+'"'];var zr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Rt);if(zr)return an(Rt.substr(0,zr.index)).concat(an(zr[1])).concat(an(Rt.substr(zr.index+zr[0].length)));var rn=Rt.split(".");if(rn.length===1)return['"'+cn(Rt)+'"'];for(var Fr=[],jr=0;jr<rn.length;++jr)Fr=Fr.concat(an(rn[jr]));return Fr}function Dn(Rt){return"["+an(Rt).join("][")+"]"}function Un(Rt,Ae){return new Br(Rt,Dn(Ae+""))}function Xn(Rt){return typeof Rt=="function"&&!Rt._reglType||Rt instanceof Br}function xr(Rt,Ae){if(typeof Rt=="function")return new Br(_r,Rt);if(typeof Rt=="number"||typeof Rt=="boolean")return new Br(Ar,Rt);if(Array.isArray(Rt))return new Br(Or,Rt.map((je,zr)=>xr(je,Ae+"["+zr+"]")));if(Rt instanceof Br)return Rt;Tt(!1,"invalid option type in uniform "+Ae)}var $e={DynamicVariable:Br,define:Un,isDynamic:Xn,unbox:xr,accessor:Dn},Tr={next:typeof requestAnimationFrame=="function"?function(Rt){return requestAnimationFrame(Rt)}:function(Rt){return setTimeout(Rt,16)},cancel:typeof cancelAnimationFrame=="function"?function(Rt){return cancelAnimationFrame(Rt)}:clearTimeout},qr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function gn(){var Rt={"":0},Ae=[""];return{id:function(je){var zr=Rt[je];return zr||(zr=Rt[je]=Ae.length,Ae.push(je),zr)},str:function(je){return Ae[je]}}}function xn(Rt,Ae,je){var zr=document.createElement("canvas");C(zr.style,{border:0,margin:0,padding:0,top:0,left:0}),Rt.appendChild(zr),Rt===document.body&&(zr.style.position="absolute",C(Rt.style,{margin:0,padding:0}));function rn(){var bn=window.innerWidth,_n=window.innerHeight;if(Rt!==document.body){var Cn=Rt.getBoundingClientRect();bn=Cn.right-Cn.left,_n=Cn.bottom-Cn.top}zr.width=je*bn,zr.height=je*_n,C(zr.style,{width:bn+"px",height:_n+"px"})}var Fr;Rt!==document.body&&typeof ResizeObserver=="function"?(Fr=new ResizeObserver(function(){setTimeout(rn)}),Fr.observe(Rt)):window.addEventListener("resize",rn,!1);function jr(){Fr?Fr.disconnect():window.removeEventListener("resize",rn),Rt.removeChild(zr)}return rn(),{canvas:zr,onDestroy:jr}}function Rn(Rt,Ae){function je(zr){try{return Rt.getContext(zr,Ae)}catch(rn){return null}}return je("webgl")||je("experimental-webgl")||je("webgl-experimental")}function Mr(Rt){return typeof Rt.nodeName=="string"&&typeof Rt.appendChild=="function"&&typeof Rt.getBoundingClientRect=="function"}function dn(Rt){return typeof Rt.drawArrays=="function"||typeof Rt.drawElements=="function"}function hn(Rt){return typeof Rt=="string"?Rt.split():(Tt(Array.isArray(Rt),"invalid extension array"),Rt)}function sn(Rt){return typeof Rt=="string"?(Tt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Rt)):Rt}function Wn(Rt){var Ae=Rt||{},je,zr,rn,Fr,jr={},bn=[],_n=[],Cn=typeof window=="undefined"?1:window.devicePixelRatio,wn=!1,Bn=function(K){K&&Tt.raise(K)},v=function(){};if(typeof Ae=="string"?(Tt(typeof document!="undefined","selector queries only supported in DOM enviroments"),je=document.querySelector(Ae),Tt(je,"invalid query string for element")):typeof Ae=="object"?Mr(Ae)?je=Ae:dn(Ae)?(Fr=Ae,rn=Fr.canvas):(Tt.constructor(Ae),"gl"in Ae?Fr=Ae.gl:"canvas"in Ae?rn=sn(Ae.canvas):"container"in Ae&&(zr=sn(Ae.container)),"attributes"in Ae&&(jr=Ae.attributes,Tt.type(jr,"object","invalid context attributes")),"extensions"in Ae&&(bn=hn(Ae.extensions)),"optionalExtensions"in Ae&&(_n=hn(Ae.optionalExtensions)),"onDone"in Ae&&(Tt.type(Ae.onDone,"function","invalid or missing onDone callback"),Bn=Ae.onDone),"profile"in Ae&&(wn=!!Ae.profile),"pixelRatio"in Ae&&(Cn=+Ae.pixelRatio,Tt(Cn>0,"invalid pixel ratio"))):Tt.raise("invalid arguments to regl"),je&&(je.nodeName.toLowerCase()==="canvas"?rn=je:zr=je),!Fr){if(!rn){Tt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var N=xn(zr||document.body,Bn,Cn);if(!N)return null;rn=N.canvas,v=N.onDestroy}jr.premultipliedAlpha===void 0&&(jr.premultipliedAlpha=!0),Fr=Rn(rn,jr)}return Fr?{gl:Fr,canvas:rn,container:zr,extensions:bn,optionalExtensions:_n,pixelRatio:Cn,profile:wn,onDone:Bn,onDestroy:v}:(v(),Bn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Mn(Rt,Ae){var je={};function zr(jr){Tt.type(jr,"string","extension name must be string");var bn=jr.toLowerCase(),_n;try{_n=je[bn]=Rt.getExtension(bn)}catch(Cn){}return!!_n}for(var rn=0;rn<Ae.extensions.length;++rn){var Fr=Ae.extensions[rn];if(!zr(Fr))return Ae.onDestroy(),Ae.onDone('"'+Fr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ae.optionalExtensions.forEach(zr),{extensions:je,restore:function(){Object.keys(je).forEach(function(jr){if(je[jr]&&!zr(jr))throw new Error("(regl): error restoring extension "+jr)})}}}function In(Rt,Ae){for(var je=Array(Rt),zr=0;zr<Rt;++zr)je[zr]=Ae(zr);return je}var jn=5120,at=5121,Je=5122,Ht=5123,te=5124,wt=5125,Me=5126;function kt(Rt){for(var Ae=16;Ae<=1<<28;Ae*=16)if(Rt<=Ae)return Ae;return 0}function qt(Rt){var Ae,je;return Ae=(Rt>65535)<<4,Rt>>>=Ae,je=(Rt>255)<<3,Rt>>>=je,Ae|=je,je=(Rt>15)<<2,Rt>>>=je,Ae|=je,je=(Rt>3)<<1,Rt>>>=je,Ae|=je,Ae|Rt>>1}function dt(){var Rt=In(8,function(){return[]});function Ae(Fr){var jr=kt(Fr),bn=Rt[qt(jr)>>2];return bn.length>0?bn.pop():new ArrayBuffer(jr)}function je(Fr){Rt[qt(Fr.byteLength)>>2].push(Fr)}function zr(Fr,jr){var bn=null;switch(Fr){case jn:bn=new Int8Array(Ae(jr),0,jr);break;case at:bn=new Uint8Array(Ae(jr),0,jr);break;case Je:bn=new Int16Array(Ae(2*jr),0,jr);break;case Ht:bn=new Uint16Array(Ae(2*jr),0,jr);break;case te:bn=new Int32Array(Ae(4*jr),0,jr);break;case wt:bn=new Uint32Array(Ae(4*jr),0,jr);break;case Me:bn=new Float32Array(Ae(4*jr),0,jr);break;default:return null}return bn.length!==jr?bn.subarray(0,jr):bn}function rn(Fr){je(Fr.buffer)}return{alloc:Ae,free:je,allocType:zr,freeType:rn}}var Ut=dt();Ut.zero=dt();var Q=3408,ot=3410,R=3411,M=3412,O=3413,X=3414,mt=3415,Ft=33901,Bt=33902,ee=3379,Le=3386,me=34921,Xe=36347,pr=36348,Ze=35661,Pr=35660,un=34930,Ke=36349,lr=34076,Rr=34024,Dr=7936,ce=7937,jt=7938,pe=35724,Oe=34047,Se=36063,Fe=34852,or=3553,gr=34067,Jr=34069,Gn=33984,pn=6408,qn=5126,ln=5121,Vn=36160,ca=36053,ba=36064,Ea=16384,Ni=function(Rt,Ae){var je=1;Ae.ext_texture_filter_anisotropic&&(je=Rt.getParameter(Oe));var zr=1,rn=1;Ae.webgl_draw_buffers&&(zr=Rt.getParameter(Fe),rn=Rt.getParameter(Se));var Fr=!!Ae.oes_texture_float;if(Fr){var jr=Rt.createTexture();Rt.bindTexture(or,jr),Rt.texImage2D(or,0,pn,1,1,0,pn,qn,null);var bn=Rt.createFramebuffer();if(Rt.bindFramebuffer(Vn,bn),Rt.framebufferTexture2D(Vn,ba,or,jr,0),Rt.bindTexture(or,null),Rt.checkFramebufferStatus(Vn)!==ca)Fr=!1;else{Rt.viewport(0,0,1,1),Rt.clearColor(1,0,0,1),Rt.clear(Ea);var _n=Ut.allocType(qn,4);Rt.readPixels(0,0,1,1,pn,qn,_n),Rt.getError()?Fr=!1:(Rt.deleteFramebuffer(bn),Rt.deleteTexture(jr),Fr=_n[0]===1),Ut.freeType(_n)}}var Cn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),wn=!0;if(!Cn){var Bn=Rt.createTexture(),v=Ut.allocType(ln,36);Rt.activeTexture(Gn),Rt.bindTexture(gr,Bn),Rt.texImage2D(Jr,0,pn,3,3,0,pn,ln,v),Ut.freeType(v),Rt.bindTexture(gr,null),Rt.deleteTexture(Bn),wn=!Rt.getError()}return{colorBits:[Rt.getParameter(ot),Rt.getParameter(R),Rt.getParameter(M),Rt.getParameter(O)],depthBits:Rt.getParameter(X),stencilBits:Rt.getParameter(mt),subpixelBits:Rt.getParameter(Q),extensions:Object.keys(Ae).filter(function(N){return!!Ae[N]}),maxAnisotropic:je,maxDrawbuffers:zr,maxColorAttachments:rn,pointSizeDims:Rt.getParameter(Ft),lineWidthDims:Rt.getParameter(Bt),maxViewportDims:Rt.getParameter(Le),maxCombinedTextureUnits:Rt.getParameter(Ze),maxCubeMapSize:Rt.getParameter(lr),maxRenderbufferSize:Rt.getParameter(Rr),maxTextureUnits:Rt.getParameter(un),maxTextureSize:Rt.getParameter(ee),maxAttributes:Rt.getParameter(me),maxVertexUniforms:Rt.getParameter(Xe),maxVertexTextureUnits:Rt.getParameter(Pr),maxVaryingVectors:Rt.getParameter(pr),maxFragmentUniforms:Rt.getParameter(Ke),glsl:Rt.getParameter(pe),renderer:Rt.getParameter(ce),vendor:Rt.getParameter(Dr),version:Rt.getParameter(jt),readFloat:Fr,npotTextureCube:wn}};function ti(Rt){return!!Rt&&typeof Rt=="object"&&Array.isArray(Rt.shape)&&Array.isArray(Rt.stride)&&typeof Rt.offset=="number"&&Rt.shape.length===Rt.stride.length&&(Array.isArray(Rt.data)||z(Rt.data))}var ei=function(Rt){return Object.keys(Rt).map(function(Ae){return Rt[Ae]})},wi={shape:To,flatten:lo};function Gi(Rt,Ae,je){for(var zr=0;zr<Ae;++zr)je[zr]=Rt[zr]}function Co(Rt,Ae,je,zr){for(var rn=0,Fr=0;Fr<Ae;++Fr)for(var jr=Rt[Fr],bn=0;bn<je;++bn)zr[rn++]=jr[bn]}function eo(Rt,Ae,je,zr,rn,Fr){for(var jr=Fr,bn=0;bn<Ae;++bn)for(var _n=Rt[bn],Cn=0;Cn<je;++Cn)for(var wn=_n[Cn],Bn=0;Bn<zr;++Bn)rn[jr++]=wn[Bn]}function ga(Rt,Ae,je,zr,rn){for(var Fr=1,jr=je+1;jr<Ae.length;++jr)Fr*=Ae[jr];var bn=Ae[je];if(Ae.length-je===4){var _n=Ae[je+1],Cn=Ae[je+2],wn=Ae[je+3];for(jr=0;jr<bn;++jr)eo(Rt[jr],_n,Cn,wn,zr,rn),rn+=Fr}else for(jr=0;jr<bn;++jr)ga(Rt[jr],Ae,je+1,zr,rn),rn+=Fr}function lo(Rt,Ae,je,zr){var rn=1;if(Ae.length)for(var Fr=0;Fr<Ae.length;++Fr)rn*=Ae[Fr];else rn=0;var jr=zr||Ut.allocType(je,rn);switch(Ae.length){case 0:break;case 1:Gi(Rt,Ae[0],jr);break;case 2:Co(Rt,Ae[0],Ae[1],jr);break;case 3:eo(Rt,Ae[0],Ae[1],Ae[2],jr,0);break;default:ga(Rt,Ae,0,jr,0)}return jr}function To(Rt){for(var Ae=[],je=Rt;je.length;je=je[0])Ae.push(je.length);return Ae}var ni={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ri=5120,ho=5122,Po=5124,ro=5121,no=5123,es=5125,vo=5126,Si=5126,ao={int8:Ri,int16:ho,int32:Po,uint8:ro,uint16:no,uint32:es,float:vo,float32:Si},Jo=35048,Yt=35040,de={dynamic:Jo,stream:Yt,static:35044},Ge=wi.flatten,sr=wi.shape,Lr=35044,Nr=35040,Sr=5121,en=5126,fn=[];fn[5120]=1,fn[5122]=2,fn[5124]=4,fn[5121]=1,fn[5123]=2,fn[5125]=4,fn[5126]=4;function Pn(Rt){return ni[Object.prototype.toString.call(Rt)]|0}function sa(Rt,Ae){for(var je=0;je<Ae.length;++je)Rt[je]=Ae[je]}function Zn(Rt,Ae,je,zr,rn,Fr,jr){for(var bn=0,_n=0;_n<je;++_n)for(var Cn=0;Cn<zr;++Cn)Rt[bn++]=Ae[rn*_n+Fr*Cn+jr]}function pa(Rt,Ae,je,zr){var rn=0,Fr={};function jr(st){this.id=rn++,this.buffer=Rt.createBuffer(),this.type=st,this.usage=Lr,this.byteLength=0,this.dimension=1,this.dtype=Sr,this.persistentData=null,je.profile&&(this.stats={size:0})}jr.prototype.bind=function(){Rt.bindBuffer(this.type,this.buffer)},jr.prototype.destroy=function(){v(this)};var bn=[];function _n(st,ht){var xt=bn.pop();return xt||(xt=new jr(st)),xt.bind(),Bn(xt,ht,Nr,0,1,!1),xt}function Cn(st){bn.push(st)}function wn(st,ht,xt){st.byteLength=ht.byteLength,Rt.bufferData(st.type,ht,xt)}function Bn(st,ht,xt,Ot,zt,Kt){var fe;if(st.usage=xt,Array.isArray(ht)){if(st.dtype=Ot||en,ht.length>0){var Te;if(Array.isArray(ht[0])){fe=sr(ht);for(var be=1,We=1;We<fe.length;++We)be*=fe[We];st.dimension=be,Te=Ge(ht,fe,st.dtype),wn(st,Te,xt),Kt?st.persistentData=Te:Ut.freeType(Te)}else if(typeof ht[0]=="number"){st.dimension=zt;var cr=Ut.allocType(st.dtype,ht.length);sa(cr,ht),wn(st,cr,xt),Kt?st.persistentData=cr:Ut.freeType(cr)}else z(ht[0])?(st.dimension=ht[0].length,st.dtype=Ot||Pn(ht[0])||en,Te=Ge(ht,[ht.length,ht[0].length],st.dtype),wn(st,Te,xt),Kt?st.persistentData=Te:Ut.freeType(Te)):Tt.raise("invalid buffer data")}}else if(z(ht))st.dtype=Ot||Pn(ht),st.dimension=zt,wn(st,ht,xt),Kt&&(st.persistentData=new Uint8Array(new Uint8Array(ht.buffer)));else if(ti(ht)){fe=ht.shape;var Vr=ht.stride,mr=ht.offset,wr=0,Er=0,Sn=0,Yn=0;fe.length===1?(wr=fe[0],Er=1,Sn=Vr[0],Yn=0):fe.length===2?(wr=fe[0],Er=fe[1],Sn=Vr[0],Yn=Vr[1]):Tt.raise("invalid shape"),st.dtype=Ot||Pn(ht.data)||en,st.dimension=Er;var Nn=Ut.allocType(st.dtype,wr*Er);Zn(Nn,ht.data,wr,Er,Sn,Yn,mr),wn(st,Nn,xt),Kt?st.persistentData=Nn:Ut.freeType(Nn)}else ht instanceof ArrayBuffer?(st.dtype=Sr,st.dimension=zt,wn(st,ht,xt),Kt&&(st.persistentData=new Uint8Array(new Uint8Array(ht)))):Tt.raise("invalid buffer data")}function v(st){Ae.bufferCount--,zr(st);var ht=st.buffer;Tt(ht,"buffer must not be deleted already"),Rt.deleteBuffer(ht),st.buffer=null,delete Fr[st.id]}function N(st,ht,xt,Ot){Ae.bufferCount++;var zt=new jr(ht);Fr[zt.id]=zt;function Kt(be){var We=Lr,cr=null,Vr=0,mr=0,wr=1;return Array.isArray(be)||z(be)||ti(be)||be instanceof ArrayBuffer?cr=be:typeof be=="number"?Vr=be|0:be&&(Tt.type(be,"object","buffer arguments must be an object, a number or an array"),"data"in be&&(Tt(cr===null||Array.isArray(cr)||z(cr)||ti(cr),"invalid data for buffer"),cr=be.data),"usage"in be&&(Tt.parameter(be.usage,de,"invalid buffer usage"),We=de[be.usage]),"type"in be&&(Tt.parameter(be.type,ao,"invalid buffer type"),mr=ao[be.type]),"dimension"in be&&(Tt.type(be.dimension,"number","invalid dimension"),wr=be.dimension|0),"length"in be&&(Tt.nni(Vr,"buffer length must be a nonnegative integer"),Vr=be.length|0)),zt.bind(),cr?Bn(zt,cr,We,mr,wr,Ot):(Vr&&Rt.bufferData(zt.type,Vr,We),zt.dtype=mr||Sr,zt.usage=We,zt.dimension=wr,zt.byteLength=Vr),je.profile&&(zt.stats.size=zt.byteLength*fn[zt.dtype]),Kt}function fe(be,We){Tt(We+be.byteLength<=zt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+be.byteLength+" starting from offset "+We+" to a buffer of size "+zt.byteLength),Rt.bufferSubData(zt.type,We,be)}function Te(be,We){var cr=(We||0)|0,Vr;if(zt.bind(),z(be)||be instanceof ArrayBuffer)fe(be,cr);else if(Array.isArray(be)){if(be.length>0)if(typeof be[0]=="number"){var mr=Ut.allocType(zt.dtype,be.length);sa(mr,be),fe(mr,cr),Ut.freeType(mr)}else if(Array.isArray(be[0])||z(be[0])){Vr=sr(be);var wr=Ge(be,Vr,zt.dtype);fe(wr,cr),Ut.freeType(wr)}else Tt.raise("invalid buffer data")}else if(ti(be)){Vr=be.shape;var Er=be.stride,Sn=0,Yn=0,Nn=0,la=0;Vr.length===1?(Sn=Vr[0],Yn=1,Nn=Er[0],la=0):Vr.length===2?(Sn=Vr[0],Yn=Vr[1],Nn=Er[0],la=Er[1]):Tt.raise("invalid shape");var ua=Array.isArray(be.data)?zt.dtype:Pn(be.data),wa=Ut.allocType(ua,Sn*Yn);Zn(wa,be.data,Sn,Yn,Nn,la,be.offset),fe(wa,cr),Ut.freeType(wa)}else Tt.raise("invalid data for buffer subdata");return Kt}return xt||Kt(st),Kt._reglType="buffer",Kt._buffer=zt,Kt.subdata=Te,je.profile&&(Kt.stats=zt.stats),Kt.destroy=function(){v(zt)},Kt}function K(){ei(Fr).forEach(function(st){st.buffer=Rt.createBuffer(),Rt.bindBuffer(st.type,st.buffer),Rt.bufferData(st.type,st.persistentData||st.byteLength,st.usage)})}return je.profile&&(Ae.getTotalBufferSize=function(){var st=0;return Object.keys(Fr).forEach(function(ht){st+=Fr[ht].stats.size}),st}),{create:N,createStream:_n,destroyStream:Cn,clear:function(){ei(Fr).forEach(v),bn.forEach(v)},getBuffer:function(st){return st&&st._buffer instanceof jr?st._buffer:null},restore:K,_initBuffer:Bn}}var ya=0,di=0,Ma=1,oa=1,si=4,$a=4,Fa={points:ya,point:di,lines:Ma,line:oa,triangles:si,triangle:$a,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ui=0,fi=1,La=4,ja=5120,za=5121,yi=5122,mi=5123,ki=5124,po=5125,Wi=34963,Ao=35040,Vo=35044;function os(Rt,Ae,je,zr){var rn={},Fr=0,jr={uint8:za,uint16:mi};Ae.oes_element_index_uint&&(jr.uint32=po);function bn(K){this.id=Fr++,rn[this.id]=this,this.buffer=K,this.primType=La,this.vertCount=0,this.type=0}bn.prototype.bind=function(){this.buffer.bind()};var _n=[];function Cn(K){var st=_n.pop();return st||(st=new bn(je.create(null,Wi,!0,!1)._buffer)),Bn(st,K,Ao,-1,-1,0,0),st}function wn(K){_n.push(K)}function Bn(K,st,ht,xt,Ot,zt,Kt){K.buffer.bind();var fe;if(st){var Te=Kt;!Kt&&(!z(st)||ti(st)&&!z(st.data))&&(Te=Ae.oes_element_index_uint?po:mi),je._initBuffer(K.buffer,st,ht,Te,3)}else Rt.bufferData(Wi,zt,ht),K.buffer.dtype=fe||za,K.buffer.usage=ht,K.buffer.dimension=3,K.buffer.byteLength=zt;if(fe=Kt,!Kt){switch(K.buffer.dtype){case za:case ja:fe=za;break;case mi:case yi:fe=mi;break;case po:case ki:fe=po;break;default:Tt.raise("unsupported type for element array")}K.buffer.dtype=fe}K.type=fe,Tt(fe!==po||!!Ae.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var be=Ot;be<0&&(be=K.buffer.byteLength,fe===mi?be>>=1:fe===po&&(be>>=2)),K.vertCount=be;var We=xt;if(xt<0){We=La;var cr=K.buffer.dimension;cr===1&&(We=Ui),cr===2&&(We=fi),cr===3&&(We=La)}K.primType=We}function v(K){zr.elementsCount--,Tt(K.buffer!==null,"must not double destroy elements"),delete rn[K.id],K.buffer.destroy(),K.buffer=null}function N(K,st){var ht=je.create(null,Wi,!0),xt=new bn(ht._buffer);zr.elementsCount++;function Ot(zt){if(!zt)ht(),xt.primType=La,xt.vertCount=0,xt.type=za;else if(typeof zt=="number")ht(zt),xt.primType=La,xt.vertCount=zt|0,xt.type=za;else{var Kt=null,fe=Vo,Te=-1,be=-1,We=0,cr=0;Array.isArray(zt)||z(zt)||ti(zt)?Kt=zt:(Tt.type(zt,"object","invalid arguments for elements"),"data"in zt&&(Kt=zt.data,Tt(Array.isArray(Kt)||z(Kt)||ti(Kt),"invalid data for element buffer")),"usage"in zt&&(Tt.parameter(zt.usage,de,"invalid element buffer usage"),fe=de[zt.usage]),"primitive"in zt&&(Tt.parameter(zt.primitive,Fa,"invalid element buffer primitive"),Te=Fa[zt.primitive]),"count"in zt&&(Tt(typeof zt.count=="number"&&zt.count>=0,"invalid vertex count for elements"),be=zt.count|0),"type"in zt&&(Tt.parameter(zt.type,jr,"invalid buffer type"),cr=jr[zt.type]),"length"in zt?We=zt.length|0:(We=be,cr===mi||cr===yi?We*=2:(cr===po||cr===ki)&&(We*=4))),Bn(xt,Kt,fe,Te,be,We,cr)}return Ot}return Ot(K),Ot._reglType="elements",Ot._elements=xt,Ot.subdata=function(zt,Kt){return ht.subdata(zt,Kt),Ot},Ot.destroy=function(){v(xt)},Ot}return{create:N,createStream:Cn,destroyStream:wn,getElements:function(K){return typeof K=="function"&&K._elements instanceof bn?K._elements:null},clear:function(){ei(rn).forEach(v)}}}var $i=new Float32Array(1),qa=new Uint32Array($i.buffer),Yi=5123;function io(Rt){for(var Ae=Ut.allocType(Yi,Rt.length),je=0;je<Rt.length;++je)if(isNaN(Rt[je]))Ae[je]=65535;else if(Rt[je]===1/0)Ae[je]=31744;else if(Rt[je]===-1/0)Ae[je]=64512;else{$i[0]=Rt[je];var zr=qa[0],rn=zr>>>31<<15,Fr=(zr<<1>>>24)-127,jr=zr>>13&1024-1;if(Fr<-24)Ae[je]=rn;else if(Fr<-14){var bn=-14-Fr;Ae[je]=rn+(jr+1024>>bn)}else Fr>15?Ae[je]=rn+31744:Ae[je]=rn+(Fr+15<<10)+jr}return Ae}function Qa(Rt){return Array.isArray(Rt)||z(Rt)}var Pi=function(Rt){return!(Rt&Rt-1)&&!!Rt},zo=34467,qi=3553,rs=34067,Xi=34069,yo=6408,Es=6406,ds=6407,oo=6409,ls=6410,hs=32854,Os=32855,Ho=36194,$t=32819,ye=32820,ir=33635,dr=34042,Zr=6402,Ln=34041,Qn=35904,Sa=35906,Ci=36193,Io=33776,Go=33777,zs=33778,Ds=33779,ji=35986,xo=35987,Gs=34798,vs=35840,qs=35841,Qs=35842,Js=35843,Vs=36196,Rs=5121,Us=5123,ws=5125,ns=5126,_u=10242,Cu=10243,Uo=10497,bo=33071,ss=33648,d=10240,G=10241,Et=9728,Gt=9729,re=9984,he=9985,ge=9986,De=9987,ze=33170,He=4352,ur=4353,Ur=4354,Xr=34046,Wr=3317,Tn=37440,On=37441,Qr=37443,ra=37444,Ha=33984,Va=[re,ge,he,De],Ra=[0,oo,ls,ds,yo],_a={};_a[oo]=_a[Es]=_a[Zr]=1,_a[Ln]=_a[ls]=2,_a[ds]=_a[Qn]=3,_a[yo]=_a[Sa]=4;function Pa(Rt){return"[object "+Rt+"]"}var Oo=Pa("HTMLCanvasElement"),Eo=Pa("OffscreenCanvas"),go=Pa("CanvasRenderingContext2D"),wo=Pa("ImageBitmap"),So=Pa("HTMLImageElement"),No=Pa("HTMLVideoElement"),Ro=Object.keys(ni).concat([Oo,Eo,go,wo,So,No]),ci=[];ci[Rs]=1,ci[ns]=4,ci[Ci]=2,ci[Us]=2,ci[ws]=4;var Bi=[];Bi[hs]=2,Bi[Os]=2,Bi[Ho]=2,Bi[Ln]=4,Bi[Io]=.5,Bi[Go]=.5,Bi[zs]=1,Bi[Ds]=1,Bi[ji]=.5,Bi[xo]=1,Bi[Gs]=1,Bi[vs]=.5,Bi[qs]=.25,Bi[Qs]=.5,Bi[Js]=.25,Bi[Vs]=.5;function Hs(Rt){return Array.isArray(Rt)&&(Rt.length===0||typeof Rt[0]=="number")}function Zs(Rt){if(!Array.isArray(Rt))return!1;var Ae=Rt.length;return!(Ae===0||!Qa(Rt[0]))}function ps(Rt){return Object.prototype.toString.call(Rt)}function Tu(Rt){return ps(Rt)===Oo}function Nf(Rt){return ps(Rt)===Eo}function hc(Rt){return ps(Rt)===go}function vc(Rt){return ps(Rt)===wo}function pc(Rt){return ps(Rt)===So}function Rf(Rt){return ps(Rt)===No}function kf(Rt){if(!Rt)return!1;var Ae=ps(Rt);return Ro.indexOf(Ae)>=0?!0:Hs(Rt)||Zs(Rt)||ti(Rt)}function gc(Rt){return ni[Object.prototype.toString.call(Rt)]|0}function du(Rt,Ae){var je=Ae.length;switch(Rt.type){case Rs:case Us:case ws:case ns:var zr=Ut.allocType(Rt.type,je);zr.set(Ae),Rt.data=zr;break;case Ci:Rt.data=io(Ae);break;default:Tt.raise("unsupported texture type, must specify a typed array")}}function lf(Rt,Ae){return Ut.allocType(Rt.type===Ci?ns:Rt.type,Ae)}function mc(Rt,Ae){Rt.type===Ci?(Rt.data=io(Ae),Ut.freeType(Ae)):Rt.data=Ae}function qc(Rt,Ae,je,zr,rn,Fr){for(var jr=Rt.width,bn=Rt.height,_n=Rt.channels,Cn=jr*bn*_n,wn=lf(Rt,Cn),Bn=0,v=0;v<bn;++v)for(var N=0;N<jr;++N)for(var K=0;K<_n;++K)wn[Bn++]=Ae[je*N+zr*v+rn*K+Fr];mc(Rt,wn)}function hu(Rt,Ae,je,zr,rn,Fr){var jr;if(typeof Bi[Rt]!="undefined"?jr=Bi[Rt]:jr=_a[Rt]*ci[Ae],Fr&&(jr*=6),rn){for(var bn=0,_n=je;_n>=1;)bn+=jr*_n*_n,_n/=2;return bn}else return jr*je*zr}function yc(Rt,Ae,je,zr,rn,Fr,jr){var bn={"don't care":He,"dont care":He,nice:Ur,fast:ur},_n={repeat:Uo,clamp:bo,mirror:ss},Cn={nearest:Et,linear:Gt},wn=C({mipmap:De,"nearest mipmap nearest":re,"linear mipmap nearest":he,"nearest mipmap linear":ge,"linear mipmap linear":De},Cn),Bn={none:0,browser:ra},v={uint8:Rs,rgba4:$t,rgb565:ir,"rgb5 a1":ye},N={alpha:Es,luminance:oo,"luminance alpha":ls,rgb:ds,rgba:yo,rgba4:hs,"rgb5 a1":Os,rgb565:Ho},K={};Ae.ext_srgb&&(N.srgb=Qn,N.srgba=Sa),Ae.oes_texture_float&&(v.float32=v.float=ns),Ae.oes_texture_half_float&&(v.float16=v["half float"]=Ci),Ae.webgl_depth_texture&&(C(N,{depth:Zr,"depth stencil":Ln}),C(v,{uint16:Us,uint32:ws,"depth stencil":dr})),Ae.webgl_compressed_texture_s3tc&&C(K,{"rgb s3tc dxt1":Io,"rgba s3tc dxt1":Go,"rgba s3tc dxt3":zs,"rgba s3tc dxt5":Ds}),Ae.webgl_compressed_texture_atc&&C(K,{"rgb atc":ji,"rgba atc explicit alpha":xo,"rgba atc interpolated alpha":Gs}),Ae.webgl_compressed_texture_pvrtc&&C(K,{"rgb pvrtc 4bppv1":vs,"rgb pvrtc 2bppv1":qs,"rgba pvrtc 4bppv1":Qs,"rgba pvrtc 2bppv1":Js}),Ae.webgl_compressed_texture_etc1&&(K["rgb etc1"]=Vs);var st=Array.prototype.slice.call(Rt.getParameter(zo));Object.keys(K).forEach(function(Ye){var Yr=K[Ye];st.indexOf(Yr)>=0&&(N[Ye]=Yr)});var ht=Object.keys(N);je.textureFormats=ht;var xt=[];Object.keys(N).forEach(function(Ye){var Yr=N[Ye];xt[Yr]=Ye});var Ot=[];Object.keys(v).forEach(function(Ye){var Yr=v[Ye];Ot[Yr]=Ye});var zt=[];Object.keys(Cn).forEach(function(Ye){var Yr=Cn[Ye];zt[Yr]=Ye});var Kt=[];Object.keys(wn).forEach(function(Ye){var Yr=wn[Ye];Kt[Yr]=Ye});var fe=[];Object.keys(_n).forEach(function(Ye){var Yr=_n[Ye];fe[Yr]=Ye});var Te=ht.reduce(function(Ye,Yr){var kr=N[Yr];return kr===oo||kr===Es||kr===oo||kr===ls||kr===Zr||kr===Ln||Ae.ext_srgb&&(kr===Qn||kr===Sa)?Ye[kr]=kr:kr===Os||Yr.indexOf("rgba")>=0?Ye[kr]=yo:Ye[kr]=ds,Ye},{});function be(){this.internalformat=yo,this.format=yo,this.type=Rs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ra,this.width=0,this.height=0,this.channels=0}function We(Ye,Yr){Ye.internalformat=Yr.internalformat,Ye.format=Yr.format,Ye.type=Yr.type,Ye.compressed=Yr.compressed,Ye.premultiplyAlpha=Yr.premultiplyAlpha,Ye.flipY=Yr.flipY,Ye.unpackAlignment=Yr.unpackAlignment,Ye.colorSpace=Yr.colorSpace,Ye.width=Yr.width,Ye.height=Yr.height,Ye.channels=Yr.channels}function cr(Ye,Yr){if(!(typeof Yr!="object"||!Yr)){if("premultiplyAlpha"in Yr&&(Tt.type(Yr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ye.premultiplyAlpha=Yr.premultiplyAlpha),"flipY"in Yr&&(Tt.type(Yr.flipY,"boolean","invalid texture flip"),Ye.flipY=Yr.flipY),"alignment"in Yr&&(Tt.oneOf(Yr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ye.unpackAlignment=Yr.alignment),"colorSpace"in Yr&&(Tt.parameter(Yr.colorSpace,Bn,"invalid colorSpace"),Ye.colorSpace=Bn[Yr.colorSpace]),"type"in Yr){var kr=Yr.type;Tt(Ae.oes_texture_float||!(kr==="float"||kr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Tt(Ae.oes_texture_half_float||!(kr==="half float"||kr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Tt(Ae.webgl_depth_texture||!(kr==="uint16"||kr==="uint32"||kr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(kr,v,"invalid texture type"),Ye.type=v[kr]}var na=Ye.width,ii=Ye.height,ke=Ye.channels,Ee=!1;"shape"in Yr?(Tt(Array.isArray(Yr.shape)&&Yr.shape.length>=2,"shape must be an array"),na=Yr.shape[0],ii=Yr.shape[1],Yr.shape.length===3&&(ke=Yr.shape[2],Tt(ke>0&&ke<=4,"invalid number of channels"),Ee=!0),Tt(na>=0&&na<=je.maxTextureSize,"invalid width"),Tt(ii>=0&&ii<=je.maxTextureSize,"invalid height")):("radius"in Yr&&(na=ii=Yr.radius,Tt(na>=0&&na<=je.maxTextureSize,"invalid radius")),"width"in Yr&&(na=Yr.width,Tt(na>=0&&na<=je.maxTextureSize,"invalid width")),"height"in Yr&&(ii=Yr.height,Tt(ii>=0&&ii<=je.maxTextureSize,"invalid height")),"channels"in Yr&&(ke=Yr.channels,Tt(ke>0&&ke<=4,"invalid number of channels"),Ee=!0)),Ye.width=na|0,Ye.height=ii|0,Ye.channels=ke|0;var er=!1;if("format"in Yr){var br=Yr.format;Tt(Ae.webgl_depth_texture||!(br==="depth"||br==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(br,N,"invalid texture format");var Cr=Ye.internalformat=N[br];Ye.format=Te[Cr],br in v&&("type"in Yr||(Ye.type=v[br])),br in K&&(Ye.compressed=!0),er=!0}!Ee&&er?Ye.channels=_a[Ye.format]:Ee&&!er?Ye.channels!==Ra[Ye.format]&&(Ye.format=Ye.internalformat=Ra[Ye.channels]):er&&Ee&&Tt(Ye.channels===_a[Ye.format],"number of channels inconsistent with specified format")}}function Vr(Ye){Rt.pixelStorei(Tn,Ye.flipY),Rt.pixelStorei(On,Ye.premultiplyAlpha),Rt.pixelStorei(Qr,Ye.colorSpace),Rt.pixelStorei(Wr,Ye.unpackAlignment)}function mr(){be.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function wr(Ye,Yr){var kr=null;if(kf(Yr)?kr=Yr:Yr&&(Tt.type(Yr,"object","invalid pixel data type"),cr(Ye,Yr),"x"in Yr&&(Ye.xOffset=Yr.x|0),"y"in Yr&&(Ye.yOffset=Yr.y|0),kf(Yr.data)&&(kr=Yr.data)),Tt(!Ye.compressed||kr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Yr.copy){Tt(!kr,"can not specify copy and data field for the same texture");var na=rn.viewportWidth,ii=rn.viewportHeight;Ye.width=Ye.width||na-Ye.xOffset,Ye.height=Ye.height||ii-Ye.yOffset,Ye.needsCopy=!0,Tt(Ye.xOffset>=0&&Ye.xOffset<na&&Ye.yOffset>=0&&Ye.yOffset<ii&&Ye.width>0&&Ye.width<=na&&Ye.height>0&&Ye.height<=ii,"copy texture read out of bounds")}else if(!kr)Ye.width=Ye.width||1,Ye.height=Ye.height||1,Ye.channels=Ye.channels||4;else if(z(kr))Ye.channels=Ye.channels||4,Ye.data=kr,!("type"in Yr)&&Ye.type===Rs&&(Ye.type=gc(kr));else if(Hs(kr))Ye.channels=Ye.channels||4,du(Ye,kr),Ye.alignment=1,Ye.needsFree=!0;else if(ti(kr)){var ke=kr.data;!Array.isArray(ke)&&Ye.type===Rs&&(Ye.type=gc(ke));var Ee=kr.shape,er=kr.stride,br,Cr,ar,rr,vr,Be;Ee.length===3?(ar=Ee[2],Be=er[2]):(Tt(Ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ar=1,Be=1),br=Ee[0],Cr=Ee[1],rr=er[0],vr=er[1],Ye.alignment=1,Ye.width=br,Ye.height=Cr,Ye.channels=ar,Ye.format=Ye.internalformat=Ra[ar],Ye.needsFree=!0,qc(Ye,ke,rr,vr,Be,kr.offset)}else if(Tu(kr)||Nf(kr)||hc(kr))Tu(kr)||Nf(kr)?Ye.element=kr:Ye.element=kr.canvas,Ye.width=Ye.element.width,Ye.height=Ye.element.height,Ye.channels=4;else if(vc(kr))Ye.element=kr,Ye.width=kr.width,Ye.height=kr.height,Ye.channels=4;else if(pc(kr))Ye.element=kr,Ye.width=kr.naturalWidth,Ye.height=kr.naturalHeight,Ye.channels=4;else if(Rf(kr))Ye.element=kr,Ye.width=kr.videoWidth,Ye.height=kr.videoHeight,Ye.channels=4;else if(Zs(kr)){var Qe=Ye.width||kr[0].length,Ne=Ye.height||kr.length,yr=Ye.channels;Qa(kr[0][0])?yr=yr||kr[0][0].length:yr=yr||1;for(var Ir=wi.shape(kr),tn=1,on=0;on<Ir.length;++on)tn*=Ir[on];var Hr=lf(Ye,tn);wi.flatten(kr,Ir,"",Hr),mc(Ye,Hr),Ye.alignment=1,Ye.width=Qe,Ye.height=Ne,Ye.channels=yr,Ye.format=Ye.internalformat=Ra[yr],Ye.needsFree=!0}Ye.type===ns?Tt(je.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ye.type===Ci&&Tt(je.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Er(Ye,Yr,kr){var na=Ye.element,ii=Ye.data,ke=Ye.internalformat,Ee=Ye.format,er=Ye.type,br=Ye.width,Cr=Ye.height;Vr(Ye),na?Rt.texImage2D(Yr,kr,Ee,Ee,er,na):Ye.compressed?Rt.compressedTexImage2D(Yr,kr,ke,br,Cr,0,ii):Ye.needsCopy?(zr(),Rt.copyTexImage2D(Yr,kr,Ee,Ye.xOffset,Ye.yOffset,br,Cr,0)):Rt.texImage2D(Yr,kr,Ee,br,Cr,0,Ee,er,ii||null)}function Sn(Ye,Yr,kr,na,ii){var ke=Ye.element,Ee=Ye.data,er=Ye.internalformat,br=Ye.format,Cr=Ye.type,ar=Ye.width,rr=Ye.height;Vr(Ye),ke?Rt.texSubImage2D(Yr,ii,kr,na,br,Cr,ke):Ye.compressed?Rt.compressedTexSubImage2D(Yr,ii,kr,na,er,ar,rr,Ee):Ye.needsCopy?(zr(),Rt.copyTexSubImage2D(Yr,ii,kr,na,Ye.xOffset,Ye.yOffset,ar,rr)):Rt.texSubImage2D(Yr,ii,kr,na,ar,rr,br,Cr,Ee)}var Yn=[];function Nn(){return Yn.pop()||new mr}function la(Ye){Ye.needsFree&&Ut.freeType(Ye.data),mr.call(Ye),Yn.push(Ye)}function ua(){be.call(this),this.genMipmaps=!1,this.mipmapHint=He,this.mipmask=0,this.images=Array(16)}function wa(Ye,Yr,kr){var na=Ye.images[0]=Nn();Ye.mipmask=1,na.width=Ye.width=Yr,na.height=Ye.height=kr,na.channels=Ye.channels=4}function Ba(Ye,Yr){var kr=null;if(kf(Yr))kr=Ye.images[0]=Nn(),We(kr,Ye),wr(kr,Yr),Ye.mipmask=1;else if(cr(Ye,Yr),Array.isArray(Yr.mipmap))for(var na=Yr.mipmap,ii=0;ii<na.length;++ii)kr=Ye.images[ii]=Nn(),We(kr,Ye),kr.width>>=ii,kr.height>>=ii,wr(kr,na[ii]),Ye.mipmask|=1<<ii;else kr=Ye.images[0]=Nn(),We(kr,Ye),wr(kr,Yr),Ye.mipmask=1;We(Ye,Ye.images[0]),Ye.compressed&&(Ye.internalformat===Io||Ye.internalformat===Go||Ye.internalformat===zs||Ye.internalformat===Ds)&&Tt(Ye.width%4===0&&Ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ia(Ye,Yr){for(var kr=Ye.images,na=0;na<kr.length;++na){if(!kr[na])return;Er(kr[na],Yr,na)}}var uo=[];function Ua(){var Ye=uo.pop()||new ua;be.call(Ye),Ye.mipmask=0;for(var Yr=0;Yr<16;++Yr)Ye.images[Yr]=null;return Ye}function Do(Ye){for(var Yr=Ye.images,kr=0;kr<Yr.length;++kr)Yr[kr]&&la(Yr[kr]),Yr[kr]=null;uo.push(Ye)}function Hi(){this.minFilter=Et,this.magFilter=Et,this.wrapS=bo,this.wrapT=bo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=He}function li(Ye,Yr){if("min"in Yr){var kr=Yr.min;Tt.parameter(kr,wn),Ye.minFilter=wn[kr],Va.indexOf(Ye.minFilter)>=0&&!("faces"in Yr)&&(Ye.genMipmaps=!0)}if("mag"in Yr){var na=Yr.mag;Tt.parameter(na,Cn),Ye.magFilter=Cn[na]}var ii=Ye.wrapS,ke=Ye.wrapT;if("wrap"in Yr){var Ee=Yr.wrap;typeof Ee=="string"?(Tt.parameter(Ee,_n),ii=ke=_n[Ee]):Array.isArray(Ee)&&(Tt.parameter(Ee[0],_n),Tt.parameter(Ee[1],_n),ii=_n[Ee[0]],ke=_n[Ee[1]])}else{if("wrapS"in Yr){var er=Yr.wrapS;Tt.parameter(er,_n),ii=_n[er]}if("wrapT"in Yr){var br=Yr.wrapT;Tt.parameter(br,_n),ke=_n[br]}}if(Ye.wrapS=ii,Ye.wrapT=ke,"anisotropic"in Yr){var Cr=Yr.anisotropic;Tt(typeof Cr=="number"&&Cr>=1&&Cr<=je.maxAnisotropic,"aniso samples must be between 1 and "),Ye.anisotropic=Yr.anisotropic}if("mipmap"in Yr){var ar=!1;switch(typeof Yr.mipmap){case"string":Tt.parameter(Yr.mipmap,bn,"invalid mipmap hint"),Ye.mipmapHint=bn[Yr.mipmap],Ye.genMipmaps=!0,ar=!0;break;case"boolean":ar=Ye.genMipmaps=Yr.mipmap;break;case"object":Tt(Array.isArray(Yr.mipmap),"invalid mipmap type"),Ye.genMipmaps=!1,ar=!0;break;default:Tt.raise("invalid mipmap type")}ar&&!("min"in Yr)&&(Ye.minFilter=re)}}function Fo(Ye,Yr){Rt.texParameteri(Yr,G,Ye.minFilter),Rt.texParameteri(Yr,d,Ye.magFilter),Rt.texParameteri(Yr,_u,Ye.wrapS),Rt.texParameteri(Yr,Cu,Ye.wrapT),Ae.ext_texture_filter_anisotropic&&Rt.texParameteri(Yr,Xr,Ye.anisotropic),Ye.genMipmaps&&(Rt.hint(ze,Ye.mipmapHint),Rt.generateMipmap(Yr))}var fo=0,as={},Ms=je.maxTextureUnits,Yo=Array(Ms).map(function(){return null});function Ka(Ye){be.call(this),this.mipmask=0,this.internalformat=yo,this.id=fo++,this.refCount=1,this.target=Ye,this.texture=Rt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Hi,jr.profile&&(this.stats={size:0})}function ys(Ye){Rt.activeTexture(Ha),Rt.bindTexture(Ye.target,Ye.texture)}function Ii(){var Ye=Yo[0];Ye?Rt.bindTexture(Ye.target,Ye.texture):Rt.bindTexture(qi,null)}function xa(Ye){var Yr=Ye.texture;Tt(Yr,"must not double destroy texture");var kr=Ye.unit,na=Ye.target;kr>=0&&(Rt.activeTexture(Ha+kr),Rt.bindTexture(na,null),Yo[kr]=null),Rt.deleteTexture(Yr),Ye.texture=null,Ye.params=null,Ye.pixels=null,Ye.refCount=0,delete as[Ye.id],Fr.textureCount--}C(Ka.prototype,{bind:function(){var Ye=this;Ye.bindCount+=1;var Yr=Ye.unit;if(Yr<0){for(var kr=0;kr<Ms;++kr){var na=Yo[kr];if(na){if(na.bindCount>0)continue;na.unit=-1}Yo[kr]=Ye,Yr=kr;break}Yr>=Ms&&Tt.raise("insufficient number of texture units"),jr.profile&&Fr.maxTextureUnits<Yr+1&&(Fr.maxTextureUnits=Yr+1),Ye.unit=Yr,Rt.activeTexture(Ha+Yr),Rt.bindTexture(Ye.target,Ye.texture)}return Yr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&xa(this)}});function ai(Ye,Yr){var kr=new Ka(qi);as[kr.id]=kr,Fr.textureCount++;function na(Ee,er){var br=kr.texInfo;Hi.call(br);var Cr=Ua();return typeof Ee=="number"?typeof er=="number"?wa(Cr,Ee|0,er|0):wa(Cr,Ee|0,Ee|0):Ee?(Tt.type(Ee,"object","invalid arguments to regl.texture"),li(br,Ee),Ba(Cr,Ee)):wa(Cr,1,1),br.genMipmaps&&(Cr.mipmask=(Cr.width<<1)-1),kr.mipmask=Cr.mipmask,We(kr,Cr),Tt.texture2D(br,Cr,je),kr.internalformat=Cr.internalformat,na.width=Cr.width,na.height=Cr.height,ys(kr),Ia(Cr,qi),Fo(br,qi),Ii(),Do(Cr),jr.profile&&(kr.stats.size=hu(kr.internalformat,kr.type,Cr.width,Cr.height,br.genMipmaps,!1)),na.format=xt[kr.internalformat],na.type=Ot[kr.type],na.mag=zt[br.magFilter],na.min=Kt[br.minFilter],na.wrapS=fe[br.wrapS],na.wrapT=fe[br.wrapT],na}function ii(Ee,er,br,Cr){Tt(!!Ee,"must specify image data");var ar=er|0,rr=br|0,vr=Cr|0,Be=Nn();return We(Be,kr),Be.width=0,Be.height=0,wr(Be,Ee),Be.width=Be.width||(kr.width>>vr)-ar,Be.height=Be.height||(kr.height>>vr)-rr,Tt(kr.type===Be.type&&kr.format===Be.format&&kr.internalformat===Be.internalformat,"incompatible format for texture.subimage"),Tt(ar>=0&&rr>=0&&ar+Be.width<=kr.width&&rr+Be.height<=kr.height,"texture.subimage write out of bounds"),Tt(kr.mipmask&1<<vr,"missing mipmap data"),Tt(Be.data||Be.element||Be.needsCopy,"missing image data"),ys(kr),Sn(Be,qi,ar,rr,vr),Ii(),la(Be),na}function ke(Ee,er){var br=Ee|0,Cr=er|0||br;if(br===kr.width&&Cr===kr.height)return na;na.width=kr.width=br,na.height=kr.height=Cr,ys(kr);for(var ar=0;kr.mipmask>>ar;++ar){var rr=br>>ar,vr=Cr>>ar;if(!rr||!vr)break;Rt.texImage2D(qi,ar,kr.format,rr,vr,0,kr.format,kr.type,null)}return Ii(),jr.profile&&(kr.stats.size=hu(kr.internalformat,kr.type,br,Cr,!1,!1)),na}return na(Ye,Yr),na.subimage=ii,na.resize=ke,na._reglType="texture2d",na._texture=kr,jr.profile&&(na.stats=kr.stats),na.destroy=function(){kr.decRef()},na}function bi(Ye,Yr,kr,na,ii,ke){var Ee=new Ka(rs);as[Ee.id]=Ee,Fr.cubeCount++;var er=new Array(6);function br(rr,vr,Be,Qe,Ne,yr){var Ir,tn=Ee.texInfo;for(Hi.call(tn),Ir=0;Ir<6;++Ir)er[Ir]=Ua();if(typeof rr=="number"||!rr){var on=rr|0||1;for(Ir=0;Ir<6;++Ir)wa(er[Ir],on,on)}else if(typeof rr=="object")if(vr)Ba(er[0],rr),Ba(er[1],vr),Ba(er[2],Be),Ba(er[3],Qe),Ba(er[4],Ne),Ba(er[5],yr);else if(li(tn,rr),cr(Ee,rr),"faces"in rr){var Hr=rr.faces;for(Tt(Array.isArray(Hr)&&Hr.length===6,"cube faces must be a length 6 array"),Ir=0;Ir<6;++Ir)Tt(typeof Hr[Ir]=="object"&&!!Hr[Ir],"invalid input for cube map face"),We(er[Ir],Ee),Ba(er[Ir],Hr[Ir])}else for(Ir=0;Ir<6;++Ir)Ba(er[Ir],rr);else Tt.raise("invalid arguments to cube map");for(We(Ee,er[0]),je.npotTextureCube||Tt(Pi(Ee.width)&&Pi(Ee.height),"your browser does not support non power or two texture dimensions"),tn.genMipmaps?Ee.mipmask=(er[0].width<<1)-1:Ee.mipmask=er[0].mipmask,Tt.textureCube(Ee,tn,er,je),Ee.internalformat=er[0].internalformat,br.width=er[0].width,br.height=er[0].height,ys(Ee),Ir=0;Ir<6;++Ir)Ia(er[Ir],Xi+Ir);for(Fo(tn,rs),Ii(),jr.profile&&(Ee.stats.size=hu(Ee.internalformat,Ee.type,br.width,br.height,tn.genMipmaps,!0)),br.format=xt[Ee.internalformat],br.type=Ot[Ee.type],br.mag=zt[tn.magFilter],br.min=Kt[tn.minFilter],br.wrapS=fe[tn.wrapS],br.wrapT=fe[tn.wrapT],Ir=0;Ir<6;++Ir)Do(er[Ir]);return br}function Cr(rr,vr,Be,Qe,Ne){Tt(!!vr,"must specify image data"),Tt(typeof rr=="number"&&rr===(rr|0)&&rr>=0&&rr<6,"invalid face");var yr=Be|0,Ir=Qe|0,tn=Ne|0,on=Nn();return We(on,Ee),on.width=0,on.height=0,wr(on,vr),on.width=on.width||(Ee.width>>tn)-yr,on.height=on.height||(Ee.height>>tn)-Ir,Tt(Ee.type===on.type&&Ee.format===on.format&&Ee.internalformat===on.internalformat,"incompatible format for texture.subimage"),Tt(yr>=0&&Ir>=0&&yr+on.width<=Ee.width&&Ir+on.height<=Ee.height,"texture.subimage write out of bounds"),Tt(Ee.mipmask&1<<tn,"missing mipmap data"),Tt(on.data||on.element||on.needsCopy,"missing image data"),ys(Ee),Sn(on,Xi+rr,yr,Ir,tn),Ii(),la(on),br}function ar(rr){var vr=rr|0;if(vr!==Ee.width){br.width=Ee.width=vr,br.height=Ee.height=vr,ys(Ee);for(var Be=0;Be<6;++Be)for(var Qe=0;Ee.mipmask>>Qe;++Qe)Rt.texImage2D(Xi+Be,Qe,Ee.format,vr>>Qe,vr>>Qe,0,Ee.format,Ee.type,null);return Ii(),jr.profile&&(Ee.stats.size=hu(Ee.internalformat,Ee.type,br.width,br.height,!1,!0)),br}}return br(Ye,Yr,kr,na,ii,ke),br.subimage=Cr,br.resize=ar,br._reglType="textureCube",br._texture=Ee,jr.profile&&(br.stats=Ee.stats),br.destroy=function(){Ee.decRef()},br}function Ko(){for(var Ye=0;Ye<Ms;++Ye)Rt.activeTexture(Ha+Ye),Rt.bindTexture(qi,null),Yo[Ye]=null;ei(as).forEach(xa),Fr.cubeCount=0,Fr.textureCount=0}jr.profile&&(Fr.getTotalTextureSize=function(){var Ye=0;return Object.keys(as).forEach(function(Yr){Ye+=as[Yr].stats.size}),Ye});function Ru(){for(var Ye=0;Ye<Ms;++Ye){var Yr=Yo[Ye];Yr&&(Yr.bindCount=0,Yr.unit=-1,Yo[Ye]=null)}ei(as).forEach(function(kr){kr.texture=Rt.createTexture(),Rt.bindTexture(kr.target,kr.texture);for(var na=0;na<32;++na)if(kr.mipmask&1<<na)if(kr.target===qi)Rt.texImage2D(qi,na,kr.internalformat,kr.width>>na,kr.height>>na,0,kr.internalformat,kr.type,null);else for(var ii=0;ii<6;++ii)Rt.texImage2D(Xi+ii,na,kr.internalformat,kr.width>>na,kr.height>>na,0,kr.internalformat,kr.type,null);Fo(kr.texInfo,kr.target)})}function nc(){for(var Ye=0;Ye<Ms;++Ye){var Yr=Yo[Ye];Yr&&(Yr.bindCount=0,Yr.unit=-1,Yo[Ye]=null),Rt.activeTexture(Ha+Ye),Rt.bindTexture(qi,null),Rt.bindTexture(rs,null)}}return{create2D:ai,createCube:bi,clear:Ko,getTexture:function(Ye){return null},restore:Ru,refresh:nc}}var ea=36161,Au=32854,ui=32855,df=36194,Xu=33189,su=36168,Bf=34041,Iu=35907,xc=34836,hf=34842,bc=34843,Ws=[];Ws[Au]=2,Ws[ui]=2,Ws[df]=2,Ws[Xu]=2,Ws[su]=1,Ws[Bf]=4,Ws[Iu]=4,Ws[xc]=16,Ws[hf]=8,Ws[bc]=6;function lt(Rt,Ae,je){return Ws[Rt]*Ae*je}var Nt=function(Rt,Ae,je,zr,rn){var Fr={rgba4:Au,rgb565:df,"rgb5 a1":ui,depth:Xu,stencil:su,"depth stencil":Bf};Ae.ext_srgb&&(Fr.srgba=Iu),Ae.ext_color_buffer_half_float&&(Fr.rgba16f=hf,Fr.rgb16f=bc),Ae.webgl_color_buffer_float&&(Fr.rgba32f=xc);var jr=[];Object.keys(Fr).forEach(function(N){var K=Fr[N];jr[K]=N});var bn=0,_n={};function Cn(N){this.id=bn++,this.refCount=1,this.renderbuffer=N,this.format=Au,this.width=0,this.height=0,rn.profile&&(this.stats={size:0})}Cn.prototype.decRef=function(){--this.refCount<=0&&wn(this)};function wn(N){var K=N.renderbuffer;Tt(K,"must not double destroy renderbuffer"),Rt.bindRenderbuffer(ea,null),Rt.deleteRenderbuffer(K),N.renderbuffer=null,N.refCount=0,delete _n[N.id],zr.renderbufferCount--}function Bn(N,K){var st=new Cn(Rt.createRenderbuffer());_n[st.id]=st,zr.renderbufferCount++;function ht(Ot,zt){var Kt=0,fe=0,Te=Au;if(typeof Ot=="object"&&Ot){var be=Ot;if("shape"in be){var We=be.shape;Tt(Array.isArray(We)&&We.length>=2,"invalid renderbuffer shape"),Kt=We[0]|0,fe=We[1]|0}else"radius"in be&&(Kt=fe=be.radius|0),"width"in be&&(Kt=be.width|0),"height"in be&&(fe=be.height|0);"format"in be&&(Tt.parameter(be.format,Fr,"invalid renderbuffer format"),Te=Fr[be.format])}else typeof Ot=="number"?(Kt=Ot|0,typeof zt=="number"?fe=zt|0:fe=Kt):Ot?Tt.raise("invalid arguments to renderbuffer constructor"):Kt=fe=1;if(Tt(Kt>0&&fe>0&&Kt<=je.maxRenderbufferSize&&fe<=je.maxRenderbufferSize,"invalid renderbuffer size"),!(Kt===st.width&&fe===st.height&&Te===st.format))return ht.width=st.width=Kt,ht.height=st.height=fe,st.format=Te,Rt.bindRenderbuffer(ea,st.renderbuffer),Rt.renderbufferStorage(ea,Te,Kt,fe),Tt(Rt.getError()===0,"invalid render buffer format"),rn.profile&&(st.stats.size=lt(st.format,st.width,st.height)),ht.format=jr[st.format],ht}function xt(Ot,zt){var Kt=Ot|0,fe=zt|0||Kt;return Kt===st.width&&fe===st.height||(Tt(Kt>0&&fe>0&&Kt<=je.maxRenderbufferSize&&fe<=je.maxRenderbufferSize,"invalid renderbuffer size"),ht.width=st.width=Kt,ht.height=st.height=fe,Rt.bindRenderbuffer(ea,st.renderbuffer),Rt.renderbufferStorage(ea,st.format,Kt,fe),Tt(Rt.getError()===0,"invalid render buffer format"),rn.profile&&(st.stats.size=lt(st.format,st.width,st.height))),ht}return ht(N,K),ht.resize=xt,ht._reglType="renderbuffer",ht._renderbuffer=st,rn.profile&&(ht.stats=st.stats),ht.destroy=function(){st.decRef()},ht}rn.profile&&(zr.getTotalRenderbufferSize=function(){var N=0;return Object.keys(_n).forEach(function(K){N+=_n[K].stats.size}),N});function v(){ei(_n).forEach(function(N){N.renderbuffer=Rt.createRenderbuffer(),Rt.bindRenderbuffer(ea,N.renderbuffer),Rt.renderbufferStorage(ea,N.format,N.width,N.height)}),Rt.bindRenderbuffer(ea,null)}return{create:Bn,clear:function(){ei(_n).forEach(wn)},restore:v}},Vt=36160,le=36161,Ie=3553,nr=34069,fr=36064,Gr=36096,vn=36128,mn=33306,Hn=36053,aa=36054,Kn=36055,Oa=36057,Ja=36061,Na=36193,Ta=5121,ka=5126,ha=6407,Ya=6408,Ga=6402,ma=[ha,Ya],ri=[];ri[Ya]=4,ri[ha]=3;var xi=[];xi[Ta]=1,xi[ka]=4,xi[Na]=2;var Vi=32854,Ai=32855,hi=36194,to=33189,ko=36168,so=34041,ks=35907,Ou=34836,Ls=34842,uu=34843,Ss=[Vi,Ai,hi,ks,Ls,uu,Ou],tu={};tu[Hn]="complete",tu[aa]="incomplete attachment",tu[Oa]="incomplete dimensions",tu[Kn]="incomplete, missing attachment",tu[Ja]="unsupported";function Ff(Rt,Ae,je,zr,rn,Fr){var jr={cur:null,next:null,dirty:!1,setFBO:null},bn=["rgba"],_n=["rgba4","rgb565","rgb5 a1"];Ae.ext_srgb&&_n.push("srgba"),Ae.ext_color_buffer_half_float&&_n.push("rgba16f","rgb16f"),Ae.webgl_color_buffer_float&&_n.push("rgba32f");var Cn=["uint8"];Ae.oes_texture_half_float&&Cn.push("half float","float16"),Ae.oes_texture_float&&Cn.push("float","float32");function wn(mr,wr,Er){this.target=mr,this.texture=wr,this.renderbuffer=Er;var Sn=0,Yn=0;wr?(Sn=wr.width,Yn=wr.height):Er&&(Sn=Er.width,Yn=Er.height),this.width=Sn,this.height=Yn}function Bn(mr){mr&&(mr.texture&&mr.texture._texture.decRef(),mr.renderbuffer&&mr.renderbuffer._renderbuffer.decRef())}function v(mr,wr,Er){if(mr)if(mr.texture){var Sn=mr.texture._texture,Yn=Math.max(1,Sn.width),Nn=Math.max(1,Sn.height);Tt(Yn===wr&&Nn===Er,"inconsistent width/height for supplied texture"),Sn.refCount+=1}else{var la=mr.renderbuffer._renderbuffer;Tt(la.width===wr&&la.height===Er,"inconsistent width/height for renderbuffer"),la.refCount+=1}}function N(mr,wr){wr&&(wr.texture?Rt.framebufferTexture2D(Vt,mr,wr.target,wr.texture._texture.texture,0):Rt.framebufferRenderbuffer(Vt,mr,le,wr.renderbuffer._renderbuffer.renderbuffer))}function K(mr){var wr=Ie,Er=null,Sn=null,Yn=mr;typeof mr=="object"&&(Yn=mr.data,"target"in mr&&(wr=mr.target|0)),Tt.type(Yn,"function","invalid attachment data");var Nn=Yn._reglType;return Nn==="texture2d"?(Er=Yn,Tt(wr===Ie)):Nn==="textureCube"?(Er=Yn,Tt(wr>=nr&&wr<nr+6,"invalid cube map target")):Nn==="renderbuffer"?(Sn=Yn,wr=le):Tt.raise("invalid regl object for attachment"),new wn(wr,Er,Sn)}function st(mr,wr,Er,Sn,Yn){if(Er){var Nn=zr.create2D({width:mr,height:wr,format:Sn,type:Yn});return Nn._texture.refCount=0,new wn(Ie,Nn,null)}else{var la=rn.create({width:mr,height:wr,format:Sn});return la._renderbuffer.refCount=0,new wn(le,null,la)}}function ht(mr){return mr&&(mr.texture||mr.renderbuffer)}function xt(mr,wr,Er){mr&&(mr.texture?mr.texture.resize(wr,Er):mr.renderbuffer&&mr.renderbuffer.resize(wr,Er),mr.width=wr,mr.height=Er)}var Ot=0,zt={};function Kt(){this.id=Ot++,zt[this.id]=this,this.framebuffer=Rt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function fe(mr){mr.colorAttachments.forEach(Bn),Bn(mr.depthAttachment),Bn(mr.stencilAttachment),Bn(mr.depthStencilAttachment)}function Te(mr){var wr=mr.framebuffer;Tt(wr,"must not double destroy framebuffer"),Rt.deleteFramebuffer(wr),mr.framebuffer=null,Fr.framebufferCount--,delete zt[mr.id]}function be(mr){var wr;Rt.bindFramebuffer(Vt,mr.framebuffer);var Er=mr.colorAttachments;for(wr=0;wr<Er.length;++wr)N(fr+wr,Er[wr]);for(wr=Er.length;wr<je.maxColorAttachments;++wr)Rt.framebufferTexture2D(Vt,fr+wr,Ie,null,0);Rt.framebufferTexture2D(Vt,mn,Ie,null,0),Rt.framebufferTexture2D(Vt,Gr,Ie,null,0),Rt.framebufferTexture2D(Vt,vn,Ie,null,0),N(Gr,mr.depthAttachment),N(vn,mr.stencilAttachment),N(mn,mr.depthStencilAttachment);var Sn=Rt.checkFramebufferStatus(Vt);!Rt.isContextLost()&&Sn!==Hn&&Tt.raise("framebuffer configuration not supported, status = "+tu[Sn]),Rt.bindFramebuffer(Vt,jr.next?jr.next.framebuffer:null),jr.cur=jr.next,Rt.getError()}function We(mr,wr){var Er=new Kt;Fr.framebufferCount++;function Sn(Nn,la){var ua;Tt(jr.next!==Er,"can not update framebuffer which is currently in use");var wa=0,Ba=0,Ia=!0,uo=!0,Ua=null,Do=!0,Hi="rgba",li="uint8",Fo=1,fo=null,as=null,Ms=null,Yo=!1;if(typeof Nn=="number")wa=Nn|0,Ba=la|0||wa;else if(!Nn)wa=Ba=1;else{Tt.type(Nn,"object","invalid arguments for framebuffer");var Ka=Nn;if("shape"in Ka){var ys=Ka.shape;Tt(Array.isArray(ys)&&ys.length>=2,"invalid shape for framebuffer"),wa=ys[0],Ba=ys[1]}else"radius"in Ka&&(wa=Ba=Ka.radius),"width"in Ka&&(wa=Ka.width),"height"in Ka&&(Ba=Ka.height);("color"in Ka||"colors"in Ka)&&(Ua=Ka.color||Ka.colors,Array.isArray(Ua)&&Tt(Ua.length===1||Ae.webgl_draw_buffers,"multiple render targets not supported")),Ua||("colorCount"in Ka&&(Fo=Ka.colorCount|0,Tt(Fo>0,"invalid color buffer count")),"colorTexture"in Ka&&(Do=!!Ka.colorTexture,Hi="rgba4"),"colorType"in Ka&&(li=Ka.colorType,Do?(Tt(Ae.oes_texture_float||!(li==="float"||li==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Tt(Ae.oes_texture_half_float||!(li==="half float"||li==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):li==="half float"||li==="float16"?(Tt(Ae.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Hi="rgba16f"):(li==="float"||li==="float32")&&(Tt(Ae.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Hi="rgba32f"),Tt.oneOf(li,Cn,"invalid color type")),"colorFormat"in Ka&&(Hi=Ka.colorFormat,bn.indexOf(Hi)>=0?Do=!0:_n.indexOf(Hi)>=0?Do=!1:Do?Tt.oneOf(Ka.colorFormat,bn,"invalid color format for texture"):Tt.oneOf(Ka.colorFormat,_n,"invalid color format for renderbuffer"))),("depthTexture"in Ka||"depthStencilTexture"in Ka)&&(Yo=!!(Ka.depthTexture||Ka.depthStencilTexture),Tt(!Yo||Ae.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ka&&(typeof Ka.depth=="boolean"?Ia=Ka.depth:(fo=Ka.depth,uo=!1)),"stencil"in Ka&&(typeof Ka.stencil=="boolean"?uo=Ka.stencil:(as=Ka.stencil,Ia=!1)),"depthStencil"in Ka&&(typeof Ka.depthStencil=="boolean"?Ia=uo=Ka.depthStencil:(Ms=Ka.depthStencil,Ia=!1,uo=!1))}var Ii=null,xa=null,ai=null,bi=null;if(Array.isArray(Ua))Ii=Ua.map(K);else if(Ua)Ii=[K(Ua)];else for(Ii=new Array(Fo),ua=0;ua<Fo;++ua)Ii[ua]=st(wa,Ba,Do,Hi,li);Tt(Ae.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Tt(Ii.length<=je.maxColorAttachments,"too many color attachments, not supported"),wa=wa||Ii[0].width,Ba=Ba||Ii[0].height,fo?xa=K(fo):Ia&&!uo&&(xa=st(wa,Ba,Yo,"depth","uint32")),as?ai=K(as):uo&&!Ia&&(ai=st(wa,Ba,!1,"stencil","uint8")),Ms?bi=K(Ms):!fo&&!as&&uo&&Ia&&(bi=st(wa,Ba,Yo,"depth stencil","depth stencil")),Tt(!!fo+!!as+!!Ms<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ko=null;for(ua=0;ua<Ii.length;++ua)if(v(Ii[ua],wa,Ba),Tt(!Ii[ua]||Ii[ua].texture&&ma.indexOf(Ii[ua].texture._texture.format)>=0||Ii[ua].renderbuffer&&Ss.indexOf(Ii[ua].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ua+" is invalid"),Ii[ua]&&Ii[ua].texture){var Ru=ri[Ii[ua].texture._texture.format]*xi[Ii[ua].texture._texture.type];Ko===null?Ko=Ru:Tt(Ko===Ru,"all color attachments much have the same number of bits per pixel.")}return v(xa,wa,Ba),Tt(!xa||xa.texture&&xa.texture._texture.format===Ga||xa.renderbuffer&&xa.renderbuffer._renderbuffer.format===to,"invalid depth attachment for framebuffer object"),v(ai,wa,Ba),Tt(!ai||ai.renderbuffer&&ai.renderbuffer._renderbuffer.format===ko,"invalid stencil attachment for framebuffer object"),v(bi,wa,Ba),Tt(!bi||bi.texture&&bi.texture._texture.format===so||bi.renderbuffer&&bi.renderbuffer._renderbuffer.format===so,"invalid depth-stencil attachment for framebuffer object"),fe(Er),Er.width=wa,Er.height=Ba,Er.colorAttachments=Ii,Er.depthAttachment=xa,Er.stencilAttachment=ai,Er.depthStencilAttachment=bi,Sn.color=Ii.map(ht),Sn.depth=ht(xa),Sn.stencil=ht(ai),Sn.depthStencil=ht(bi),Sn.width=Er.width,Sn.height=Er.height,be(Er),Sn}function Yn(Nn,la){Tt(jr.next!==Er,"can not resize a framebuffer which is currently in use");var ua=Math.max(Nn|0,1),wa=Math.max(la|0||ua,1);if(ua===Er.width&&wa===Er.height)return Sn;for(var Ba=Er.colorAttachments,Ia=0;Ia<Ba.length;++Ia)xt(Ba[Ia],ua,wa);return xt(Er.depthAttachment,ua,wa),xt(Er.stencilAttachment,ua,wa),xt(Er.depthStencilAttachment,ua,wa),Er.width=Sn.width=ua,Er.height=Sn.height=wa,be(Er),Sn}return Sn(mr,wr),C(Sn,{resize:Yn,_reglType:"framebuffer",_framebuffer:Er,destroy:function(){Te(Er),fe(Er)},use:function(Nn){jr.setFBO({framebuffer:Sn},Nn)}})}function cr(mr){var wr=Array(6);function Er(Yn){var Nn;Tt(wr.indexOf(jr.next)<0,"can not update framebuffer which is currently in use");var la={color:null},ua=0,wa=null,Ba="rgba",Ia="uint8",uo=1;if(typeof Yn=="number")ua=Yn|0;else if(!Yn)ua=1;else{Tt.type(Yn,"object","invalid arguments for framebuffer");var Ua=Yn;if("shape"in Ua){var Do=Ua.shape;Tt(Array.isArray(Do)&&Do.length>=2,"invalid shape for framebuffer"),Tt(Do[0]===Do[1],"cube framebuffer must be square"),ua=Do[0]}else"radius"in Ua&&(ua=Ua.radius|0),"width"in Ua?(ua=Ua.width|0,"height"in Ua&&Tt(Ua.height===ua,"must be square")):"height"in Ua&&(ua=Ua.height|0);("color"in Ua||"colors"in Ua)&&(wa=Ua.color||Ua.colors,Array.isArray(wa)&&Tt(wa.length===1||Ae.webgl_draw_buffers,"multiple render targets not supported")),wa||("colorCount"in Ua&&(uo=Ua.colorCount|0,Tt(uo>0,"invalid color buffer count")),"colorType"in Ua&&(Tt.oneOf(Ua.colorType,Cn,"invalid color type"),Ia=Ua.colorType),"colorFormat"in Ua&&(Ba=Ua.colorFormat,Tt.oneOf(Ua.colorFormat,bn,"invalid color format for texture"))),"depth"in Ua&&(la.depth=Ua.depth),"stencil"in Ua&&(la.stencil=Ua.stencil),"depthStencil"in Ua&&(la.depthStencil=Ua.depthStencil)}var Hi;if(wa)if(Array.isArray(wa))for(Hi=[],Nn=0;Nn<wa.length;++Nn)Hi[Nn]=wa[Nn];else Hi=[wa];else{Hi=Array(uo);var li={radius:ua,format:Ba,type:Ia};for(Nn=0;Nn<uo;++Nn)Hi[Nn]=zr.createCube(li)}for(la.color=Array(Hi.length),Nn=0;Nn<Hi.length;++Nn){var Fo=Hi[Nn];Tt(typeof Fo=="function"&&Fo._reglType==="textureCube","invalid cube map"),ua=ua||Fo.width,Tt(Fo.width===ua&&Fo.height===ua,"invalid cube map shape"),la.color[Nn]={target:nr,data:Hi[Nn]}}for(Nn=0;Nn<6;++Nn){for(var fo=0;fo<Hi.length;++fo)la.color[fo].target=nr+Nn;Nn>0&&(la.depth=wr[0].depth,la.stencil=wr[0].stencil,la.depthStencil=wr[0].depthStencil),wr[Nn]?wr[Nn](la):wr[Nn]=We(la)}return C(Er,{width:ua,height:ua,color:Hi})}function Sn(Yn){var Nn,la=Yn|0;if(Tt(la>0&&la<=je.maxCubeMapSize,"invalid radius for cube fbo"),la===Er.width)return Er;var ua=Er.color;for(Nn=0;Nn<ua.length;++Nn)ua[Nn].resize(la);for(Nn=0;Nn<6;++Nn)wr[Nn].resize(la);return Er.width=Er.height=la,Er}return Er(mr),C(Er,{faces:wr,resize:Sn,_reglType:"framebufferCube",destroy:function(){wr.forEach(function(Yn){Yn.destroy()})}})}function Vr(){jr.cur=null,jr.next=null,jr.dirty=!0,ei(zt).forEach(function(mr){mr.framebuffer=Rt.createFramebuffer(),be(mr)})}return C(jr,{getFramebuffer:function(mr){if(typeof mr=="function"&&mr._reglType==="framebuffer"){var wr=mr._framebuffer;if(wr instanceof Kt)return wr}return null},create:We,createCube:cr,clear:function(){ei(zt).forEach(Te)},restore:Vr})}var Qc=5126,ju=34962;function vf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Qc,this.offset=0,this.stride=0,this.divisor=0}function Ec(Rt,Ae,je,zr,rn){for(var Fr=je.maxAttributes,jr=new Array(Fr),bn=0;bn<Fr;++bn)jr[bn]=new vf;var _n=0,Cn={},wn={Record:vf,scope:{},state:jr,currentVAO:null,targetVAO:null,restore:v()?zt:function(){},createVAO:Kt,getVAO:K,destroyBuffer:Bn,setVAO:v()?st:ht,clear:v()?xt:function(){}};function Bn(fe){for(var Te=0;Te<jr.length;++Te){var be=jr[Te];be.buffer===fe&&(Rt.disableVertexAttribArray(Te),be.buffer=null)}}function v(){return Ae.oes_vertex_array_object}function N(){return Ae.angle_instanced_arrays}function K(fe){return typeof fe=="function"&&fe._vao?fe._vao:null}function st(fe){if(fe!==wn.currentVAO){var Te=v();fe?Te.bindVertexArrayOES(fe.vao):Te.bindVertexArrayOES(null),wn.currentVAO=fe}}function ht(fe){if(fe!==wn.currentVAO){if(fe)fe.bindAttrs();else for(var Te=N(),be=0;be<jr.length;++be){var We=jr[be];We.buffer?(Rt.enableVertexAttribArray(be),Rt.vertexAttribPointer(be,We.size,We.type,We.normalized,We.stride,We.offfset),Te&&We.divisor&&Te.vertexAttribDivisorANGLE(be,We.divisor)):(Rt.disableVertexAttribArray(be),Rt.vertexAttrib4f(be,We.x,We.y,We.z,We.w))}wn.currentVAO=fe}}function xt(){ei(Cn).forEach(function(fe){fe.destroy()})}function Ot(){this.id=++_n,this.attributes=[];var fe=v();fe?this.vao=fe.createVertexArrayOES():this.vao=null,Cn[this.id]=this,this.buffers=[]}Ot.prototype.bindAttrs=function(){for(var fe=N(),Te=this.attributes,be=0;be<Te.length;++be){var We=Te[be];We.buffer?(Rt.enableVertexAttribArray(be),Rt.bindBuffer(ju,We.buffer.buffer),Rt.vertexAttribPointer(be,We.size,We.type,We.normalized,We.stride,We.offset),fe&&We.divisor&&fe.vertexAttribDivisorANGLE(be,We.divisor)):(Rt.disableVertexAttribArray(be),Rt.vertexAttrib4f(be,We.x,We.y,We.z,We.w))}for(var cr=Te.length;cr<Fr;++cr)Rt.disableVertexAttribArray(cr)},Ot.prototype.refresh=function(){var fe=v();fe&&(fe.bindVertexArrayOES(this.vao),this.bindAttrs(),wn.currentVAO=this)},Ot.prototype.destroy=function(){if(this.vao){var fe=v();this===wn.currentVAO&&(wn.currentVAO=null,fe.bindVertexArrayOES(null)),fe.deleteVertexArrayOES(this.vao),this.vao=null}Cn[this.id]&&(delete Cn[this.id],zr.vaoCount-=1)};function zt(){var fe=v();fe&&ei(Cn).forEach(function(Te){Te.refresh()})}function Kt(fe){var Te=new Ot;zr.vaoCount+=1;function be(We){Tt(Array.isArray(We),"arguments to vertex array constructor must be an array"),Tt(We.length<Fr,"too many attributes"),Tt(We.length>0,"must specify at least one attribute");var cr={},Vr=Te.attributes;Vr.length=We.length;for(var mr=0;mr<We.length;++mr){var wr=We[mr],Er=Vr[mr]=new vf,Sn=wr.data||wr;if(Array.isArray(Sn)||z(Sn)||ti(Sn)){var Yn;Te.buffers[mr]&&(Yn=Te.buffers[mr],z(Sn)&&Yn._buffer.byteLength>=Sn.byteLength?Yn.subdata(Sn):(Yn.destroy(),Te.buffers[mr]=null)),Te.buffers[mr]||(Yn=Te.buffers[mr]=rn.create(wr,ju,!1,!0)),Er.buffer=rn.getBuffer(Yn),Er.size=Er.buffer.dimension|0,Er.normalized=!1,Er.type=Er.buffer.dtype,Er.offset=0,Er.stride=0,Er.divisor=0,Er.state=1,cr[mr]=1}else rn.getBuffer(wr)?(Er.buffer=rn.getBuffer(wr),Er.size=Er.buffer.dimension|0,Er.normalized=!1,Er.type=Er.buffer.dtype,Er.offset=0,Er.stride=0,Er.divisor=0,Er.state=1):rn.getBuffer(wr.buffer)?(Er.buffer=rn.getBuffer(wr.buffer),Er.size=(+wr.size||Er.buffer.dimension)|0,Er.normalized=!!wr.normalized||!1,"type"in wr?(Tt.parameter(wr.type,ao,"invalid buffer type"),Er.type=ao[wr.type]):Er.type=Er.buffer.dtype,Er.offset=(wr.offset||0)|0,Er.stride=(wr.stride||0)|0,Er.divisor=(wr.divisor||0)|0,Er.state=1,Tt(Er.size>=1&&Er.size<=4,"size must be between 1 and 4"),Tt(Er.offset>=0,"invalid offset"),Tt(Er.stride>=0&&Er.stride<=255,"stride must be between 0 and 255"),Tt(Er.divisor>=0,"divisor must be positive"),Tt(!Er.divisor||!!Ae.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in wr?(Tt(mr>0,"first attribute must not be a constant"),Er.x=+wr.x||0,Er.y=+wr.y||0,Er.z=+wr.z||0,Er.w=+wr.w||0,Er.state=2):Tt(!1,"invalid attribute spec for location "+mr)}for(var Nn=0;Nn<Te.buffers.length;++Nn)!cr[Nn]&&Te.buffers[Nn]&&(Te.buffers[Nn].destroy(),Te.buffers[Nn]=null);return Te.refresh(),be}return be.destroy=function(){for(var We=0;We<Te.buffers.length;++We)Te.buffers[We]&&Te.buffers[We].destroy();Te.buffers.length=0,Te.destroy()},be._vao=Te,be._reglType="vao",be(fe)}return wn}var Vu=35632,vu=35633,zf=35718,Gf=35721;function wc(Rt,Ae,je,zr){var rn={},Fr={};function jr(st,ht,xt,Ot){this.name=st,this.id=ht,this.location=xt,this.info=Ot}function bn(st,ht){for(var xt=0;xt<st.length;++xt)if(st[xt].id===ht.id){st[xt].location=ht.location;return}st.push(ht)}function _n(st,ht,xt){var Ot=st===Vu?rn:Fr,zt=Ot[ht];if(!zt){var Kt=Ae.str(ht);zt=Rt.createShader(st),Rt.shaderSource(zt,Kt),Rt.compileShader(zt),Tt.shaderError(Rt,zt,Kt,st,xt),Ot[ht]=zt}return zt}var Cn={},wn=[],Bn=0;function v(st,ht){this.id=Bn++,this.fragId=st,this.vertId=ht,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,zr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(st,ht,xt){var Ot,zt,Kt=_n(Vu,st.fragId),fe=_n(vu,st.vertId),Te=st.program=Rt.createProgram();if(Rt.attachShader(Te,Kt),Rt.attachShader(Te,fe),xt)for(Ot=0;Ot<xt.length;++Ot){var be=xt[Ot];Rt.bindAttribLocation(Te,be[0],be[1])}Rt.linkProgram(Te),Tt.linkError(Rt,Te,Ae.str(st.fragId),Ae.str(st.vertId),ht);var We=Rt.getProgramParameter(Te,zf);zr.profile&&(st.stats.uniformsCount=We);var cr=st.uniforms;for(Ot=0;Ot<We;++Ot)if(zt=Rt.getActiveUniform(Te,Ot),zt)if(zt.size>1)for(var Vr=0;Vr<zt.size;++Vr){var mr=zt.name.replace("[0]","["+Vr+"]");bn(cr,new jr(mr,Ae.id(mr),Rt.getUniformLocation(Te,mr),zt))}else bn(cr,new jr(zt.name,Ae.id(zt.name),Rt.getUniformLocation(Te,zt.name),zt));var wr=Rt.getProgramParameter(Te,Gf);zr.profile&&(st.stats.attributesCount=wr);var Er=st.attributes;for(Ot=0;Ot<wr;++Ot)zt=Rt.getActiveAttrib(Te,Ot),zt&&bn(Er,new jr(zt.name,Ae.id(zt.name),Rt.getAttribLocation(Te,zt.name),zt))}zr.profile&&(je.getMaxUniformsCount=function(){var st=0;return wn.forEach(function(ht){ht.stats.uniformsCount>st&&(st=ht.stats.uniformsCount)}),st},je.getMaxAttributesCount=function(){var st=0;return wn.forEach(function(ht){ht.stats.attributesCount>st&&(st=ht.stats.attributesCount)}),st});function K(){rn={},Fr={};for(var st=0;st<wn.length;++st)N(wn[st],null,wn[st].attributes.map(function(ht){return[ht.location,ht.name]}))}return{clear:function(){var st=Rt.deleteShader.bind(Rt);ei(rn).forEach(st),rn={},ei(Fr).forEach(st),Fr={},wn.forEach(function(ht){Rt.deleteProgram(ht.program)}),wn.length=0,Cn={},je.shaderCount=0},program:function(st,ht,xt,Ot){Tt.command(st>=0,"missing vertex shader",xt),Tt.command(ht>=0,"missing fragment shader",xt);var zt=Cn[ht];zt||(zt=Cn[ht]={});var Kt=zt[st];if(Kt&&(Kt.refCount++,!Ot))return Kt;var fe=new v(ht,st);return je.shaderCount++,N(fe,xt,Ot),Kt||(zt[st]=fe),wn.push(fe),C(fe,{destroy:function(){if(fe.refCount--,fe.refCount<=0){Rt.deleteProgram(fe.program);var Te=wn.indexOf(fe);wn.splice(Te,1),je.shaderCount--}zt[fe.vertId].refCount<=0&&(Rt.deleteShader(Fr[fe.vertId]),delete Fr[fe.vertId],delete Cn[fe.fragId][fe.vertId]),Object.keys(Cn[fe.fragId]).length||(Rt.deleteShader(rn[fe.fragId]),delete rn[fe.fragId],delete Cn[fe.fragId])}})},restore:K,shader:_n,frag:-1,vert:-1}}var eu=6408,ru=5121,Sc=3333,Hu=5126;function cd(Rt,Ae,je,zr,rn,Fr,jr){function bn(wn){var Bn;Ae.next===null?(Tt(rn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Bn=ru):(Tt(Ae.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Bn=Ae.next.colorAttachments[0].texture._texture.type,Fr.oes_texture_float?(Tt(Bn===ru||Bn===Hu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Bn===Hu&&Tt(jr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Tt(Bn===ru,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,N=0,K=zr.framebufferWidth,st=zr.framebufferHeight,ht=null;z(wn)?ht=wn:wn&&(Tt.type(wn,"object","invalid arguments to regl.read()"),v=wn.x|0,N=wn.y|0,Tt(v>=0&&v<zr.framebufferWidth,"invalid x offset for regl.read"),Tt(N>=0&&N<zr.framebufferHeight,"invalid y offset for regl.read"),K=(wn.width||zr.framebufferWidth-v)|0,st=(wn.height||zr.framebufferHeight-N)|0,ht=wn.data||null),ht&&(Bn===ru?Tt(ht instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Bn===Hu&&Tt(ht instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Tt(K>0&&K+v<=zr.framebufferWidth,"invalid width for read pixels"),Tt(st>0&&st+N<=zr.framebufferHeight,"invalid height for read pixels"),je();var xt=K*st*4;return ht||(Bn===ru?ht=new Uint8Array(xt):Bn===Hu&&(ht=ht||new Float32Array(xt))),Tt.isTypedArray(ht,"data buffer for regl.read() must be a typedarray"),Tt(ht.byteLength>=xt,"data buffer for regl.read() too small"),Rt.pixelStorei(Sc,4),Rt.readPixels(v,N,K,st,eu,Bn,ht),ht}function _n(wn){var Bn;return Ae.setFBO({framebuffer:wn.framebuffer},function(){Bn=bn(wn)}),Bn}function Cn(wn){return!wn||!("framebuffer"in wn)?bn(wn):_n(wn)}return Cn}function pu(Rt){return Array.prototype.slice.call(Rt)}function us(Rt){return pu(Rt).join("")}function Jc(){var Rt=0,Ae=[],je=[];function zr(Bn){for(var v=0;v<je.length;++v)if(je[v]===Bn)return Ae[v];var N="g"+Rt++;return Ae.push(N),je.push(Bn),N}function rn(){var Bn=[];function v(){Bn.push.apply(Bn,pu(arguments))}var N=[];function K(){var st="v"+Rt++;return N.push(st),arguments.length>0&&(Bn.push(st,"="),Bn.push.apply(Bn,pu(arguments)),Bn.push(";")),st}return C(v,{def:K,toString:function(){return us([N.length>0?"var "+N.join(",")+";":"",us(Bn)])}})}function Fr(){var Bn=rn(),v=rn(),N=Bn.toString,K=v.toString;function st(ht,xt){v(ht,xt,"=",Bn.def(ht,xt),";")}return C(function(){Bn.apply(Bn,pu(arguments))},{def:Bn.def,entry:Bn,exit:v,save:st,set:function(ht,xt,Ot){st(ht,xt),Bn(ht,xt,"=",Ot,";")},toString:function(){return N()+K()}})}function jr(){var Bn=us(arguments),v=Fr(),N=Fr(),K=v.toString,st=N.toString;return C(v,{then:function(){return v.apply(v,pu(arguments)),this},else:function(){return N.apply(N,pu(arguments)),this},toString:function(){var ht=st();return ht&&(ht="else{"+ht+"}"),us(["if(",Bn,"){",K(),"}",ht])}})}var bn=rn(),_n={};function Cn(Bn,v){var N=[];function K(){var zt="a"+N.length;return N.push(zt),zt}v=v||0;for(var st=0;st<v;++st)K();var ht=Fr(),xt=ht.toString,Ot=_n[Bn]=C(ht,{arg:K,toString:function(){return us(["function(",N.join(),"){",xt(),"}"])}});return Ot}function wn(){var Bn=['"use strict";',bn,"return {"];Object.keys(_n).forEach(function(K){Bn.push('"',K,'":',_n[K].toString(),",")}),Bn.push("}");var v=us(Bn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),N=Function.apply(null,Ae.concat(v));return N.apply(null,je)}return{global:bn,link:zr,block:rn,proc:Cn,scope:Fr,cond:jr,compile:wn}}var pf="xyzw".split(""),tl=5121,gu=1,mu=2,yu=0,Mc=1,_c=2,el=3,Bs=4,rl=5,Uf=6,Cc="dither",nl="blend.enable",Bl="blend.color",al="blend.equation",Wf="blend.func",il="depth.enable",Fl="depth.func",ld="depth.range",Yf="depth.mask",Tc="colorMask",tr="cull.enable",ol="cull.face",Xf="frontFace",sl="lineWidth",ul="polygonOffset.enable",Ac="polygonOffset.offset",zl="sample.alpha",fl="sample.enable",jf="sample.coverage",gf="stencil.enable",cl="stencil.mask",mf="stencil.func",Zo="stencil.opFront",yf="stencil.opBack",ll="scissor.enable",Vf="scissor.box",Ys="viewport",xf="profile",Zu="framebuffer",Du="vert",Ku="frag",$u="elements",qu="primitive",Lu="count",bf="offset",Ic="instances",Hf="vao",Oc="Width",Dc="Height",Qu=Zu+Oc,Ks=Zu+Dc,dl=Ys+Oc,hl=Ys+Dc,nu="drawingBuffer",vl=nu+Oc,pl=nu+Dc,gl=[Wf,al,mf,Zo,yf,jf,Ys,Vf,Ac],Ju=34962,Gl=34963,ml=35632,yl=35633,Ul=3553,Wl=34067,dd=2884,Yl=3042,Xl=3024,hd=2960,jl=2929,Vl=3089,Zf=32823,Hl=32926,tf=32928,Kf=5126,Ef=35664,Lc=35665,Pc=35666,Nc=5124,xu=35667,wf=35668,ef=35669,xl=35670,$f=35671,Rc=35672,qf=35673,Qf=35674,kc=35675,Sf=35676,Jf=35678,rf=35680,Zl=4,tc=1028,nf=1029,Kl=2304,Bc=2305,$l=32775,vd=32776,ql=519,af=7680,bl=0,Ql=1,Jl=32774,pd=513,El=36160,td=36064,gs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ed=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],of={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},wl={frag:ml,vert:yl},Sl={cw:Kl,ccw:Bc};function ec(Rt){return Array.isArray(Rt)||z(Rt)||ti(Rt)}function Ml(Rt){return Rt.sort(function(Ae,je){return Ae===Ys?-1:je===Ys?1:Ae<je?-1:1})}function Bo(Rt,Ae,je,zr){this.thisDep=Rt,this.contextDep=Ae,this.propDep=je,this.append=zr}function bu(Rt){return Rt&&!(Rt.thisDep||Rt.contextDep||Rt.propDep)}function Wo(Rt){return new Bo(!1,!1,!1,Rt)}function ms(Rt,Ae){var je=Rt.type;if(je===yu){var zr=Rt.data.length;return new Bo(!0,zr>=1,zr>=2,Ae)}else if(je===Bs){var rn=Rt.data;return new Bo(rn.thisDep,rn.contextDep,rn.propDep,Ae)}else{if(je===rl)return new Bo(!1,!1,!1,Ae);if(je===Uf){for(var Fr=!1,jr=!1,bn=!1,_n=0;_n<Rt.data.length;++_n){var Cn=Rt.data[_n];if(Cn.type===Mc)bn=!0;else if(Cn.type===_c)jr=!0;else if(Cn.type===el)Fr=!0;else if(Cn.type===yu){Fr=!0;var wn=Cn.data;wn>=1&&(jr=!0),wn>=2&&(bn=!0)}else Cn.type===Bs&&(Fr=Fr||Cn.data.thisDep,jr=jr||Cn.data.contextDep,bn=bn||Cn.data.propDep)}return new Bo(Fr,jr,bn,Ae)}else return new Bo(je===el,je===_c,je===Mc,Ae)}}var fs=new Bo(!1,!1,!1,function(){});function Fc(Rt,Ae,je,zr,rn,Fr,jr,bn,_n,Cn,wn,Bn,v,N,K){var st=Cn.Record,ht={add:32774,subtract:32778,"reverse subtract":32779};je.ext_blend_minmax&&(ht.min=$l,ht.max=vd);var xt=je.angle_instanced_arrays,Ot=je.webgl_draw_buffers,zt={dirty:!0,profile:K.profile},Kt={},fe=[],Te={},be={};function We(ke){return ke.replace(".","_")}function cr(ke,Ee,er){var br=We(ke);fe.push(ke),Kt[br]=zt[br]=!!er,Te[br]=Ee}function Vr(ke,Ee,er){var br=We(ke);fe.push(ke),Array.isArray(er)?(zt[br]=er.slice(),Kt[br]=er.slice()):zt[br]=Kt[br]=er,be[br]=Ee}cr(Cc,Xl),cr(nl,Yl),Vr(Bl,"blendColor",[0,0,0,0]),Vr(al,"blendEquationSeparate",[Jl,Jl]),Vr(Wf,"blendFuncSeparate",[Ql,bl,Ql,bl]),cr(il,jl,!0),Vr(Fl,"depthFunc",pd),Vr(ld,"depthRange",[0,1]),Vr(Yf,"depthMask",!0),Vr(Tc,Tc,[!0,!0,!0,!0]),cr(tr,dd),Vr(ol,"cullFace",nf),Vr(Xf,Xf,Bc),Vr(sl,sl,1),cr(ul,Zf),Vr(Ac,"polygonOffset",[0,0]),cr(zl,Hl),cr(fl,tf),Vr(jf,"sampleCoverage",[1,!1]),cr(gf,hd),Vr(cl,"stencilMask",-1),Vr(mf,"stencilFunc",[ql,0,-1]),Vr(Zo,"stencilOpSeparate",[tc,af,af,af]),Vr(yf,"stencilOpSeparate",[nf,af,af,af]),cr(ll,Vl),Vr(Vf,"scissor",[0,0,Rt.drawingBufferWidth,Rt.drawingBufferHeight]),Vr(Ys,Ys,[0,0,Rt.drawingBufferWidth,Rt.drawingBufferHeight]);var mr={gl:Rt,context:v,strings:Ae,next:Kt,current:zt,draw:Bn,elements:Fr,buffer:rn,shader:wn,attributes:Cn.state,vao:Cn,uniforms:_n,framebuffer:bn,extensions:je,timer:N,isBufferArgs:ec},wr={primTypes:Fa,compareFuncs:of,blendFuncs:gs,blendEquations:ht,stencilOps:Pu,glTypes:ao,orientationType:Sl};Tt.optional(function(){mr.isArrayLike=Qa}),Ot&&(wr.backBuffer=[nf],wr.drawBuffer=In(zr.maxDrawbuffers,function(ke){return ke===0?[0]:In(ke,function(Ee){return td+Ee})}));var Er=0;function Sn(){var ke=Jc(),Ee=ke.link,er=ke.global;ke.id=Er++,ke.batchId="0";var br=Ee(mr),Cr=ke.shared={props:"a0"};Object.keys(mr).forEach(function(Qe){Cr[Qe]=er.def(br,".",Qe)}),Tt.optional(function(){ke.CHECK=Ee(Tt),ke.commandStr=Tt.guessCommand(),ke.command=Ee(ke.commandStr),ke.assert=function(Qe,Ne,yr){Qe("if(!(",Ne,"))",this.CHECK,".commandRaise(",Ee(yr),",",this.command,");")},wr.invalidBlendCombinations=ed});var ar=ke.next={},rr=ke.current={};Object.keys(be).forEach(function(Qe){Array.isArray(zt[Qe])&&(ar[Qe]=er.def(Cr.next,".",Qe),rr[Qe]=er.def(Cr.current,".",Qe))});var vr=ke.constants={};Object.keys(wr).forEach(function(Qe){vr[Qe]=er.def(JSON.stringify(wr[Qe]))}),ke.invoke=function(Qe,Ne){switch(Ne.type){case yu:var yr=["this",Cr.context,Cr.props,ke.batchId];return Qe.def(Ee(Ne.data),".call(",yr.slice(0,Math.max(Ne.data.length+1,4)),")");case Mc:return Qe.def(Cr.props,Ne.data);case _c:return Qe.def(Cr.context,Ne.data);case el:return Qe.def("this",Ne.data);case Bs:return Ne.data.append(ke,Qe),Ne.data.ref;case rl:return Ne.data.toString();case Uf:return Ne.data.map(function(Ir){return ke.invoke(Qe,Ir)})}},ke.attribCache={};var Be={};return ke.scopeAttrib=function(Qe){var Ne=Ae.id(Qe);if(Ne in Be)return Be[Ne];var yr=Cn.scope[Ne];yr||(yr=Cn.scope[Ne]=new st);var Ir=Be[Ne]=Ee(yr);return Ir},ke}function Yn(ke){var Ee=ke.static,er=ke.dynamic,br;if(xf in Ee){var Cr=!!Ee[xf];br=Wo(function(rr,vr){return Cr}),br.enable=Cr}else if(xf in er){var ar=er[xf];br=ms(ar,function(rr,vr){return rr.invoke(vr,ar)})}return br}function Nn(ke,Ee){var er=ke.static,br=ke.dynamic;if(Zu in er){var Cr=er[Zu];return Cr?(Cr=bn.getFramebuffer(Cr),Tt.command(Cr,"invalid framebuffer object"),Wo(function(rr,vr){var Be=rr.link(Cr),Qe=rr.shared;vr.set(Qe.framebuffer,".next",Be);var Ne=Qe.context;return vr.set(Ne,"."+Qu,Be+".width"),vr.set(Ne,"."+Ks,Be+".height"),Be})):Wo(function(rr,vr){var Be=rr.shared;vr.set(Be.framebuffer,".next","null");var Qe=Be.context;return vr.set(Qe,"."+Qu,Qe+"."+vl),vr.set(Qe,"."+Ks,Qe+"."+pl),"null"})}else if(Zu in br){var ar=br[Zu];return ms(ar,function(rr,vr){var Be=rr.invoke(vr,ar),Qe=rr.shared,Ne=Qe.framebuffer,yr=vr.def(Ne,".getFramebuffer(",Be,")");Tt.optional(function(){rr.assert(vr,"!"+Be+"||"+yr,"invalid framebuffer object")}),vr.set(Ne,".next",yr);var Ir=Qe.context;return vr.set(Ir,"."+Qu,yr+"?"+yr+".width:"+Ir+"."+vl),vr.set(Ir,"."+Ks,yr+"?"+yr+".height:"+Ir+"."+pl),yr})}else return null}function la(ke,Ee,er){var br=ke.static,Cr=ke.dynamic;function ar(Be){if(Be in br){var Qe=br[Be];Tt.commandType(Qe,"object","invalid "+Be,er.commandStr);var Ne=!0,yr=Qe.x|0,Ir=Qe.y|0,tn,on;return"width"in Qe?(tn=Qe.width|0,Tt.command(tn>=0,"invalid "+Be,er.commandStr)):Ne=!1,"height"in Qe?(on=Qe.height|0,Tt.command(on>=0,"invalid "+Be,er.commandStr)):Ne=!1,new Bo(!Ne&&Ee&&Ee.thisDep,!Ne&&Ee&&Ee.contextDep,!Ne&&Ee&&Ee.propDep,function(va,Za){var fa=va.shared.context,Ca=tn;"width"in Qe||(Ca=Za.def(fa,".",Qu,"-",yr));var Xa=on;return"height"in Qe||(Xa=Za.def(fa,".",Ks,"-",Ir)),[yr,Ir,Ca,Xa]})}else if(Be in Cr){var Hr=Cr[Be],An=ms(Hr,function(va,Za){var fa=va.invoke(Za,Hr);Tt.optional(function(){va.assert(Za,fa+"&&typeof "+fa+'==="object"',"invalid "+Be)});var Ca=va.shared.context,Xa=Za.def(fa,".x|0"),Oi=Za.def(fa,".y|0"),$o=Za.def('"width" in ',fa,"?",fa,".width|0:","(",Ca,".",Qu,"-",Xa,")"),_s=Za.def('"height" in ',fa,"?",fa,".height|0:","(",Ca,".",Ks,"-",Oi,")");return Tt.optional(function(){va.assert(Za,$o+">=0&&"+_s+">=0","invalid "+Be)}),[Xa,Oi,$o,_s]});return Ee&&(An.thisDep=An.thisDep||Ee.thisDep,An.contextDep=An.contextDep||Ee.contextDep,An.propDep=An.propDep||Ee.propDep),An}else return Ee?new Bo(Ee.thisDep,Ee.contextDep,Ee.propDep,function(va,Za){var fa=va.shared.context;return[0,0,Za.def(fa,".",Qu),Za.def(fa,".",Ks)]}):null}var rr=ar(Ys);if(rr){var vr=rr;rr=new Bo(rr.thisDep,rr.contextDep,rr.propDep,function(Be,Qe){var Ne=vr.append(Be,Qe),yr=Be.shared.context;return Qe.set(yr,"."+dl,Ne[2]),Qe.set(yr,"."+hl,Ne[3]),Ne})}return{viewport:rr,scissor_box:ar(Vf)}}function ua(ke,Ee){var er=ke.static,br=typeof er[Ku]=="string"&&typeof er[Du]=="string";if(br){if(Object.keys(Ee.dynamic).length>0)return null;var Cr=Ee.static,ar=Object.keys(Cr);if(ar.length>0&&typeof Cr[ar[0]]=="number"){for(var rr=[],vr=0;vr<ar.length;++vr)Tt(typeof Cr[ar[vr]]=="number","must specify all vertex attribute locations when using vaos"),rr.push([Cr[ar[vr]]|0,ar[vr]]);return rr}}return null}function wa(ke,Ee,er){var br=ke.static,Cr=ke.dynamic;function ar(Ne){if(Ne in br){var yr=Ae.id(br[Ne]);Tt.optional(function(){wn.shader(wl[Ne],yr,Tt.guessCommand())});var Ir=Wo(function(){return yr});return Ir.id=yr,Ir}else if(Ne in Cr){var tn=Cr[Ne];return ms(tn,function(on,Hr){var An=on.invoke(Hr,tn),va=Hr.def(on.shared.strings,".id(",An,")");return Tt.optional(function(){Hr(on.shared.shader,".shader(",wl[Ne],",",va,",",on.command,");")}),va})}return null}var rr=ar(Ku),vr=ar(Du),Be=null,Qe;return bu(rr)&&bu(vr)?(Be=wn.program(vr.id,rr.id,null,er),Qe=Wo(function(Ne,yr){return Ne.link(Be)})):Qe=new Bo(rr&&rr.thisDep||vr&&vr.thisDep,rr&&rr.contextDep||vr&&vr.contextDep,rr&&rr.propDep||vr&&vr.propDep,function(Ne,yr){var Ir=Ne.shared.shader,tn;rr?tn=rr.append(Ne,yr):tn=yr.def(Ir,".",Ku);var on;vr?on=vr.append(Ne,yr):on=yr.def(Ir,".",Du);var Hr=Ir+".program("+on+","+tn;return Tt.optional(function(){Hr+=","+Ne.command}),yr.def(Hr+")")}),{frag:rr,vert:vr,progVar:Qe,program:Be}}function Ba(ke,Ee){var er=ke.static,br=ke.dynamic;function Cr(){if($u in er){var Ne=er[$u];ec(Ne)?Ne=Fr.getElements(Fr.create(Ne,!0)):Ne&&(Ne=Fr.getElements(Ne),Tt.command(Ne,"invalid elements",Ee.commandStr));var yr=Wo(function(tn,on){if(Ne){var Hr=tn.link(Ne);return tn.ELEMENTS=Hr,Hr}return tn.ELEMENTS=null,null});return yr.value=Ne,yr}else if($u in br){var Ir=br[$u];return ms(Ir,function(tn,on){var Hr=tn.shared,An=Hr.isBufferArgs,va=Hr.elements,Za=tn.invoke(on,Ir),fa=on.def("null"),Ca=on.def(An,"(",Za,")"),Xa=tn.cond(Ca).then(fa,"=",va,".createStream(",Za,");").else(fa,"=",va,".getElements(",Za,");");return Tt.optional(function(){tn.assert(Xa.else,"!"+Za+"||"+fa,"invalid elements")}),on.entry(Xa),on.exit(tn.cond(Ca).then(va,".destroyStream(",fa,");")),tn.ELEMENTS=fa,fa})}return null}var ar=Cr();function rr(){if(qu in er){var Ne=er[qu];return Tt.commandParameter(Ne,Fa,"invalid primitve",Ee.commandStr),Wo(function(Ir,tn){return Fa[Ne]})}else if(qu in br){var yr=br[qu];return ms(yr,function(Ir,tn){var on=Ir.constants.primTypes,Hr=Ir.invoke(tn,yr);return Tt.optional(function(){Ir.assert(tn,Hr+" in "+on,"invalid primitive, must be one of "+Object.keys(Fa))}),tn.def(on,"[",Hr,"]")})}else if(ar)return bu(ar)?ar.value?Wo(function(Ir,tn){return tn.def(Ir.ELEMENTS,".primType")}):Wo(function(){return Zl}):new Bo(ar.thisDep,ar.contextDep,ar.propDep,function(Ir,tn){var on=Ir.ELEMENTS;return tn.def(on,"?",on,".primType:",Zl)});return null}function vr(Ne,yr){if(Ne in er){var Ir=er[Ne]|0;return Tt.command(!yr||Ir>=0,"invalid "+Ne,Ee.commandStr),Wo(function(on,Hr){return yr&&(on.OFFSET=Ir),Ir})}else if(Ne in br){var tn=br[Ne];return ms(tn,function(on,Hr){var An=on.invoke(Hr,tn);return yr&&(on.OFFSET=An,Tt.optional(function(){on.assert(Hr,An+">=0","invalid "+Ne)})),An})}else if(yr&&ar)return Wo(function(on,Hr){return on.OFFSET="0",0});return null}var Be=vr(bf,!0);function Qe(){if(Lu in er){var Ne=er[Lu]|0;return Tt.command(typeof Ne=="number"&&Ne>=0,"invalid vertex count",Ee.commandStr),Wo(function(){return Ne})}else if(Lu in br){var yr=br[Lu];return ms(yr,function(on,Hr){var An=on.invoke(Hr,yr);return Tt.optional(function(){on.assert(Hr,"typeof "+An+'==="number"&&'+An+">=0&&"+An+"===("+An+"|0)","invalid vertex count")}),An})}else if(ar)if(bu(ar)){if(ar)return Be?new Bo(Be.thisDep,Be.contextDep,Be.propDep,function(on,Hr){var An=Hr.def(on.ELEMENTS,".vertCount-",on.OFFSET);return Tt.optional(function(){on.assert(Hr,An+">=0","invalid vertex offset/element buffer too small")}),An}):Wo(function(on,Hr){return Hr.def(on.ELEMENTS,".vertCount")});var Ir=Wo(function(){return-1});return Tt.optional(function(){Ir.MISSING=!0}),Ir}else{var tn=new Bo(ar.thisDep||Be.thisDep,ar.contextDep||Be.contextDep,ar.propDep||Be.propDep,function(on,Hr){var An=on.ELEMENTS;return on.OFFSET?Hr.def(An,"?",An,".vertCount-",on.OFFSET,":-1"):Hr.def(An,"?",An,".vertCount:-1")});return Tt.optional(function(){tn.DYNAMIC=!0}),tn}return null}return{elements:ar,primitive:rr(),count:Qe(),instances:vr(Ic,!1),offset:Be}}function Ia(ke,Ee){var er=ke.static,br=ke.dynamic,Cr={};return fe.forEach(function(ar){var rr=We(ar);function vr(Be,Qe){if(ar in er){var Ne=Be(er[ar]);Cr[rr]=Wo(function(){return Ne})}else if(ar in br){var yr=br[ar];Cr[rr]=ms(yr,function(Ir,tn){return Qe(Ir,tn,Ir.invoke(tn,yr))})}}switch(ar){case tr:case nl:case Cc:case gf:case il:case ll:case ul:case zl:case fl:case Yf:return vr(function(Be){return Tt.commandType(Be,"boolean",ar,Ee.commandStr),Be},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,"typeof "+Ne+'==="boolean"',"invalid flag "+ar,Be.commandStr)}),Ne});case Fl:return vr(function(Be){return Tt.commandParameter(Be,of,"invalid "+ar,Ee.commandStr),of[Be]},function(Be,Qe,Ne){var yr=Be.constants.compareFuncs;return Tt.optional(function(){Be.assert(Qe,Ne+" in "+yr,"invalid "+ar+", must be one of "+Object.keys(of))}),Qe.def(yr,"[",Ne,"]")});case ld:return vr(function(Be){return Tt.command(Qa(Be)&&Be.length===2&&typeof Be[0]=="number"&&typeof Be[1]=="number"&&Be[0]<=Be[1],"depth range is 2d array",Ee.commandStr),Be},function(Be,Qe,Ne){Tt.optional(function(){Be.assert(Qe,Be.shared.isArrayLike+"("+Ne+")&&"+Ne+".length===2&&typeof "+Ne+'[0]==="number"&&typeof '+Ne+'[1]==="number"&&'+Ne+"[0]<="+Ne+"[1]","depth range must be a 2d array")});var yr=Qe.def("+",Ne,"[0]"),Ir=Qe.def("+",Ne,"[1]");return[yr,Ir]});case Wf:return vr(function(Be){Tt.commandType(Be,"object","blend.func",Ee.commandStr);var Qe="srcRGB"in Be?Be.srcRGB:Be.src,Ne="srcAlpha"in Be?Be.srcAlpha:Be.src,yr="dstRGB"in Be?Be.dstRGB:Be.dst,Ir="dstAlpha"in Be?Be.dstAlpha:Be.dst;return Tt.commandParameter(Qe,gs,rr+".srcRGB",Ee.commandStr),Tt.commandParameter(Ne,gs,rr+".srcAlpha",Ee.commandStr),Tt.commandParameter(yr,gs,rr+".dstRGB",Ee.commandStr),Tt.commandParameter(Ir,gs,rr+".dstAlpha",Ee.commandStr),Tt.command(ed.indexOf(Qe+", "+yr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Qe+", "+yr+")",Ee.commandStr),[gs[Qe],gs[yr],gs[Ne],gs[Ir]]},function(Be,Qe,Ne){var yr=Be.constants.blendFuncs;Tt.optional(function(){Be.assert(Qe,Ne+"&&typeof "+Ne+'==="object"',"invalid blend func, must be an object")});function Ir(fa,Ca){var Xa=Qe.def('"',fa,Ca,'" in ',Ne,"?",Ne,".",fa,Ca,":",Ne,".",fa);return Tt.optional(function(){Be.assert(Qe,Xa+" in "+yr,"invalid "+ar+"."+fa+Ca+", must be one of "+Object.keys(gs))}),Xa}var tn=Ir("src","RGB"),on=Ir("dst","RGB");Tt.optional(function(){var fa=Be.constants.invalidBlendCombinations;Be.assert(Qe,fa+".indexOf("+tn+'+", "+'+on+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=Qe.def(yr,"[",tn,"]"),An=Qe.def(yr,"[",Ir("src","Alpha"),"]"),va=Qe.def(yr,"[",on,"]"),Za=Qe.def(yr,"[",Ir("dst","Alpha"),"]");return[Hr,va,An,Za]});case al:return vr(function(Be){if(typeof Be=="string")return Tt.commandParameter(Be,ht,"invalid "+ar,Ee.commandStr),[ht[Be],ht[Be]];if(typeof Be=="object")return Tt.commandParameter(Be.rgb,ht,ar+".rgb",Ee.commandStr),Tt.commandParameter(Be.alpha,ht,ar+".alpha",Ee.commandStr),[ht[Be.rgb],ht[Be.alpha]];Tt.commandRaise("invalid blend.equation",Ee.commandStr)},function(Be,Qe,Ne){var yr=Be.constants.blendEquations,Ir=Qe.def(),tn=Qe.def(),on=Be.cond("typeof ",Ne,'==="string"');return Tt.optional(function(){function Hr(An,va,Za){Be.assert(An,Za+" in "+yr,"invalid "+va+", must be one of "+Object.keys(ht))}Hr(on.then,ar,Ne),Be.assert(on.else,Ne+"&&typeof "+Ne+'==="object"',"invalid "+ar),Hr(on.else,ar+".rgb",Ne+".rgb"),Hr(on.else,ar+".alpha",Ne+".alpha")}),on.then(Ir,"=",tn,"=",yr,"[",Ne,"];"),on.else(Ir,"=",yr,"[",Ne,".rgb];",tn,"=",yr,"[",Ne,".alpha];"),Qe(on),[Ir,tn]});case Bl:return vr(function(Be){return Tt.command(Qa(Be)&&Be.length===4,"blend.color must be a 4d array",Ee.commandStr),In(4,function(Qe){return+Be[Qe]})},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,Be.shared.isArrayLike+"("+Ne+")&&"+Ne+".length===4","blend.color must be a 4d array")}),In(4,function(yr){return Qe.def("+",Ne,"[",yr,"]")})});case cl:return vr(function(Be){return Tt.commandType(Be,"number",rr,Ee.commandStr),Be|0},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,"typeof "+Ne+'==="number"',"invalid stencil.mask")}),Qe.def(Ne,"|0")});case mf:return vr(function(Be){Tt.commandType(Be,"object",rr,Ee.commandStr);var Qe=Be.cmp||"keep",Ne=Be.ref||0,yr="mask"in Be?Be.mask:-1;return Tt.commandParameter(Qe,of,ar+".cmp",Ee.commandStr),Tt.commandType(Ne,"number",ar+".ref",Ee.commandStr),Tt.commandType(yr,"number",ar+".mask",Ee.commandStr),[of[Qe],Ne,yr]},function(Be,Qe,Ne){var yr=Be.constants.compareFuncs;Tt.optional(function(){function Hr(){Be.assert(Qe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Hr(Ne+"&&typeof ",Ne,'==="object"'),Hr('!("cmp" in ',Ne,")||(",Ne,".cmp in ",yr,")")});var Ir=Qe.def('"cmp" in ',Ne,"?",yr,"[",Ne,".cmp]",":",af),tn=Qe.def(Ne,".ref|0"),on=Qe.def('"mask" in ',Ne,"?",Ne,".mask|0:-1");return[Ir,tn,on]});case Zo:case yf:return vr(function(Be){Tt.commandType(Be,"object",rr,Ee.commandStr);var Qe=Be.fail||"keep",Ne=Be.zfail||"keep",yr=Be.zpass||"keep";return Tt.commandParameter(Qe,Pu,ar+".fail",Ee.commandStr),Tt.commandParameter(Ne,Pu,ar+".zfail",Ee.commandStr),Tt.commandParameter(yr,Pu,ar+".zpass",Ee.commandStr),[ar===yf?nf:tc,Pu[Qe],Pu[Ne],Pu[yr]]},function(Be,Qe,Ne){var yr=Be.constants.stencilOps;Tt.optional(function(){Be.assert(Qe,Ne+"&&typeof "+Ne+'==="object"',"invalid "+ar)});function Ir(tn){return Tt.optional(function(){Be.assert(Qe,'!("'+tn+'" in '+Ne+")||("+Ne+"."+tn+" in "+yr+")","invalid "+ar+"."+tn+", must be one of "+Object.keys(Pu))}),Qe.def('"',tn,'" in ',Ne,"?",yr,"[",Ne,".",tn,"]:",af)}return[ar===yf?nf:tc,Ir("fail"),Ir("zfail"),Ir("zpass")]});case Ac:return vr(function(Be){Tt.commandType(Be,"object",rr,Ee.commandStr);var Qe=Be.factor|0,Ne=Be.units|0;return Tt.commandType(Qe,"number",rr+".factor",Ee.commandStr),Tt.commandType(Ne,"number",rr+".units",Ee.commandStr),[Qe,Ne]},function(Be,Qe,Ne){Tt.optional(function(){Be.assert(Qe,Ne+"&&typeof "+Ne+'==="object"',"invalid "+ar)});var yr=Qe.def(Ne,".factor|0"),Ir=Qe.def(Ne,".units|0");return[yr,Ir]});case ol:return vr(function(Be){var Qe=0;return Be==="front"?Qe=tc:Be==="back"&&(Qe=nf),Tt.command(!!Qe,rr,Ee.commandStr),Qe},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,Ne+'==="front"||'+Ne+'==="back"',"invalid cull.face")}),Qe.def(Ne,'==="front"?',tc,":",nf)});case sl:return vr(function(Be){return Tt.command(typeof Be=="number"&&Be>=zr.lineWidthDims[0]&&Be<=zr.lineWidthDims[1],"invalid line width, must be a positive number between "+zr.lineWidthDims[0]+" and "+zr.lineWidthDims[1],Ee.commandStr),Be},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,"typeof "+Ne+'==="number"&&'+Ne+">="+zr.lineWidthDims[0]+"&&"+Ne+"<="+zr.lineWidthDims[1],"invalid line width")}),Ne});case Xf:return vr(function(Be){return Tt.commandParameter(Be,Sl,rr,Ee.commandStr),Sl[Be]},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,Ne+'==="cw"||'+Ne+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Qe.def(Ne+'==="cw"?'+Kl+":"+Bc)});case Tc:return vr(function(Be){return Tt.command(Qa(Be)&&Be.length===4,"color.mask must be length 4 array",Ee.commandStr),Be.map(function(Qe){return!!Qe})},function(Be,Qe,Ne){return Tt.optional(function(){Be.assert(Qe,Be.shared.isArrayLike+"("+Ne+")&&"+Ne+".length===4","invalid color.mask")}),In(4,function(yr){return"!!"+Ne+"["+yr+"]"})});case jf:return vr(function(Be){Tt.command(typeof Be=="object"&&Be,rr,Ee.commandStr);var Qe="value"in Be?Be.value:1,Ne=!!Be.invert;return Tt.command(typeof Qe=="number"&&Qe>=0&&Qe<=1,"sample.coverage.value must be a number between 0 and 1",Ee.commandStr),[Qe,Ne]},function(Be,Qe,Ne){Tt.optional(function(){Be.assert(Qe,Ne+"&&typeof "+Ne+'==="object"',"invalid sample.coverage")});var yr=Qe.def('"value" in ',Ne,"?+",Ne,".value:1"),Ir=Qe.def("!!",Ne,".invert");return[yr,Ir]})}}),Cr}function uo(ke,Ee){var er=ke.static,br=ke.dynamic,Cr={};return Object.keys(er).forEach(function(ar){var rr=er[ar],vr;if(typeof rr=="number"||typeof rr=="boolean")vr=Wo(function(){return rr});else if(typeof rr=="function"){var Be=rr._reglType;Be==="texture2d"||Be==="textureCube"?vr=Wo(function(Qe){return Qe.link(rr)}):Be==="framebuffer"||Be==="framebufferCube"?(Tt.command(rr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ar+'"',Ee.commandStr),vr=Wo(function(Qe){return Qe.link(rr.color[0])})):Tt.commandRaise('invalid data for uniform "'+ar+'"',Ee.commandStr)}else Qa(rr)?vr=Wo(function(Qe){var Ne=Qe.global.def("[",In(rr.length,function(yr){return Tt.command(typeof rr[yr]=="number"||typeof rr[yr]=="boolean","invalid uniform "+ar,Qe.commandStr),rr[yr]}),"]");return Ne}):Tt.commandRaise('invalid or missing data for uniform "'+ar+'"',Ee.commandStr);vr.value=rr,Cr[ar]=vr}),Object.keys(br).forEach(function(ar){var rr=br[ar];Cr[ar]=ms(rr,function(vr,Be){return vr.invoke(Be,rr)})}),Cr}function Ua(ke,Ee){var er=ke.static,br=ke.dynamic,Cr={};return Object.keys(er).forEach(function(ar){var rr=er[ar],vr=Ae.id(ar),Be=new st;if(ec(rr))Be.state=gu,Be.buffer=rn.getBuffer(rn.create(rr,Ju,!1,!0)),Be.type=0;else{var Qe=rn.getBuffer(rr);if(Qe)Be.state=gu,Be.buffer=Qe,Be.type=0;else if(Tt.command(typeof rr=="object"&&rr,"invalid data for attribute "+ar,Ee.commandStr),"constant"in rr){var Ne=rr.constant;Be.buffer="null",Be.state=mu,typeof Ne=="number"?Be.x=Ne:(Tt.command(Qa(Ne)&&Ne.length>0&&Ne.length<=4,"invalid constant for attribute "+ar,Ee.commandStr),pf.forEach(function(va,Za){Za<Ne.length&&(Be[va]=Ne[Za])}))}else{ec(rr.buffer)?Qe=rn.getBuffer(rn.create(rr.buffer,Ju,!1,!0)):Qe=rn.getBuffer(rr.buffer),Tt.command(!!Qe,'missing buffer for attribute "'+ar+'"',Ee.commandStr);var yr=rr.offset|0;Tt.command(yr>=0,'invalid offset for attribute "'+ar+'"',Ee.commandStr);var Ir=rr.stride|0;Tt.command(Ir>=0&&Ir<256,'invalid stride for attribute "'+ar+'", must be integer betweeen [0, 255]',Ee.commandStr);var tn=rr.size|0;Tt.command(!("size"in rr)||tn>0&&tn<=4,'invalid size for attribute "'+ar+'", must be 1,2,3,4',Ee.commandStr);var on=!!rr.normalized,Hr=0;"type"in rr&&(Tt.commandParameter(rr.type,ao,"invalid type for attribute "+ar,Ee.commandStr),Hr=ao[rr.type]);var An=rr.divisor|0;"divisor"in rr&&(Tt.command(An===0||xt,'cannot specify divisor for attribute "'+ar+'", instancing not supported',Ee.commandStr),Tt.command(An>=0,'invalid divisor for attribute "'+ar+'"',Ee.commandStr)),Tt.optional(function(){var va=Ee.commandStr,Za=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(rr).forEach(function(fa){Tt.command(Za.indexOf(fa)>=0,'unknown parameter "'+fa+'" for attribute pointer "'+ar+'" (valid parameters are '+Za+")",va)})}),Be.buffer=Qe,Be.state=gu,Be.size=tn,Be.normalized=on,Be.type=Hr||Qe.dtype,Be.offset=yr,Be.stride=Ir,Be.divisor=An}}Cr[ar]=Wo(function(va,Za){var fa=va.attribCache;if(vr in fa)return fa[vr];var Ca={isStream:!1};return Object.keys(Be).forEach(function(Xa){Ca[Xa]=Be[Xa]}),Be.buffer&&(Ca.buffer=va.link(Be.buffer),Ca.type=Ca.type||Ca.buffer+".dtype"),fa[vr]=Ca,Ca})}),Object.keys(br).forEach(function(ar){var rr=br[ar];function vr(Be,Qe){var Ne=Be.invoke(Qe,rr),yr=Be.shared,Ir=Be.constants,tn=yr.isBufferArgs,on=yr.buffer;Tt.optional(function(){Be.assert(Qe,Ne+"&&(typeof "+Ne+'==="object"||typeof '+Ne+'==="function")&&('+tn+"("+Ne+")||"+on+".getBuffer("+Ne+")||"+on+".getBuffer("+Ne+".buffer)||"+tn+"("+Ne+'.buffer)||("constant" in '+Ne+"&&(typeof "+Ne+'.constant==="number"||'+yr.isArrayLike+"("+Ne+".constant))))",'invalid dynamic attribute "'+ar+'"')});var Hr={isStream:Qe.def(!1)},An=new st;An.state=gu,Object.keys(An).forEach(function(Ca){Hr[Ca]=Qe.def(""+An[Ca])});var va=Hr.buffer,Za=Hr.type;Qe("if(",tn,"(",Ne,")){",Hr.isStream,"=true;",va,"=",on,".createStream(",Ju,",",Ne,");",Za,"=",va,".dtype;","}else{",va,"=",on,".getBuffer(",Ne,");","if(",va,"){",Za,"=",va,".dtype;",'}else if("constant" in ',Ne,"){",Hr.state,"=",mu,";","if(typeof "+Ne+'.constant === "number"){',Hr[pf[0]],"=",Ne,".constant;",pf.slice(1).map(function(Ca){return Hr[Ca]}).join("="),"=0;","}else{",pf.map(function(Ca,Xa){return Hr[Ca]+"="+Ne+".constant.length>"+Xa+"?"+Ne+".constant["+Xa+"]:0;"}).join(""),"}}else{","if(",tn,"(",Ne,".buffer)){",va,"=",on,".createStream(",Ju,",",Ne,".buffer);","}else{",va,"=",on,".getBuffer(",Ne,".buffer);","}",Za,'="type" in ',Ne,"?",Ir.glTypes,"[",Ne,".type]:",va,".dtype;",Hr.normalized,"=!!",Ne,".normalized;");function fa(Ca){Qe(Hr[Ca],"=",Ne,".",Ca,"|0;")}return fa("size"),fa("offset"),fa("stride"),fa("divisor"),Qe("}}"),Qe.exit("if(",Hr.isStream,"){",on,".destroyStream(",va,");","}"),Hr}Cr[ar]=ms(rr,vr)}),Cr}function Do(ke,Ee){var er=ke.static,br=ke.dynamic;if(Hf in er){var Cr=er[Hf];return Cr!==null&&Cn.getVAO(Cr)===null&&(Cr=Cn.createVAO(Cr)),Wo(function(rr){return rr.link(Cn.getVAO(Cr))})}else if(Hf in br){var ar=br[Hf];return ms(ar,function(rr,vr){var Be=rr.invoke(vr,ar);return vr.def(rr.shared.vao+".getVAO("+Be+")")})}return null}function Hi(ke){var Ee=ke.static,er=ke.dynamic,br={};return Object.keys(Ee).forEach(function(Cr){var ar=Ee[Cr];br[Cr]=Wo(function(rr,vr){return typeof ar=="number"||typeof ar=="boolean"?""+ar:rr.link(ar)})}),Object.keys(er).forEach(function(Cr){var ar=er[Cr];br[Cr]=ms(ar,function(rr,vr){return rr.invoke(vr,ar)})}),br}function li(ke,Ee,er,br,Cr){var ar=ke.static,rr=ke.dynamic;Tt.optional(function(){var fa=[Zu,Du,Ku,$u,qu,bf,Lu,Ic,xf,Hf].concat(fe);function Ca(Xa){Object.keys(Xa).forEach(function(Oi){Tt.command(fa.indexOf(Oi)>=0,'unknown parameter "'+Oi+'"',Cr.commandStr)})}Ca(ar),Ca(rr)});var vr=ua(ke,Ee),Be=Nn(ke,Cr),Qe=la(ke,Be,Cr),Ne=Ba(ke,Cr),yr=Ia(ke,Cr),Ir=wa(ke,Cr,vr);function tn(fa){var Ca=Qe[fa];Ca&&(yr[fa]=Ca)}tn(Ys),tn(We(Vf));var on=Object.keys(yr).length>0,Hr={framebuffer:Be,draw:Ne,shader:Ir,state:yr,dirty:on,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Hr.profile=Yn(ke,Cr),Hr.uniforms=uo(er,Cr),Hr.drawVAO=Hr.scopeVAO=Do(ke,Cr),!Hr.drawVAO&&Ir.program&&!vr&&je.angle_instanced_arrays){var An=!0,va=Ir.program.attributes.map(function(fa){var Ca=Ee.static[fa];return An=An&&!!Ca,Ca});if(An&&va.length>0){var Za=Cn.getVAO(Cn.createVAO(va));Hr.drawVAO=new Bo(null,null,null,function(fa,Ca){return fa.link(Za)}),Hr.useVAO=!0}}return vr?Hr.useVAO=!0:Hr.attributes=Ua(Ee,Cr),Hr.context=Hi(br,Cr),Hr}function Fo(ke,Ee,er){var br=ke.shared,Cr=br.context,ar=ke.scope();Object.keys(er).forEach(function(rr){Ee.save(Cr,"."+rr);var vr=er[rr],Be=vr.append(ke,Ee);Array.isArray(Be)?ar(Cr,".",rr,"=[",Be.join(),"];"):ar(Cr,".",rr,"=",Be,";")}),Ee(ar)}function fo(ke,Ee,er,br){var Cr=ke.shared,ar=Cr.gl,rr=Cr.framebuffer,vr;Ot&&(vr=Ee.def(Cr.extensions,".webgl_draw_buffers"));var Be=ke.constants,Qe=Be.drawBuffer,Ne=Be.backBuffer,yr;er?yr=er.append(ke,Ee):yr=Ee.def(rr,".next"),br||Ee("if(",yr,"!==",rr,".cur){"),Ee("if(",yr,"){",ar,".bindFramebuffer(",El,",",yr,".framebuffer);"),Ot&&Ee(vr,".drawBuffersWEBGL(",Qe,"[",yr,".colorAttachments.length]);"),Ee("}else{",ar,".bindFramebuffer(",El,",null);"),Ot&&Ee(vr,".drawBuffersWEBGL(",Ne,");"),Ee("}",rr,".cur=",yr,";"),br||Ee("}")}function as(ke,Ee,er){var br=ke.shared,Cr=br.gl,ar=ke.current,rr=ke.next,vr=br.current,Be=br.next,Qe=ke.cond(vr,".dirty");fe.forEach(function(Ne){var yr=We(Ne);if(!(yr in er.state)){var Ir,tn;if(yr in rr){Ir=rr[yr],tn=ar[yr];var on=In(zt[yr].length,function(An){return Qe.def(Ir,"[",An,"]")});Qe(ke.cond(on.map(function(An,va){return An+"!=="+tn+"["+va+"]"}).join("||")).then(Cr,".",be[yr],"(",on,");",on.map(function(An,va){return tn+"["+va+"]="+An}).join(";"),";"))}else{Ir=Qe.def(Be,".",yr);var Hr=ke.cond(Ir,"!==",vr,".",yr);Qe(Hr),yr in Te?Hr(ke.cond(Ir).then(Cr,".enable(",Te[yr],");").else(Cr,".disable(",Te[yr],");"),vr,".",yr,"=",Ir,";"):Hr(Cr,".",be[yr],"(",Ir,");",vr,".",yr,"=",Ir,";")}}}),Object.keys(er.state).length===0&&Qe(vr,".dirty=false;"),Ee(Qe)}function Ms(ke,Ee,er,br){var Cr=ke.shared,ar=ke.current,rr=Cr.current,vr=Cr.gl;Ml(Object.keys(er)).forEach(function(Be){var Qe=er[Be];if(!(br&&!br(Qe))){var Ne=Qe.append(ke,Ee);if(Te[Be]){var yr=Te[Be];bu(Qe)?Ne?Ee(vr,".enable(",yr,");"):Ee(vr,".disable(",yr,");"):Ee(ke.cond(Ne).then(vr,".enable(",yr,");").else(vr,".disable(",yr,");")),Ee(rr,".",Be,"=",Ne,";")}else if(Qa(Ne)){var Ir=ar[Be];Ee(vr,".",be[Be],"(",Ne,");",Ne.map(function(tn,on){return Ir+"["+on+"]="+tn}).join(";"),";")}else Ee(vr,".",be[Be],"(",Ne,");",rr,".",Be,"=",Ne,";")}})}function Yo(ke,Ee){xt&&(ke.instancing=Ee.def(ke.shared.extensions,".angle_instanced_arrays"))}function Ka(ke,Ee,er,br,Cr){var ar=ke.shared,rr=ke.stats,vr=ar.current,Be=ar.timer,Qe=er.profile;function Ne(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var yr,Ir;function tn(fa){yr=Ee.def(),fa(yr,"=",Ne(),";"),typeof Cr=="string"?fa(rr,".count+=",Cr,";"):fa(rr,".count++;"),N&&(br?(Ir=Ee.def(),fa(Ir,"=",Be,".getNumPendingQueries();")):fa(Be,".beginQuery(",rr,");"))}function on(fa){fa(rr,".cpuTime+=",Ne(),"-",yr,";"),N&&(br?fa(Be,".pushScopeStats(",Ir,",",Be,".getNumPendingQueries(),",rr,");"):fa(Be,".endQuery();"))}function Hr(fa){var Ca=Ee.def(vr,".profile");Ee(vr,".profile=",fa,";"),Ee.exit(vr,".profile=",Ca,";")}var An;if(Qe){if(bu(Qe)){Qe.enable?(tn(Ee),on(Ee.exit),Hr("true")):Hr("false");return}An=Qe.append(ke,Ee),Hr(An)}else An=Ee.def(vr,".profile");var va=ke.block();tn(va),Ee("if(",An,"){",va,"}");var Za=ke.block();on(Za),Ee.exit("if(",An,"){",Za,"}")}function ys(ke,Ee,er,br,Cr){var ar=ke.shared;function rr(Be){switch(Be){case Ef:case xu:case $f:return 2;case Lc:case wf:case Rc:return 3;case Pc:case ef:case qf:return 4;default:return 1}}function vr(Be,Qe,Ne){var yr=ar.gl,Ir=Ee.def(Be,".location"),tn=Ee.def(ar.attributes,"[",Ir,"]"),on=Ne.state,Hr=Ne.buffer,An=[Ne.x,Ne.y,Ne.z,Ne.w],va=["buffer","normalized","offset","stride"];function Za(){Ee("if(!",tn,".buffer){",yr,".enableVertexAttribArray(",Ir,");}");var Ca=Ne.type,Xa;if(Ne.size?Xa=Ee.def(Ne.size,"||",Qe):Xa=Qe,Ee("if(",tn,".type!==",Ca,"||",tn,".size!==",Xa,"||",va.map(function($o){return tn+"."+$o+"!=="+Ne[$o]}).join("||"),"){",yr,".bindBuffer(",Ju,",",Hr,".buffer);",yr,".vertexAttribPointer(",[Ir,Xa,Ca,Ne.normalized,Ne.stride,Ne.offset],");",tn,".type=",Ca,";",tn,".size=",Xa,";",va.map(function($o){return tn+"."+$o+"="+Ne[$o]+";"}).join(""),"}"),xt){var Oi=Ne.divisor;Ee("if(",tn,".divisor!==",Oi,"){",ke.instancing,".vertexAttribDivisorANGLE(",[Ir,Oi],");",tn,".divisor=",Oi,";}")}}function fa(){Ee("if(",tn,".buffer){",yr,".disableVertexAttribArray(",Ir,");",tn,".buffer=null;","}if(",pf.map(function(Ca,Xa){return tn+"."+Ca+"!=="+An[Xa]}).join("||"),"){",yr,".vertexAttrib4f(",Ir,",",An,");",pf.map(function(Ca,Xa){return tn+"."+Ca+"="+An[Xa]+";"}).join(""),"}")}on===gu?Za():on===mu?fa():(Ee("if(",on,"===",gu,"){"),Za(),Ee("}else{"),fa(),Ee("}"))}br.forEach(function(Be){var Qe=Be.name,Ne=er.attributes[Qe],yr;if(Ne){if(!Cr(Ne))return;yr=Ne.append(ke,Ee)}else{if(!Cr(fs))return;var Ir=ke.scopeAttrib(Qe);Tt.optional(function(){ke.assert(Ee,Ir+".state","missing attribute "+Qe)}),yr={},Object.keys(new st).forEach(function(tn){yr[tn]=Ee.def(Ir,".",tn)})}vr(ke.link(Be),rr(Be.info.type),yr)})}function Ii(ke,Ee,er,br,Cr){for(var ar=ke.shared,rr=ar.gl,vr,Be=0;Be<br.length;++Be){var Qe=br[Be],Ne=Qe.name,yr=Qe.info.type,Ir=er.uniforms[Ne],tn=ke.link(Qe),on=tn+".location",Hr;if(Ir){if(!Cr(Ir))continue;if(bu(Ir)){var An=Ir.value;if(Tt.command(An!==null&&typeof An!="undefined",'missing uniform "'+Ne+'"',ke.commandStr),yr===Jf||yr===rf){Tt.command(typeof An=="function"&&(yr===Jf&&(An._reglType==="texture2d"||An._reglType==="framebuffer")||yr===rf&&(An._reglType==="textureCube"||An._reglType==="framebufferCube")),"invalid texture for uniform "+Ne,ke.commandStr);var va=ke.link(An._texture||An.color[0]._texture);Ee(rr,".uniform1i(",on,",",va+".bind());"),Ee.exit(va,".unbind();")}else if(yr===Qf||yr===kc||yr===Sf){Tt.optional(function(){Tt.command(Qa(An),"invalid matrix for uniform "+Ne,ke.commandStr),Tt.command(yr===Qf&&An.length===4||yr===kc&&An.length===9||yr===Sf&&An.length===16,"invalid length for matrix uniform "+Ne,ke.commandStr)});var Za=ke.global.def("new Float32Array(["+Array.prototype.slice.call(An)+"])"),fa=2;yr===kc?fa=3:yr===Sf&&(fa=4),Ee(rr,".uniformMatrix",fa,"fv(",on,",false,",Za,");")}else{switch(yr){case Kf:Tt.commandType(An,"number","uniform "+Ne,ke.commandStr),vr="1f";break;case Ef:Tt.command(Qa(An)&&An.length===2,"uniform "+Ne,ke.commandStr),vr="2f";break;case Lc:Tt.command(Qa(An)&&An.length===3,"uniform "+Ne,ke.commandStr),vr="3f";break;case Pc:Tt.command(Qa(An)&&An.length===4,"uniform "+Ne,ke.commandStr),vr="4f";break;case xl:Tt.commandType(An,"boolean","uniform "+Ne,ke.commandStr),vr="1i";break;case Nc:Tt.commandType(An,"number","uniform "+Ne,ke.commandStr),vr="1i";break;case $f:Tt.command(Qa(An)&&An.length===2,"uniform "+Ne,ke.commandStr),vr="2i";break;case xu:Tt.command(Qa(An)&&An.length===2,"uniform "+Ne,ke.commandStr),vr="2i";break;case Rc:Tt.command(Qa(An)&&An.length===3,"uniform "+Ne,ke.commandStr),vr="3i";break;case wf:Tt.command(Qa(An)&&An.length===3,"uniform "+Ne,ke.commandStr),vr="3i";break;case qf:Tt.command(Qa(An)&&An.length===4,"uniform "+Ne,ke.commandStr),vr="4i";break;case ef:Tt.command(Qa(An)&&An.length===4,"uniform "+Ne,ke.commandStr),vr="4i";break}Ee(rr,".uniform",vr,"(",on,",",Qa(An)?Array.prototype.slice.call(An):An,");")}continue}else Hr=Ir.append(ke,Ee)}else{if(!Cr(fs))continue;Hr=Ee.def(ar.uniforms,"[",Ae.id(Ne),"]")}yr===Jf?(Tt(!Array.isArray(Hr),"must specify a scalar prop for textures"),Ee("if(",Hr,"&&",Hr,'._reglType==="framebuffer"){',Hr,"=",Hr,".color[0];","}")):yr===rf&&(Tt(!Array.isArray(Hr),"must specify a scalar prop for cube maps"),Ee("if(",Hr,"&&",Hr,'._reglType==="framebufferCube"){',Hr,"=",Hr,".color[0];","}")),Tt.optional(function(){function _s(ku,Wd){ke.assert(Ee,ku,'bad data or missing for uniform "'+Ne+'".  '+Wd)}function yd(ku){Tt(!Array.isArray(Hr),"must not specify an array type for uniform"),_s("typeof "+Hr+'==="'+ku+'"',"invalid type, expected "+ku)}function fu(ku,Wd){Array.isArray(Hr)?Tt(Hr.length===ku,"must have length "+ku):_s(ar.isArrayLike+"("+Hr+")&&"+Hr+".length==="+ku,"invalid vector, should have length "+ku,ke.commandStr)}function Ud(ku){Tt(!Array.isArray(Hr),"must not specify a value type"),_s("typeof "+Hr+'==="function"&&'+Hr+'._reglType==="texture'+(ku===Ul?"2d":"Cube")+'"',"invalid texture type",ke.commandStr)}switch(yr){case Nc:yd("number");break;case xu:fu(2,"number");break;case wf:fu(3,"number");break;case ef:fu(4,"number");break;case Kf:yd("number");break;case Ef:fu(2,"number");break;case Lc:fu(3,"number");break;case Pc:fu(4,"number");break;case xl:yd("boolean");break;case $f:fu(2,"boolean");break;case Rc:fu(3,"boolean");break;case qf:fu(4,"boolean");break;case Qf:fu(4,"number");break;case kc:fu(9,"number");break;case Sf:fu(16,"number");break;case Jf:Ud(Ul);break;case rf:Ud(Wl);break}});var Ca=1;switch(yr){case Jf:case rf:var Xa=Ee.def(Hr,"._texture");Ee(rr,".uniform1i(",on,",",Xa,".bind());"),Ee.exit(Xa,".unbind();");continue;case Nc:case xl:vr="1i";break;case xu:case $f:vr="2i",Ca=2;break;case wf:case Rc:vr="3i",Ca=3;break;case ef:case qf:vr="4i",Ca=4;break;case Kf:vr="1f";break;case Ef:vr="2f",Ca=2;break;case Lc:vr="3f",Ca=3;break;case Pc:vr="4f",Ca=4;break;case Qf:vr="Matrix2fv";break;case kc:vr="Matrix3fv";break;case Sf:vr="Matrix4fv";break}if(Ee(rr,".uniform",vr,"(",on,","),vr.charAt(0)==="M"){var Oi=Math.pow(yr-Qf+2,2),$o=ke.global.def("new Float32Array(",Oi,")");Array.isArray(Hr)?Ee("false,(",In(Oi,function(_s){return $o+"["+_s+"]="+Hr[_s]}),",",$o,")"):Ee("false,(Array.isArray(",Hr,")||",Hr," instanceof Float32Array)?",Hr,":(",In(Oi,function(_s){return $o+"["+_s+"]="+Hr+"["+_s+"]"}),",",$o,")")}else Ca>1?Ee(In(Ca,function(_s){return Array.isArray(Hr)?Hr[_s]:Hr+"["+_s+"]"})):(Tt(!Array.isArray(Hr),"uniform value must not be an array"),Ee(Hr));Ee(");")}}function xa(ke,Ee,er,br){var Cr=ke.shared,ar=Cr.gl,rr=Cr.draw,vr=br.draw;function Be(){var Xa=vr.elements,Oi,$o=Ee;return Xa?((Xa.contextDep&&br.contextDynamic||Xa.propDep)&&($o=er),Oi=Xa.append(ke,$o)):Oi=$o.def(rr,".",$u),Oi&&$o("if("+Oi+")"+ar+".bindBuffer("+Gl+","+Oi+".buffer.buffer);"),Oi}function Qe(){var Xa=vr.count,Oi,$o=Ee;return Xa?((Xa.contextDep&&br.contextDynamic||Xa.propDep)&&($o=er),Oi=Xa.append(ke,$o),Tt.optional(function(){Xa.MISSING&&ke.assert(Ee,"false","missing vertex count"),Xa.DYNAMIC&&ke.assert($o,Oi+">=0","missing vertex count")})):(Oi=$o.def(rr,".",Lu),Tt.optional(function(){ke.assert($o,Oi+">=0","missing vertex count")})),Oi}var Ne=Be();function yr(Xa){var Oi=vr[Xa];return Oi?Oi.contextDep&&br.contextDynamic||Oi.propDep?Oi.append(ke,er):Oi.append(ke,Ee):Ee.def(rr,".",Xa)}var Ir=yr(qu),tn=yr(bf),on=Qe();if(typeof on=="number"){if(on===0)return}else er("if(",on,"){"),er.exit("}");var Hr,An;xt&&(Hr=yr(Ic),An=ke.instancing);var va=Ne+".type",Za=vr.elements&&bu(vr.elements);function fa(){function Xa(){er(An,".drawElementsInstancedANGLE(",[Ir,on,va,tn+"<<(("+va+"-"+tl+")>>1)",Hr],");")}function Oi(){er(An,".drawArraysInstancedANGLE(",[Ir,tn,on,Hr],");")}Ne?Za?Xa():(er("if(",Ne,"){"),Xa(),er("}else{"),Oi(),er("}")):Oi()}function Ca(){function Xa(){er(ar+".drawElements("+[Ir,on,va,tn+"<<(("+va+"-"+tl+")>>1)"]+");")}function Oi(){er(ar+".drawArrays("+[Ir,tn,on]+");")}Ne?Za?Xa():(er("if(",Ne,"){"),Xa(),er("}else{"),Oi(),er("}")):Oi()}xt&&(typeof Hr!="number"||Hr>=0)?typeof Hr=="string"?(er("if(",Hr,">0){"),fa(),er("}else if(",Hr,"<0){"),Ca(),er("}")):fa():Ca()}function ai(ke,Ee,er,br,Cr){var ar=Sn(),rr=ar.proc("body",Cr);return Tt.optional(function(){ar.commandStr=Ee.commandStr,ar.command=ar.link(Ee.commandStr)}),xt&&(ar.instancing=rr.def(ar.shared.extensions,".angle_instanced_arrays")),ke(ar,rr,er,br),ar.compile().body}function bi(ke,Ee,er,br){Yo(ke,Ee),er.useVAO?er.drawVAO?Ee(ke.shared.vao,".setVAO(",er.drawVAO.append(ke,Ee),");"):Ee(ke.shared.vao,".setVAO(",ke.shared.vao,".targetVAO);"):(Ee(ke.shared.vao,".setVAO(null);"),ys(ke,Ee,er,br.attributes,function(){return!0})),Ii(ke,Ee,er,br.uniforms,function(){return!0}),xa(ke,Ee,Ee,er)}function Ko(ke,Ee){var er=ke.proc("draw",1);Yo(ke,er),Fo(ke,er,Ee.context),fo(ke,er,Ee.framebuffer),as(ke,er,Ee),Ms(ke,er,Ee.state),Ka(ke,er,Ee,!1,!0);var br=Ee.shader.progVar.append(ke,er);if(er(ke.shared.gl,".useProgram(",br,".program);"),Ee.shader.program)bi(ke,er,Ee,Ee.shader.program);else{er(ke.shared.vao,".setVAO(null);");var Cr=ke.global.def("{}"),ar=er.def(br,".id"),rr=er.def(Cr,"[",ar,"]");er(ke.cond(rr).then(rr,".call(this,a0);").else(rr,"=",Cr,"[",ar,"]=",ke.link(function(vr){return ai(bi,ke,Ee,vr,1)}),"(",br,");",rr,".call(this,a0);"))}Object.keys(Ee.state).length>0&&er(ke.shared.current,".dirty=true;")}function Ru(ke,Ee,er,br){ke.batchId="a1",Yo(ke,Ee);function Cr(){return!0}ys(ke,Ee,er,br.attributes,Cr),Ii(ke,Ee,er,br.uniforms,Cr),xa(ke,Ee,Ee,er)}function nc(ke,Ee,er,br){Yo(ke,Ee);var Cr=er.contextDep,ar=Ee.def(),rr="a0",vr="a1",Be=Ee.def();ke.shared.props=Be,ke.batchId=ar;var Qe=ke.scope(),Ne=ke.scope();Ee(Qe.entry,"for(",ar,"=0;",ar,"<",vr,";++",ar,"){",Be,"=",rr,"[",ar,"];",Ne,"}",Qe.exit);function yr(va){return va.contextDep&&Cr||va.propDep}function Ir(va){return!yr(va)}if(er.needsContext&&Fo(ke,Ne,er.context),er.needsFramebuffer&&fo(ke,Ne,er.framebuffer),Ms(ke,Ne,er.state,yr),er.profile&&yr(er.profile)&&Ka(ke,Ne,er,!1,!0),br)er.useVAO?er.drawVAO?yr(er.drawVAO)?Ne(ke.shared.vao,".setVAO(",er.drawVAO.append(ke,Ne),");"):Qe(ke.shared.vao,".setVAO(",er.drawVAO.append(ke,Qe),");"):Qe(ke.shared.vao,".setVAO(",ke.shared.vao,".targetVAO);"):(Qe(ke.shared.vao,".setVAO(null);"),ys(ke,Qe,er,br.attributes,Ir),ys(ke,Ne,er,br.attributes,yr)),Ii(ke,Qe,er,br.uniforms,Ir),Ii(ke,Ne,er,br.uniforms,yr),xa(ke,Qe,Ne,er);else{var tn=ke.global.def("{}"),on=er.shader.progVar.append(ke,Ne),Hr=Ne.def(on,".id"),An=Ne.def(tn,"[",Hr,"]");Ne(ke.shared.gl,".useProgram(",on,".program);","if(!",An,"){",An,"=",tn,"[",Hr,"]=",ke.link(function(va){return ai(Ru,ke,er,va,2)}),"(",on,");}",An,".call(this,a0[",ar,"],",ar,");")}}function Ye(ke,Ee){var er=ke.proc("batch",2);ke.batchId="0",Yo(ke,er);var br=!1,Cr=!0;Object.keys(Ee.context).forEach(function(tn){br=br||Ee.context[tn].propDep}),br||(Fo(ke,er,Ee.context),Cr=!1);var ar=Ee.framebuffer,rr=!1;ar?(ar.propDep?br=rr=!0:ar.contextDep&&br&&(rr=!0),rr||fo(ke,er,ar)):fo(ke,er,null),Ee.state.viewport&&Ee.state.viewport.propDep&&(br=!0);function vr(tn){return tn.contextDep&&br||tn.propDep}as(ke,er,Ee),Ms(ke,er,Ee.state,function(tn){return!vr(tn)}),(!Ee.profile||!vr(Ee.profile))&&Ka(ke,er,Ee,!1,"a1"),Ee.contextDep=br,Ee.needsContext=Cr,Ee.needsFramebuffer=rr;var Be=Ee.shader.progVar;if(Be.contextDep&&br||Be.propDep)nc(ke,er,Ee,null);else{var Qe=Be.append(ke,er);if(er(ke.shared.gl,".useProgram(",Qe,".program);"),Ee.shader.program)nc(ke,er,Ee,Ee.shader.program);else{er(ke.shared.vao,".setVAO(null);");var Ne=ke.global.def("{}"),yr=er.def(Qe,".id"),Ir=er.def(Ne,"[",yr,"]");er(ke.cond(Ir).then(Ir,".call(this,a0,a1);").else(Ir,"=",Ne,"[",yr,"]=",ke.link(function(tn){return ai(nc,ke,Ee,tn,2)}),"(",Qe,");",Ir,".call(this,a0,a1);"))}}Object.keys(Ee.state).length>0&&er(ke.shared.current,".dirty=true;")}function Yr(ke,Ee){var er=ke.proc("scope",3);ke.batchId="a2";var br=ke.shared,Cr=br.current;Fo(ke,er,Ee.context),Ee.framebuffer&&Ee.framebuffer.append(ke,er),Ml(Object.keys(Ee.state)).forEach(function(rr){var vr=Ee.state[rr],Be=vr.append(ke,er);Qa(Be)?Be.forEach(function(Qe,Ne){er.set(ke.next[rr],"["+Ne+"]",Qe)}):er.set(br.next,"."+rr,Be)}),Ka(ke,er,Ee,!0,!0),[$u,bf,Lu,Ic,qu].forEach(function(rr){var vr=Ee.draw[rr];vr&&er.set(br.draw,"."+rr,""+vr.append(ke,er))}),Object.keys(Ee.uniforms).forEach(function(rr){var vr=Ee.uniforms[rr].append(ke,er);Array.isArray(vr)&&(vr="["+vr.join()+"]"),er.set(br.uniforms,"["+Ae.id(rr)+"]",vr)}),Object.keys(Ee.attributes).forEach(function(rr){var vr=Ee.attributes[rr].append(ke,er),Be=ke.scopeAttrib(rr);Object.keys(new st).forEach(function(Qe){er.set(Be,"."+Qe,vr[Qe])})}),Ee.scopeVAO&&er.set(br.vao,".targetVAO",Ee.scopeVAO.append(ke,er));function ar(rr){var vr=Ee.shader[rr];vr&&er.set(br.shader,"."+rr,vr.append(ke,er))}ar(Du),ar(Ku),Object.keys(Ee.state).length>0&&(er(Cr,".dirty=true;"),er.exit(Cr,".dirty=true;")),er("a1(",ke.shared.context,",a0,",ke.batchId,");")}function kr(ke){if(!(typeof ke!="object"||Qa(ke))){for(var Ee=Object.keys(ke),er=0;er<Ee.length;++er)if($e.isDynamic(ke[Ee[er]]))return!0;return!1}}function na(ke,Ee,er){var br=Ee.static[er];if(!br||!kr(br))return;var Cr=ke.global,ar=Object.keys(br),rr=!1,vr=!1,Be=!1,Qe=ke.global.def("{}");ar.forEach(function(yr){var Ir=br[yr];if($e.isDynamic(Ir)){typeof Ir=="function"&&(Ir=br[yr]=$e.unbox(Ir));var tn=ms(Ir,null);rr=rr||tn.thisDep,Be=Be||tn.propDep,vr=vr||tn.contextDep}else{switch(Cr(Qe,".",yr,"="),typeof Ir){case"number":Cr(Ir);break;case"string":Cr('"',Ir,'"');break;case"object":Array.isArray(Ir)&&Cr("[",Ir.join(),"]");break;default:Cr(ke.link(Ir));break}Cr(";")}});function Ne(yr,Ir){ar.forEach(function(tn){var on=br[tn];if($e.isDynamic(on)){var Hr=yr.invoke(Ir,on);Ir(Qe,".",tn,"=",Hr,";")}})}Ee.dynamic[er]=new $e.DynamicVariable(Bs,{thisDep:rr,contextDep:vr,propDep:Be,ref:Qe,append:Ne}),delete Ee.static[er]}function ii(ke,Ee,er,br,Cr){var ar=Sn();ar.stats=ar.link(Cr),Object.keys(Ee.static).forEach(function(vr){na(ar,Ee,vr)}),gl.forEach(function(vr){na(ar,ke,vr)});var rr=li(ke,Ee,er,br,ar);return Ko(ar,rr),Yr(ar,rr),Ye(ar,rr),C(ar.compile(),{destroy:function(){rr.shader.program.destroy()}})}return{next:Kt,current:zt,procs:function(){var ke=Sn(),Ee=ke.proc("poll"),er=ke.proc("refresh"),br=ke.block();Ee(br),er(br);var Cr=ke.shared,ar=Cr.gl,rr=Cr.next,vr=Cr.current;br(vr,".dirty=false;"),fo(ke,Ee),fo(ke,er,null,!0);var Be;xt&&(Be=ke.link(xt)),je.oes_vertex_array_object&&er(ke.link(je.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Qe=0;Qe<zr.maxAttributes;++Qe){var Ne=er.def(Cr.attributes,"[",Qe,"]"),yr=ke.cond(Ne,".buffer");yr.then(ar,".enableVertexAttribArray(",Qe,");",ar,".bindBuffer(",Ju,",",Ne,".buffer.buffer);",ar,".vertexAttribPointer(",Qe,",",Ne,".size,",Ne,".type,",Ne,".normalized,",Ne,".stride,",Ne,".offset);").else(ar,".disableVertexAttribArray(",Qe,");",ar,".vertexAttrib4f(",Qe,",",Ne,".x,",Ne,".y,",Ne,".z,",Ne,".w);",Ne,".buffer=null;"),er(yr),xt&&er(Be,".vertexAttribDivisorANGLE(",Qe,",",Ne,".divisor);")}return er(ke.shared.vao,".currentVAO=null;",ke.shared.vao,".setVAO(",ke.shared.vao,".targetVAO);"),Object.keys(Te).forEach(function(Ir){var tn=Te[Ir],on=br.def(rr,".",Ir),Hr=ke.block();Hr("if(",on,"){",ar,".enable(",tn,")}else{",ar,".disable(",tn,")}",vr,".",Ir,"=",on,";"),er(Hr),Ee("if(",on,"!==",vr,".",Ir,"){",Hr,"}")}),Object.keys(be).forEach(function(Ir){var tn=be[Ir],on=zt[Ir],Hr,An,va=ke.block();if(va(ar,".",tn,"("),Qa(on)){var Za=on.length;Hr=ke.global.def(rr,".",Ir),An=ke.global.def(vr,".",Ir),va(In(Za,function(fa){return Hr+"["+fa+"]"}),");",In(Za,function(fa){return An+"["+fa+"]="+Hr+"["+fa+"];"}).join("")),Ee("if(",In(Za,function(fa){return Hr+"["+fa+"]!=="+An+"["+fa+"]"}).join("||"),"){",va,"}")}else Hr=br.def(rr,".",Ir),An=br.def(vr,".",Ir),va(Hr,");",vr,".",Ir,"=",Hr,";"),Ee("if(",Hr,"!==",An,"){",va,"}");er(va)}),ke.compile()}(),compile:ii}}function sf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Gd=34918,zc=34919,cs=35007,gd=function(Rt,Ae){if(!Ae.ext_disjoint_timer_query)return null;var je=[];function zr(){return je.pop()||Ae.ext_disjoint_timer_query.createQueryEXT()}function rn(xt){je.push(xt)}var Fr=[];function jr(xt){var Ot=zr();Ae.ext_disjoint_timer_query.beginQueryEXT(cs,Ot),Fr.push(Ot),N(Fr.length-1,Fr.length,xt)}function bn(){Ae.ext_disjoint_timer_query.endQueryEXT(cs)}function _n(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Cn=[];function wn(){return Cn.pop()||new _n}function Bn(xt){Cn.push(xt)}var v=[];function N(xt,Ot,zt){var Kt=wn();Kt.startQueryIndex=xt,Kt.endQueryIndex=Ot,Kt.sum=0,Kt.stats=zt,v.push(Kt)}var K=[],st=[];function ht(){var xt,Ot,zt=Fr.length;if(zt!==0){st.length=Math.max(st.length,zt+1),K.length=Math.max(K.length,zt+1),K[0]=0,st[0]=0;var Kt=0;for(xt=0,Ot=0;Ot<Fr.length;++Ot){var fe=Fr[Ot];Ae.ext_disjoint_timer_query.getQueryObjectEXT(fe,zc)?(Kt+=Ae.ext_disjoint_timer_query.getQueryObjectEXT(fe,Gd),rn(fe)):Fr[xt++]=fe,K[Ot+1]=Kt,st[Ot+1]=xt}for(Fr.length=xt,xt=0,Ot=0;Ot<v.length;++Ot){var Te=v[Ot],be=Te.startQueryIndex,We=Te.endQueryIndex;Te.sum+=K[We]-K[be];var cr=st[be],Vr=st[We];Vr===cr?(Te.stats.gpuTime+=Te.sum/1e6,Bn(Te)):(Te.startQueryIndex=cr,Te.endQueryIndex=Vr,v[xt++]=Te)}v.length=xt}}return{beginQuery:jr,endQuery:bn,pushScopeStats:N,update:ht,getNumPendingQueries:function(){return Fr.length},clear:function(){je.push.apply(je,Fr);for(var xt=0;xt<je.length;xt++)Ae.ext_disjoint_timer_query.deleteQueryEXT(je[xt]);Fr.length=0,je.length=0},restore:function(){Fr.length=0,je.length=0}}},rd=16384,md=256,Nu=1024,_l=34962,Gc="webglcontextlost",rc="webglcontextrestored",Uc=1,nd=2,Eu=3;function Cl(Rt,Ae){for(var je=0;je<Rt.length;++je)if(Rt[je]===Ae)return je;return-1}function Mf(Rt){var Ae=Wn(Rt);if(!Ae)return null;var je=Ae.gl,zr=je.getContextAttributes(),rn=je.isContextLost(),Fr=Mn(je,Ae);if(!Fr)return null;var jr=gn(),bn=sf(),_n=Fr.extensions,Cn=gd(je,_n),wn=qr(),Bn=je.drawingBufferWidth,v=je.drawingBufferHeight,N={tick:0,time:0,viewportWidth:Bn,viewportHeight:v,framebufferWidth:Bn,framebufferHeight:v,drawingBufferWidth:Bn,drawingBufferHeight:v,pixelRatio:Ae.pixelRatio},K={},st={elements:null,primitive:4,count:-1,offset:0,instances:-1},ht=Ni(je,_n),xt=pa(je,bn,Ae,zt),Ot=Ec(je,_n,ht,bn,xt);function zt(xa){return Ot.destroyBuffer(xa)}var Kt=os(je,_n,xt,bn),fe=wc(je,jr,bn,Ae),Te=yc(je,_n,ht,function(){cr.procs.poll()},N,bn,Ae),be=Nt(je,_n,ht,bn,Ae),We=Ff(je,_n,ht,Te,be,bn),cr=Fc(je,jr,_n,ht,xt,Kt,Te,We,K,Ot,fe,st,N,Cn,Ae),Vr=cd(je,We,cr.procs.poll,N,zr,_n,ht),mr=cr.next,wr=je.canvas,Er=[],Sn=[],Yn=[],Nn=[Ae.onDestroy],la=null;function ua(){if(Er.length===0){Cn&&Cn.update(),la=null;return}la=Tr.next(ua),Ms();for(var xa=Er.length-1;xa>=0;--xa){var ai=Er[xa];ai&&ai(N,null,0)}je.flush(),Cn&&Cn.update()}function wa(){!la&&Er.length>0&&(la=Tr.next(ua))}function Ba(){la&&(Tr.cancel(ua),la=null)}function Ia(xa){xa.preventDefault(),rn=!0,Ba(),Sn.forEach(function(ai){ai()})}function uo(xa){je.getError(),rn=!1,Fr.restore(),fe.restore(),xt.restore(),Te.restore(),be.restore(),We.restore(),Ot.restore(),Cn&&Cn.restore(),cr.procs.refresh(),wa(),Yn.forEach(function(ai){ai()})}wr&&(wr.addEventListener(Gc,Ia,!1),wr.addEventListener(rc,uo,!1));function Ua(){Er.length=0,Ba(),wr&&(wr.removeEventListener(Gc,Ia),wr.removeEventListener(rc,uo)),fe.clear(),We.clear(),be.clear(),Te.clear(),Kt.clear(),xt.clear(),Ot.clear(),Cn&&Cn.clear(),Nn.forEach(function(xa){xa()})}function Do(xa){Tt(!!xa,"invalid args to regl({...})"),Tt.type(xa,"object","invalid args to regl({...})");function ai(Cr){var ar=C({},Cr);delete ar.uniforms,delete ar.attributes,delete ar.context,delete ar.vao,"stencil"in ar&&ar.stencil.op&&(ar.stencil.opBack=ar.stencil.opFront=ar.stencil.op,delete ar.stencil.op);function rr(vr){if(vr in ar){var Be=ar[vr];delete ar[vr],Object.keys(Be).forEach(function(Qe){ar[vr+"."+Qe]=Be[Qe]})}}return rr("blend"),rr("depth"),rr("cull"),rr("stencil"),rr("polygonOffset"),rr("scissor"),rr("sample"),"vao"in Cr&&(ar.vao=Cr.vao),ar}function bi(Cr,ar){var rr={},vr={};return Object.keys(Cr).forEach(function(Be){var Qe=Cr[Be];if($e.isDynamic(Qe)){vr[Be]=$e.unbox(Qe,Be);return}else if(ar&&Array.isArray(Qe)){for(var Ne=0;Ne<Qe.length;++Ne)if($e.isDynamic(Qe[Ne])){vr[Be]=$e.unbox(Qe,Be);return}}rr[Be]=Qe}),{dynamic:vr,static:rr}}var Ko=bi(xa.context||{},!0),Ru=bi(xa.uniforms||{},!0),nc=bi(xa.attributes||{},!1),Ye=bi(ai(xa),!1),Yr={gpuTime:0,cpuTime:0,count:0},kr=cr.compile(Ye,nc,Ru,Ko,Yr),na=kr.draw,ii=kr.batch,ke=kr.scope,Ee=[];function er(Cr){for(;Ee.length<Cr;)Ee.push(null);return Ee}function br(Cr,ar){var rr;if(rn&&Tt.raise("context lost"),typeof Cr=="function")return ke.call(this,null,Cr,0);if(typeof ar=="function")if(typeof Cr=="number")for(rr=0;rr<Cr;++rr)ke.call(this,null,ar,rr);else if(Array.isArray(Cr))for(rr=0;rr<Cr.length;++rr)ke.call(this,Cr[rr],ar,rr);else return ke.call(this,Cr,ar,0);else if(typeof Cr=="number"){if(Cr>0)return ii.call(this,er(Cr|0),Cr|0)}else if(Array.isArray(Cr)){if(Cr.length)return ii.call(this,Cr,Cr.length)}else return na.call(this,Cr)}return C(br,{stats:Yr,destroy:function(){kr.destroy()}})}var Hi=We.setFBO=Do({framebuffer:$e.define.call(null,Uc,"framebuffer")});function li(xa,ai){var bi=0;cr.procs.poll();var Ko=ai.color;Ko&&(je.clearColor(+Ko[0]||0,+Ko[1]||0,+Ko[2]||0,+Ko[3]||0),bi|=rd),"depth"in ai&&(je.clearDepth(+ai.depth),bi|=md),"stencil"in ai&&(je.clearStencil(ai.stencil|0),bi|=Nu),Tt(!!bi,"called regl.clear with no buffer specified"),je.clear(bi)}function Fo(xa){if(Tt(typeof xa=="object"&&xa,"regl.clear() takes an object as input"),"framebuffer"in xa)if(xa.framebuffer&&xa.framebuffer_reglType==="framebufferCube")for(var ai=0;ai<6;++ai)Hi(C({framebuffer:xa.framebuffer.faces[ai]},xa),li);else Hi(xa,li);else li(null,xa)}function fo(xa){Tt.type(xa,"function","regl.frame() callback must be a function"),Er.push(xa);function ai(){var bi=Cl(Er,xa);Tt(bi>=0,"cannot cancel a frame twice");function Ko(){var Ru=Cl(Er,Ko);Er[Ru]=Er[Er.length-1],Er.length-=1,Er.length<=0&&Ba()}Er[bi]=Ko}return wa(),{cancel:ai}}function as(){var xa=mr.viewport,ai=mr.scissor_box;xa[0]=xa[1]=ai[0]=ai[1]=0,N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=xa[2]=ai[2]=je.drawingBufferWidth,N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=xa[3]=ai[3]=je.drawingBufferHeight}function Ms(){N.tick+=1,N.time=Ka(),as(),cr.procs.poll()}function Yo(){Te.refresh(),as(),cr.procs.refresh(),Cn&&Cn.update()}function Ka(){return(qr()-wn)/1e3}Yo();function ys(xa,ai){Tt.type(ai,"function","listener callback must be a function");var bi;switch(xa){case"frame":return fo(ai);case"lost":bi=Sn;break;case"restore":bi=Yn;break;case"destroy":bi=Nn;break;default:Tt.raise("invalid event, must be one of frame,lost,restore,destroy")}return bi.push(ai),{cancel:function(){for(var Ko=0;Ko<bi.length;++Ko)if(bi[Ko]===ai){bi[Ko]=bi[bi.length-1],bi.pop();return}}}}var Ii=C(Do,{clear:Fo,prop:$e.define.bind(null,Uc),context:$e.define.bind(null,nd),this:$e.define.bind(null,Eu),draw:Do({}),buffer:function(xa){return xt.create(xa,_l,!1,!1)},elements:function(xa){return Kt.create(xa,!1)},texture:Te.create2D,cube:Te.createCube,renderbuffer:be.create,framebuffer:We.create,framebufferCube:We.createCube,vao:Ot.createVAO,attributes:zr,frame:fo,on:ys,limits:ht,hasExtension:function(xa){return ht.extensions.indexOf(xa.toLowerCase())>=0},read:Vr,destroy:Ua,_gl:je,_refresh:Yo,poll:function(){Ms(),Cn&&Cn.update()},now:Ka,stats:bn});return Ae.onDone(null,Ii),Ii}return Mf})},952191:function(Ve,z){"use strict";var C;C={value:!0},C=Y,z.Rs=b,C=h,C=$,z.Yf=U,z.Lo=W,z.lu=H,z.hy=q,z.Lq=tt,C=rt,z.dt=ft,z.GX=it,C=bt,z.Ck=Xt,z.YJ=Ct,C=At,C=Z,C=J,C=yt;var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k=["Webkit","ms","Moz","O"];function w(_t,nt){return _t+nt.charAt(0).toUpperCase()+nt.substring(1)}Object.keys(x).forEach(function(_t){k.forEach(function(nt){x[w(nt,_t)]=x[_t]})});var T=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/,L=function(){return typeof document=="undefined"?!1:!!(navigator&&(navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0))}(),P=1e5,p={aqua:[0,255,255,1],lime:[0,255,0,1],silver:[192,192,192,1],black:[0,0,0,1],maroon:[128,0,0,1],teal:[0,128,128,1],blue:[0,0,255,1],navy:[0,0,128,1],white:[255,255,255,1],fuchsia:[255,0,255,1],olive:[128,128,0,1],yellow:[255,255,0,1],orange:[255,165,0,1],gray:[128,128,128,1],purple:[128,0,128,1],green:[0,128,0,1],red:[255,0,0,1],pink:[255,192,203,1],cyan:[0,255,255,1],transparent:[255,255,255,0]},m=Math.PI/180,S=180/Math.PI,y={_lists:{transformsBase:["translate","translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ","rotate"],transforms3D:["translate3d","translateZ","scaleZ","rotateX","rotateY","perspective"]},transformGroup:{translate:1,translate3d:1,scale:1,scale3d:1,rotate:1,rotate3d:1,skew:1},filter:["grayScale","sepia","hueRotate","invert","brightness","contrast","blur"],filterConvert:{grayScale:"grayscale",hueRotate:"hue-rotate"}};y._lists.transformsBase=L?y._lists.transformsBase:y._lists.transformsBase.concat(y._lists.transforms3D);var g=C=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})/,A=C=/((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|%|))(,[\s+]?(?:\d|\.\d)+(?:(deg|\%|)))?\)/,E=z.rV=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})|((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|%)?)(,[\s+]?(?:\d|\.\d)+(?:(deg|\%)?))?\)/,D=C=/(?:\d|\.\d)+(%?)/g,F=z._T=y;function Y(_t){return _t.replace(/[A-Z]/,function(nt){return"-"+nt.toLocaleLowerCase()})}function b(_t){return _t.replace(/-(.?)/g,function(nt){return nt.replace("-","").toLocaleUpperCase()})}function h(_t,nt){var vt=nt?Math.pow(10,nt):P,It=_t|0,Pt=_t-It,St=_t;if(Pt){var Dt=(Pt*vt+(_t<0?-.5:.5)|0)/vt,Qt=Dt|0,ue=Dt.toString(),ie=ue.split(".")[1]||"";St=(_t<0&&!(It+Qt)?"-":"")+(It+Qt)+"."+ie}return parseFloat(St)}function $(_t){if(typeof document=="undefined")return null;var nt=["WebKitCSS","MozCSS","DOM","MsCSS","MSCSS","OCSS","CSS"].filter(function(vt){return vt+"Matrix"in window});return nt.length?new window[nt[0]+"Matrix"](_t):(console.warn("Browsers do not support matrix."),"")}function U(_t){if(typeof document=="undefined")return null;var nt=["O","Moz","ms","Ms","Webkit"];if(_t!=="filter"&&_t in document.body.style)return _t;var vt=_t.charAt(0).toUpperCase()+_t.substr(1),It=nt.filter(function(Pt){return""+Pt+vt in document.body.style});return It[0]?""+It[0]+vt:null}function W(_t){var nt=_t;return nt=nt==="x"?"translateX":nt,nt=nt==="y"?"translateY":nt,nt=nt==="z"?"translateZ":nt,nt}var V=function(nt,vt,It){return It<0&&(It+=6),It>=6&&(It-=6),It<1?(vt-nt)*It+nt:It<3?vt:It<4?(vt-nt)*(4-It)+nt:nt};function H(_t){var nt=p.transparent,vt=_t,It=void 0,Pt=void 0,St=void 0;if(!vt)nt=p.transparent;else if(p[vt])nt=p[vt];else if(typeof vt=="number")nt=[vt>>16,vt>>8&255,vt&255];else if(vt.charAt(vt.length-1)===","&&(vt=vt.substr(0,vt.length-1)),vt.match(g))vt=vt.substr(1),vt.length===3&&(It=vt.charAt(0),Pt=vt.charAt(1),St=vt.charAt(2),vt=""+It+It+Pt+Pt+St+St+"ff"),vt.length===6&&(vt+="ff"),vt=parseInt(vt,16),nt=[vt>>24&255,vt>>16&255,vt>>8&255,parseFloat(((vt&255)/255).toFixed(2))];else if(vt.match(/^hsl/)){nt=vt.match(D);var Dt=nt[3];Dt=typeof Dt=="string"&&Dt.match("%")?parseFloat(Dt)/100:parseFloat(""+(Dt||"1"));var Qt=parseFloat(nt[0])/60,ue=parseFloat(nt[1])/100,ie=parseFloat(nt[2])/100,Lt=ie<=.5?ie*(ue+1):ie+ue-ie*ue,ne=ie*2-Lt;It=Math.round(V(ne,Lt,Qt+2)*255),Pt=Math.round(V(ne,Lt,Qt)*255),St=Math.round(V(ne,Lt,Qt-2)*255),nt=[It,Pt,St,Dt]}else nt=vt.match(D)||p.transparent,nt=nt.map(function(ve){return parseFloat(ve)}),nt.length===3&&nt.push(1);return nt}function q(_t,nt){var vt=nt&&b(nt);if(!_t)return vt==="boxShadow"?[0,0,0,0,0,0,0,0]:[0,0,0,0,0,0,0];var It=_t.replace(/,\s+/gi,",").split(/\s+/).filter(function(ue){return ue}),Pt=It.indexOf("inset");Pt>=0&&It.splice(Pt,1);var St=It.find(function(ue){return p[ue]||ue.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|(rgb|hsl)+(?:a)?\((.*)\)/i)})||"black",Dt=It.indexOf(St);It.splice(Dt,1);var Qt=H(St);return Qt[3]=typeof Qt[3]=="number"?Qt[3]:1,vt==="boxShadow"&&It.length<4&&It.push(0),It.concat(Qt,Pt>=0?["inset"]:[])}function tt(_t){var nt=_t.length===4?"rgba":"rgb",vt=_t.map(function(It,Pt){return Pt<3?Math.round(It):It});return nt+"("+vt.join(",")+")"}function rt(_t){return F._lists.transformsBase.indexOf(_t)>=0?"transform":_t}function ft(_t){var nt=rt(_t);return F.filter.indexOf(nt)>=0?"filter":nt}function it(_t){if(_t==="none"||!_t||_t==="")return null;var nt=_t.replace(/\s+/g,"").split(")").filter(function(It){return It}),vt={};return nt.forEach(function(It){var Pt=It.split("(");vt[Pt[0]]=Pt[1]}),vt}function bt(_t){var nt=_t.match(/(?:\-|\b)[\d\-\.e]+\b/gi),vt={};return nt.length===6?(vt.m11=parseFloat(nt[0]),vt.m12=parseFloat(nt[1]),vt.m13=0,vt.m14=0,vt.m21=parseFloat(nt[2]),vt.m22=parseFloat(nt[3]),vt.m23=0,vt.m24=0,vt.m31=0,vt.m32=0,vt.m33=1,vt.m34=0,vt.m41=parseFloat(nt[4]),vt.m42=parseFloat(nt[5]),vt.m43=0,vt.m44=0):nt.forEach(function(It,Pt){var St=Pt%4+1,Dt=Math.floor(Pt/4)+1;vt["m"+Dt+St]=parseFloat(It)}),vt}function gt(_t){var nt={};return nt.translateX=0,nt.translateY=0,nt.translateZ=0,nt.rotate=0,nt.rotateX=0,nt.rotateY=0,nt.scaleX=1,nt.scaleY=1,nt.scaleZ=1,nt.skewX=0,nt.skewY=0,nt.perspective=0,(_t.trim().match(/(\w+)\([^\)]+\)/ig)||[]).forEach(function(vt){var It=vt.split("("),Pt=It[0].trim(),St=It[1].replace(")","").trim();St.match(/%|em|rem/ig)&&console.warn("value("+St+") must be absolute, not relative, has been converted to absolute."),St=St.replace(/px|deg|\)/ig,""),F.transformGroup[Pt]&&Pt!=="rotate"?(St=St.split(",").map(function(Dt){return parseFloat(Dt)}),Pt==="scale3d"||Pt==="translate3d"?["X","Y","Z"].forEach(function(Dt,Qt){var ue=Pt.substring(0,Pt.length-2);nt[""+ue+Dt]=St[Qt]||nt[""+ue+Dt]}):Pt==="rotate3d"?(nt.rotateX=St[0]&&St[3]||nt.rotateX,nt.rotateY=St[1]&&St[3]||nt.rotateY,nt.rotate=St[2]&&St[3]||nt.rotate):["X","Y"].forEach(function(Dt,Qt){nt[""+Pt+Dt]=St[Qt]||nt[""+Pt+Dt]})):Pt==="rotateZ"?nt.rotate=parseFloat(St)||nt.rotate:nt[Pt]=parseFloat(St)||nt[Pt]}),nt}function Xt(_t){var nt=!_t||_t==="none"||_t===""?"matrix(1, 0, 0, 1, 0, 0)":_t;if(!nt.match("matrix"))return gt(_t);var vt=bt(nt),It=vt.m11,Pt=vt.m12,St=vt.m13,Dt=vt.m14,Qt=vt.m21,ue=vt.m22,ie=vt.m23,Lt=vt.m24,ne=vt.m31,ve=vt.m32,Wt=vt.m33,ae=vt.m34,Ce=vt.m43,xe=void 0,Jt=void 0,we=void 0,Tt={},Pe=Math.atan2(ie,Wt),_r=Math.tan(Qt),Ar=Math.tan(Pt),Or=void 0,Br=void 0;return Tt.rotateX=h(Pe*S)||0,Pe&&(Or=Math.cos(-Pe),Br=Math.sin(-Pe),xe=Qt*Or+ne*Br,Jt=ue*Or+ve*Br,we=ie*Or+Wt*Br,ne=Qt*-Br+ne*Or,ve=ue*-Br+ve*Or,Wt=ie*-Br+Wt*Or,ae=Lt*-Br+ae*Or,Qt=xe,ue=Jt,ie=we),Pe=Math.atan2(-St,Wt),Tt.rotateY=h(Pe*S)||0,Pe&&(Or=Math.cos(-Pe),Br=Math.sin(-Pe),xe=It*Or-ne*Br,Jt=Pt*Or-ve*Br,we=St*Or-Wt*Br,ve=Pt*Br+ve*Or,Wt=St*Br+Wt*Or,ae=Dt*Br+ae*Or,It=xe,Pt=Jt,St=we),Pe=Math.atan2(Pt,It),Tt.rotate=h(Pe*S)||0,Pe&&(Or=Math.cos(Pe),Br=Math.sin(Pe),xe=It*Or+Pt*Br,Jt=Qt*Or+ue*Br,we=ne*Or+ve*Br,Pt=Pt*Or-It*Br,ue=ue*Or-Qt*Br,ve=ve*Or-ne*Br,It=xe,Qt=Jt,ne=we),Tt.rotateX&&Math.abs(Tt.rotateX)+Math.abs(Tt.rotate)>359.9&&(Tt.rotateX=Tt.rotate=0,Tt.rotateY=180-Tt.rotateY||0),Tt.scaleX=h(Math.sqrt(It*It+Pt*Pt+St*St)),Tt.scaleY=h(Math.sqrt(ue*ue+ie*ie)),Tt.scaleZ=h(Math.sqrt(ne*ne+ve*ve+Wt*Wt)),Tt.skewX=_r===-Ar?0:_r,Tt.skewY=Ar===-_r?0:Ar,Tt.perspective=ae?1/(ae<0?-ae:ae):0,Tt.translateX=vt.m41,Tt.translateY=vt.m42,Tt.translateZ=Ce,Tt}function Ct(_t,nt){var vt=void 0;return!x[_t]&&typeof nt=="number"?vt=" "+nt+"px":_t==="content"&&!T.test(nt)&&(vt="'"+nt.replace(/'/g,"\\'")+"'"),vt||nt}function At(_t,nt){var vt=nt&&nt.toString().replace(/[^a-z|%]/ig,""),It="";return _t.indexOf("translate")>=0||_t.indexOf("perspective")>=0||_t.indexOf("blur")>=0?It="px":(_t.indexOf("skew")>=0||_t.indexOf("rotate")>=0)&&(It="deg"),vt||It}function Z(_t,nt,vt){return _t+"("+nt+(vt||"")+")"}function J(_t,nt){var vt=null;return _t&&_t.forEach(function(It){if(!vt){var Pt=It.split("(")[0],St=Pt in F.transformGroup&&nt.substring(0,nt.length-1).indexOf(Pt)>=0,Dt=nt in F.transformGroup&&Pt.substring(0,Pt.length-1).indexOf(nt)>=0,Qt=Pt in F.transformGroup&&nt in F.transformGroup&&(Pt.substring(0,Pt.length-2)===nt||nt.substring(0,nt.length-2)===Pt);(Pt===nt||St||Dt||Qt)&&(vt=It)}}),vt}function yt(_t,nt){if(!_t||_t==="")return nt;if(!nt||nt==="")return _t;var vt=_t.replace(/\s/g,"").split(")").filter(function(Pt){return Pt!==""&&Pt}).map(function(Pt){return Pt+")"}),It=nt.replace(/\s/g,"").split(")").filter(function(Pt){return Pt!==""&&Pt});return It.forEach(function(Pt){var St=Pt.split("("),Dt=St[0],Qt=J(vt,Dt);if(!Qt)vt.push(Pt+")");else{var ue=vt.indexOf(Qt);vt[ue]=Pt+")"}}),vt.forEach(function(Pt,St){Pt.indexOf("perspective")>=0&&St&&(vt.splice(St,1),vt.unshift(Pt))}),vt.join(" ").trim()}},141e3:function(Ve){"use strict";var z={linear:function(C,x,k,w){var T=k-x;return T*C/w+x},easeInQuad:function(C,x,k,w){var T=k-x;return T*(C/=w)*C+x},easeOutQuad:function(C,x,k,w){var T=k-x;return-T*(C/=w)*(C-2)+x},easeInOutQuad:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C+x:-T/2*(--C*(C-2)-1)+x},easeInCubic:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C+x},easeOutCubic:function(C,x,k,w){var T=k-x;return T*((C=C/w-1)*C*C+1)+x},easeInOutCubic:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C+x:T/2*((C-=2)*C*C+2)+x},easeInQuart:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C*C+x},easeOutQuart:function(C,x,k,w){var T=k-x;return-T*((C=C/w-1)*C*C*C-1)+x},easeInOutQuart:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C*C+x:-T/2*((C-=2)*C*C*C-2)+x},easeInQuint:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C*C*C+x},easeOutQuint:function(C,x,k,w){var T=k-x;return T*((C=C/w-1)*C*C*C*C+1)+x},easeInOutQuint:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C*C*C+x:T/2*((C-=2)*C*C*C*C+2)+x},easeInSine:function(C,x,k,w){var T=k-x;return-T*Math.cos(C/w*(Math.PI/2))+T+x},easeOutSine:function(C,x,k,w){var T=k-x;return T*Math.sin(C/w*(Math.PI/2))+x},easeInOutSine:function(C,x,k,w){var T=k-x;return-T/2*(Math.cos(Math.PI*C/w)-1)+x},easeInExpo:function(C,x,k,w){var T=k-x;return C==0?x:T*Math.pow(2,10*(C/w-1))+x},easeOutExpo:function(C,x,k,w){var T=k-x;return C==w?x+T:T*(-Math.pow(2,-10*C/w)+1)+x},easeInOutExpo:function(C,x,k,w){var T=k-x;return C===0?x:C===w?x+T:(C/=w/2)<1?T/2*Math.pow(2,10*(C-1))+x:T/2*(-Math.pow(2,-10*--C)+2)+x},easeInCirc:function(C,x,k,w){var T=k-x;return-T*(Math.sqrt(1-(C/=w)*C)-1)+x},easeOutCirc:function(C,x,k,w){var T=k-x;return T*Math.sqrt(1-(C=C/w-1)*C)+x},easeInOutCirc:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?-T/2*(Math.sqrt(1-C*C)-1)+x:T/2*(Math.sqrt(1-(C-=2)*C)+1)+x},easeInElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w)===1?x+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),-(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+x)},easeOutElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w)===1?x+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),L*Math.pow(2,-10*C)*Math.sin((C*w-p)*(2*Math.PI)/P)+T+x)},easeInOutElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w/2)===2?x+T:(P||(P=w*.44999999999999996),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),C<1?-.5*(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+x:L*Math.pow(2,-10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P)*.5+T+x)},easeInBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),L*(C/=w)*C*((T+1)*C-T)+x},easeOutBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),L*((C=C/w-1)*C*((T+1)*C+T)+1)+x},easeInOutBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),(C/=w/2)<1?L/2*(C*C*(((T*=1.525)+1)*C-T))+x:L/2*((C-=2)*C*(((T*=1.525)+1)*C+T)+2)+x},easeInBounce:function(C,x,k,w){var T=k-x,L;return L=z.easeOutBounce(w-C,0,T,w),T-L+x},easeOutBounce:function(C,x,k,w){var T=k-x;return(C/=w)<.36363636363636365?T*(7.5625*C*C)+x:C<.7272727272727273?T*(7.5625*(C-=.5454545454545454)*C+.75)+x:C<.9090909090909091?T*(7.5625*(C-=.8181818181818182)*C+.9375)+x:T*(7.5625*(C-=.9545454545454546)*C+.984375)+x},easeInOutBounce:function(C,x,k,w){var T=k-x,L;return C<w/2?(L=z.easeInBounce(C*2,0,T,w),L*.5+x):(L=z.easeOutBounce(C*2-w,0,T,w),L*.5+T*.5+x)}};Ve.exports=z},364687:function(Ve,z,C){var x=C(817061)();Ve.exports=x;try{regeneratorRuntime=x}catch(k){typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}},577134:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return D}});var x=C(667294),k=C(785893),w=F=>{let Y=F;for(;Y=Y.parentElement;){const b=getComputedStyle(Y,null).getPropertyValue("overflow-y");if(Y===document.body)return window;if(b==="auto"||b==="scroll"||b==="overlay")return Y}return window},T=F=>F.firstChild?F.firstChild.offsetParent===F:!0,L=(F,Y)=>{let b=F,h=0;T(Y)||(h+=F.offsetTop-Y.offsetTop,Y=F.offsetParent,h+=-F.offsetTop);do h+=b.offsetTop,b=b.offsetParent;while(b&&b!==Y);return h},P=F=>{let Y=F.parentElement;for(;Y&&getComputedStyle(Y,null).getPropertyValue("display")==="contents";)Y=Y.parentElement;return Y||window},p=null;typeof CSS!="undefined"&&CSS.supports&&(CSS.supports("position","sticky")?p="sticky":CSS.supports("position","-webkit-sticky")&&(p="-webkit-sticky"));var m=!1;try{const F=Object.defineProperty({},"passive",{get(){m={passive:!0}}}),Y=()=>{};window.addEventListener("testPassive",Y,F),window.removeEventListener("testPassive",Y,F)}catch(F){}var S=F=>{const{el:Y,onChange:b,unsubs:h,measure:$}=F;if(Y===window){const U=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),W=$(U()),V=()=>{Object.assign(W,$(U())),b()};return window.addEventListener("resize",V,m),h.push(()=>window.removeEventListener("resize",V)),W}else{const U=$(Y.getBoundingClientRect()),W=()=>{Object.assign(U,$(Y.getBoundingClientRect())),b()},V=new ResizeObserver(W);return V.observe(Y),h.push(()=>V.disconnect()),U}},y=F=>{const Y=getComputedStyle(F,null),b=parseInt(Y.getPropertyValue("padding-top"),10),h=parseInt(Y.getPropertyValue("padding-bottom"),10);return{top:b,bottom:h}},g=(F,Y,b)=>{const{bottom:h,offsetBottom:$,offsetTop:U}=b,W=w(F);let V=!1;const H=()=>{V||requestAnimationFrame(()=>{const nt=rt();nt!==Z&&J(nt),V=!1}),V=!0};let q=W===window?window.scrollY:W.scrollTop;const tt=nt=>{const{offsetTop:vt,height:It}=it,{naturalTop:Pt}=Xt,{height:St}=Ct;return nt+vt+It>=Pt+St+At+$},rt=()=>{const{height:nt}=it,{height:vt}=Ct;return vt+U+$<=nt?3:tt(q)?1:2},ft=W!==window&&T(W),it=S({el:W,onChange:H,unsubs:Y,measure:({height:nt,top:vt})=>({height:nt,offsetTop:ft?vt:0})}),bt=P(F),gt=bt===window?{top:0,bottom:0}:y(bt),Xt=S({el:bt,onChange:H,unsubs:Y,measure:({height:nt})=>({height:nt-gt.top-gt.bottom,naturalTop:bt===window?0:L(bt,W)+gt.top+it.offsetTop})}),Ct=S({el:F,onChange:H,unsubs:Y,measure:({height:nt})=>({height:nt})});let At=0,Z=rt();const J=nt=>{const vt=Z;if(Z=nt,vt===2&&(At=-1),nt===3){F.style.position=p,h?F.style.bottom=`${$}px`:F.style.top=`${U}px`;return}const{height:It,offsetTop:Pt}=it,{height:St,naturalTop:Dt}=Xt,{height:Qt}=Ct;if(nt===2)if(F.style.position="relative",At=vt===0?Math.max(0,Pt+q-Dt+U):Math.max(0,Pt+q+It-(Dt+Qt+$)),h){const ue=Math.max(0,St-Qt-At);F.style.bottom=`${ue}px`}else F.style.top=`${At}px`;else F.style.position=p,nt===1?h?F.style.bottom=`${$}px`:F.style.top=`${It-Qt-$}px`:h?F.style.bottom=`${It-Qt-$}px`:F.style.top=`${U}px`};J(Z);const yt=nt=>{if(nt===q)return;const vt=nt-q;if(q=nt,Z===3)return;const{offsetTop:It,height:Pt}=it,{naturalTop:St,height:Dt}=Xt,{height:Qt}=Ct;if(vt>0)if(Z===0){if(nt+It+U>St){const ue=Math.max(0,It+q-St+U);nt+It+Pt<=St+Qt+ue+$?J(2):J(1)}}else Z===2&&tt(nt)&&J(1);else if(Z===1){if(It+nt+Pt<St+Dt+$){const ue=Math.max(0,It+q+Pt-(St+Qt+$));It+nt+U>=St+ue?J(2):J(0)}}else Z===2&&It+nt+U<St+At&&J(0)},_t=W===window?()=>yt(window.scrollY):()=>yt(W.scrollTop);W.addEventListener("scroll",_t,m),W.addEventListener("mousewheel",_t,m),Y.push(()=>W.removeEventListener("scroll",_t),()=>W.removeEventListener("mousewheel",_t))},A=({offsetTop:F=0,offsetBottom:Y=0,bottom:b=!1}={})=>{const[h,$]=(0,x.useState)(null);return(0,x.useEffect)(()=>{if(!h||!p)return;const U=[];return g(h,U,{offsetBottom:Y,offsetTop:F,bottom:b}),()=>{U.forEach(W=>W())}},[h,Y,F,b]),$},E=F=>{const{offsetTop:Y,offsetBottom:b,bottom:h,children:$,className:U,style:W}=F,V=A({offsetTop:Y,offsetBottom:b,bottom:h});return(0,k.jsx)("div",{className:U,style:W,ref:V,children:$})},D=E}}]);
}());